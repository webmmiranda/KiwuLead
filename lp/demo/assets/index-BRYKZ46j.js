var FH=Object.defineProperty;var BH=(t,e,n)=>e in t?FH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fn=(t,e,n)=>BH(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zL={exports:{}},sb={},FL={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=Symbol.for("react.element"),HH=Symbol.for("react.portal"),WH=Symbol.for("react.fragment"),qH=Symbol.for("react.strict_mode"),UH=Symbol.for("react.profiler"),VH=Symbol.for("react.provider"),GH=Symbol.for("react.context"),KH=Symbol.for("react.forward_ref"),YH=Symbol.for("react.suspense"),XH=Symbol.for("react.memo"),JH=Symbol.for("react.lazy"),yC=Symbol.iterator;function ZH(t){return t===null||typeof t!="object"?null:(t=yC&&t[yC]||t["@@iterator"],typeof t=="function"?t:null)}var BL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HL=Object.assign,WL={};function Hh(t,e,n){this.props=t,this.context=e,this.refs=WL,this.updater=n||BL}Hh.prototype.isReactComponent={};Hh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qL(){}qL.prototype=Hh.prototype;function Lk(t,e,n){this.props=t,this.context=e,this.refs=WL,this.updater=n||BL}var Ik=Lk.prototype=new qL;Ik.constructor=Lk;HL(Ik,Hh.prototype);Ik.isPureReactComponent=!0;var bC=Array.isArray,UL=Object.prototype.hasOwnProperty,Dk={current:null},VL={key:!0,ref:!0,__self:!0,__source:!0};function GL(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)UL.call(e,r)&&!VL.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ig,type:t,key:a,ref:s,props:i,_owner:Dk.current}}function QH(t,e){return{$$typeof:ig,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rk(t){return typeof t=="object"&&t!==null&&t.$$typeof===ig}function eW(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wC=/\/+/g;function dw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eW(""+t.key):e.toString(36)}function ax(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ig:case HH:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+dw(s,0):r,bC(i)?(n="",t!=null&&(n=t.replace(wC,"$&/")+"/"),ax(i,e,n,"",function(u){return u})):i!=null&&(Rk(i)&&(i=QH(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(wC,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",bC(t))for(var o=0;o<t.length;o++){a=t[o];var l=r+dw(a,o);s+=ax(a,e,n,l,i)}else if(l=ZH(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=r+dw(a,o++),s+=ax(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function tv(t,e,n){if(t==null)return t;var r=[],i=0;return ax(t,r,"","",function(a){return e.call(n,a,i++)}),r}function tW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ji={current:null},sx={transition:null},nW={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:sx,ReactCurrentOwner:Dk};function KL(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:tv,forEach:function(t,e,n){tv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tv(t,function(){e++}),e},toArray:function(t){return tv(t,function(e){return e})||[]},only:function(t){if(!Rk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qt.Component=Hh;Qt.Fragment=WH;Qt.Profiler=UH;Qt.PureComponent=Lk;Qt.StrictMode=qH;Qt.Suspense=YH;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nW;Qt.act=KL;Qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HL({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=Dk.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)UL.call(e,l)&&!VL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:ig,type:t.type,key:i,ref:a,props:r,_owner:s}};Qt.createContext=function(t){return t={$$typeof:GH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VH,_context:t},t.Consumer=t};Qt.createElement=GL;Qt.createFactory=function(t){var e=GL.bind(null,t);return e.type=t,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(t){return{$$typeof:KH,render:t}};Qt.isValidElement=Rk;Qt.lazy=function(t){return{$$typeof:JH,_payload:{_status:-1,_result:t},_init:tW}};Qt.memo=function(t,e){return{$$typeof:XH,type:t,compare:e===void 0?null:e}};Qt.startTransition=function(t){var e=sx.transition;sx.transition={};try{t()}finally{sx.transition=e}};Qt.unstable_act=KL;Qt.useCallback=function(t,e){return Ji.current.useCallback(t,e)};Qt.useContext=function(t){return Ji.current.useContext(t)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(t){return Ji.current.useDeferredValue(t)};Qt.useEffect=function(t,e){return Ji.current.useEffect(t,e)};Qt.useId=function(){return Ji.current.useId()};Qt.useImperativeHandle=function(t,e,n){return Ji.current.useImperativeHandle(t,e,n)};Qt.useInsertionEffect=function(t,e){return Ji.current.useInsertionEffect(t,e)};Qt.useLayoutEffect=function(t,e){return Ji.current.useLayoutEffect(t,e)};Qt.useMemo=function(t,e){return Ji.current.useMemo(t,e)};Qt.useReducer=function(t,e,n){return Ji.current.useReducer(t,e,n)};Qt.useRef=function(t){return Ji.current.useRef(t)};Qt.useState=function(t){return Ji.current.useState(t)};Qt.useSyncExternalStore=function(t,e,n){return Ji.current.useSyncExternalStore(t,e,n)};Qt.useTransition=function(){return Ji.current.useTransition()};Qt.version="18.3.1";FL.exports=Qt;var q=FL.exports;const ue=pn(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rW=q,iW=Symbol.for("react.element"),aW=Symbol.for("react.fragment"),sW=Object.prototype.hasOwnProperty,oW=rW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lW={key:!0,ref:!0,__self:!0,__source:!0};function YL(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)sW.call(e,r)&&!lW.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iW,type:t,key:a,ref:s,props:i,_owner:oW.current}}sb.Fragment=aW;sb.jsx=YL;sb.jsxs=YL;zL.exports=sb;var c=zL.exports,vS={},XL={exports:{}},Ba={},JL={exports:{}},ZL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Q){var fe=H.length;H.push(Q);e:for(;0<fe;){var le=fe-1>>>1,L=H[le];if(0<i(L,Q))H[le]=Q,H[fe]=L,fe=le;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Q=H[0],fe=H.pop();if(fe!==Q){H[0]=fe;e:for(var le=0,L=H.length,F=L>>>1;le<F;){var G=2*(le+1)-1,ee=H[G],ie=G+1,se=H[ie];if(0>i(ee,fe))ie<L&&0>i(se,ee)?(H[le]=se,H[ie]=fe,le=ie):(H[le]=ee,H[G]=fe,le=G);else if(ie<L&&0>i(se,fe))H[le]=se,H[ie]=fe,le=ie;else break e}}return Q}function i(H,Q){var fe=H.sortIndex-Q.sortIndex;return fe!==0?fe:H.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=H)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(u)}}function N(H){if(g=!1,S(H),!m)if(n(l)!==null)m=!0,V(j);else{var Q=n(u);Q!==null&&Z(N,Q.startTime-H)}}function j(H,Q){m=!1,g&&(g=!1,x(P),P=-1),h=!0;var fe=p;try{for(S(Q),f=n(l);f!==null&&(!(f.expirationTime>Q)||H&&!k());){var le=f.callback;if(typeof le=="function"){f.callback=null,p=f.priorityLevel;var L=le(f.expirationTime<=Q);Q=t.unstable_now(),typeof L=="function"?f.callback=L:f===n(l)&&r(l),S(Q)}else r(l);f=n(l)}if(f!==null)var F=!0;else{var G=n(u);G!==null&&Z(N,G.startTime-Q),F=!1}return F}finally{f=null,p=fe,h=!1}}var E=!1,C=null,P=-1,T=5,I=-1;function k(){return!(t.unstable_now()-I<T)}function O(){if(C!==null){var H=t.unstable_now();I=H;var Q=!0;try{Q=C(!0,H)}finally{Q?R():(E=!1,C=null)}}else E=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=O,R=function(){B.postMessage(null)}}else R=function(){y(O,0)};function V(H){C=H,E||(E=!0,R())}function Z(H,Q){P=y(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,V(j))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var fe=p;p=Q;try{return H()}finally{p=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var fe=p;p=H;try{return Q()}finally{p=fe}},t.unstable_scheduleCallback=function(H,Q,fe){var le=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?le+fe:le):fe=le,H){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=fe+L,H={id:d++,callback:Q,priorityLevel:H,startTime:fe,expirationTime:L,sortIndex:-1},fe>le?(H.sortIndex=fe,e(u,H),n(l)===null&&H===n(u)&&(g?(x(P),P=-1):g=!0,Z(N,fe-le))):(H.sortIndex=L,e(l,H),m||h||(m=!0,V(j))),H},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(H){var Q=p;return function(){var fe=p;p=Q;try{return H.apply(this,arguments)}finally{p=fe}}}})(ZL);JL.exports=ZL;var cW=JL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uW=q,Fa=cW;function et(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QL=new Set,Wm={};function Ed(t,e){nh(t,e),nh(t+"Capture",e)}function nh(t,e){for(Wm[t]=e,t=0;t<e.length;t++)QL.add(e[t])}var gl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xS=Object.prototype.hasOwnProperty,dW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SC={},NC={};function fW(t){return xS.call(NC,t)?!0:xS.call(SC,t)?!1:dW.test(t)?NC[t]=!0:(SC[t]=!0,!1)}function hW(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pW(t,e,n,r){if(e===null||typeof e>"u"||hW(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zi(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vi[t]=new Zi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vi[e]=new Zi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vi[t]=new Zi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vi[t]=new Zi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vi[t]=new Zi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vi[t]=new Zi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vi[t]=new Zi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vi[t]=new Zi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vi[t]=new Zi(t,5,!1,t.toLowerCase(),null,!1,!1)});var $k=/[\-:]([a-z])/g;function zk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($k,zk);vi[e]=new Zi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($k,zk);vi[e]=new Zi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($k,zk);vi[e]=new Zi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vi[t]=new Zi(t,1,!1,t.toLowerCase(),null,!1,!1)});vi.xlinkHref=new Zi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vi[t]=new Zi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fk(t,e,n,r){var i=vi.hasOwnProperty(e)?vi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pW(e,n,i,r)&&(n=null),r||i===null?fW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Al=uW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nv=Symbol.for("react.element"),vf=Symbol.for("react.portal"),xf=Symbol.for("react.fragment"),Bk=Symbol.for("react.strict_mode"),yS=Symbol.for("react.profiler"),eI=Symbol.for("react.provider"),tI=Symbol.for("react.context"),Hk=Symbol.for("react.forward_ref"),bS=Symbol.for("react.suspense"),wS=Symbol.for("react.suspense_list"),Wk=Symbol.for("react.memo"),ic=Symbol.for("react.lazy"),nI=Symbol.for("react.offscreen"),jC=Symbol.iterator;function Tp(t){return t===null||typeof t!="object"?null:(t=jC&&t[jC]||t["@@iterator"],typeof t=="function"?t:null)}var nr=Object.assign,fw;function rm(t){if(fw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fw=e&&e[1]||""}return`
`+fw+t}var hw=!1;function pw(t,e){if(!t||hw)return"";hw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{hw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rm(t):""}function mW(t){switch(t.tag){case 5:return rm(t.type);case 16:return rm("Lazy");case 13:return rm("Suspense");case 19:return rm("SuspenseList");case 0:case 2:case 15:return t=pw(t.type,!1),t;case 11:return t=pw(t.type.render,!1),t;case 1:return t=pw(t.type,!0),t;default:return""}}function SS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xf:return"Fragment";case vf:return"Portal";case yS:return"Profiler";case Bk:return"StrictMode";case bS:return"Suspense";case wS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tI:return(t.displayName||"Context")+".Consumer";case eI:return(t._context.displayName||"Context")+".Provider";case Hk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wk:return e=t.displayName||null,e!==null?e:SS(t.type)||"Memo";case ic:e=t._payload,t=t._init;try{return SS(t(e))}catch{}}return null}function gW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return SS(e);case 8:return e===Bk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $c(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vW(t){var e=rI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rv(t){t._valueTracker||(t._valueTracker=vW(t))}function iI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function NS(t,e){var n=e.checked;return nr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$c(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aI(t,e){e=e.checked,e!=null&&Fk(t,"checked",e,!1)}function jS(t,e){aI(t,e);var n=$c(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kS(t,e.type,n):e.hasOwnProperty("defaultValue")&&kS(t,e.type,$c(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kS(t,e,n){(e!=="number"||Tx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var im=Array.isArray;function Rf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$c(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function AS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return nr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(et(92));if(im(n)){if(1<n.length)throw Error(et(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$c(n)}}function sI(t,e){var n=$c(e.value),r=$c(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function EC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function CS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iv,lI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iv=iv||document.createElement("div"),iv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xW=["Webkit","ms","Moz","O"];Object.keys(hm).forEach(function(t){xW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hm[e]=hm[t]})});function cI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hm.hasOwnProperty(t)&&hm[t]?(""+e).trim():e+"px"}function uI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yW=nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ES(t,e){if(e){if(yW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function _S(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OS=null;function qk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var PS=null,$f=null,zf=null;function _C(t){if(t=og(t)){if(typeof PS!="function")throw Error(et(280));var e=t.stateNode;e&&(e=db(e),PS(t.stateNode,t.type,e))}}function dI(t){$f?zf?zf.push(t):zf=[t]:$f=t}function fI(){if($f){var t=$f,e=zf;if(zf=$f=null,_C(t),e)for(t=0;t<e.length;t++)_C(e[t])}}function hI(t,e){return t(e)}function pI(){}var mw=!1;function mI(t,e,n){if(mw)return t(e,n);mw=!0;try{return hI(t,e,n)}finally{mw=!1,($f!==null||zf!==null)&&(pI(),fI())}}function Um(t,e){var n=t.stateNode;if(n===null)return null;var r=db(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(et(231,e,typeof n));return n}var TS=!1;if(gl)try{var Mp={};Object.defineProperty(Mp,"passive",{get:function(){TS=!0}}),window.addEventListener("test",Mp,Mp),window.removeEventListener("test",Mp,Mp)}catch{TS=!1}function bW(t,e,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var pm=!1,Mx=null,Lx=!1,MS=null,wW={onError:function(t){pm=!0,Mx=t}};function SW(t,e,n,r,i,a,s,o,l){pm=!1,Mx=null,bW.apply(wW,arguments)}function NW(t,e,n,r,i,a,s,o,l){if(SW.apply(this,arguments),pm){if(pm){var u=Mx;pm=!1,Mx=null}else throw Error(et(198));Lx||(Lx=!0,MS=u)}}function _d(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function OC(t){if(_d(t)!==t)throw Error(et(188))}function jW(t){var e=t.alternate;if(!e){if(e=_d(t),e===null)throw Error(et(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return OC(i),t;if(a===r)return OC(i),e;a=a.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?t:e}function vI(t){return t=jW(t),t!==null?xI(t):null}function xI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xI(t);if(e!==null)return e;t=t.sibling}return null}var yI=Fa.unstable_scheduleCallback,PC=Fa.unstable_cancelCallback,kW=Fa.unstable_shouldYield,AW=Fa.unstable_requestPaint,yr=Fa.unstable_now,CW=Fa.unstable_getCurrentPriorityLevel,Uk=Fa.unstable_ImmediatePriority,bI=Fa.unstable_UserBlockingPriority,Ix=Fa.unstable_NormalPriority,EW=Fa.unstable_LowPriority,wI=Fa.unstable_IdlePriority,ob=null,mo=null;function _W(t){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(ob,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:TW,OW=Math.log,PW=Math.LN2;function TW(t){return t>>>=0,t===0?32:31-(OW(t)/PW|0)|0}var av=64,sv=4194304;function am(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=am(o):(a&=s,a!==0&&(r=am(a)))}else s=n&~i,s!==0?r=am(s):a!==0&&(r=am(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bs(e),i=1<<n,r|=t[n],e&=~i;return r}function MW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Bs(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=MW(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function LS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SI(){var t=av;return av<<=1,!(av&4194240)&&(av=64),t}function gw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ag(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bs(e),t[e]=n}function IW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Bs(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Vk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Sn=0;function NI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jI,Gk,kI,AI,CI,IS=!1,ov=[],jc=null,kc=null,Ac=null,Vm=new Map,Gm=new Map,dc=[],DW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TC(t,e){switch(t){case"focusin":case"focusout":jc=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Ac=null;break;case"pointerover":case"pointerout":Vm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gm.delete(e.pointerId)}}function Lp(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=og(e),e!==null&&Gk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function RW(t,e,n,r,i){switch(e){case"focusin":return jc=Lp(jc,t,e,n,r,i),!0;case"dragenter":return kc=Lp(kc,t,e,n,r,i),!0;case"mouseover":return Ac=Lp(Ac,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Vm.set(a,Lp(Vm.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Gm.set(a,Lp(Gm.get(a)||null,t,e,n,r,i)),!0}return!1}function EI(t){var e=Lu(t.target);if(e!==null){var n=_d(e);if(n!==null){if(e=n.tag,e===13){if(e=gI(n),e!==null){t.blockedOn=e,CI(t.priority,function(){kI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ox(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=DS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);OS=r,n.target.dispatchEvent(r),OS=null}else return e=og(n),e!==null&&Gk(e),t.blockedOn=n,!1;e.shift()}return!0}function MC(t,e,n){ox(t)&&n.delete(e)}function $W(){IS=!1,jc!==null&&ox(jc)&&(jc=null),kc!==null&&ox(kc)&&(kc=null),Ac!==null&&ox(Ac)&&(Ac=null),Vm.forEach(MC),Gm.forEach(MC)}function Ip(t,e){t.blockedOn===e&&(t.blockedOn=null,IS||(IS=!0,Fa.unstable_scheduleCallback(Fa.unstable_NormalPriority,$W)))}function Km(t){function e(i){return Ip(i,t)}if(0<ov.length){Ip(ov[0],t);for(var n=1;n<ov.length;n++){var r=ov[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jc!==null&&Ip(jc,t),kc!==null&&Ip(kc,t),Ac!==null&&Ip(Ac,t),Vm.forEach(e),Gm.forEach(e),n=0;n<dc.length;n++)r=dc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dc.length&&(n=dc[0],n.blockedOn===null);)EI(n),n.blockedOn===null&&dc.shift()}var Ff=Al.ReactCurrentBatchConfig,Rx=!0;function zW(t,e,n,r){var i=Sn,a=Ff.transition;Ff.transition=null;try{Sn=1,Kk(t,e,n,r)}finally{Sn=i,Ff.transition=a}}function FW(t,e,n,r){var i=Sn,a=Ff.transition;Ff.transition=null;try{Sn=4,Kk(t,e,n,r)}finally{Sn=i,Ff.transition=a}}function Kk(t,e,n,r){if(Rx){var i=DS(t,e,n,r);if(i===null)Aw(t,e,r,$x,n),TC(t,r);else if(RW(i,t,e,n,r))r.stopPropagation();else if(TC(t,r),e&4&&-1<DW.indexOf(t)){for(;i!==null;){var a=og(i);if(a!==null&&jI(a),a=DS(t,e,n,r),a===null&&Aw(t,e,r,$x,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Aw(t,e,r,null,n)}}var $x=null;function DS(t,e,n,r){if($x=null,t=qk(r),t=Lu(t),t!==null)if(e=_d(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $x=t,null}function _I(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CW()){case Uk:return 1;case bI:return 4;case Ix:case EW:return 16;case wI:return 536870912;default:return 16}default:return 16}}var gc=null,Yk=null,lx=null;function OI(){if(lx)return lx;var t,e=Yk,n=e.length,r,i="value"in gc?gc.value:gc.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return lx=i.slice(t,1<r?1-r:void 0)}function cx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lv(){return!0}function LC(){return!1}function Ha(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?lv:LC,this.isPropagationStopped=LC,this}return nr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lv)},persist:function(){},isPersistent:lv}),e}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xk=Ha(Wh),sg=nr({},Wh,{view:0,detail:0}),BW=Ha(sg),vw,xw,Dp,lb=nr({},sg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dp&&(Dp&&t.type==="mousemove"?(vw=t.screenX-Dp.screenX,xw=t.screenY-Dp.screenY):xw=vw=0,Dp=t),vw)},movementY:function(t){return"movementY"in t?t.movementY:xw}}),IC=Ha(lb),HW=nr({},lb,{dataTransfer:0}),WW=Ha(HW),qW=nr({},sg,{relatedTarget:0}),yw=Ha(qW),UW=nr({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),VW=Ha(UW),GW=nr({},Wh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KW=Ha(GW),YW=nr({},Wh,{data:0}),DC=Ha(YW),XW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZW[t])?!!e[t]:!1}function Jk(){return QW}var eq=nr({},sg,{key:function(t){if(t.key){var e=XW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jk,charCode:function(t){return t.type==="keypress"?cx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tq=Ha(eq),nq=nr({},lb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RC=Ha(nq),rq=nr({},sg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jk}),iq=Ha(rq),aq=nr({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),sq=Ha(aq),oq=nr({},lb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lq=Ha(oq),cq=[9,13,27,32],Zk=gl&&"CompositionEvent"in window,mm=null;gl&&"documentMode"in document&&(mm=document.documentMode);var uq=gl&&"TextEvent"in window&&!mm,PI=gl&&(!Zk||mm&&8<mm&&11>=mm),$C=" ",zC=!1;function TI(t,e){switch(t){case"keyup":return cq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yf=!1;function dq(t,e){switch(t){case"compositionend":return MI(e);case"keypress":return e.which!==32?null:(zC=!0,$C);case"textInput":return t=e.data,t===$C&&zC?null:t;default:return null}}function fq(t,e){if(yf)return t==="compositionend"||!Zk&&TI(t,e)?(t=OI(),lx=Yk=gc=null,yf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PI&&e.locale!=="ko"?null:e.data;default:return null}}var hq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hq[t.type]:e==="textarea"}function LI(t,e,n,r){dI(r),e=zx(e,"onChange"),0<e.length&&(n=new Xk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gm=null,Ym=null;function pq(t){UI(t,0)}function cb(t){var e=Sf(t);if(iI(e))return t}function mq(t,e){if(t==="change")return e}var II=!1;if(gl){var bw;if(gl){var ww="oninput"in document;if(!ww){var BC=document.createElement("div");BC.setAttribute("oninput","return;"),ww=typeof BC.oninput=="function"}bw=ww}else bw=!1;II=bw&&(!document.documentMode||9<document.documentMode)}function HC(){gm&&(gm.detachEvent("onpropertychange",DI),Ym=gm=null)}function DI(t){if(t.propertyName==="value"&&cb(Ym)){var e=[];LI(e,Ym,t,qk(t)),mI(pq,e)}}function gq(t,e,n){t==="focusin"?(HC(),gm=e,Ym=n,gm.attachEvent("onpropertychange",DI)):t==="focusout"&&HC()}function vq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cb(Ym)}function xq(t,e){if(t==="click")return cb(e)}function yq(t,e){if(t==="input"||t==="change")return cb(e)}function bq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Us=typeof Object.is=="function"?Object.is:bq;function Xm(t,e){if(Us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xS.call(e,i)||!Us(t[i],e[i]))return!1}return!0}function WC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qC(t,e){var n=WC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=WC(n)}}function RI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?RI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $I(){for(var t=window,e=Tx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tx(t.document)}return e}function Qk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wq(t){var e=$I(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&RI(n.ownerDocument.documentElement,n)){if(r!==null&&Qk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=qC(n,a);var s=qC(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sq=gl&&"documentMode"in document&&11>=document.documentMode,bf=null,RS=null,vm=null,$S=!1;function UC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$S||bf==null||bf!==Tx(r)||(r=bf,"selectionStart"in r&&Qk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vm&&Xm(vm,r)||(vm=r,r=zx(RS,"onSelect"),0<r.length&&(e=new Xk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bf)))}function cv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wf={animationend:cv("Animation","AnimationEnd"),animationiteration:cv("Animation","AnimationIteration"),animationstart:cv("Animation","AnimationStart"),transitionend:cv("Transition","TransitionEnd")},Sw={},zI={};gl&&(zI=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function ub(t){if(Sw[t])return Sw[t];if(!wf[t])return t;var e=wf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zI)return Sw[t]=e[n];return t}var FI=ub("animationend"),BI=ub("animationiteration"),HI=ub("animationstart"),WI=ub("transitionend"),qI=new Map,VC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uc(t,e){qI.set(t,e),Ed(e,[t])}for(var Nw=0;Nw<VC.length;Nw++){var jw=VC[Nw],Nq=jw.toLowerCase(),jq=jw[0].toUpperCase()+jw.slice(1);Uc(Nq,"on"+jq)}Uc(FI,"onAnimationEnd");Uc(BI,"onAnimationIteration");Uc(HI,"onAnimationStart");Uc("dblclick","onDoubleClick");Uc("focusin","onFocus");Uc("focusout","onBlur");Uc(WI,"onTransitionEnd");nh("onMouseEnter",["mouseout","mouseover"]);nh("onMouseLeave",["mouseout","mouseover"]);nh("onPointerEnter",["pointerout","pointerover"]);nh("onPointerLeave",["pointerout","pointerover"]);Ed("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ed("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ed("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ed("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ed("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ed("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kq=new Set("cancel close invalid load scroll toggle".split(" ").concat(sm));function GC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,NW(r,e,void 0,t),t.currentTarget=null}function UI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;GC(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;GC(i,o,u),a=l}}}if(Lx)throw t=MS,Lx=!1,MS=null,t}function Fn(t,e){var n=e[WS];n===void 0&&(n=e[WS]=new Set);var r=t+"__bubble";n.has(r)||(VI(e,t,2,!1),n.add(r))}function kw(t,e,n){var r=0;e&&(r|=4),VI(n,t,r,e)}var uv="_reactListening"+Math.random().toString(36).slice(2);function Jm(t){if(!t[uv]){t[uv]=!0,QL.forEach(function(n){n!=="selectionchange"&&(kq.has(n)||kw(n,!1,t),kw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uv]||(e[uv]=!0,kw("selectionchange",!1,e))}}function VI(t,e,n,r){switch(_I(e)){case 1:var i=zW;break;case 4:i=FW;break;default:i=Kk}n=i.bind(null,e,n,t),i=void 0,!TS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Aw(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Lu(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}mI(function(){var u=a,d=qk(n),f=[];e:{var p=qI.get(t);if(p!==void 0){var h=Xk,m=t;switch(t){case"keypress":if(cx(n)===0)break e;case"keydown":case"keyup":h=tq;break;case"focusin":m="focus",h=yw;break;case"focusout":m="blur",h=yw;break;case"beforeblur":case"afterblur":h=yw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=IC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=WW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iq;break;case FI:case BI:case HI:h=VW;break;case WI:h=sq;break;case"scroll":h=BW;break;case"wheel":h=lq;break;case"copy":case"cut":case"paste":h=KW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=RC}var g=(e&4)!==0,y=!g&&t==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var w=u,S;w!==null;){S=w;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,x!==null&&(N=Um(w,x),N!=null&&g.push(Zm(w,N,S)))),y)break;w=w.return}0<g.length&&(p=new h(p,m,null,n,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==OS&&(m=n.relatedTarget||n.fromElement)&&(Lu(m)||m[vl]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=u,m=m?Lu(m):null,m!==null&&(y=_d(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(g=IC,N="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=RC,N="onPointerLeave",x="onPointerEnter",w="pointer"),y=h==null?p:Sf(h),S=m==null?p:Sf(m),p=new g(N,w+"leave",h,n,d),p.target=y,p.relatedTarget=S,N=null,Lu(d)===u&&(g=new g(x,w+"enter",m,n,d),g.target=S,g.relatedTarget=y,N=g),y=N,h&&m)t:{for(g=h,x=m,w=0,S=g;S;S=ef(S))w++;for(S=0,N=x;N;N=ef(N))S++;for(;0<w-S;)g=ef(g),w--;for(;0<S-w;)x=ef(x),S--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=ef(g),x=ef(x)}g=null}else g=null;h!==null&&KC(f,p,h,g,!1),m!==null&&y!==null&&KC(f,y,m,g,!0)}}e:{if(p=u?Sf(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var j=mq;else if(FC(p))if(II)j=yq;else{j=vq;var E=gq}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=xq);if(j&&(j=j(t,u))){LI(f,j,n,d);break e}E&&E(t,p,u),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&kS(p,"number",p.value)}switch(E=u?Sf(u):window,t){case"focusin":(FC(E)||E.contentEditable==="true")&&(bf=E,RS=u,vm=null);break;case"focusout":vm=RS=bf=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,UC(f,n,d);break;case"selectionchange":if(Sq)break;case"keydown":case"keyup":UC(f,n,d)}var C;if(Zk)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else yf?TI(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(PI&&n.locale!=="ko"&&(yf||P!=="onCompositionStart"?P==="onCompositionEnd"&&yf&&(C=OI()):(gc=d,Yk="value"in gc?gc.value:gc.textContent,yf=!0)),E=zx(u,P),0<E.length&&(P=new DC(P,t,null,n,d),f.push({event:P,listeners:E}),C?P.data=C:(C=MI(n),C!==null&&(P.data=C)))),(C=uq?dq(t,n):fq(t,n))&&(u=zx(u,"onBeforeInput"),0<u.length&&(d=new DC("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}UI(f,e)})}function Zm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zx(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Um(t,n),a!=null&&r.unshift(Zm(t,a,i)),a=Um(t,e),a!=null&&r.push(Zm(t,a,i))),t=t.return}return r}function ef(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KC(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Um(n,a),l!=null&&s.unshift(Zm(n,l,o))):i||(l=Um(n,a),l!=null&&s.push(Zm(n,l,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Aq=/\r\n?/g,Cq=/\u0000|\uFFFD/g;function YC(t){return(typeof t=="string"?t:""+t).replace(Aq,`
`).replace(Cq,"")}function dv(t,e,n){if(e=YC(e),YC(t)!==e&&n)throw Error(et(425))}function Fx(){}var zS=null,FS=null;function BS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HS=typeof setTimeout=="function"?setTimeout:void 0,Eq=typeof clearTimeout=="function"?clearTimeout:void 0,XC=typeof Promise=="function"?Promise:void 0,_q=typeof queueMicrotask=="function"?queueMicrotask:typeof XC<"u"?function(t){return XC.resolve(null).then(t).catch(Oq)}:HS;function Oq(t){setTimeout(function(){throw t})}function Cw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Km(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Km(e)}function Cc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function JC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qh=Math.random().toString(36).slice(2),lo="__reactFiber$"+qh,Qm="__reactProps$"+qh,vl="__reactContainer$"+qh,WS="__reactEvents$"+qh,Pq="__reactListeners$"+qh,Tq="__reactHandles$"+qh;function Lu(t){var e=t[lo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vl]||n[lo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=JC(t);t!==null;){if(n=t[lo])return n;t=JC(t)}return e}t=n,n=t.parentNode}return null}function og(t){return t=t[lo]||t[vl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(et(33))}function db(t){return t[Qm]||null}var qS=[],Nf=-1;function Vc(t){return{current:t}}function Un(t){0>Nf||(t.current=qS[Nf],qS[Nf]=null,Nf--)}function Dn(t,e){Nf++,qS[Nf]=t.current,t.current=e}var zc={},Mi=Vc(zc),fa=Vc(!1),sd=zc;function rh(t,e){var n=t.type.contextTypes;if(!n)return zc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ha(t){return t=t.childContextTypes,t!=null}function Bx(){Un(fa),Un(Mi)}function ZC(t,e,n){if(Mi.current!==zc)throw Error(et(168));Dn(Mi,e),Dn(fa,n)}function GI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(et(108,gW(t)||"Unknown",i));return nr({},n,r)}function Hx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zc,sd=Mi.current,Dn(Mi,t),Dn(fa,fa.current),!0}function QC(t,e,n){var r=t.stateNode;if(!r)throw Error(et(169));n?(t=GI(t,e,sd),r.__reactInternalMemoizedMergedChildContext=t,Un(fa),Un(Mi),Dn(Mi,t)):Un(fa),Dn(fa,n)}var Zo=null,fb=!1,Ew=!1;function KI(t){Zo===null?Zo=[t]:Zo.push(t)}function Mq(t){fb=!0,KI(t)}function Gc(){if(!Ew&&Zo!==null){Ew=!0;var t=0,e=Sn;try{var n=Zo;for(Sn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zo=null,fb=!1}catch(i){throw Zo!==null&&(Zo=Zo.slice(t+1)),yI(Uk,Gc),i}finally{Sn=e,Ew=!1}}return null}var jf=[],kf=0,Wx=null,qx=0,as=[],ss=0,od=null,tl=1,nl="";function Su(t,e){jf[kf++]=qx,jf[kf++]=Wx,Wx=t,qx=e}function YI(t,e,n){as[ss++]=tl,as[ss++]=nl,as[ss++]=od,od=t;var r=tl;t=nl;var i=32-Bs(r)-1;r&=~(1<<i),n+=1;var a=32-Bs(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,tl=1<<32-Bs(e)+i|n<<i|r,nl=a+t}else tl=1<<a|n<<i|r,nl=t}function eA(t){t.return!==null&&(Su(t,1),YI(t,1,0))}function tA(t){for(;t===Wx;)Wx=jf[--kf],jf[kf]=null,qx=jf[--kf],jf[kf]=null;for(;t===od;)od=as[--ss],as[ss]=null,nl=as[--ss],as[ss]=null,tl=as[--ss],as[ss]=null}var Da=null,La=null,Yn=!1,Ds=null;function XI(t,e){var n=us(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Da=t,La=Cc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Da=t,La=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=od!==null?{id:tl,overflow:nl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=us(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Da=t,La=null,!0):!1;default:return!1}}function US(t){return(t.mode&1)!==0&&(t.flags&128)===0}function VS(t){if(Yn){var e=La;if(e){var n=e;if(!eE(t,e)){if(US(t))throw Error(et(418));e=Cc(n.nextSibling);var r=Da;e&&eE(t,e)?XI(r,n):(t.flags=t.flags&-4097|2,Yn=!1,Da=t)}}else{if(US(t))throw Error(et(418));t.flags=t.flags&-4097|2,Yn=!1,Da=t}}}function tE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Da=t}function fv(t){if(t!==Da)return!1;if(!Yn)return tE(t),Yn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!BS(t.type,t.memoizedProps)),e&&(e=La)){if(US(t))throw JI(),Error(et(418));for(;e;)XI(t,e),e=Cc(e.nextSibling)}if(tE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(et(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){La=Cc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}La=null}}else La=Da?Cc(t.stateNode.nextSibling):null;return!0}function JI(){for(var t=La;t;)t=Cc(t.nextSibling)}function ih(){La=Da=null,Yn=!1}function nA(t){Ds===null?Ds=[t]:Ds.push(t)}var Lq=Al.ReactCurrentBatchConfig;function Rp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,t))}return t}function hv(t,e){throw t=Object.prototype.toString.call(e),Error(et(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nE(t){var e=t._init;return e(t._payload)}function ZI(t){function e(x,w){if(t){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Pc(x,w),x.index=0,x.sibling=null,x}function a(x,w,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,w,S,N){return w===null||w.tag!==6?(w=Iw(S,x.mode,N),w.return=x,w):(w=i(w,S),w.return=x,w)}function l(x,w,S,N){var j=S.type;return j===xf?d(x,w,S.props.children,N,S.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ic&&nE(j)===w.type)?(N=i(w,S.props),N.ref=Rp(x,w,S),N.return=x,N):(N=gx(S.type,S.key,S.props,null,x.mode,N),N.ref=Rp(x,w,S),N.return=x,N)}function u(x,w,S,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Dw(S,x.mode,N),w.return=x,w):(w=i(w,S.children||[]),w.return=x,w)}function d(x,w,S,N,j){return w===null||w.tag!==7?(w=Yu(S,x.mode,N,j),w.return=x,w):(w=i(w,S),w.return=x,w)}function f(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Iw(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nv:return S=gx(w.type,w.key,w.props,null,x.mode,S),S.ref=Rp(x,null,w),S.return=x,S;case vf:return w=Dw(w,x.mode,S),w.return=x,w;case ic:var N=w._init;return f(x,N(w._payload),S)}if(im(w)||Tp(w))return w=Yu(w,x.mode,S,null),w.return=x,w;hv(x,w)}return null}function p(x,w,S,N){var j=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:o(x,w,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nv:return S.key===j?l(x,w,S,N):null;case vf:return S.key===j?u(x,w,S,N):null;case ic:return j=S._init,p(x,w,j(S._payload),N)}if(im(S)||Tp(S))return j!==null?null:d(x,w,S,N,null);hv(x,S)}return null}function h(x,w,S,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(S)||null,o(w,x,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case nv:return x=x.get(N.key===null?S:N.key)||null,l(w,x,N,j);case vf:return x=x.get(N.key===null?S:N.key)||null,u(w,x,N,j);case ic:var E=N._init;return h(x,w,S,E(N._payload),j)}if(im(N)||Tp(N))return x=x.get(S)||null,d(w,x,N,j,null);hv(w,N)}return null}function m(x,w,S,N){for(var j=null,E=null,C=w,P=w=0,T=null;C!==null&&P<S.length;P++){C.index>P?(T=C,C=null):T=C.sibling;var I=p(x,C,S[P],N);if(I===null){C===null&&(C=T);break}t&&C&&I.alternate===null&&e(x,C),w=a(I,w,P),E===null?j=I:E.sibling=I,E=I,C=T}if(P===S.length)return n(x,C),Yn&&Su(x,P),j;if(C===null){for(;P<S.length;P++)C=f(x,S[P],N),C!==null&&(w=a(C,w,P),E===null?j=C:E.sibling=C,E=C);return Yn&&Su(x,P),j}for(C=r(x,C);P<S.length;P++)T=h(C,x,P,S[P],N),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?P:T.key),w=a(T,w,P),E===null?j=T:E.sibling=T,E=T);return t&&C.forEach(function(k){return e(x,k)}),Yn&&Su(x,P),j}function g(x,w,S,N){var j=Tp(S);if(typeof j!="function")throw Error(et(150));if(S=j.call(S),S==null)throw Error(et(151));for(var E=j=null,C=w,P=w=0,T=null,I=S.next();C!==null&&!I.done;P++,I=S.next()){C.index>P?(T=C,C=null):T=C.sibling;var k=p(x,C,I.value,N);if(k===null){C===null&&(C=T);break}t&&C&&k.alternate===null&&e(x,C),w=a(k,w,P),E===null?j=k:E.sibling=k,E=k,C=T}if(I.done)return n(x,C),Yn&&Su(x,P),j;if(C===null){for(;!I.done;P++,I=S.next())I=f(x,I.value,N),I!==null&&(w=a(I,w,P),E===null?j=I:E.sibling=I,E=I);return Yn&&Su(x,P),j}for(C=r(x,C);!I.done;P++,I=S.next())I=h(C,x,P,I.value,N),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?P:I.key),w=a(I,w,P),E===null?j=I:E.sibling=I,E=I);return t&&C.forEach(function(O){return e(x,O)}),Yn&&Su(x,P),j}function y(x,w,S,N){if(typeof S=="object"&&S!==null&&S.type===xf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case nv:e:{for(var j=S.key,E=w;E!==null;){if(E.key===j){if(j=S.type,j===xf){if(E.tag===7){n(x,E.sibling),w=i(E,S.props.children),w.return=x,x=w;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ic&&nE(j)===E.type){n(x,E.sibling),w=i(E,S.props),w.ref=Rp(x,E,S),w.return=x,x=w;break e}n(x,E);break}else e(x,E);E=E.sibling}S.type===xf?(w=Yu(S.props.children,x.mode,N,S.key),w.return=x,x=w):(N=gx(S.type,S.key,S.props,null,x.mode,N),N.ref=Rp(x,w,S),N.return=x,x=N)}return s(x);case vf:e:{for(E=S.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(x,w.sibling),w=i(w,S.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Dw(S,x.mode,N),w.return=x,x=w}return s(x);case ic:return E=S._init,y(x,w,E(S._payload),N)}if(im(S))return m(x,w,S,N);if(Tp(S))return g(x,w,S,N);hv(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,S),w.return=x,x=w):(n(x,w),w=Iw(S,x.mode,N),w.return=x,x=w),s(x)):n(x,w)}return y}var ah=ZI(!0),QI=ZI(!1),Ux=Vc(null),Vx=null,Af=null,rA=null;function iA(){rA=Af=Vx=null}function aA(t){var e=Ux.current;Un(Ux),t._currentValue=e}function GS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bf(t,e){Vx=t,rA=Af=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ua=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(rA!==t)if(t={context:t,memoizedValue:e,next:null},Af===null){if(Vx===null)throw Error(et(308));Af=t,Vx.dependencies={lanes:0,firstContext:t}}else Af=Af.next=t;return e}var Iu=null;function sA(t){Iu===null?Iu=[t]:Iu.push(t)}function e8(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sA(e)):(n.next=i.next,i.next=n),e.interleaved=n,xl(t,r)}function xl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ac=!1;function oA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t8(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ul(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ec(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xl(t,n)}return i=r.interleaved,i===null?(e.next=e,sA(r)):(e.next=i.next,i.next=e),r.interleaved=e,xl(t,n)}function ux(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vk(t,n)}}function rE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gx(t,e,n,r){var i=t.updateQueue;ac=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;s=0,d=u=l=null,o=a;do{var p=o.lane,h=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,g=o;switch(p=e,h=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(h,f,p);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,f,p):m,p==null)break e;f=nr({},f,p);break e;case 2:ac=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else h={eventTime:h,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=h,l=f):d=d.next=h,s|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);cd|=s,t.lanes=s,t.memoizedState=f}}function iE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var lg={},go=Vc(lg),e0=Vc(lg),t0=Vc(lg);function Du(t){if(t===lg)throw Error(et(174));return t}function lA(t,e){switch(Dn(t0,e),Dn(e0,t),Dn(go,lg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:CS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=CS(e,t)}Un(go),Dn(go,e)}function sh(){Un(go),Un(e0),Un(t0)}function n8(t){Du(t0.current);var e=Du(go.current),n=CS(e,t.type);e!==n&&(Dn(e0,t),Dn(go,n))}function cA(t){e0.current===t&&(Un(go),Un(e0))}var Qn=Vc(0);function Kx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _w=[];function uA(){for(var t=0;t<_w.length;t++)_w[t]._workInProgressVersionPrimary=null;_w.length=0}var dx=Al.ReactCurrentDispatcher,Ow=Al.ReactCurrentBatchConfig,ld=0,tr=null,Br=null,Kr=null,Yx=!1,xm=!1,n0=0,Iq=0;function wi(){throw Error(et(321))}function dA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Us(t[n],e[n]))return!1;return!0}function fA(t,e,n,r,i,a){if(ld=a,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dx.current=t===null||t.memoizedState===null?zq:Fq,t=n(r,i),xm){a=0;do{if(xm=!1,n0=0,25<=a)throw Error(et(301));a+=1,Kr=Br=null,e.updateQueue=null,dx.current=Bq,t=n(r,i)}while(xm)}if(dx.current=Xx,e=Br!==null&&Br.next!==null,ld=0,Kr=Br=tr=null,Yx=!1,e)throw Error(et(300));return t}function hA(){var t=n0!==0;return n0=0,t}function io(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?tr.memoizedState=Kr=t:Kr=Kr.next=t,Kr}function vs(){if(Br===null){var t=tr.alternate;t=t!==null?t.memoizedState:null}else t=Br.next;var e=Kr===null?tr.memoizedState:Kr.next;if(e!==null)Kr=e,Br=t;else{if(t===null)throw Error(et(310));Br=t,t={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},Kr===null?tr.memoizedState=Kr=t:Kr=Kr.next=t}return Kr}function r0(t,e){return typeof e=="function"?e(t):e}function Pw(t){var e=vs(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var r=Br,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var d=u.lane;if((ld&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,s=r):l=l.next=f,tr.lanes|=d,cd|=d}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Us(r,e.memoizedState)||(ua=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,tr.lanes|=a,cd|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tw(t){var e=vs(),n=e.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Us(a,e.memoizedState)||(ua=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function r8(){}function i8(t,e){var n=tr,r=vs(),i=e(),a=!Us(r.memoizedState,i);if(a&&(r.memoizedState=i,ua=!0),r=r.queue,pA(o8.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Kr!==null&&Kr.memoizedState.tag&1){if(n.flags|=2048,i0(9,s8.bind(null,n,r,i,e),void 0,null),Qr===null)throw Error(et(349));ld&30||a8(n,e,i)}return i}function a8(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function s8(t,e,n,r){e.value=n,e.getSnapshot=r,l8(e)&&c8(t)}function o8(t,e,n){return n(function(){l8(e)&&c8(t)})}function l8(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Us(t,n)}catch{return!0}}function c8(t){var e=xl(t,1);e!==null&&Hs(e,t,1,-1)}function aE(t){var e=io();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r0,lastRenderedState:t},e.queue=t,t=t.dispatch=$q.bind(null,tr,t),[e.memoizedState,t]}function i0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null,stores:null},tr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function u8(){return vs().memoizedState}function fx(t,e,n,r){var i=io();tr.flags|=t,i.memoizedState=i0(1|e,n,void 0,r===void 0?null:r)}function hb(t,e,n,r){var i=vs();r=r===void 0?null:r;var a=void 0;if(Br!==null){var s=Br.memoizedState;if(a=s.destroy,r!==null&&dA(r,s.deps)){i.memoizedState=i0(e,n,a,r);return}}tr.flags|=t,i.memoizedState=i0(1|e,n,a,r)}function sE(t,e){return fx(8390656,8,t,e)}function pA(t,e){return hb(2048,8,t,e)}function d8(t,e){return hb(4,2,t,e)}function f8(t,e){return hb(4,4,t,e)}function h8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p8(t,e,n){return n=n!=null?n.concat([t]):null,hb(4,4,h8.bind(null,e,t),n)}function mA(){}function m8(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g8(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v8(t,e,n){return ld&21?(Us(n,e)||(n=SI(),tr.lanes|=n,cd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ua=!0),t.memoizedState=n)}function Dq(t,e){var n=Sn;Sn=n!==0&&4>n?n:4,t(!0);var r=Ow.transition;Ow.transition={};try{t(!1),e()}finally{Sn=n,Ow.transition=r}}function x8(){return vs().memoizedState}function Rq(t,e,n){var r=Oc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y8(t))b8(e,n);else if(n=e8(t,e,n,r),n!==null){var i=Ki();Hs(n,t,r,i),w8(n,e,r)}}function $q(t,e,n){var r=Oc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y8(t))b8(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Us(o,s)){var l=e.interleaved;l===null?(i.next=i,sA(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=e8(t,e,i,r),n!==null&&(i=Ki(),Hs(n,t,r,i),w8(n,e,r))}}function y8(t){var e=t.alternate;return t===tr||e!==null&&e===tr}function b8(t,e){xm=Yx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w8(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vk(t,n)}}var Xx={readContext:gs,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},zq={readContext:gs,useCallback:function(t,e){return io().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:sE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fx(4194308,4,h8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fx(4194308,4,t,e)},useInsertionEffect:function(t,e){return fx(4,2,t,e)},useMemo:function(t,e){var n=io();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=io();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rq.bind(null,tr,t),[r.memoizedState,t]},useRef:function(t){var e=io();return t={current:t},e.memoizedState=t},useState:aE,useDebugValue:mA,useDeferredValue:function(t){return io().memoizedState=t},useTransition:function(){var t=aE(!1),e=t[0];return t=Dq.bind(null,t[1]),io().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tr,i=io();if(Yn){if(n===void 0)throw Error(et(407));n=n()}else{if(n=e(),Qr===null)throw Error(et(349));ld&30||a8(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,sE(o8.bind(null,r,a,t),[t]),r.flags|=2048,i0(9,s8.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=io(),e=Qr.identifierPrefix;if(Yn){var n=nl,r=tl;n=(r&~(1<<32-Bs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=n0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Iq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fq={readContext:gs,useCallback:m8,useContext:gs,useEffect:pA,useImperativeHandle:p8,useInsertionEffect:d8,useLayoutEffect:f8,useMemo:g8,useReducer:Pw,useRef:u8,useState:function(){return Pw(r0)},useDebugValue:mA,useDeferredValue:function(t){var e=vs();return v8(e,Br.memoizedState,t)},useTransition:function(){var t=Pw(r0)[0],e=vs().memoizedState;return[t,e]},useMutableSource:r8,useSyncExternalStore:i8,useId:x8,unstable_isNewReconciler:!1},Bq={readContext:gs,useCallback:m8,useContext:gs,useEffect:pA,useImperativeHandle:p8,useInsertionEffect:d8,useLayoutEffect:f8,useMemo:g8,useReducer:Tw,useRef:u8,useState:function(){return Tw(r0)},useDebugValue:mA,useDeferredValue:function(t){var e=vs();return Br===null?e.memoizedState=t:v8(e,Br.memoizedState,t)},useTransition:function(){var t=Tw(r0)[0],e=vs().memoizedState;return[t,e]},useMutableSource:r8,useSyncExternalStore:i8,useId:x8,unstable_isNewReconciler:!1};function Ms(t,e){if(t&&t.defaultProps){e=nr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function KS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pb={isMounted:function(t){return(t=t._reactInternals)?_d(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ki(),i=Oc(t),a=ul(r,i);a.payload=e,n!=null&&(a.callback=n),e=Ec(t,a,i),e!==null&&(Hs(e,t,i,r),ux(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ki(),i=Oc(t),a=ul(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ec(t,a,i),e!==null&&(Hs(e,t,i,r),ux(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ki(),r=Oc(t),i=ul(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ec(t,i,r),e!==null&&(Hs(e,t,r,n),ux(e,t,r))}};function oE(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Xm(n,r)||!Xm(i,a):!0}function S8(t,e,n){var r=!1,i=zc,a=e.contextType;return typeof a=="object"&&a!==null?a=gs(a):(i=ha(e)?sd:Mi.current,r=e.contextTypes,a=(r=r!=null)?rh(t,i):zc),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pb,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function lE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pb.enqueueReplaceState(e,e.state,null)}function YS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},oA(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=gs(a):(a=ha(e)?sd:Mi.current,i.context=rh(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(KS(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pb.enqueueReplaceState(i,i.state,null),Gx(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oh(t,e){try{var n="",r=e;do n+=mW(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Mw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function XS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hq=typeof WeakMap=="function"?WeakMap:Map;function N8(t,e,n){n=ul(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zx||(Zx=!0,sN=r),XS(t,e)},n}function j8(t,e,n){n=ul(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){XS(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){XS(t,e),typeof r!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function cE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Hq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nU.bind(null,t,e,n),e.then(t,t))}function uE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ul(-1,1),e.tag=2,Ec(n,e,1))),n.lanes|=1),t)}var Wq=Al.ReactCurrentOwner,ua=!1;function Hi(t,e,n,r){e.child=t===null?QI(e,null,n,r):ah(e,t.child,n,r)}function fE(t,e,n,r,i){n=n.render;var a=e.ref;return Bf(e,i),r=fA(t,e,n,r,a,i),n=hA(),t!==null&&!ua?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yl(t,e,i)):(Yn&&n&&eA(e),e.flags|=1,Hi(t,e,r,i),e.child)}function hE(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!NA(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,k8(t,e,a,r,i)):(t=gx(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xm,n(s,r)&&t.ref===e.ref)return yl(t,e,i)}return e.flags|=1,t=Pc(a,r),t.ref=e.ref,t.return=e,e.child=t}function k8(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Xm(a,r)&&t.ref===e.ref)if(ua=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ua=!0);else return e.lanes=t.lanes,yl(t,e,i)}return JS(t,e,n,r,i)}function A8(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Ef,Oa),Oa|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dn(Ef,Oa),Oa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Dn(Ef,Oa),Oa|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Dn(Ef,Oa),Oa|=r;return Hi(t,e,i,n),e.child}function C8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function JS(t,e,n,r,i){var a=ha(n)?sd:Mi.current;return a=rh(e,a),Bf(e,i),n=fA(t,e,n,r,a,i),r=hA(),t!==null&&!ua?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yl(t,e,i)):(Yn&&r&&eA(e),e.flags|=1,Hi(t,e,n,i),e.child)}function pE(t,e,n,r,i){if(ha(n)){var a=!0;Hx(e)}else a=!1;if(Bf(e,i),e.stateNode===null)hx(t,e),S8(e,n,r),YS(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=ha(n)?sd:Mi.current,u=rh(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&lE(e,s,r,u),ac=!1;var p=e.memoizedState;s.state=p,Gx(e,r,s,i),l=e.memoizedState,o!==r||p!==l||fa.current||ac?(typeof d=="function"&&(KS(e,n,d,r),l=e.memoizedState),(o=ac||oE(e,n,o,r,p,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,t8(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ms(e.type,o),s.props=u,f=e.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=ha(n)?sd:Mi.current,l=rh(e,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||p!==l)&&lE(e,s,r,l),ac=!1,p=e.memoizedState,s.state=p,Gx(e,r,s,i);var m=e.memoizedState;o!==f||p!==m||fa.current||ac?(typeof h=="function"&&(KS(e,n,h,r),m=e.memoizedState),(u=ac||oE(e,n,u,r,p,m,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ZS(t,e,n,r,a,i)}function ZS(t,e,n,r,i,a){C8(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&QC(e,n,!1),yl(t,e,a);r=e.stateNode,Wq.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ah(e,t.child,null,a),e.child=ah(e,null,o,a)):Hi(t,e,o,a),e.memoizedState=r.state,i&&QC(e,n,!0),e.child}function E8(t){var e=t.stateNode;e.pendingContext?ZC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZC(t,e.context,!1),lA(t,e.containerInfo)}function mE(t,e,n,r,i){return ih(),nA(i),e.flags|=256,Hi(t,e,n,r),e.child}var QS={dehydrated:null,treeContext:null,retryLane:0};function eN(t){return{baseLanes:t,cachePool:null,transitions:null}}function _8(t,e,n){var r=e.pendingProps,i=Qn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Dn(Qn,i&1),t===null)return VS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=vb(s,r,0,null),t=Yu(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=eN(n),e.memoizedState=QS,t):gA(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return qq(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Pc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Pc(o,a):(a=Yu(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?eN(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=QS,r}return a=t.child,t=a.sibling,r=Pc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gA(t,e){return e=vb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pv(t,e,n,r){return r!==null&&nA(r),ah(e,t.child,null,n),t=gA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qq(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=Mw(Error(et(422))),pv(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=vb({mode:"visible",children:r.children},i,0,null),a=Yu(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&ah(e,t.child,null,s),e.child.memoizedState=eN(s),e.memoizedState=QS,a);if(!(e.mode&1))return pv(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(et(419)),r=Mw(a,r,void 0),pv(t,e,s,r)}if(o=(s&t.childLanes)!==0,ua||o){if(r=Qr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,xl(t,i),Hs(r,t,i,-1))}return SA(),r=Mw(Error(et(421))),pv(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rU.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,La=Cc(i.nextSibling),Da=e,Yn=!0,Ds=null,t!==null&&(as[ss++]=tl,as[ss++]=nl,as[ss++]=od,tl=t.id,nl=t.overflow,od=e),e=gA(e,r.children),e.flags|=4096,e)}function gE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),GS(t.return,e,n)}function Lw(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function O8(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Hi(t,e,r.children,n),r=Qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gE(t,n,e);else if(t.tag===19)gE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dn(Qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kx(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lw(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kx(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lw(e,!0,n,null,a);break;case"together":Lw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(et(153));if(e.child!==null){for(t=e.child,n=Pc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Uq(t,e,n){switch(e.tag){case 3:E8(e),ih();break;case 5:n8(e);break;case 1:ha(e.type)&&Hx(e);break;case 4:lA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Dn(Ux,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dn(Qn,Qn.current&1),e.flags|=128,null):n&e.child.childLanes?_8(t,e,n):(Dn(Qn,Qn.current&1),t=yl(t,e,n),t!==null?t.sibling:null);Dn(Qn,Qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return O8(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dn(Qn,Qn.current),r)break;return null;case 22:case 23:return e.lanes=0,A8(t,e,n)}return yl(t,e,n)}var P8,tN,T8,M8;P8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tN=function(){};T8=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Du(go.current);var a=null;switch(n){case"input":i=NS(t,i),r=NS(t,r),a=[];break;case"select":i=nr({},i,{value:void 0}),r=nr({},r,{value:void 0}),a=[];break;case"textarea":i=AS(t,i),r=AS(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fx)}ES(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wm.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wm.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fn("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};M8=function(t,e,n,r){n!==r&&(e.flags|=4)};function $p(t,e){if(!Yn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Si(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vq(t,e,n){var r=e.pendingProps;switch(tA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(e),null;case 1:return ha(e.type)&&Bx(),Si(e),null;case 3:return r=e.stateNode,sh(),Un(fa),Un(Mi),uA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ds!==null&&(cN(Ds),Ds=null))),tN(t,e),Si(e),null;case 5:cA(e);var i=Du(t0.current);if(n=e.type,t!==null&&e.stateNode!=null)T8(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(et(166));return Si(e),null}if(t=Du(go.current),fv(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[lo]=e,r[Qm]=a,t=(e.mode&1)!==0,n){case"dialog":Fn("cancel",r),Fn("close",r);break;case"iframe":case"object":case"embed":Fn("load",r);break;case"video":case"audio":for(i=0;i<sm.length;i++)Fn(sm[i],r);break;case"source":Fn("error",r);break;case"img":case"image":case"link":Fn("error",r),Fn("load",r);break;case"details":Fn("toggle",r);break;case"input":kC(r,a),Fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fn("invalid",r);break;case"textarea":CC(r,a),Fn("invalid",r)}ES(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&dv(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&dv(r.textContent,o,t),i=["children",""+o]):Wm.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Fn("scroll",r)}switch(n){case"input":rv(r),AC(r,a,!0);break;case"textarea":rv(r),EC(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Fx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[lo]=e,t[Qm]=r,P8(t,e,!1,!1),e.stateNode=t;e:{switch(s=_S(n,r),n){case"dialog":Fn("cancel",t),Fn("close",t),i=r;break;case"iframe":case"object":case"embed":Fn("load",t),i=r;break;case"video":case"audio":for(i=0;i<sm.length;i++)Fn(sm[i],t);i=r;break;case"source":Fn("error",t),i=r;break;case"img":case"image":case"link":Fn("error",t),Fn("load",t),i=r;break;case"details":Fn("toggle",t),i=r;break;case"input":kC(t,r),i=NS(t,r),Fn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nr({},r,{value:void 0}),Fn("invalid",t);break;case"textarea":CC(t,r),i=AS(t,r),Fn("invalid",t);break;default:i=r}ES(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?uI(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lI(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qm(t,l):typeof l=="number"&&qm(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wm.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Fn("scroll",t):l!=null&&Fk(t,a,l,s))}switch(n){case"input":rv(t),AC(t,r,!1);break;case"textarea":rv(t),EC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$c(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Rf(t,!!r.multiple,a,!1):r.defaultValue!=null&&Rf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Si(e),null;case 6:if(t&&e.stateNode!=null)M8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(et(166));if(n=Du(t0.current),Du(go.current),fv(e)){if(r=e.stateNode,n=e.memoizedProps,r[lo]=e,(a=r.nodeValue!==n)&&(t=Da,t!==null))switch(t.tag){case 3:dv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dv(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lo]=e,e.stateNode=r}return Si(e),null;case 13:if(Un(Qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yn&&La!==null&&e.mode&1&&!(e.flags&128))JI(),ih(),e.flags|=98560,a=!1;else if(a=fv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(et(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(et(317));a[lo]=e}else ih(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Si(e),a=!1}else Ds!==null&&(cN(Ds),Ds=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qn.current&1?Hr===0&&(Hr=3):SA())),e.updateQueue!==null&&(e.flags|=4),Si(e),null);case 4:return sh(),tN(t,e),t===null&&Jm(e.stateNode.containerInfo),Si(e),null;case 10:return aA(e.type._context),Si(e),null;case 17:return ha(e.type)&&Bx(),Si(e),null;case 19:if(Un(Qn),a=e.memoizedState,a===null)return Si(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)$p(a,!1);else{if(Hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Kx(t),s!==null){for(e.flags|=128,$p(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dn(Qn,Qn.current&1|2),e.child}t=t.sibling}a.tail!==null&&yr()>lh&&(e.flags|=128,r=!0,$p(a,!1),e.lanes=4194304)}else{if(!r)if(t=Kx(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$p(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Yn)return Si(e),null}else 2*yr()-a.renderingStartTime>lh&&n!==1073741824&&(e.flags|=128,r=!0,$p(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yr(),e.sibling=null,n=Qn.current,Dn(Qn,r?n&1|2:n&1),e):(Si(e),null);case 22:case 23:return wA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oa&1073741824&&(Si(e),e.subtreeFlags&6&&(e.flags|=8192)):Si(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function Gq(t,e){switch(tA(e),e.tag){case 1:return ha(e.type)&&Bx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sh(),Un(fa),Un(Mi),uA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cA(e),null;case 13:if(Un(Qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(et(340));ih()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Un(Qn),null;case 4:return sh(),null;case 10:return aA(e.type._context),null;case 22:case 23:return wA(),null;case 24:return null;default:return null}}var mv=!1,_i=!1,Kq=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Cf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dr(t,e,r)}else n.current=null}function nN(t,e,n){try{n()}catch(r){dr(t,e,r)}}var vE=!1;function Yq(t,e){if(zS=Rx,t=$I(),Qk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===t)break t;if(p===n&&++u===i&&(o=s),p===a&&++d===r&&(l=s),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(FS={focusedElem:t,selectionRange:n},Rx=!1,mt=e;mt!==null;)if(e=mt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mt=t;else for(;mt!==null;){e=mt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ms(e.type,g),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(N){dr(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,mt=t;break}mt=e.return}return m=vE,vE=!1,m}function ym(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&nN(e,n,a)}i=i.next}while(i!==r)}}function mb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L8(t){var e=t.alternate;e!==null&&(t.alternate=null,L8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lo],delete e[Qm],delete e[WS],delete e[Pq],delete e[Tq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function I8(t){return t.tag===5||t.tag===3||t.tag===4}function xE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fx));else if(r!==4&&(t=t.child,t!==null))for(iN(t,e,n),t=t.sibling;t!==null;)iN(t,e,n),t=t.sibling}function aN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(aN(t,e,n),t=t.sibling;t!==null;)aN(t,e,n),t=t.sibling}var ui=null,Ls=!1;function Jl(t,e,n){for(n=n.child;n!==null;)D8(t,e,n),n=n.sibling}function D8(t,e,n){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(ob,n)}catch{}switch(n.tag){case 5:_i||Cf(n,e);case 6:var r=ui,i=Ls;ui=null,Jl(t,e,n),ui=r,Ls=i,ui!==null&&(Ls?(t=ui,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ui.removeChild(n.stateNode));break;case 18:ui!==null&&(Ls?(t=ui,n=n.stateNode,t.nodeType===8?Cw(t.parentNode,n):t.nodeType===1&&Cw(t,n),Km(t)):Cw(ui,n.stateNode));break;case 4:r=ui,i=Ls,ui=n.stateNode.containerInfo,Ls=!0,Jl(t,e,n),ui=r,Ls=i;break;case 0:case 11:case 14:case 15:if(!_i&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&nN(n,e,s),i=i.next}while(i!==r)}Jl(t,e,n);break;case 1:if(!_i&&(Cf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){dr(n,e,o)}Jl(t,e,n);break;case 21:Jl(t,e,n);break;case 22:n.mode&1?(_i=(r=_i)||n.memoizedState!==null,Jl(t,e,n),_i=r):Jl(t,e,n);break;default:Jl(t,e,n)}}function yE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Kq),e.forEach(function(r){var i=iU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _s(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:ui=o.stateNode,Ls=!1;break e;case 3:ui=o.stateNode.containerInfo,Ls=!0;break e;case 4:ui=o.stateNode.containerInfo,Ls=!0;break e}o=o.return}if(ui===null)throw Error(et(160));D8(a,s,i),ui=null,Ls=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){dr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)R8(e,t),e=e.sibling}function R8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_s(e,t),to(t),r&4){try{ym(3,t,t.return),mb(3,t)}catch(g){dr(t,t.return,g)}try{ym(5,t,t.return)}catch(g){dr(t,t.return,g)}}break;case 1:_s(e,t),to(t),r&512&&n!==null&&Cf(n,n.return);break;case 5:if(_s(e,t),to(t),r&512&&n!==null&&Cf(n,n.return),t.flags&32){var i=t.stateNode;try{qm(i,"")}catch(g){dr(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&aI(i,a),_S(o,s);var u=_S(o,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?uI(i,f):d==="dangerouslySetInnerHTML"?lI(i,f):d==="children"?qm(i,f):Fk(i,d,f,u)}switch(o){case"input":jS(i,a);break;case"textarea":sI(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Rf(i,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?Rf(i,!!a.multiple,a.defaultValue,!0):Rf(i,!!a.multiple,a.multiple?[]:"",!1))}i[Qm]=a}catch(g){dr(t,t.return,g)}}break;case 6:if(_s(e,t),to(t),r&4){if(t.stateNode===null)throw Error(et(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){dr(t,t.return,g)}}break;case 3:if(_s(e,t),to(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Km(e.containerInfo)}catch(g){dr(t,t.return,g)}break;case 4:_s(e,t),to(t);break;case 13:_s(e,t),to(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(yA=yr())),r&4&&yE(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(_i=(u=_i)||d,_s(e,t),_i=u):_s(e,t),to(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(mt=t,d=t.child;d!==null;){for(f=mt=d;mt!==null;){switch(p=mt,h=p.child,p.tag){case 0:case 11:case 14:case 15:ym(4,p,p.return);break;case 1:Cf(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){dr(r,n,g)}}break;case 5:Cf(p,p.return);break;case 22:if(p.memoizedState!==null){wE(f);continue}}h!==null?(h.return=p,mt=h):wE(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=cI("display",s))}catch(g){dr(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){dr(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_s(e,t),to(t),r&4&&yE(t);break;case 21:break;default:_s(e,t),to(t)}}function to(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(I8(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qm(i,""),r.flags&=-33);var a=xE(t);aN(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=xE(t);iN(t,o,s);break;default:throw Error(et(161))}}catch(l){dr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xq(t,e,n){mt=t,$8(t)}function $8(t,e,n){for(var r=(t.mode&1)!==0;mt!==null;){var i=mt,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||mv;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||_i;o=mv;var u=_i;if(mv=s,(_i=l)&&!u)for(mt=i;mt!==null;)s=mt,l=s.child,s.tag===22&&s.memoizedState!==null?SE(i):l!==null?(l.return=s,mt=l):SE(i);for(;a!==null;)mt=a,$8(a),a=a.sibling;mt=i,mv=o,_i=u}bE(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,mt=a):bE(t)}}function bE(t){for(;mt!==null;){var e=mt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_i||mb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_i)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&iE(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iE(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Km(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}_i||e.flags&512&&rN(e)}catch(p){dr(e,e.return,p)}}if(e===t){mt=null;break}if(n=e.sibling,n!==null){n.return=e.return,mt=n;break}mt=e.return}}function wE(t){for(;mt!==null;){var e=mt;if(e===t){mt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,mt=n;break}mt=e.return}}function SE(t){for(;mt!==null;){var e=mt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mb(4,e)}catch(l){dr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dr(e,i,l)}}var a=e.return;try{rN(e)}catch(l){dr(e,a,l)}break;case 5:var s=e.return;try{rN(e)}catch(l){dr(e,s,l)}}}catch(l){dr(e,e.return,l)}if(e===t){mt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,mt=o;break}mt=e.return}}var Jq=Math.ceil,Jx=Al.ReactCurrentDispatcher,vA=Al.ReactCurrentOwner,fs=Al.ReactCurrentBatchConfig,ln=0,Qr=null,Cr=null,mi=0,Oa=0,Ef=Vc(0),Hr=0,a0=null,cd=0,gb=0,xA=0,bm=null,oa=null,yA=0,lh=1/0,Yo=null,Zx=!1,sN=null,_c=null,gv=!1,vc=null,Qx=0,wm=0,oN=null,px=-1,mx=0;function Ki(){return ln&6?yr():px!==-1?px:px=yr()}function Oc(t){return t.mode&1?ln&2&&mi!==0?mi&-mi:Lq.transition!==null?(mx===0&&(mx=SI()),mx):(t=Sn,t!==0||(t=window.event,t=t===void 0?16:_I(t.type)),t):1}function Hs(t,e,n,r){if(50<wm)throw wm=0,oN=null,Error(et(185));ag(t,n,r),(!(ln&2)||t!==Qr)&&(t===Qr&&(!(ln&2)&&(gb|=n),Hr===4&&fc(t,mi)),pa(t,r),n===1&&ln===0&&!(e.mode&1)&&(lh=yr()+500,fb&&Gc()))}function pa(t,e){var n=t.callbackNode;LW(t,e);var r=Dx(t,t===Qr?mi:0);if(r===0)n!==null&&PC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&PC(n),e===1)t.tag===0?Mq(NE.bind(null,t)):KI(NE.bind(null,t)),_q(function(){!(ln&6)&&Gc()}),n=null;else{switch(NI(r)){case 1:n=Uk;break;case 4:n=bI;break;case 16:n=Ix;break;case 536870912:n=wI;break;default:n=Ix}n=V8(n,z8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z8(t,e){if(px=-1,mx=0,ln&6)throw Error(et(327));var n=t.callbackNode;if(Hf()&&t.callbackNode!==n)return null;var r=Dx(t,t===Qr?mi:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ey(t,r);else{e=r;var i=ln;ln|=2;var a=B8();(Qr!==t||mi!==e)&&(Yo=null,lh=yr()+500,Ku(t,e));do try{eU();break}catch(o){F8(t,o)}while(!0);iA(),Jx.current=a,ln=i,Cr!==null?e=0:(Qr=null,mi=0,e=Hr)}if(e!==0){if(e===2&&(i=LS(t),i!==0&&(r=i,e=lN(t,i))),e===1)throw n=a0,Ku(t,0),fc(t,r),pa(t,yr()),n;if(e===6)fc(t,r);else{if(i=t.current.alternate,!(r&30)&&!Zq(i)&&(e=ey(t,r),e===2&&(a=LS(t),a!==0&&(r=a,e=lN(t,a))),e===1))throw n=a0,Ku(t,0),fc(t,r),pa(t,yr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(et(345));case 2:Nu(t,oa,Yo);break;case 3:if(fc(t,r),(r&130023424)===r&&(e=yA+500-yr(),10<e)){if(Dx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ki(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=HS(Nu.bind(null,t,oa,Yo),e);break}Nu(t,oa,Yo);break;case 4:if(fc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Bs(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=yr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jq(r/1960))-r,10<r){t.timeoutHandle=HS(Nu.bind(null,t,oa,Yo),r);break}Nu(t,oa,Yo);break;case 5:Nu(t,oa,Yo);break;default:throw Error(et(329))}}}return pa(t,yr()),t.callbackNode===n?z8.bind(null,t):null}function lN(t,e){var n=bm;return t.current.memoizedState.isDehydrated&&(Ku(t,e).flags|=256),t=ey(t,e),t!==2&&(e=oa,oa=n,e!==null&&cN(e)),t}function cN(t){oa===null?oa=t:oa.push.apply(oa,t)}function Zq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Us(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fc(t,e){for(e&=~xA,e&=~gb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bs(e),r=1<<n;t[n]=-1,e&=~r}}function NE(t){if(ln&6)throw Error(et(327));Hf();var e=Dx(t,0);if(!(e&1))return pa(t,yr()),null;var n=ey(t,e);if(t.tag!==0&&n===2){var r=LS(t);r!==0&&(e=r,n=lN(t,r))}if(n===1)throw n=a0,Ku(t,0),fc(t,e),pa(t,yr()),n;if(n===6)throw Error(et(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nu(t,oa,Yo),pa(t,yr()),null}function bA(t,e){var n=ln;ln|=1;try{return t(e)}finally{ln=n,ln===0&&(lh=yr()+500,fb&&Gc())}}function ud(t){vc!==null&&vc.tag===0&&!(ln&6)&&Hf();var e=ln;ln|=1;var n=fs.transition,r=Sn;try{if(fs.transition=null,Sn=1,t)return t()}finally{Sn=r,fs.transition=n,ln=e,!(ln&6)&&Gc()}}function wA(){Oa=Ef.current,Un(Ef)}function Ku(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Eq(n)),Cr!==null)for(n=Cr.return;n!==null;){var r=n;switch(tA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bx();break;case 3:sh(),Un(fa),Un(Mi),uA();break;case 5:cA(r);break;case 4:sh();break;case 13:Un(Qn);break;case 19:Un(Qn);break;case 10:aA(r.type._context);break;case 22:case 23:wA()}n=n.return}if(Qr=t,Cr=t=Pc(t.current,null),mi=Oa=e,Hr=0,a0=null,xA=gb=cd=0,oa=bm=null,Iu!==null){for(e=0;e<Iu.length;e++)if(n=Iu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}Iu=null}return t}function F8(t,e){do{var n=Cr;try{if(iA(),dx.current=Xx,Yx){for(var r=tr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yx=!1}if(ld=0,Kr=Br=tr=null,xm=!1,n0=0,vA.current=null,n===null||n.return===null){Hr=1,a0=e,Cr=null;break}e:{var a=t,s=n.return,o=n,l=e;if(e=mi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=uE(s);if(h!==null){h.flags&=-257,dE(h,s,o,a,e),h.mode&1&&cE(a,u,e),e=h,l=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){cE(a,u,e),SA();break e}l=Error(et(426))}}else if(Yn&&o.mode&1){var y=uE(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),dE(y,s,o,a,e),nA(oh(l,o));break e}}a=l=oh(l,o),Hr!==4&&(Hr=2),bm===null?bm=[a]:bm.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=N8(a,l,e);rE(a,x);break e;case 1:o=l;var w=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(_c===null||!_c.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=j8(a,o,e);rE(a,N);break e}}a=a.return}while(a!==null)}W8(n)}catch(j){e=j,Cr===n&&n!==null&&(Cr=n=n.return);continue}break}while(!0)}function B8(){var t=Jx.current;return Jx.current=Xx,t===null?Xx:t}function SA(){(Hr===0||Hr===3||Hr===2)&&(Hr=4),Qr===null||!(cd&268435455)&&!(gb&268435455)||fc(Qr,mi)}function ey(t,e){var n=ln;ln|=2;var r=B8();(Qr!==t||mi!==e)&&(Yo=null,Ku(t,e));do try{Qq();break}catch(i){F8(t,i)}while(!0);if(iA(),ln=n,Jx.current=r,Cr!==null)throw Error(et(261));return Qr=null,mi=0,Hr}function Qq(){for(;Cr!==null;)H8(Cr)}function eU(){for(;Cr!==null&&!kW();)H8(Cr)}function H8(t){var e=U8(t.alternate,t,Oa);t.memoizedProps=t.pendingProps,e===null?W8(t):Cr=e,vA.current=null}function W8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Gq(n,e),n!==null){n.flags&=32767,Cr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hr=6,Cr=null;return}}else if(n=Vq(n,e,Oa),n!==null){Cr=n;return}if(e=e.sibling,e!==null){Cr=e;return}Cr=e=t}while(e!==null);Hr===0&&(Hr=5)}function Nu(t,e,n){var r=Sn,i=fs.transition;try{fs.transition=null,Sn=1,tU(t,e,n,r)}finally{fs.transition=i,Sn=r}return null}function tU(t,e,n,r){do Hf();while(vc!==null);if(ln&6)throw Error(et(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(et(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(IW(t,a),t===Qr&&(Cr=Qr=null,mi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gv||(gv=!0,V8(Ix,function(){return Hf(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=fs.transition,fs.transition=null;var s=Sn;Sn=1;var o=ln;ln|=4,vA.current=null,Yq(t,n),R8(n,t),wq(FS),Rx=!!zS,FS=zS=null,t.current=n,Xq(n),AW(),ln=o,Sn=s,fs.transition=a}else t.current=n;if(gv&&(gv=!1,vc=t,Qx=i),a=t.pendingLanes,a===0&&(_c=null),_W(n.stateNode),pa(t,yr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zx)throw Zx=!1,t=sN,sN=null,t;return Qx&1&&t.tag!==0&&Hf(),a=t.pendingLanes,a&1?t===oN?wm++:(wm=0,oN=t):wm=0,Gc(),null}function Hf(){if(vc!==null){var t=NI(Qx),e=fs.transition,n=Sn;try{if(fs.transition=null,Sn=16>t?16:t,vc===null)var r=!1;else{if(t=vc,vc=null,Qx=0,ln&6)throw Error(et(331));var i=ln;for(ln|=4,mt=t.current;mt!==null;){var a=mt,s=a.child;if(mt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(mt=u;mt!==null;){var d=mt;switch(d.tag){case 0:case 11:case 15:ym(8,d,a)}var f=d.child;if(f!==null)f.return=d,mt=f;else for(;mt!==null;){d=mt;var p=d.sibling,h=d.return;if(L8(d),d===u){mt=null;break}if(p!==null){p.return=h,mt=p;break}mt=h}}}var m=a.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}mt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,mt=s;else e:for(;mt!==null;){if(a=mt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ym(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,mt=x;break e}mt=a.return}}var w=t.current;for(mt=w;mt!==null;){s=mt;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,mt=S;else e:for(s=w;mt!==null;){if(o=mt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:mb(9,o)}}catch(j){dr(o,o.return,j)}if(o===s){mt=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,mt=N;break e}mt=o.return}}if(ln=i,Gc(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(ob,t)}catch{}r=!0}return r}finally{Sn=n,fs.transition=e}}return!1}function jE(t,e,n){e=oh(n,e),e=N8(t,e,1),t=Ec(t,e,1),e=Ki(),t!==null&&(ag(t,1,e),pa(t,e))}function dr(t,e,n){if(t.tag===3)jE(t,t,n);else for(;e!==null;){if(e.tag===3){jE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_c===null||!_c.has(r))){t=oh(n,t),t=j8(e,t,1),e=Ec(e,t,1),t=Ki(),e!==null&&(ag(e,1,t),pa(e,t));break}}e=e.return}}function nU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ki(),t.pingedLanes|=t.suspendedLanes&n,Qr===t&&(mi&n)===n&&(Hr===4||Hr===3&&(mi&130023424)===mi&&500>yr()-yA?Ku(t,0):xA|=n),pa(t,e)}function q8(t,e){e===0&&(t.mode&1?(e=sv,sv<<=1,!(sv&130023424)&&(sv=4194304)):e=1);var n=Ki();t=xl(t,e),t!==null&&(ag(t,e,n),pa(t,n))}function rU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q8(t,n)}function iU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(e),q8(t,n)}var U8;U8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fa.current)ua=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ua=!1,Uq(t,e,n);ua=!!(t.flags&131072)}else ua=!1,Yn&&e.flags&1048576&&YI(e,qx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hx(t,e),t=e.pendingProps;var i=rh(e,Mi.current);Bf(e,n),i=fA(null,e,r,t,i,n);var a=hA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ha(r)?(a=!0,Hx(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oA(e),i.updater=pb,e.stateNode=i,i._reactInternals=e,YS(e,r,t,n),e=ZS(null,e,r,!0,a,n)):(e.tag=0,Yn&&a&&eA(e),Hi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hx(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sU(r),t=Ms(r,t),i){case 0:e=JS(null,e,r,t,n);break e;case 1:e=pE(null,e,r,t,n);break e;case 11:e=fE(null,e,r,t,n);break e;case 14:e=hE(null,e,r,Ms(r.type,t),n);break e}throw Error(et(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),JS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),pE(t,e,r,i,n);case 3:e:{if(E8(e),t===null)throw Error(et(387));r=e.pendingProps,a=e.memoizedState,i=a.element,t8(t,e),Gx(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=oh(Error(et(423)),e),e=mE(t,e,r,n,i);break e}else if(r!==i){i=oh(Error(et(424)),e),e=mE(t,e,r,n,i);break e}else for(La=Cc(e.stateNode.containerInfo.firstChild),Da=e,Yn=!0,Ds=null,n=QI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ih(),r===i){e=yl(t,e,n);break e}Hi(t,e,r,n)}e=e.child}return e;case 5:return n8(e),t===null&&VS(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,BS(r,i)?s=null:a!==null&&BS(r,a)&&(e.flags|=32),C8(t,e),Hi(t,e,s,n),e.child;case 6:return t===null&&VS(e),null;case 13:return _8(t,e,n);case 4:return lA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ah(e,null,r,n):Hi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),fE(t,e,r,i,n);case 7:return Hi(t,e,e.pendingProps,n),e.child;case 8:return Hi(t,e,e.pendingProps.children,n),e.child;case 12:return Hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Dn(Ux,r._currentValue),r._currentValue=s,a!==null)if(Us(a.value,s)){if(a.children===i.children&&!fa.current){e=yl(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=ul(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),GS(a.return,n,e),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(et(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),GS(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Hi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bf(e,n),i=gs(i),r=r(i),e.flags|=1,Hi(t,e,r,n),e.child;case 14:return r=e.type,i=Ms(r,e.pendingProps),i=Ms(r.type,i),hE(t,e,r,i,n);case 15:return k8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ms(r,i),hx(t,e),e.tag=1,ha(r)?(t=!0,Hx(e)):t=!1,Bf(e,n),S8(e,r,i),YS(e,r,i,n),ZS(null,e,r,!0,t,n);case 19:return O8(t,e,n);case 22:return A8(t,e,n)}throw Error(et(156,e.tag))};function V8(t,e){return yI(t,e)}function aU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(t,e,n,r){return new aU(t,e,n,r)}function NA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sU(t){if(typeof t=="function")return NA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hk)return 11;if(t===Wk)return 14}return 2}function Pc(t,e){var n=t.alternate;return n===null?(n=us(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gx(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")NA(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xf:return Yu(n.children,i,a,e);case Bk:s=8,i|=8;break;case yS:return t=us(12,n,e,i|2),t.elementType=yS,t.lanes=a,t;case bS:return t=us(13,n,e,i),t.elementType=bS,t.lanes=a,t;case wS:return t=us(19,n,e,i),t.elementType=wS,t.lanes=a,t;case nI:return vb(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eI:s=10;break e;case tI:s=9;break e;case Hk:s=11;break e;case Wk:s=14;break e;case ic:s=16,r=null;break e}throw Error(et(130,t==null?t:typeof t,""))}return e=us(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Yu(t,e,n,r){return t=us(7,t,r,e),t.lanes=n,t}function vb(t,e,n,r){return t=us(22,t,r,e),t.elementType=nI,t.lanes=n,t.stateNode={isHidden:!1},t}function Iw(t,e,n){return t=us(6,t,null,e),t.lanes=n,t}function Dw(t,e,n){return e=us(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gw(0),this.expirationTimes=gw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jA(t,e,n,r,i,a,s,o,l){return t=new oU(t,e,n,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=us(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oA(a),t}function lU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function G8(t){if(!t)return zc;t=t._reactInternals;e:{if(_d(t)!==t||t.tag!==1)throw Error(et(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ha(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(t.tag===1){var n=t.type;if(ha(n))return GI(t,n,e)}return e}function K8(t,e,n,r,i,a,s,o,l){return t=jA(n,r,!0,t,i,a,s,o,l),t.context=G8(null),n=t.current,r=Ki(),i=Oc(n),a=ul(r,i),a.callback=e??null,Ec(n,a,i),t.current.lanes=i,ag(t,i,r),pa(t,r),t}function xb(t,e,n,r){var i=e.current,a=Ki(),s=Oc(i);return n=G8(n),e.context===null?e.context=n:e.pendingContext=n,e=ul(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ec(i,e,s),t!==null&&(Hs(t,i,s,a),ux(t,i,s)),s}function ty(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kA(t,e){kE(t,e),(t=t.alternate)&&kE(t,e)}function cU(){return null}var Y8=typeof reportError=="function"?reportError:function(t){console.error(t)};function AA(t){this._internalRoot=t}yb.prototype.render=AA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(et(409));xb(t,e,null,null)};yb.prototype.unmount=AA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ud(function(){xb(null,t,null,null)}),e[vl]=null}};function yb(t){this._internalRoot=t}yb.prototype.unstable_scheduleHydration=function(t){if(t){var e=AI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dc.length&&e!==0&&e<dc[n].priority;n++);dc.splice(n,0,t),n===0&&EI(t)}};function CA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function AE(){}function uU(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=ty(s);a.call(u)}}var s=K8(e,r,t,0,null,!1,!1,"",AE);return t._reactRootContainer=s,t[vl]=s.current,Jm(t.nodeType===8?t.parentNode:t),ud(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=ty(l);o.call(u)}}var l=jA(t,0,!1,null,null,!1,!1,"",AE);return t._reactRootContainer=l,t[vl]=l.current,Jm(t.nodeType===8?t.parentNode:t),ud(function(){xb(e,l,n,r)}),l}function wb(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=ty(s);o.call(l)}}xb(e,s,t,i)}else s=uU(n,e,t,i,r);return ty(s)}jI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=am(e.pendingLanes);n!==0&&(Vk(e,n|1),pa(e,yr()),!(ln&6)&&(lh=yr()+500,Gc()))}break;case 13:ud(function(){var r=xl(t,1);if(r!==null){var i=Ki();Hs(r,t,1,i)}}),kA(t,1)}};Gk=function(t){if(t.tag===13){var e=xl(t,134217728);if(e!==null){var n=Ki();Hs(e,t,134217728,n)}kA(t,134217728)}};kI=function(t){if(t.tag===13){var e=Oc(t),n=xl(t,e);if(n!==null){var r=Ki();Hs(n,t,e,r)}kA(t,e)}};AI=function(){return Sn};CI=function(t,e){var n=Sn;try{return Sn=t,e()}finally{Sn=n}};PS=function(t,e,n){switch(e){case"input":if(jS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=db(r);if(!i)throw Error(et(90));iI(r),jS(r,i)}}}break;case"textarea":sI(t,n);break;case"select":e=n.value,e!=null&&Rf(t,!!n.multiple,e,!1)}};hI=bA;pI=ud;var dU={usingClientEntryPoint:!1,Events:[og,Sf,db,dI,fI,bA]},zp={findFiberByHostInstance:Lu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fU={bundleType:zp.bundleType,version:zp.version,rendererPackageName:zp.rendererPackageName,rendererConfig:zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Al.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vI(t),t===null?null:t.stateNode},findFiberByHostInstance:zp.findFiberByHostInstance||cU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{ob=vv.inject(fU),mo=vv}catch{}}Ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dU;Ba.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CA(e))throw Error(et(200));return lU(t,e,null,n)};Ba.createRoot=function(t,e){if(!CA(t))throw Error(et(299));var n=!1,r="",i=Y8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jA(t,1,!1,null,null,n,!1,r,i),t[vl]=e.current,Jm(t.nodeType===8?t.parentNode:t),new AA(e)};Ba.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(et(188)):(t=Object.keys(t).join(","),Error(et(268,t)));return t=vI(e),t=t===null?null:t.stateNode,t};Ba.flushSync=function(t){return ud(t)};Ba.hydrate=function(t,e,n){if(!bb(e))throw Error(et(200));return wb(null,t,e,!0,n)};Ba.hydrateRoot=function(t,e,n){if(!CA(t))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=Y8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=K8(e,null,t,1,n??null,i,!1,a,s),t[vl]=e.current,Jm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yb(e)};Ba.render=function(t,e,n){if(!bb(e))throw Error(et(200));return wb(null,t,e,!1,n)};Ba.unmountComponentAtNode=function(t){if(!bb(t))throw Error(et(40));return t._reactRootContainer?(ud(function(){wb(null,null,t,!1,function(){t._reactRootContainer=null,t[vl]=null})}),!0):!1};Ba.unstable_batchedUpdates=bA;Ba.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bb(n))throw Error(et(200));if(t==null||t._reactInternals===void 0)throw Error(et(38));return wb(t,e,n,!1,r)};Ba.version="18.3.1-next-f1338f8080-20240426";function X8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X8)}catch(t){console.error(t)}}X8(),XL.exports=Ba;var J8=XL.exports;const hU=pn(J8);var CE=J8;vS.createRoot=CE.createRoot,vS.hydrateRoot=CE.hydrateRoot;const pU="modulepreload",mU=function(t,e){return new URL(t,e).href},EE={},Et=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=mU(u,r),u in EE)return;EE[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const g=s[m];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":pU,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),We=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},d)=>q.createElement("svg",{ref:d,...gU,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${vU(t)}`,o].join(" "),...u},[...e.map(([f,p])=>q.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=We("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=We("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=We("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=We("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=We("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=We("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=We("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=We("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=We("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=We("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=We("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=We("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=We("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=We("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=We("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=We("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=We("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=We("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=We("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=We("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=We("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=We("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=We("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=We("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=We("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=We("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=We("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=We("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=We("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=We("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=We("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=We("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=We("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=We("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=We("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=We("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=We("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=We("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=We("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=We("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=We("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=We("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=We("Kanban",[["path",{d:"M6 5v11",key:"mdvv1e"}],["path",{d:"M12 5v6",key:"14ar3b"}],["path",{d:"M18 5v14",key:"7ji314"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=We("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=We("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=We("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=We("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=We("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=We("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=We("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=We("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=We("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=We("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=We("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=We("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=We("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=We("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=We("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=We("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=We("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=We("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=We("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=We("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=We("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=We("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=We("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=We("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=We("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=We("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=We("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=We("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=We("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=We("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=We("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=We("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=We("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=We("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=We("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=We("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=We("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=We("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=We("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=We("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=We("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=We("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=We("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=We("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=We("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=We("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=We("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=We("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Os=({id:t,label:e,icon:n,active:r,onClick:i})=>c.jsxs("button",{onClick:()=>i(t),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 group ${r?"bg-blue-600 text-white shadow-md":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[c.jsx(n,{size:20,className:r?"text-white":"text-slate-500 group-hover:text-white"}),c.jsx("span",{className:"font-medium text-sm",children:e})]}),cV=({activeTab:t,setActiveTab:e,currentUser:n,setCurrentUser:r,companyProfile:i,onLogout:a,isSupportMode:s,features:o})=>{const l=()=>n.role==="SALES_REP"?"Vendedor":n.role==="MANAGER"?"Gerente":"Soporte";return c.jsxs("div",{className:"w-64 bg-slate-900 h-full flex flex-col flex-shrink-0 shadow-xl border-r border-slate-800",children:[c.jsxs("div",{className:"p-6 border-b border-slate-800 flex items-center gap-3 hidden lg:flex",children:[i.logoUrl?c.jsx("div",{className:"w-8 h-8 rounded-lg overflow-hidden bg-white/10 flex items-center justify-center",children:c.jsx("img",{src:i.logoUrl,alt:"Logo",className:"w-full h-full object-cover"})}):c.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:c.jsx(xx,{size:16,className:"text-white"})}),c.jsx("span",{className:"text-xl font-bold text-white tracking-tight truncate",children:i.name})]}),c.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:[c.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-4 px-2",children:"Men Principal"}),c.jsx(Os,{id:"dashboard",label:"Tablero",icon:tD,active:t==="dashboard",onClick:e}),c.jsx(Os,{id:"pipeline",label:"Leads",icon:_A,active:t==="pipeline",onClick:e}),c.jsx(Os,{id:"tasks",label:"Tareas",icon:Wi,active:t==="tasks",onClick:e}),(!o||o.enableEmail)&&c.jsx(Os,{id:"mail",label:"Email",icon:gi,active:t==="mail",onClick:e}),(!o||o.enableWhatsApp)&&c.jsx(Os,{id:"inbox",label:"Inbox",icon:Wf,active:t==="inbox",onClick:e}),c.jsx(Os,{id:"calendar",label:"Calendario",icon:fo,active:t==="calendar",onClick:e}),c.jsx(Os,{id:"products",label:"Catlogo",icon:s0,active:t==="products",onClick:e}),(n.role==="MANAGER"||n.role==="SUPPORT"||s)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mt-8 mb-4 px-2",children:"Gerencia & Sistema"}),c.jsx(Os,{id:"reports",label:"Reportes de Equipo",icon:KU,active:t==="reports",onClick:e}),c.jsx(Os,{id:"automation",label:"Automatizacin",icon:yx,active:t==="automation",onClick:e}),c.jsx(Os,{id:"settings",label:"Configuracin",icon:kb,active:t==="settings",onClick:e})]}),(n.role==="SUPPORT"||s)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs font-semibold text-teal-500 uppercase tracking-wider mt-8 mb-4 px-2",children:"Soporte Tcnico"}),c.jsx(Os,{id:"support",label:"Panel de Control",icon:PA,active:t==="support",onClick:e})]})]}),c.jsx("div",{className:"p-4 border-t border-slate-800",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e("user-profile"),className:"flex-1 flex items-center gap-3 p-2 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors text-left group",title:"Ver Perfil",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-white truncate group-hover:text-blue-400 transition-colors",children:n.name}),c.jsx("p",{className:"text-xs text-slate-400 truncate capitalize",children:l()})]})}),c.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-white hover:bg-red-900/50 rounded-lg transition-colors",title:"Cerrar Sesin",children:c.jsx(HU,{size:20})})]})})]})};function aD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=aD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Jt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=aD(t))&&(r&&(r+=" "),r+=e);return r}var uV=Array.isArray,ga=uV,dV=typeof ev=="object"&&ev&&ev.Object===Object&&ev,sD=dV,fV=sD,hV=typeof self=="object"&&self&&self.Object===Object&&self,pV=fV||hV||Function("return this")(),jo=pV,mV=jo,gV=mV.Symbol,fg=gV,LE=fg,oD=Object.prototype,vV=oD.hasOwnProperty,xV=oD.toString,Fp=LE?LE.toStringTag:void 0;function yV(t){var e=vV.call(t,Fp),n=t[Fp];try{t[Fp]=void 0;var r=!0}catch{}var i=xV.call(t);return r&&(e?t[Fp]=n:delete t[Fp]),i}var bV=yV,wV=Object.prototype,SV=wV.toString;function NV(t){return SV.call(t)}var jV=NV,IE=fg,kV=bV,AV=jV,CV="[object Null]",EV="[object Undefined]",DE=IE?IE.toStringTag:void 0;function _V(t){return t==null?t===void 0?EV:CV:DE&&DE in Object(t)?kV(t):AV(t)}var Cl=_V;function OV(t){return t!=null&&typeof t=="object"}var El=OV,PV=Cl,TV=El,MV="[object Symbol]";function LV(t){return typeof t=="symbol"||TV(t)&&PV(t)==MV}var Uh=LV,IV=ga,DV=Uh,RV=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$V=/^\w*$/;function zV(t,e){if(IV(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||DV(t)?!0:$V.test(t)||!RV.test(t)||e!=null&&t in Object(e)}var TA=zV;function FV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Kc=FV;const Vh=pn(Kc);var BV=Cl,HV=Kc,WV="[object AsyncFunction]",qV="[object Function]",UV="[object GeneratorFunction]",VV="[object Proxy]";function GV(t){if(!HV(t))return!1;var e=BV(t);return e==qV||e==UV||e==WV||e==VV}var MA=GV;const Ft=pn(MA);var KV=jo,YV=KV["__core-js_shared__"],XV=YV,Fw=XV,RE=function(){var t=/[^.]+$/.exec(Fw&&Fw.keys&&Fw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function JV(t){return!!RE&&RE in t}var ZV=JV,QV=Function.prototype,eG=QV.toString;function tG(t){if(t!=null){try{return eG.call(t)}catch{}try{return t+""}catch{}}return""}var lD=tG,nG=MA,rG=ZV,iG=Kc,aG=lD,sG=/[\\^$.*+?()[\]{}|]/g,oG=/^\[object .+?Constructor\]$/,lG=Function.prototype,cG=Object.prototype,uG=lG.toString,dG=cG.hasOwnProperty,fG=RegExp("^"+uG.call(dG).replace(sG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hG(t){if(!iG(t)||rG(t))return!1;var e=nG(t)?fG:oG;return e.test(aG(t))}var pG=hG;function mG(t,e){return t==null?void 0:t[e]}var gG=mG,vG=pG,xG=gG;function yG(t,e){var n=xG(t,e);return vG(n)?n:void 0}var Od=yG,bG=Od,wG=bG(Object,"create"),Ab=wG,$E=Ab;function SG(){this.__data__=$E?$E(null):{},this.size=0}var NG=SG;function jG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var kG=jG,AG=Ab,CG="__lodash_hash_undefined__",EG=Object.prototype,_G=EG.hasOwnProperty;function OG(t){var e=this.__data__;if(AG){var n=e[t];return n===CG?void 0:n}return _G.call(e,t)?e[t]:void 0}var PG=OG,TG=Ab,MG=Object.prototype,LG=MG.hasOwnProperty;function IG(t){var e=this.__data__;return TG?e[t]!==void 0:LG.call(e,t)}var DG=IG,RG=Ab,$G="__lodash_hash_undefined__";function zG(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=RG&&e===void 0?$G:e,this}var FG=zG,BG=NG,HG=kG,WG=PG,qG=DG,UG=FG;function Gh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gh.prototype.clear=BG;Gh.prototype.delete=HG;Gh.prototype.get=WG;Gh.prototype.has=qG;Gh.prototype.set=UG;var VG=Gh;function GG(){this.__data__=[],this.size=0}var KG=GG;function YG(t,e){return t===e||t!==t&&e!==e}var LA=YG,XG=LA;function JG(t,e){for(var n=t.length;n--;)if(XG(t[n][0],e))return n;return-1}var Cb=JG,ZG=Cb,QG=Array.prototype,eK=QG.splice;function tK(t){var e=this.__data__,n=ZG(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():eK.call(e,n,1),--this.size,!0}var nK=tK,rK=Cb;function iK(t){var e=this.__data__,n=rK(e,t);return n<0?void 0:e[n][1]}var aK=iK,sK=Cb;function oK(t){return sK(this.__data__,t)>-1}var lK=oK,cK=Cb;function uK(t,e){var n=this.__data__,r=cK(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var dK=uK,fK=KG,hK=nK,pK=aK,mK=lK,gK=dK;function Kh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kh.prototype.clear=fK;Kh.prototype.delete=hK;Kh.prototype.get=pK;Kh.prototype.has=mK;Kh.prototype.set=gK;var Eb=Kh,vK=Od,xK=jo,yK=vK(xK,"Map"),IA=yK,zE=VG,bK=Eb,wK=IA;function SK(){this.size=0,this.__data__={hash:new zE,map:new(wK||bK),string:new zE}}var NK=SK;function jK(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var kK=jK,AK=kK;function CK(t,e){var n=t.__data__;return AK(e)?n[typeof e=="string"?"string":"hash"]:n.map}var _b=CK,EK=_b;function _K(t){var e=EK(this,t).delete(t);return this.size-=e?1:0,e}var OK=_K,PK=_b;function TK(t){return PK(this,t).get(t)}var MK=TK,LK=_b;function IK(t){return LK(this,t).has(t)}var DK=IK,RK=_b;function $K(t,e){var n=RK(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var zK=$K,FK=NK,BK=OK,HK=MK,WK=DK,qK=zK;function Yh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yh.prototype.clear=FK;Yh.prototype.delete=BK;Yh.prototype.get=HK;Yh.prototype.has=WK;Yh.prototype.set=qK;var DA=Yh,cD=DA,UK="Expected a function";function RA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(UK);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(RA.Cache||cD),n}RA.Cache=cD;var uD=RA;const VK=pn(uD);var GK=uD,KK=500;function YK(t){var e=GK(t,function(r){return n.size===KK&&n.clear(),r}),n=e.cache;return e}var XK=YK,JK=XK,ZK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QK=/\\(\\)?/g,eY=JK(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ZK,function(n,r,i,a){e.push(i?a.replace(QK,"$1"):r||n)}),e}),tY=eY;function nY(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var $A=nY,FE=fg,rY=$A,iY=ga,aY=Uh,BE=FE?FE.prototype:void 0,HE=BE?BE.toString:void 0;function dD(t){if(typeof t=="string")return t;if(iY(t))return rY(t,dD)+"";if(aY(t))return HE?HE.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var sY=dD,oY=sY;function lY(t){return t==null?"":oY(t)}var fD=lY,cY=ga,uY=TA,dY=tY,fY=fD;function hY(t,e){return cY(t)?t:uY(t,e)?[t]:dY(fY(t))}var hD=hY,pY=Uh;function mY(t){if(typeof t=="string"||pY(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Ob=mY,gY=hD,vY=Ob;function xY(t,e){e=gY(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[vY(e[n++])];return n&&n==r?t:void 0}var zA=xY,yY=zA;function bY(t,e,n){var r=t==null?void 0:yY(t,e);return r===void 0?n:r}var pD=bY;const $a=pn(pD);function wY(t){return t==null}var SY=wY;const Zt=pn(SY);var NY=Cl,jY=ga,kY=El,AY="[object String]";function CY(t){return typeof t=="string"||!jY(t)&&kY(t)&&NY(t)==AY}var EY=CY;const dd=pn(EY);var mD={exports:{}},Nn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA=Symbol.for("react.element"),BA=Symbol.for("react.portal"),Pb=Symbol.for("react.fragment"),Tb=Symbol.for("react.strict_mode"),Mb=Symbol.for("react.profiler"),Lb=Symbol.for("react.provider"),Ib=Symbol.for("react.context"),_Y=Symbol.for("react.server_context"),Db=Symbol.for("react.forward_ref"),Rb=Symbol.for("react.suspense"),$b=Symbol.for("react.suspense_list"),zb=Symbol.for("react.memo"),Fb=Symbol.for("react.lazy"),OY=Symbol.for("react.offscreen"),gD;gD=Symbol.for("react.module.reference");function bs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case FA:switch(t=t.type,t){case Pb:case Mb:case Tb:case Rb:case $b:return t;default:switch(t=t&&t.$$typeof,t){case _Y:case Ib:case Db:case Fb:case zb:case Lb:return t;default:return e}}case BA:return e}}}Nn.ContextConsumer=Ib;Nn.ContextProvider=Lb;Nn.Element=FA;Nn.ForwardRef=Db;Nn.Fragment=Pb;Nn.Lazy=Fb;Nn.Memo=zb;Nn.Portal=BA;Nn.Profiler=Mb;Nn.StrictMode=Tb;Nn.Suspense=Rb;Nn.SuspenseList=$b;Nn.isAsyncMode=function(){return!1};Nn.isConcurrentMode=function(){return!1};Nn.isContextConsumer=function(t){return bs(t)===Ib};Nn.isContextProvider=function(t){return bs(t)===Lb};Nn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===FA};Nn.isForwardRef=function(t){return bs(t)===Db};Nn.isFragment=function(t){return bs(t)===Pb};Nn.isLazy=function(t){return bs(t)===Fb};Nn.isMemo=function(t){return bs(t)===zb};Nn.isPortal=function(t){return bs(t)===BA};Nn.isProfiler=function(t){return bs(t)===Mb};Nn.isStrictMode=function(t){return bs(t)===Tb};Nn.isSuspense=function(t){return bs(t)===Rb};Nn.isSuspenseList=function(t){return bs(t)===$b};Nn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Pb||t===Mb||t===Tb||t===Rb||t===$b||t===OY||typeof t=="object"&&t!==null&&(t.$$typeof===Fb||t.$$typeof===zb||t.$$typeof===Lb||t.$$typeof===Ib||t.$$typeof===Db||t.$$typeof===gD||t.getModuleId!==void 0)};Nn.typeOf=bs;mD.exports=Nn;var PY=mD.exports,TY=Cl,MY=El,LY="[object Number]";function IY(t){return typeof t=="number"||MY(t)&&TY(t)==LY}var vD=IY;const DY=pn(vD);var RY=vD;function $Y(t){return RY(t)&&t!=+t}var zY=$Y;const hg=pn(zY);var qi=function(e){return e===0?0:e>0?1:-1},zu=function(e){return dd(e)&&e.indexOf("%")===e.length-1},nt=function(e){return DY(e)&&!hg(e)},FY=function(e){return Zt(e)},Wr=function(e){return nt(e)||dd(e)},BY=0,pg=function(e){var n=++BY;return"".concat(e||"").concat(n)},Ui=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nt(e)&&!dd(e))return r;var a;if(zu(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return hg(a)&&(a=r),i&&a>n&&(a=n),a},hc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},HY=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},sc=function(e,n){return nt(e)&&nt(n)?function(r){return e+r*(n-e)}:function(){return n}};function pN(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):$a(r,e))===n})}var WY=function(e,n){return nt(e)&&nt(n)?e-n:dd(e)&&dd(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Uf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function mN(t){"@babel/helpers - typeof";return mN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mN(t)}var qY=["viewBox","children"],UY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],WE=["points","pathLength"],Bw={svg:qY,polygon:WE,polyline:WE},HA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],oy=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(q.isValidElement(e)&&(r=e.props),!Vh(r))return null;var i={};return Object.keys(r).forEach(function(a){HA.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},VY=function(e,n,r){return function(i){return e(n,r,i),null}},fd=function(e,n,r){if(!Vh(e)||mN(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];HA.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=VY(s,n,r))}),i},GY=["children"],KY=["children"];function qE(t,e){if(t==null)return{};var n=YY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var UE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},dl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},VE=null,Hw=null,WA=function t(e){if(e===VE&&Array.isArray(Hw))return Hw;var n=[];return q.Children.forEach(e,function(r){Zt(r)||(PY.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Hw=n,VE=e,n};function hs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return dl(i)}):r=[dl(e)],WA(t).forEach(function(i){var a=$a(i,"type.displayName")||$a(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Pa(t,e){var n=hs(t,e);return n&&n[0]}var GE=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!nt(r)||r<=0||!nt(i)||i<=0)},XY=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],JY=function(e){return e&&e.type&&dd(e.type)&&XY.indexOf(e.type)>=0},ZY=function(e,n,r,i){var a,s=(a=Bw==null?void 0:Bw[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Ft(e)&&(i&&s.includes(n)||UY.includes(n))||r&&HA.includes(n)},It=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(q.isValidElement(e)&&(i=e.props),!Vh(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;ZY((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},gN=function t(e,n){if(e===n)return!0;var r=q.Children.count(e);if(r!==q.Children.count(n))return!1;if(r===0)return!0;if(r===1)return KE(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!KE(a,s))return!1}return!0},KE=function(e,n){if(Zt(e)&&Zt(n))return!0;if(!Zt(e)&&!Zt(n)){var r=e.props||{},i=r.children,a=qE(r,GY),s=n.props||{},o=s.children,l=qE(s,KY);return i&&o?Uf(a,l)&&gN(i,o):!i&&!o?Uf(a,l):!1}return!1},YE=function(e,n){var r=[],i={};return WA(e).forEach(function(a,s){if(JY(a))r.push(a);else if(a){var o=dl(a.type),l=n[o]||{},u=l.handler,d=l.once;if(u&&(!d||!i[o])){var f=u(a,o,s);r.push(f),i[o]=!0}}}),r},QY=function(e){var n=e&&e.type;return n&&UE[n]?UE[n]:null},eX=function(e,n){return WA(n).indexOf(e)},tX=["children","width","height","viewBox","className","style","title","desc"];function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vN.apply(this,arguments)}function nX(t,e){if(t==null)return{};var n=rX(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xN(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=nX(t,tX),d=i||{width:n,height:r,x:0,y:0},f=Jt("recharts-surface",a);return ue.createElement("svg",vN({},It(u,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),ue.createElement("title",null,o),ue.createElement("desc",null,l),e)}var iX=["children","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yN.apply(this,arguments)}function aX(t,e){if(t==null)return{};var n=sX(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wn=ue.forwardRef(function(t,e){var n=t.children,r=t.className,i=aX(t,iX),a=Jt("recharts-layer",r);return ue.createElement("g",yN({className:a},It(i,!0),{ref:e}),n)}),Ws=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function oX(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var lX=oX,cX=lX;function uX(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:cX(t,e,n)}var dX=uX,fX="\\ud800-\\udfff",hX="\\u0300-\\u036f",pX="\\ufe20-\\ufe2f",mX="\\u20d0-\\u20ff",gX=hX+pX+mX,vX="\\ufe0e\\ufe0f",xX="\\u200d",yX=RegExp("["+xX+fX+gX+vX+"]");function bX(t){return yX.test(t)}var xD=bX;function wX(t){return t.split("")}var SX=wX,yD="\\ud800-\\udfff",NX="\\u0300-\\u036f",jX="\\ufe20-\\ufe2f",kX="\\u20d0-\\u20ff",AX=NX+jX+kX,CX="\\ufe0e\\ufe0f",EX="["+yD+"]",bN="["+AX+"]",wN="\\ud83c[\\udffb-\\udfff]",_X="(?:"+bN+"|"+wN+")",bD="[^"+yD+"]",wD="(?:\\ud83c[\\udde6-\\uddff]){2}",SD="[\\ud800-\\udbff][\\udc00-\\udfff]",OX="\\u200d",ND=_X+"?",jD="["+CX+"]?",PX="(?:"+OX+"(?:"+[bD,wD,SD].join("|")+")"+jD+ND+")*",TX=jD+ND+PX,MX="(?:"+[bD+bN+"?",bN,wD,SD,EX].join("|")+")",LX=RegExp(wN+"(?="+wN+")|"+MX+TX,"g");function IX(t){return t.match(LX)||[]}var DX=IX,RX=SX,$X=xD,zX=DX;function FX(t){return $X(t)?zX(t):RX(t)}var BX=FX,HX=dX,WX=xD,qX=BX,UX=fD;function VX(t){return function(e){e=UX(e);var n=WX(e)?qX(e):void 0,r=n?n[0]:e.charAt(0),i=n?HX(n,1).join(""):e.slice(1);return r[t]()+i}}var GX=VX,KX=GX,YX=KX("toUpperCase"),XX=YX;const Bb=pn(XX);function In(t){return function(){return t}}const kD=Math.cos,ly=Math.sin,Gs=Math.sqrt,cy=Math.PI,Hb=2*cy,SN=Math.PI,NN=2*SN,ju=1e-6,JX=NN-ju;function AD(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ZX(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AD;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class QX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AD:ZX(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,d=s-e,f=o-n,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>ju)if(!(Math.abs(f*l-u*d)>ju)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,m=i-o,g=l*l+u*u,y=h*h+m*m,x=Math.sqrt(g),w=Math.sqrt(p),S=a*Math.tan((SN-Math.acos((g+p-y)/(2*x*w)))/2),N=S/w,j=S/x;Math.abs(N-1)>ju&&this._append`L${e+N*d},${n+N*f}`,this._append`A${a},${a},0,0,${+(f*h>d*m)},${this._x1=e+j*l},${this._y1=n+j*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,d=n+l,f=1^s,p=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ju||Math.abs(this._y1-d)>ju)&&this._append`L${u},${d}`,r&&(p<0&&(p=p%NN+NN),p>JX?this._append`A${r},${r},0,1,${f},${e-o},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:p>ju&&this._append`A${r},${r},0,${+(p>=SN)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function qA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new QX(e)}function UA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CD(t){this._context=t}CD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Wb(t){return new CD(t)}function ED(t){return t[0]}function _D(t){return t[1]}function OD(t,e){var n=In(!0),r=null,i=Wb,a=null,s=qA(o);t=typeof t=="function"?t:t===void 0?ED:In(t),e=typeof e=="function"?e:e===void 0?_D:In(e);function o(l){var u,d=(l=UA(l)).length,f,p=!1,h;for(r==null&&(a=i(h=s())),u=0;u<=d;++u)!(u<d&&n(f=l[u],u,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+t(f,u,l),+e(f,u,l));if(h)return a=null,h+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:In(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:In(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:In(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function yv(t,e,n){var r=null,i=In(!0),a=null,s=Wb,o=null,l=qA(u);t=typeof t=="function"?t:t===void 0?ED:In(+t),e=typeof e=="function"?e:In(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?_D:In(+n);function u(f){var p,h,m,g=(f=UA(f)).length,y,x=!1,w,S=new Array(g),N=new Array(g);for(a==null&&(o=s(w=l())),p=0;p<=g;++p){if(!(p<g&&i(y=f[p],p,f))===x)if(x=!x)h=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=p-1;m>=h;--m)o.point(S[m],N[m]);o.lineEnd(),o.areaEnd()}x&&(S[p]=+t(y,p,f),N[p]=+e(y,p,f),o.point(r?+r(y,p,f):S[p],n?+n(y,p,f):N[p]))}if(w)return o=null,w+""||null}function d(){return OD().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:In(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:In(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:In(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:In(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:In(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:In(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:In(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class PD{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function eJ(t){return new PD(t,!0)}function tJ(t){return new PD(t,!1)}const VA={draw(t,e){const n=Gs(e/cy);t.moveTo(n,0),t.arc(0,0,n,0,Hb)}},nJ={draw(t,e){const n=Gs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},TD=Gs(1/3),rJ=TD*2,iJ={draw(t,e){const n=Gs(e/rJ),r=n*TD;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},aJ={draw(t,e){const n=Gs(e),r=-n/2;t.rect(r,r,n,n)}},sJ=.8908130915292852,MD=ly(cy/10)/ly(7*cy/10),oJ=ly(Hb/10)*MD,lJ=-kD(Hb/10)*MD,cJ={draw(t,e){const n=Gs(e*sJ),r=oJ*n,i=lJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Hb*a/5,o=kD(s),l=ly(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},Ww=Gs(3),uJ={draw(t,e){const n=-Gs(e/(Ww*3));t.moveTo(0,n*2),t.lineTo(-Ww*n,-n),t.lineTo(Ww*n,-n),t.closePath()}},Za=-.5,Qa=Gs(3)/2,jN=1/Gs(12),dJ=(jN/2+1)*3,fJ={draw(t,e){const n=Gs(e/dJ),r=n/2,i=n*jN,a=r,s=n*jN+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Za*r-Qa*i,Qa*r+Za*i),t.lineTo(Za*a-Qa*s,Qa*a+Za*s),t.lineTo(Za*o-Qa*l,Qa*o+Za*l),t.lineTo(Za*r+Qa*i,Za*i-Qa*r),t.lineTo(Za*a+Qa*s,Za*s-Qa*a),t.lineTo(Za*o+Qa*l,Za*l-Qa*o),t.closePath()}};function hJ(t,e){let n=null,r=qA(i);t=typeof t=="function"?t:In(t||VA),e=typeof e=="function"?e:In(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:In(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:In(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function uy(){}function dy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function LD(t){this._context=t}LD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pJ(t){return new LD(t)}function ID(t){this._context=t}ID.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:dy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mJ(t){return new ID(t)}function DD(t){this._context=t}DD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:dy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gJ(t){return new DD(t)}function RD(t){this._context=t}RD.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function vJ(t){return new RD(t)}function XE(t){return t<0?-1:1}function JE(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(XE(a)+XE(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function ZE(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qw(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function fy(t){this._context=t}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qw(this,this._t0,ZE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qw(this,ZE(this,n=JE(this,t,e)),n);break;default:qw(this,this._t0,n=JE(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $D(t){this._context=new zD(t)}($D.prototype=Object.create(fy.prototype)).point=function(t,e){fy.prototype.point.call(this,e,t)};function zD(t){this._context=t}zD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function xJ(t){return new fy(t)}function yJ(t){return new $D(t)}function FD(t){this._context=t}FD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=QE(t),i=QE(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function QE(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function bJ(t){return new FD(t)}function qb(t,e){this._context=t,this._t=e}qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wJ(t){return new qb(t,.5)}function SJ(t){return new qb(t,0)}function NJ(t){return new qb(t,1)}function ch(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kN(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function jJ(t,e){return t[e]}function kJ(t){const e=[];return e.key=t,e}function AJ(){var t=In([]),e=kN,n=ch,r=jJ;function i(a){var s=Array.from(t.apply(this,arguments),kJ),o,l=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(f,s[o].key,u,a)]).data=f;for(o=0,d=UA(e(s));o<l;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:In(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:In(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?kN:typeof a=="function"?a:In(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ch,i):n},i}function CJ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}ch(t,e)}}function EJ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}ch(t,e)}}function _J(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,p=d[r-1][1]||0,h=(f-p)/2,m=0;m<o;++m){var g=t[e[m]],y=g[r][1]||0,x=g[r-1][1]||0;h+=y-x}l+=f,u+=h*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,ch(t,e)}}function l0(t){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l0(t)}var OJ=["type","size","sizeType"];function AN(){return AN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AN.apply(this,arguments)}function e_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e_(Object(n),!0).forEach(function(r){PJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PJ(t,e,n){return e=TJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TJ(t){var e=MJ(t,"string");return l0(e)=="symbol"?e:e+""}function MJ(t,e){if(l0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(l0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LJ(t,e){if(t==null)return{};var n=IJ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var BD={symbolCircle:VA,symbolCross:nJ,symbolDiamond:iJ,symbolSquare:aJ,symbolStar:cJ,symbolTriangle:uJ,symbolWye:fJ},DJ=Math.PI/180,RJ=function(e){var n="symbol".concat(Bb(e));return BD[n]||VA},$J=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*DJ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},zJ=function(e,n){BD["symbol".concat(Bb(e))]=n},GA=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=LJ(e,OJ),u=t_(t_({},l),{},{type:r,size:a,sizeType:o}),d=function(){var y=RJ(r),x=hJ().type(y).size($J(a,o,r));return x()},f=u.className,p=u.cx,h=u.cy,m=It(u,!0);return p===+p&&h===+h&&a===+a?ue.createElement("path",AN({},m,{className:Jt("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};GA.registerSymbol=zJ;function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CN.apply(this,arguments)}function n_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n_(Object(n),!0).forEach(function(r){c0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WD(r.key),r)}}function WJ(t,e,n){return e&&HJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qJ(t,e,n){return e=hy(e),UJ(t,HD()?Reflect.construct(e,n||[],hy(t).constructor):e.apply(t,n))}function UJ(t,e){if(e&&(uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VJ(t)}function VJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HD=function(){return!!t})()}function hy(t){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hy(t)}function GJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EN(t,e)}function EN(t,e){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EN(t,e)}function c0(t,e,n){return e=WD(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WD(t){var e=KJ(t,"string");return uh(e)=="symbol"?e:e+""}function KJ(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var es=32,KA=function(t){function e(){return BJ(this,e),qJ(this,e,arguments)}return GJ(e,t),WJ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=es/2,s=es/6,o=es/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ue.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:es,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return ue.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(es,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return ue.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(es/8,"h").concat(es,"v").concat(es*3/4,"h").concat(-es,"z"),className:"recharts-legend-icon"});if(ue.isValidElement(r.legendIcon)){var u=FJ({},r);return delete u.legendIcon,ue.cloneElement(r.legendIcon,u)}return ue.createElement(GA,{fill:l,cx:a,cy:a,size:es,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:es,height:es},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,m){var g=h.formatter||l,y=Jt(c0(c0({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var x=Ft(h.value)?null:h.value;Ws(!Ft(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=h.inactive?u:h.color;return ue.createElement("li",CN({className:y,style:f,key:"legend-item-".concat(m)},fd(r.props,h,m)),ue.createElement(xN,{width:s,height:s,viewBox:d,style:p},r.renderIcon(h)),ue.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(x,h,m):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ue.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(q.PureComponent);c0(KA,"displayName","Legend");c0(KA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var YJ=Eb;function XJ(){this.__data__=new YJ,this.size=0}var JJ=XJ;function ZJ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var QJ=ZJ;function eZ(t){return this.__data__.get(t)}var tZ=eZ;function nZ(t){return this.__data__.has(t)}var rZ=nZ,iZ=Eb,aZ=IA,sZ=DA,oZ=200;function lZ(t,e){var n=this.__data__;if(n instanceof iZ){var r=n.__data__;if(!aZ||r.length<oZ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sZ(r)}return n.set(t,e),this.size=n.size,this}var cZ=lZ,uZ=Eb,dZ=JJ,fZ=QJ,hZ=tZ,pZ=rZ,mZ=cZ;function Xh(t){var e=this.__data__=new uZ(t);this.size=e.size}Xh.prototype.clear=dZ;Xh.prototype.delete=fZ;Xh.prototype.get=hZ;Xh.prototype.has=pZ;Xh.prototype.set=mZ;var qD=Xh,gZ="__lodash_hash_undefined__";function vZ(t){return this.__data__.set(t,gZ),this}var xZ=vZ;function yZ(t){return this.__data__.has(t)}var bZ=yZ,wZ=DA,SZ=xZ,NZ=bZ;function py(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new wZ;++e<n;)this.add(t[e])}py.prototype.add=py.prototype.push=SZ;py.prototype.has=NZ;var UD=py;function jZ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var VD=jZ;function kZ(t,e){return t.has(e)}var GD=kZ,AZ=UD,CZ=VD,EZ=GD,_Z=1,OZ=2;function PZ(t,e,n,r,i,a){var s=n&_Z,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,p=!0,h=n&OZ?new AZ:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var m=t[f],g=e[f];if(r)var y=s?r(g,m,f,e,t,a):r(m,g,f,t,e,a);if(y!==void 0){if(y)continue;p=!1;break}if(h){if(!CZ(e,function(x,w){if(!EZ(h,w)&&(m===x||i(m,x,n,r,a)))return h.push(w)})){p=!1;break}}else if(!(m===g||i(m,g,n,r,a))){p=!1;break}}return a.delete(t),a.delete(e),p}var KD=PZ,TZ=jo,MZ=TZ.Uint8Array,LZ=MZ;function IZ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var DZ=IZ;function RZ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var YA=RZ,r_=fg,i_=LZ,$Z=LA,zZ=KD,FZ=DZ,BZ=YA,HZ=1,WZ=2,qZ="[object Boolean]",UZ="[object Date]",VZ="[object Error]",GZ="[object Map]",KZ="[object Number]",YZ="[object RegExp]",XZ="[object Set]",JZ="[object String]",ZZ="[object Symbol]",QZ="[object ArrayBuffer]",eQ="[object DataView]",a_=r_?r_.prototype:void 0,Uw=a_?a_.valueOf:void 0;function tQ(t,e,n,r,i,a,s){switch(n){case eQ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case QZ:return!(t.byteLength!=e.byteLength||!a(new i_(t),new i_(e)));case qZ:case UZ:case KZ:return $Z(+t,+e);case VZ:return t.name==e.name&&t.message==e.message;case YZ:case JZ:return t==e+"";case GZ:var o=FZ;case XZ:var l=r&HZ;if(o||(o=BZ),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=WZ,s.set(t,e);var d=zZ(o(t),o(e),r,i,a,s);return s.delete(t),d;case ZZ:if(Uw)return Uw.call(t)==Uw.call(e)}return!1}var nQ=tQ;function rQ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var YD=rQ,iQ=YD,aQ=ga;function sQ(t,e,n){var r=e(t);return aQ(t)?r:iQ(r,n(t))}var oQ=sQ;function lQ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var cQ=lQ;function uQ(){return[]}var dQ=uQ,fQ=cQ,hQ=dQ,pQ=Object.prototype,mQ=pQ.propertyIsEnumerable,s_=Object.getOwnPropertySymbols,gQ=s_?function(t){return t==null?[]:(t=Object(t),fQ(s_(t),function(e){return mQ.call(t,e)}))}:hQ,vQ=gQ;function xQ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var yQ=xQ,bQ=Cl,wQ=El,SQ="[object Arguments]";function NQ(t){return wQ(t)&&bQ(t)==SQ}var jQ=NQ,o_=jQ,kQ=El,XD=Object.prototype,AQ=XD.hasOwnProperty,CQ=XD.propertyIsEnumerable,EQ=o_(function(){return arguments}())?o_:function(t){return kQ(t)&&AQ.call(t,"callee")&&!CQ.call(t,"callee")},XA=EQ,my={exports:{}};function _Q(){return!1}var OQ=_Q;my.exports;(function(t,e){var n=jo,r=OQ,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(my,my.exports);var JD=my.exports,PQ=9007199254740991,TQ=/^(?:0|[1-9]\d*)$/;function MQ(t,e){var n=typeof t;return e=e??PQ,!!e&&(n=="number"||n!="symbol"&&TQ.test(t))&&t>-1&&t%1==0&&t<e}var JA=MQ,LQ=9007199254740991;function IQ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=LQ}var ZA=IQ,DQ=Cl,RQ=ZA,$Q=El,zQ="[object Arguments]",FQ="[object Array]",BQ="[object Boolean]",HQ="[object Date]",WQ="[object Error]",qQ="[object Function]",UQ="[object Map]",VQ="[object Number]",GQ="[object Object]",KQ="[object RegExp]",YQ="[object Set]",XQ="[object String]",JQ="[object WeakMap]",ZQ="[object ArrayBuffer]",QQ="[object DataView]",eee="[object Float32Array]",tee="[object Float64Array]",nee="[object Int8Array]",ree="[object Int16Array]",iee="[object Int32Array]",aee="[object Uint8Array]",see="[object Uint8ClampedArray]",oee="[object Uint16Array]",lee="[object Uint32Array]",Bn={};Bn[eee]=Bn[tee]=Bn[nee]=Bn[ree]=Bn[iee]=Bn[aee]=Bn[see]=Bn[oee]=Bn[lee]=!0;Bn[zQ]=Bn[FQ]=Bn[ZQ]=Bn[BQ]=Bn[QQ]=Bn[HQ]=Bn[WQ]=Bn[qQ]=Bn[UQ]=Bn[VQ]=Bn[GQ]=Bn[KQ]=Bn[YQ]=Bn[XQ]=Bn[JQ]=!1;function cee(t){return $Q(t)&&RQ(t.length)&&!!Bn[DQ(t)]}var uee=cee;function dee(t){return function(e){return t(e)}}var ZD=dee,gy={exports:{}};gy.exports;(function(t,e){var n=sD,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(gy,gy.exports);var fee=gy.exports,hee=uee,pee=ZD,l_=fee,c_=l_&&l_.isTypedArray,mee=c_?pee(c_):hee,QD=mee,gee=yQ,vee=XA,xee=ga,yee=JD,bee=JA,wee=QD,See=Object.prototype,Nee=See.hasOwnProperty;function jee(t,e){var n=xee(t),r=!n&&vee(t),i=!n&&!r&&yee(t),a=!n&&!r&&!i&&wee(t),s=n||r||i||a,o=s?gee(t.length,String):[],l=o.length;for(var u in t)(e||Nee.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||bee(u,l)))&&o.push(u);return o}var kee=jee,Aee=Object.prototype;function Cee(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Aee;return t===n}var Eee=Cee;function _ee(t,e){return function(n){return t(e(n))}}var e7=_ee,Oee=e7,Pee=Oee(Object.keys,Object),Tee=Pee,Mee=Eee,Lee=Tee,Iee=Object.prototype,Dee=Iee.hasOwnProperty;function Ree(t){if(!Mee(t))return Lee(t);var e=[];for(var n in Object(t))Dee.call(t,n)&&n!="constructor"&&e.push(n);return e}var $ee=Ree,zee=MA,Fee=ZA;function Bee(t){return t!=null&&Fee(t.length)&&!zee(t)}var mg=Bee,Hee=kee,Wee=$ee,qee=mg;function Uee(t){return qee(t)?Hee(t):Wee(t)}var Ub=Uee,Vee=oQ,Gee=vQ,Kee=Ub;function Yee(t){return Vee(t,Kee,Gee)}var Xee=Yee,u_=Xee,Jee=1,Zee=Object.prototype,Qee=Zee.hasOwnProperty;function ete(t,e,n,r,i,a){var s=n&Jee,o=u_(t),l=o.length,u=u_(e),d=u.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var p=o[f];if(!(s?p in e:Qee.call(e,p)))return!1}var h=a.get(t),m=a.get(e);if(h&&m)return h==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);for(var y=s;++f<l;){p=o[f];var x=t[p],w=e[p];if(r)var S=s?r(w,x,p,e,t,a):r(x,w,p,t,e,a);if(!(S===void 0?x===w||i(x,w,n,r,a):S)){g=!1;break}y||(y=p=="constructor")}if(g&&!y){var N=t.constructor,j=e.constructor;N!=j&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof j=="function"&&j instanceof j)&&(g=!1)}return a.delete(t),a.delete(e),g}var tte=ete,nte=Od,rte=jo,ite=nte(rte,"DataView"),ate=ite,ste=Od,ote=jo,lte=ste(ote,"Promise"),cte=lte,ute=Od,dte=jo,fte=ute(dte,"Set"),t7=fte,hte=Od,pte=jo,mte=hte(pte,"WeakMap"),gte=mte,_N=ate,ON=IA,PN=cte,TN=t7,MN=gte,n7=Cl,Jh=lD,d_="[object Map]",vte="[object Object]",f_="[object Promise]",h_="[object Set]",p_="[object WeakMap]",m_="[object DataView]",xte=Jh(_N),yte=Jh(ON),bte=Jh(PN),wte=Jh(TN),Ste=Jh(MN),ku=n7;(_N&&ku(new _N(new ArrayBuffer(1)))!=m_||ON&&ku(new ON)!=d_||PN&&ku(PN.resolve())!=f_||TN&&ku(new TN)!=h_||MN&&ku(new MN)!=p_)&&(ku=function(t){var e=n7(t),n=e==vte?t.constructor:void 0,r=n?Jh(n):"";if(r)switch(r){case xte:return m_;case yte:return d_;case bte:return f_;case wte:return h_;case Ste:return p_}return e});var Nte=ku,Vw=qD,jte=KD,kte=nQ,Ate=tte,g_=Nte,v_=ga,x_=JD,Cte=QD,Ete=1,y_="[object Arguments]",b_="[object Array]",bv="[object Object]",_te=Object.prototype,w_=_te.hasOwnProperty;function Ote(t,e,n,r,i,a){var s=v_(t),o=v_(e),l=s?b_:g_(t),u=o?b_:g_(e);l=l==y_?bv:l,u=u==y_?bv:u;var d=l==bv,f=u==bv,p=l==u;if(p&&x_(t)){if(!x_(e))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new Vw),s||Cte(t)?jte(t,e,n,r,i,a):kte(t,e,l,n,r,i,a);if(!(n&Ete)){var h=d&&w_.call(t,"__wrapped__"),m=f&&w_.call(e,"__wrapped__");if(h||m){var g=h?t.value():t,y=m?e.value():e;return a||(a=new Vw),i(g,y,n,r,a)}}return p?(a||(a=new Vw),Ate(t,e,n,r,i,a)):!1}var Pte=Ote,Tte=Pte,S_=El;function r7(t,e,n,r,i){return t===e?!0:t==null||e==null||!S_(t)&&!S_(e)?t!==t&&e!==e:Tte(t,e,n,r,r7,i)}var QA=r7,Mte=qD,Lte=QA,Ite=1,Dte=2;function Rte(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var l=o[0],u=t[l],d=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var f=new Mte;if(r)var p=r(u,d,l,t,e,f);if(!(p===void 0?Lte(d,u,Ite|Dte,r,f):p))return!1}}return!0}var $te=Rte,zte=Kc;function Fte(t){return t===t&&!zte(t)}var i7=Fte,Bte=i7,Hte=Ub;function Wte(t){for(var e=Hte(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Bte(i)]}return e}var qte=Wte;function Ute(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var a7=Ute,Vte=$te,Gte=qte,Kte=a7;function Yte(t){var e=Gte(t);return e.length==1&&e[0][2]?Kte(e[0][0],e[0][1]):function(n){return n===t||Vte(n,t,e)}}var Xte=Yte;function Jte(t,e){return t!=null&&e in Object(t)}var Zte=Jte,Qte=hD,ene=XA,tne=ga,nne=JA,rne=ZA,ine=Ob;function ane(t,e,n){e=Qte(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=ine(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&rne(i)&&nne(s,i)&&(tne(t)||ene(t)))}var sne=ane,one=Zte,lne=sne;function cne(t,e){return t!=null&&lne(t,e,one)}var une=cne,dne=QA,fne=pD,hne=une,pne=TA,mne=i7,gne=a7,vne=Ob,xne=1,yne=2;function bne(t,e){return pne(t)&&mne(e)?gne(vne(t),e):function(n){var r=fne(n,t);return r===void 0&&r===e?hne(n,t):dne(e,r,xne|yne)}}var wne=bne;function Sne(t){return t}var Zh=Sne;function Nne(t){return function(e){return e==null?void 0:e[t]}}var jne=Nne,kne=zA;function Ane(t){return function(e){return kne(e,t)}}var Cne=Ane,Ene=jne,_ne=Cne,One=TA,Pne=Ob;function Tne(t){return One(t)?Ene(Pne(t)):_ne(t)}var Mne=Tne,Lne=Xte,Ine=wne,Dne=Zh,Rne=ga,$ne=Mne;function zne(t){return typeof t=="function"?t:t==null?Dne:typeof t=="object"?Rne(t)?Ine(t[0],t[1]):Lne(t):$ne(t)}var ko=zne;function Fne(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var s7=Fne;function Bne(t){return t!==t}var Hne=Bne;function Wne(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var qne=Wne,Une=s7,Vne=Hne,Gne=qne;function Kne(t,e,n){return e===e?Gne(t,e,n):Une(t,Vne,n)}var Yne=Kne,Xne=Yne;function Jne(t,e){var n=t==null?0:t.length;return!!n&&Xne(t,e,0)>-1}var Zne=Jne;function Qne(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var ere=Qne;function tre(){}var nre=tre,Gw=t7,rre=nre,ire=YA,are=1/0,sre=Gw&&1/ire(new Gw([,-0]))[1]==are?function(t){return new Gw(t)}:rre,ore=sre,lre=UD,cre=Zne,ure=ere,dre=GD,fre=ore,hre=YA,pre=200;function mre(t,e,n){var r=-1,i=cre,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=ure;else if(a>=pre){var u=e?null:fre(t);if(u)return hre(u);s=!1,i=dre,l=new lre}else l=e?[]:o;e:for(;++r<a;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var p=l.length;p--;)if(l[p]===f)continue e;e&&l.push(f),o.push(d)}else i(l,f,n)||(l!==o&&l.push(f),o.push(d))}return o}var gre=mre,vre=ko,xre=gre;function yre(t,e){return t&&t.length?xre(t,vre(e)):[]}var bre=yre;const N_=pn(bre);function o7(t,e,n){return e===!0?N_(t,n):Ft(e)?N_(t,e):t}function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}var wre=["ref"];function j_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ho(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j_(Object(n),!0).forEach(function(r){Vb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c7(r.key),r)}}function Nre(t,e,n){return e&&k_(t.prototype,e),n&&k_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jre(t,e,n){return e=vy(e),kre(t,l7()?Reflect.construct(e,n||[],vy(t).constructor):e.apply(t,n))}function kre(t,e){if(e&&(dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Are(t)}function Are(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l7=function(){return!!t})()}function vy(t){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vy(t)}function Cre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LN(t,e)}function LN(t,e){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},LN(t,e)}function Vb(t,e,n){return e=c7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c7(t){var e=Ere(t,"string");return dh(e)=="symbol"?e:e+""}function Ere(t,e){if(dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _re(t,e){if(t==null)return{};var n=Ore(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ore(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pre(t){return t.value}function Tre(t,e){if(ue.isValidElement(t))return ue.cloneElement(t,e);if(typeof t=="function")return ue.createElement(t,e);e.ref;var n=_re(e,wre);return ue.createElement(KA,n)}var A_=1,Ju=function(t){function e(){var n;Sre(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=jre(this,e,[].concat(i)),Vb(n,"lastBoundingBox",{width:-1,height:-1}),n}return Cre(e,t),Nre(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>A_||Math.abs(i.height-this.lastBoundingBox.height)>A_)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ho({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,f,p;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();p={top:((d||0)-m.height)/2}}else p=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Ho(Ho({},f),p)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=Ho(Ho({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return ue.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){r.wrapperNode=h}},Tre(a,Ho(Ho({},this.props),{},{payload:o7(d,u,Pre)})))}}],[{key:"getWithHeight",value:function(r,i){var a=Ho(Ho({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&nt(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(q.PureComponent);Vb(Ju,"displayName","Legend");Vb(Ju,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var C_=fg,Mre=XA,Lre=ga,E_=C_?C_.isConcatSpreadable:void 0;function Ire(t){return Lre(t)||Mre(t)||!!(E_&&t&&t[E_])}var Dre=Ire,Rre=YD,$re=Dre;function u7(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=$re),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?u7(o,e-1,n,r,i):Rre(i,o):r||(i[i.length]=o)}return i}var d7=u7;function zre(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(n(a[l],l,a)===!1)break}return e}}var Fre=zre,Bre=Fre,Hre=Bre(),Wre=Hre,qre=Wre,Ure=Ub;function Vre(t,e){return t&&qre(t,e,Ure)}var f7=Vre,Gre=mg;function Kre(t,e){return function(n,r){if(n==null)return n;if(!Gre(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Yre=Kre,Xre=f7,Jre=Yre,Zre=Jre(Xre),e3=Zre,Qre=e3,eie=mg;function tie(t,e){var n=-1,r=eie(t)?Array(t.length):[];return Qre(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var h7=tie;function nie(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var rie=nie,__=Uh;function iie(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=__(t),s=e!==void 0,o=e===null,l=e===e,u=__(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}var aie=iie,sie=aie;function oie(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=sie(i[r],a[r]);if(l){if(r>=o)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var lie=oie,Kw=$A,cie=zA,uie=ko,die=h7,fie=rie,hie=ZD,pie=lie,mie=Zh,gie=ga;function vie(t,e,n){e.length?e=Kw(e,function(a){return gie(a)?function(s){return cie(s,a.length===1?a[0]:a)}:a}):e=[mie];var r=-1;e=Kw(e,hie(uie));var i=die(t,function(a,s,o){var l=Kw(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return fie(i,function(a,s){return pie(a,s,n)})}var xie=vie;function yie(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bie=yie,wie=bie,O_=Math.max;function Sie(t,e,n){return e=O_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=O_(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),wie(t,this,o)}}var Nie=Sie;function jie(t){return function(){return t}}var kie=jie,Aie=Od,Cie=function(){try{var t=Aie(Object,"defineProperty");return t({},"",{}),t}catch{}}(),p7=Cie,Eie=kie,P_=p7,_ie=Zh,Oie=P_?function(t,e){return P_(t,"toString",{configurable:!0,enumerable:!1,value:Eie(e),writable:!0})}:_ie,Pie=Oie,Tie=800,Mie=16,Lie=Date.now;function Iie(t){var e=0,n=0;return function(){var r=Lie(),i=Mie-(r-n);if(n=r,i>0){if(++e>=Tie)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Die=Iie,Rie=Pie,$ie=Die,zie=$ie(Rie),Fie=zie,Bie=Zh,Hie=Nie,Wie=Fie;function qie(t,e){return Wie(Hie(t,e,Bie),t+"")}var Uie=qie,Vie=LA,Gie=mg,Kie=JA,Yie=Kc;function Xie(t,e,n){if(!Yie(n))return!1;var r=typeof e;return(r=="number"?Gie(n)&&Kie(e,n.length):r=="string"&&e in n)?Vie(n[e],t):!1}var Gb=Xie,Jie=d7,Zie=xie,Qie=Uie,T_=Gb,eae=Qie(function(t,e){if(t==null)return[];var n=e.length;return n>1&&T_(t,e[0],e[1])?e=[]:n>2&&T_(e[0],e[1],e[2])&&(e=[e[0]]),Zie(t,Jie(e,1),[])}),tae=eae;const t3=pn(tae);function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}function IN(){return IN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IN.apply(this,arguments)}function nae(t,e){return sae(t)||aae(t,e)||iae(t,e)||rae()}function rae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iae(t,e){if(t){if(typeof t=="string")return M_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M_(t,e)}}function M_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function sae(t){if(Array.isArray(t))return t}function L_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(n),!0).forEach(function(r){oae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oae(t,e,n){return e=lae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lae(t){var e=cae(t,"string");return u0(e)=="symbol"?e:e+""}function cae(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uae(t){return Array.isArray(t)&&Wr(t[0])&&Wr(t[1])?t.join(" ~ "):t}var dae=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,f=e.formatter,p=e.itemSorter,h=e.wrapperClassName,m=e.labelClassName,g=e.label,y=e.labelFormatter,x=e.accessibilityLayer,w=x===void 0?!1:x,S=function(){if(d&&d.length){var O={padding:0,margin:0},R=(p?t3(d,p):d).map(function(D,B){if(D.type==="none")return null;var V=Yw({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},o),Z=D.formatter||f||uae,H=D.value,Q=D.name,fe=H,le=Q;if(Z&&fe!=null&&le!=null){var L=Z(H,Q,D,B,d);if(Array.isArray(L)){var F=nae(L,2);fe=F[0],le=F[1]}else fe=L}return ue.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:V},Wr(le)?ue.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Wr(le)?ue.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ue.createElement("span",{className:"recharts-tooltip-item-value"},fe),ue.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return ue.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},N=Yw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),j=Yw({margin:0},u),E=!Zt(g),C=E?g:"",P=Jt("recharts-default-tooltip",h),T=Jt("recharts-tooltip-label",m);E&&y&&d!==void 0&&d!==null&&(C=y(g,d));var I=w?{role:"status","aria-live":"assertive"}:{};return ue.createElement("div",IN({className:P,style:N},I),ue.createElement("p",{className:T,style:j},ue.isValidElement(C)?C:"".concat(C)),S())};function d0(t){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d0(t)}function wv(t,e,n){return e=fae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fae(t){var e=hae(t,"string");return d0(e)=="symbol"?e:e+""}function hae(t,e){if(d0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(d0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bp="recharts-tooltip-wrapper",pae={visibility:"hidden"};function mae(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Jt(Bp,wv(wv(wv(wv({},"".concat(Bp,"-right"),nt(n)&&e&&nt(e.x)&&n>=e.x),"".concat(Bp,"-left"),nt(n)&&e&&nt(e.x)&&n<e.x),"".concat(Bp,"-bottom"),nt(r)&&e&&nt(e.y)&&r>=e.y),"".concat(Bp,"-top"),nt(r)&&e&&nt(e.y)&&r<e.y))}function I_(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&nt(a[r]))return a[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?d:f;if(s[r]){var p=d,h=l[r];return p<h?Math.max(f,l[r]):Math.max(d,l[r])}var m=f+o,g=l[r]+u;return m>g?Math.max(d,l[r]):Math.max(f,l[r])}function gae(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function vae(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,d,f;return s.height>0&&s.width>0&&n?(d=I_({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),f=I_({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=gae({translateX:d,translateY:f,useTranslate3d:o})):u=pae,{cssProperties:u,cssClasses:mae({translateX:d,translateY:f,coordinate:n})}}function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function D_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D_(Object(n),!0).forEach(function(r){RN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g7(r.key),r)}}function bae(t,e,n){return e&&yae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wae(t,e,n){return e=xy(e),Sae(t,m7()?Reflect.construct(e,n||[],xy(t).constructor):e.apply(t,n))}function Sae(t,e){if(e&&(fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nae(t)}function Nae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m7=function(){return!!t})()}function xy(t){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xy(t)}function jae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DN(t,e)}function DN(t,e){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DN(t,e)}function RN(t,e,n){return e=g7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g7(t){var e=kae(t,"string");return fh(e)=="symbol"?e:e+""}function kae(t,e){if(fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $_=1,Aae=function(t){function e(){var n;xae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=wae(this,e,[].concat(i)),RN(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),RN(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return jae(e,t),bae(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>$_||Math.abs(r.height-this.state.lastBoundingBox.height)>$_)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,p=i.isAnimationActive,h=i.offset,m=i.position,g=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,S=vae({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),N=S.cssClasses,j=S.cssProperties,E=R_(R_({transition:p&&a?"transform ".concat(o,"ms ").concat(l):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return ue.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(P){r.wrapperNode=P}},u)}}])}(q.PureComponent),Cae=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Qh={isSsr:Cae()};function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function z_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z_(Object(n),!0).forEach(function(r){n3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x7(r.key),r)}}function Oae(t,e,n){return e&&_ae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pae(t,e,n){return e=yy(e),Tae(t,v7()?Reflect.construct(e,n||[],yy(t).constructor):e.apply(t,n))}function Tae(t,e){if(e&&(hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mae(t)}function Mae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v7=function(){return!!t})()}function yy(t){return yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yy(t)}function Lae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$N(t,e)}function $N(t,e){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$N(t,e)}function n3(t,e,n){return e=x7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x7(t){var e=Iae(t,"string");return hh(e)=="symbol"?e:e+""}function Iae(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Dae(t){return t.dataKey}function Rae(t,e){return ue.isValidElement(t)?ue.cloneElement(t,e):typeof t=="function"?ue.createElement(t,e):ue.createElement(dae,e)}var rs=function(t){function e(){return Eae(this,e),Pae(this,e,arguments)}return Lae(e,t),Oae(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,p=i.isAnimationActive,h=i.offset,m=i.payload,g=i.payloadUniqBy,y=i.position,x=i.reverseDirection,w=i.useTranslate3d,S=i.viewBox,N=i.wrapperStyle,j=m??[];f&&j.length&&(j=o7(m.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),g,Dae));var E=j.length>0;return ue.createElement(Aae,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:p,active:a,coordinate:d,hasPayload:E,offset:h,position:y,reverseDirection:x,useTranslate3d:w,viewBox:S,wrapperStyle:N},Rae(u,F_(F_({},this.props),{},{payload:j})))}}])}(q.PureComponent);n3(rs,"displayName","Tooltip");n3(rs,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Qh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $ae=jo,zae=function(){return $ae.Date.now()},Fae=zae,Bae=/\s/;function Hae(t){for(var e=t.length;e--&&Bae.test(t.charAt(e)););return e}var Wae=Hae,qae=Wae,Uae=/^\s+/;function Vae(t){return t&&t.slice(0,qae(t)+1).replace(Uae,"")}var Gae=Vae,Kae=Gae,B_=Kc,Yae=Uh,H_=NaN,Xae=/^[-+]0x[0-9a-f]+$/i,Jae=/^0b[01]+$/i,Zae=/^0o[0-7]+$/i,Qae=parseInt;function ese(t){if(typeof t=="number")return t;if(Yae(t))return H_;if(B_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=B_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Kae(t);var n=Jae.test(t);return n||Zae.test(t)?Qae(t.slice(2),n?2:8):Xae.test(t)?H_:+t}var y7=ese,tse=Kc,Xw=Fae,W_=y7,nse="Expected a function",rse=Math.max,ise=Math.min;function ase(t,e,n){var r,i,a,s,o,l,u=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(nse);e=W_(e)||0,tse(n)&&(d=!!n.leading,f="maxWait"in n,a=f?rse(W_(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p);function h(E){var C=r,P=i;return r=i=void 0,u=E,s=t.apply(P,C),s}function m(E){return u=E,o=setTimeout(x,e),d?h(E):s}function g(E){var C=E-l,P=E-u,T=e-C;return f?ise(T,a-P):T}function y(E){var C=E-l,P=E-u;return l===void 0||C>=e||C<0||f&&P>=a}function x(){var E=Xw();if(y(E))return w(E);o=setTimeout(x,g(E))}function w(E){return o=void 0,p&&r?h(E):(r=i=void 0,s)}function S(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function N(){return o===void 0?s:w(Xw())}function j(){var E=Xw(),C=y(E);if(r=arguments,i=this,l=E,C){if(o===void 0)return m(l);if(f)return clearTimeout(o),o=setTimeout(x,e),h(l)}return o===void 0&&(o=setTimeout(x,e)),s}return j.cancel=S,j.flush=N,j}var sse=ase,ose=sse,lse=Kc,cse="Expected a function";function use(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(cse);return lse(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ose(t,e,{leading:r,maxWait:e,trailing:i})}var dse=use;const b7=pn(dse);function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function q_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q_(Object(n),!0).forEach(function(r){fse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fse(t,e,n){return e=hse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hse(t){var e=pse(t,"string");return f0(e)=="symbol"?e:e+""}function pse(t,e){if(f0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mse(t,e){return yse(t)||xse(t,e)||vse(t,e)||gse()}function gse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vse(t,e){if(t){if(typeof t=="string")return U_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U_(t,e)}}function U_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xse(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function yse(t){if(Array.isArray(t))return t}var zN=q.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,h=t.children,m=t.debounce,g=m===void 0?0:m,y=t.id,x=t.className,w=t.onResize,S=t.style,N=S===void 0?{}:S,j=q.useRef(null),E=q.useRef();E.current=w,q.useImperativeHandle(e,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var C=q.useState({containerWidth:i.width,containerHeight:i.height}),P=mse(C,2),T=P[0],I=P[1],k=q.useCallback(function(R,D){I(function(B){var V=Math.round(R),Z=Math.round(D);return B.containerWidth===V&&B.containerHeight===Z?B:{containerWidth:V,containerHeight:Z}})},[]);q.useEffect(function(){var R=function(Q){var fe,le=Q[0].contentRect,L=le.width,F=le.height;k(L,F),(fe=E.current)===null||fe===void 0||fe.call(E,L,F)};g>0&&(R=b7(R,g,{trailing:!0,leading:!1}));var D=new ResizeObserver(R),B=j.current.getBoundingClientRect(),V=B.width,Z=B.height;return k(V,Z),D.observe(j.current),function(){D.disconnect()}},[k,g]);var O=q.useMemo(function(){var R=T.containerWidth,D=T.containerHeight;if(R<0||D<0)return null;Ws(zu(s)||zu(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Ws(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=zu(s)?R:s,V=zu(l)?D:l;n&&n>0&&(B?V=B/n:V&&(B=V*n),p&&V>p&&(V=p)),Ws(B>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,V,s,l,d,f,n);var Z=!Array.isArray(h)&&dl(h.type).endsWith("Chart");return ue.Children.map(h,function(H){return ue.isValidElement(H)?q.cloneElement(H,Sv({width:B,height:V},Z?{style:Sv({height:"100%",width:"100%",maxHeight:V,maxWidth:B},H.props.style)}:{})):H})},[n,h,l,p,f,d,T,s]);return ue.createElement("div",{id:y?"".concat(y):void 0,className:Jt("recharts-responsive-container",x),style:Sv(Sv({},N),{},{width:s,height:l,minWidth:d,minHeight:f,maxHeight:p}),ref:j},O)}),ph=function(e){return null};ph.displayName="Cell";function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function V_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V_(Object(n),!0).forEach(function(r){bse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bse(t,e,n){return e=wse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wse(t){var e=Sse(t,"string");return h0(e)=="symbol"?e:e+""}function Sse(t,e){if(h0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tf={widthCache:{},cacheCount:0},Nse=2e3,jse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},G_="recharts_measurement_span";function kse(t){var e=FN({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Nm=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qh.isSsr)return{width:0,height:0};var r=kse(n),i=JSON.stringify({text:e,copyStyle:r});if(tf.widthCache[i])return tf.widthCache[i];try{var a=document.getElementById(G_);a||(a=document.createElement("span"),a.setAttribute("id",G_),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=FN(FN({},jse),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return tf.widthCache[i]=l,++tf.cacheCount>Nse&&(tf.cacheCount=0,tf.widthCache={}),l}catch{return{width:0,height:0}}},Ase=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function by(t,e){return Ose(t)||_se(t,e)||Ese(t,e)||Cse()}function Cse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ese(t,e){if(t){if(typeof t=="string")return K_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(t,e)}}function K_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _se(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ose(t){if(Array.isArray(t))return t}function Pse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mse(r.key),r)}}function Tse(t,e,n){return e&&Y_(t.prototype,e),n&&Y_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mse(t){var e=Lse(t,"string");return p0(e)=="symbol"?e:e+""}function Lse(t,e){if(p0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ise=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Dse=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,w7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rse=Object.keys(w7),Of="NaN";function $se(t,e){return t*w7[e]}var Nv=function(){function t(e,n){Pse(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Ise.test(n)&&(this.num=NaN,this.unit=""),Rse.includes(n)&&(this.num=$se(e,n),this.unit="px")}return Tse(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Dse.exec(n))!==null&&r!==void 0?r:[],a=by(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function S7(t){if(t.includes(Of))return Of;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=X_.exec(e))!==null&&n!==void 0?n:[],i=by(r,4),a=i[1],s=i[2],o=i[3],l=Nv.parse(a??""),u=Nv.parse(o??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Of;e=e.replace(X_,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=J_.exec(e))!==null&&f!==void 0?f:[],h=by(p,4),m=h[1],g=h[2],y=h[3],x=Nv.parse(m??""),w=Nv.parse(y??""),S=g==="+"?x.add(w):x.subtract(w);if(S.isNaN())return Of;e=e.replace(J_,S.toString())}return e}var Z_=/\(([^()]*)\)/;function zse(t){for(var e=t;e.includes("(");){var n=Z_.exec(e),r=by(n,2),i=r[1];e=e.replace(Z_,S7(i))}return e}function Fse(t){var e=t.replace(/\s+/g,"");return e=zse(e),e=S7(e),e}function Bse(t){try{return Fse(t)}catch{return Of}}function Jw(t){var e=Bse(t.slice(5,-1));return e===Of?"":e}var Hse=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Wse=["dx","dy","angle","className","breakAll"];function BN(){return BN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BN.apply(this,arguments)}function Q_(t,e){if(t==null)return{};var n=qse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eO(t,e){return Kse(t)||Gse(t,e)||Vse(t,e)||Use()}function Use(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vse(t,e){if(t){if(typeof t=="string")return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gse(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Kse(t){if(Array.isArray(t))return t}var N7=/[ \f\n\r\t\v\u2028\u2029]+/,j7=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];Zt(n)||(r?a=n.toString().split(""):a=n.toString().split(N7));var s=a.map(function(l){return{word:l,width:Nm(l,i).width}}),o=r?0:Nm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},Yse=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,d=nt(s),f=o,p=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(V,Z){var H=Z.word,Q=Z.width,fe=V[V.length-1];if(fe&&(i==null||a||fe.width+Q+r<Number(i)))fe.words.push(H),fe.width+=Q+r;else{var le={words:[H],width:Q};V.push(le)}return V},[])},h=p(n),m=function(B){return B.reduce(function(V,Z){return V.width>Z.width?V:Z})};if(!d)return h;for(var g="",y=function(B){var V=f.slice(0,B),Z=j7({breakAll:u,style:l,children:V+g}).wordsWithComputedWidth,H=p(Z),Q=H.length>s||m(H).width>Number(i);return[Q,H]},x=0,w=f.length-1,S=0,N;x<=w&&S<=f.length-1;){var j=Math.floor((x+w)/2),E=j-1,C=y(E),P=eO(C,2),T=P[0],I=P[1],k=y(j),O=eO(k,1),R=O[0];if(!T&&!R&&(x=j+1),T&&R&&(w=j-1),!T&&R){N=I;break}S++}return N||h},nO=function(e){var n=Zt(e)?[]:e.toString().split(N7);return[{words:n}]},Xse=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Qh.isSsr){var l,u,d=j7({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;l=f,u=p}else return nO(i);return Yse({breakAll:s,children:i,maxLines:o,style:a},l,u,n,r)}return nO(i)},rO="#808080",hd=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,h=p===void 0?"start":p,m=e.verticalAnchor,g=m===void 0?"end":m,y=e.fill,x=y===void 0?rO:y,w=Q_(e,Hse),S=q.useMemo(function(){return Xse({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),N=w.dx,j=w.dy,E=w.angle,C=w.className,P=w.breakAll,T=Q_(w,Wse);if(!Wr(r)||!Wr(a))return null;var I=r+(nt(N)?N:0),k=a+(nt(j)?j:0),O;switch(g){case"start":O=Jw("calc(".concat(u,")"));break;case"middle":O=Jw("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:O=Jw("calc(".concat(S.length-1," * -").concat(o,")"));break}var R=[];if(f){var D=S[0].width,B=w.width;R.push("scale(".concat((nt(B)?B/D:1)/D,")"))}return E&&R.push("rotate(".concat(E,", ").concat(I,", ").concat(k,")")),R.length&&(T.transform=R.join(" ")),ue.createElement("text",BN({},It(T,!0),{x:I,y:k,className:Jt("recharts-text",C),textAnchor:h,fill:x.includes("url")?rO:x}),S.map(function(V,Z){var H=V.words.join(P?"":" ");return ue.createElement("tspan",{x:I,dy:Z===0?O:o,key:"".concat(H,"-").concat(Z)},H)}))};function Tc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jse(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r3(t){let e,n,r;t.length!==2?(e=Tc,n=(o,l)=>Tc(t(o),l),r=(o,l)=>t(o)-l):(e=t===Tc||t===Jse?t:Zse,n=t,r=t);function i(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;n(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,l,u=0,d=o.length){const f=i(o,l,u,d-1);return f>u&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:s,right:a}}function Zse(){return 0}function k7(t){return t===null?NaN:+t}function*Qse(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const eoe=r3(Tc),gg=eoe.right;r3(k7).center;class iO extends Map{constructor(e,n=roe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(aO(this,e))}has(e){return super.has(aO(this,e))}set(e,n){return super.set(toe(this,e),n)}delete(e){return super.delete(noe(this,e))}}function aO({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function toe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function noe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function roe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ioe(t=Tc){if(t===Tc)return A7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function A7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const aoe=Math.sqrt(50),soe=Math.sqrt(10),ooe=Math.sqrt(2);function wy(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=aoe?10:a>=soe?5:a>=ooe?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?wy(t,e,n*2):[o,l,u]}function HN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?wy(e,t,n):wy(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function WN(t,e,n){return e=+e,t=+t,n=+n,wy(t,e,n)[2]}function qN(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?WN(e,t,n):WN(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sO(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function oO(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function C7(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?A7:ioe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,d=Math.log(l),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+p)),m=Math.min(r,Math.floor(e+(l-u)*f/l+p));C7(t,e,h,m,i)}const a=t[e];let s=n,o=r;for(Hp(t,n,e),i(t[r],a)>0&&Hp(t,n,r);s<o;){for(Hp(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Hp(t,n,o):(++o,Hp(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Hp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function loe(t,e,n){if(t=Float64Array.from(Qse(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return oO(t);if(e>=1)return sO(t);var r,i=(r-1)*e,a=Math.floor(i),s=sO(C7(t,a).subarray(0,a+1)),o=oO(t.subarray(a+1));return s+(o-s)*(i-a)}}function coe(t,e,n=k7){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function uoe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ws(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _l(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const UN=Symbol("implicit");function i3(){var t=new iO,e=[],n=[],r=UN;function i(a){let s=t.get(a);if(s===void 0){if(r!==UN)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new iO;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return i3(e,n).unknown(r)},ws.apply(i,arguments),i}function m0(){var t=i3().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,h=i<r,m=h?i:r,g=h?r:i;a=(g-m)/Math.max(1,p-l+u*2),o&&(a=Math.floor(a)),m+=(g-m-a*(p-l))*d,s=a*(1-l),o&&(m=Math.round(m),s=Math.round(s));var y=uoe(p).map(function(x){return m+a*x});return n(h?y.reverse():y)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(p){return arguments.length?(o=!!p,f()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,u=+p),f()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),f()):l},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return m0(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(d)},ws.apply(f(),arguments)}function E7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return E7(e())},t}function jm(){return E7(m0.apply(null,arguments).paddingInner(1))}function a3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _7(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vg(){}var g0=.7,Sy=1/g0,Vf="\\s*([+-]?\\d+)\\s*",v0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",doe=/^#([0-9a-f]{3,8})$/,foe=new RegExp(`^rgb\\(${Vf},${Vf},${Vf}\\)$`),hoe=new RegExp(`^rgb\\(${vo},${vo},${vo}\\)$`),poe=new RegExp(`^rgba\\(${Vf},${Vf},${Vf},${v0}\\)$`),moe=new RegExp(`^rgba\\(${vo},${vo},${vo},${v0}\\)$`),goe=new RegExp(`^hsl\\(${v0},${vo},${vo}\\)$`),voe=new RegExp(`^hsla\\(${v0},${vo},${vo},${v0}\\)$`),lO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a3(vg,x0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cO,formatHex:cO,formatHex8:xoe,formatHsl:yoe,formatRgb:uO,toString:uO});function cO(){return this.rgb().formatHex()}function xoe(){return this.rgb().formatHex8()}function yoe(){return O7(this).formatHsl()}function uO(){return this.rgb().formatRgb()}function x0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=doe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dO(e):n===3?new da(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?jv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?jv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=foe.exec(t))?new da(e[1],e[2],e[3],1):(e=hoe.exec(t))?new da(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=poe.exec(t))?jv(e[1],e[2],e[3],e[4]):(e=moe.exec(t))?jv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=goe.exec(t))?pO(e[1],e[2]/100,e[3]/100,1):(e=voe.exec(t))?pO(e[1],e[2]/100,e[3]/100,e[4]):lO.hasOwnProperty(t)?dO(lO[t]):t==="transparent"?new da(NaN,NaN,NaN,0):null}function dO(t){return new da(t>>16&255,t>>8&255,t&255,1)}function jv(t,e,n,r){return r<=0&&(t=e=n=NaN),new da(t,e,n,r)}function boe(t){return t instanceof vg||(t=x0(t)),t?(t=t.rgb(),new da(t.r,t.g,t.b,t.opacity)):new da}function VN(t,e,n,r){return arguments.length===1?boe(t):new da(t,e,n,r??1)}function da(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}a3(da,VN,_7(vg,{brighter(t){return t=t==null?Sy:Math.pow(Sy,t),new da(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?g0:Math.pow(g0,t),new da(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new da(Zu(this.r),Zu(this.g),Zu(this.b),Ny(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fO,formatHex:fO,formatHex8:woe,formatRgb:hO,toString:hO}));function fO(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}`}function woe(){return`#${Fu(this.r)}${Fu(this.g)}${Fu(this.b)}${Fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function hO(){const t=Ny(this.opacity);return`${t===1?"rgb(":"rgba("}${Zu(this.r)}, ${Zu(this.g)}, ${Zu(this.b)}${t===1?")":`, ${t})`}`}function Ny(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fu(t){return t=Zu(t),(t<16?"0":"")+t.toString(16)}function pO(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $s(t,e,n,r)}function O7(t){if(t instanceof $s)return new $s(t.h,t.s,t.l,t.opacity);if(t instanceof vg||(t=x0(t)),!t)return new $s;if(t instanceof $s)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new $s(s,o,l,t.opacity)}function Soe(t,e,n,r){return arguments.length===1?O7(t):new $s(t,e,n,r??1)}function $s(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}a3($s,Soe,_7(vg,{brighter(t){return t=t==null?Sy:Math.pow(Sy,t),new $s(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?g0:Math.pow(g0,t),new $s(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new da(Zw(t>=240?t-240:t+120,i,r),Zw(t,i,r),Zw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $s(mO(this.h),kv(this.s),kv(this.l),Ny(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ny(this.opacity);return`${t===1?"hsl(":"hsla("}${mO(this.h)}, ${kv(this.s)*100}%, ${kv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mO(t){return t=(t||0)%360,t<0?t+360:t}function kv(t){return Math.max(0,Math.min(1,t||0))}function Zw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const s3=t=>()=>t;function Noe(t,e){return function(n){return t+n*e}}function joe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function koe(t){return(t=+t)==1?P7:function(e,n){return n-e?joe(e,n,t):s3(isNaN(e)?n:e)}}function P7(t,e){var n=e-t;return n?Noe(t,n):s3(isNaN(t)?e:t)}const gO=function t(e){var n=koe(e);function r(i,a){var s=n((i=VN(i)).r,(a=VN(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=P7(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=l(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Aoe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Coe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Eoe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ep(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function _oe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function jy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ooe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ep(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var GN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qw=new RegExp(GN.source,"g");function Poe(t){return function(){return t}}function Toe(t){return function(e){return t(e)+""}}function Moe(t,e){var n=GN.lastIndex=Qw.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=GN.exec(t))&&(i=Qw.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:jy(r,i)})),n=Qw.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Toe(l[0].x):Poe(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function ep(t,e){var n=typeof e,r;return e==null||n==="boolean"?s3(e):(n==="number"?jy:n==="string"?(r=x0(e))?(e=r,gO):Moe:e instanceof x0?gO:e instanceof Date?_oe:Coe(e)?Aoe:Array.isArray(e)?Eoe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ooe:jy)(t,e)}function o3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Loe(t,e){e===void 0&&(e=t,t=ep);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Ioe(t){return function(){return t}}function ky(t){return+t}var vO=[0,1];function Vi(t){return t}function KN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ioe(isNaN(e)?NaN:.5)}function Doe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Roe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=KN(i,r),a=n(s,a)):(r=KN(r,i),a=n(a,s)),function(o){return a(r(o))}}function $oe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=KN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=gg(t,o,1,r)-1;return a[l](i[l](o))}}function xg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Kb(){var t=vO,e=vO,n=ep,r,i,a,s=Vi,o,l,u;function d(){var p=Math.min(t.length,e.length);return s!==Vi&&(s=Doe(t[0],t[p-1])),o=p>2?$oe:Roe,l=u=null,f}function f(p){return p==null||isNaN(p=+p)?a:(l||(l=o(t.map(r),e,n)))(r(s(p)))}return f.invert=function(p){return s(i((u||(u=o(e,t.map(r),jy)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,ky),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),n=o3,d()},f.clamp=function(p){return arguments.length?(s=p?!0:Vi,d()):s!==Vi},f.interpolate=function(p){return arguments.length?(n=p,d()):n},f.unknown=function(p){return arguments.length?(a=p,f):a},function(p,h){return r=p,i=h,d()}}function l3(){return Kb()(Vi,Vi)}function zoe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ay(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function mh(t){return t=Ay(Math.abs(t)),t?t[1]:NaN}function Foe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Boe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hoe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function y0(t){if(!(e=Hoe.exec(t)))throw new Error("invalid format: "+t);var e;return new c3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}y0.prototype=c3.prototype;function c3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}c3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Woe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var T7;function qoe(t,e){var n=Ay(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(T7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ay(t,Math.max(0,e+a-1))[0]}function xO(t,e){var n=Ay(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const yO={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:zoe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>xO(t*100,e),r:xO,s:qoe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function bO(t){return t}var wO=Array.prototype.map,SO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Uoe(t){var e=t.grouping===void 0||t.thousands===void 0?bO:Foe(wO.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?bO:Boe(wO.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=y0(f);var p=f.fill,h=f.align,m=f.sign,g=f.symbol,y=f.zero,x=f.width,w=f.comma,S=f.precision,N=f.trim,j=f.type;j==="n"?(w=!0,j="g"):yO[j]||(S===void 0&&(S=12),N=!0,j="g"),(y||p==="0"&&h==="=")&&(y=!0,p="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=g==="$"?r:/[%p]/.test(j)?s:"",P=yO[j],T=/[defgprs%]/.test(j);S=S===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function I(k){var O=E,R=C,D,B,V;if(j==="c")R=P(k)+R,k="";else{k=+k;var Z=k<0||1/k<0;if(k=isNaN(k)?l:P(Math.abs(k),S),N&&(k=Woe(k)),Z&&+k==0&&m!=="+"&&(Z=!1),O=(Z?m==="("?m:o:m==="-"||m==="("?"":m)+O,R=(j==="s"?SO[8+T7/3]:"")+R+(Z&&m==="("?")":""),T){for(D=-1,B=k.length;++D<B;)if(V=k.charCodeAt(D),48>V||V>57){R=(V===46?i+k.slice(D+1):k.slice(D))+R,k=k.slice(0,D);break}}}w&&!y&&(k=e(k,1/0));var H=O.length+k.length+R.length,Q=H<x?new Array(x-H+1).join(p):"";switch(w&&y&&(k=e(Q+k,Q.length?x-R.length:1/0),Q=""),h){case"<":k=O+k+R+Q;break;case"=":k=O+Q+k+R;break;case"^":k=Q.slice(0,H=Q.length>>1)+O+k+R+Q.slice(H);break;default:k=Q+O+k+R;break}return a(k)}return I.toString=function(){return f+""},I}function d(f,p){var h=u((f=y0(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(mh(p)/3)))*3,g=Math.pow(10,-m),y=SO[8+m/3];return function(x){return h(g*x)+y}}return{format:u,formatPrefix:d}}var Av,u3,M7;Voe({thousands:",",grouping:[3],currency:["$",""]});function Voe(t){return Av=Uoe(t),u3=Av.format,M7=Av.formatPrefix,Av}function Goe(t){return Math.max(0,-mh(Math.abs(t)))}function Koe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mh(e)/3)))*3-mh(Math.abs(t)))}function Yoe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mh(e)-mh(t))+1}function L7(t,e,n,r){var i=qN(t,e,n),a;switch(r=y0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Koe(i,s))&&(r.precision=a),M7(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Yoe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Goe(i))&&(r.precision=a-(r.type==="%")*2);break}}return u3(r)}function Yc(t){var e=t.domain;return t.ticks=function(n){var r=e();return HN(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return L7(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=WN(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function Cy(){var t=l3();return t.copy=function(){return xg(t,Cy())},ws.apply(t,arguments),Yc(t)}function I7(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ky),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return I7(t).unknown(e)},t=arguments.length?Array.from(t,ky):[0,1],Yc(n)}function D7(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function NO(t){return Math.log(t)}function jO(t){return Math.exp(t)}function Xoe(t){return-Math.log(-t)}function Joe(t){return-Math.exp(-t)}function Zoe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Qoe(t){return t===10?Zoe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ele(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function kO(t){return(e,n)=>-t(-e,n)}function d3(t){const e=t(NO,jO),n=e.domain;let r=10,i,a;function s(){return i=ele(r),a=Qoe(r),n()[0]<0?(i=kO(i),a=kO(a),t(Xoe,Joe)):t(NO,jO),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=i(u),h=i(d),m,g;const y=o==null?10:+o;let x=[];if(!(r%1)&&h-p<y){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(m=1;m<r;++m)if(g=p<0?m/a(-p):m*a(p),!(g<u)){if(g>d)break;x.push(g)}}else for(;p<=h;++p)for(m=r-1;m>=1;--m)if(g=p>0?m/a(-p):m*a(p),!(g<u)){if(g>d)break;x.push(g)}x.length*2<y&&(x=HN(u,d,y))}else x=HN(p,h,Math.min(h-p,y)).map(a);return f?x.reverse():x},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=y0(l)).precision==null&&(l.trim=!0),l=u3(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?l(d):""}},e.nice=()=>n(D7(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function R7(){const t=d3(Kb()).domain([1,10]);return t.copy=()=>xg(t,R7()).base(t.base()),ws.apply(t,arguments),t}function AO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function CO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function f3(t){var e=1,n=t(AO(e),CO(e));return n.constant=function(r){return arguments.length?t(AO(e=+r),CO(e)):e},Yc(n)}function $7(){var t=f3(Kb());return t.copy=function(){return xg(t,$7()).constant(t.constant())},ws.apply(t,arguments)}function EO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tle(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function nle(t){return t<0?-t*t:t*t}function h3(t){var e=t(Vi,Vi),n=1;function r(){return n===1?t(Vi,Vi):n===.5?t(tle,nle):t(EO(n),EO(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Yc(e)}function p3(){var t=h3(Kb());return t.copy=function(){return xg(t,p3()).exponent(t.exponent())},ws.apply(t,arguments),t}function rle(){return p3.apply(null,arguments).exponent(.5)}function _O(t){return Math.sign(t)*t*t}function ile(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function z7(){var t=l3(),e=[0,1],n=!1,r;function i(a){var s=ile(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(_O(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,ky)).map(_O)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return z7(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ws.apply(i,arguments),Yc(i)}function F7(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=coe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[gg(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Tc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return F7().domain(t).range(e).unknown(r)},ws.apply(a,arguments)}function B7(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[gg(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return B7().domain([t,e]).range(i).unknown(a)},ws.apply(Yc(s),arguments)}function H7(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[gg(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return H7().domain(t).range(e).unknown(n)},ws.apply(i,arguments)}const e5=new Date,t5=new Date;function qr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>qr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(e5.setTime(+a),t5.setTime(+s),t(e5),t(t5),Math.floor(n(e5,t5))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Ey=qr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ey.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ey);Ey.range;const al=1e3,ds=al*60,sl=ds*60,wl=sl*24,m3=wl*7,OO=wl*30,n5=wl*365,Bu=qr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*al)},(t,e)=>(e-t)/al,t=>t.getUTCSeconds());Bu.range;const g3=qr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*al)},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getMinutes());g3.range;const v3=qr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ds)},(t,e)=>(e-t)/ds,t=>t.getUTCMinutes());v3.range;const x3=qr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*al-t.getMinutes()*ds)},(t,e)=>{t.setTime(+t+e*sl)},(t,e)=>(e-t)/sl,t=>t.getHours());x3.range;const y3=qr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*sl)},(t,e)=>(e-t)/sl,t=>t.getUTCHours());y3.range;const yg=qr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ds)/wl,t=>t.getDate()-1);yg.range;const Yb=qr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wl,t=>t.getUTCDate()-1);Yb.range;const W7=qr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/wl,t=>Math.floor(t/wl));W7.range;function Pd(t){return qr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ds)/m3)}const Xb=Pd(0),_y=Pd(1),ale=Pd(2),sle=Pd(3),gh=Pd(4),ole=Pd(5),lle=Pd(6);Xb.range;_y.range;ale.range;sle.range;gh.range;ole.range;lle.range;function Td(t){return qr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/m3)}const Jb=Td(0),Oy=Td(1),cle=Td(2),ule=Td(3),vh=Td(4),dle=Td(5),fle=Td(6);Jb.range;Oy.range;cle.range;ule.range;vh.range;dle.range;fle.range;const b3=qr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());b3.range;const w3=qr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());w3.range;const Sl=qr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Sl.range;const Nl=qr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Nl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Nl.range;function q7(t,e,n,r,i,a){const s=[[Bu,1,al],[Bu,5,5*al],[Bu,15,15*al],[Bu,30,30*al],[a,1,ds],[a,5,5*ds],[a,15,15*ds],[a,30,30*ds],[i,1,sl],[i,3,3*sl],[i,6,6*sl],[i,12,12*sl],[r,1,wl],[r,2,2*wl],[n,1,m3],[e,1,OO],[e,3,3*OO],[t,1,n5]];function o(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:l(u,d,f),m=h?h.range(u,+d+1):[];return p?m.reverse():m}function l(u,d,f){const p=Math.abs(d-u)/f,h=r3(([,,y])=>y).right(s,p);if(h===s.length)return t.every(qN(u/n5,d/n5,f));if(h===0)return Ey.every(Math.max(qN(u,d,f),1));const[m,g]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return m.every(g)}return[o,l]}const[hle,ple]=q7(Nl,w3,Jb,W7,y3,v3),[mle,gle]=q7(Sl,b3,Xb,yg,x3,g3);function r5(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i5(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function vle(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=qp(i),d=Up(i),f=qp(a),p=Up(a),h=qp(s),m=Up(s),g=qp(o),y=Up(o),x=qp(l),w=Up(l),S={a:Z,A:H,b:Q,B:fe,c:null,d:DO,e:DO,f:Fle,g:Xle,G:Zle,H:Rle,I:$le,j:zle,L:U7,m:Ble,M:Hle,p:le,q:L,Q:zO,s:FO,S:Wle,u:qle,U:Ule,V:Vle,w:Gle,W:Kle,x:null,X:null,y:Yle,Y:Jle,Z:Qle,"%":$O},N={a:F,A:G,b:ee,B:ie,c:null,d:RO,e:RO,f:rce,g:hce,G:mce,H:ece,I:tce,j:nce,L:G7,m:ice,M:ace,p:se,q:ye,Q:zO,s:FO,S:sce,u:oce,U:lce,V:cce,w:uce,W:dce,x:null,X:null,y:fce,Y:pce,Z:gce,"%":$O},j={a:I,A:k,b:O,B:R,c:D,d:LO,e:LO,f:Mle,g:MO,G:TO,H:IO,I:IO,j:_le,L:Tle,m:Ele,M:Ole,p:T,q:Cle,Q:Ile,s:Dle,S:Ple,u:Sle,U:Nle,V:jle,w:wle,W:kle,x:B,X:V,y:MO,Y:TO,Z:Ale,"%":Lle};S.x=E(n,S),S.X=E(r,S),S.c=E(e,S),N.x=E(n,N),N.X=E(r,N),N.c=E(e,N);function E(oe,we){return function(be){var de=[],$e=-1,He=0,Y=oe.length,he,Ke,qe;for(be instanceof Date||(be=new Date(+be));++$e<Y;)oe.charCodeAt($e)===37&&(de.push(oe.slice(He,$e)),(Ke=PO[he=oe.charAt(++$e)])!=null?he=oe.charAt(++$e):Ke=he==="e"?" ":"0",(qe=we[he])&&(he=qe(be,Ke)),de.push(he),He=$e+1);return de.push(oe.slice(He,$e)),de.join("")}}function C(oe,we){return function(be){var de=Wp(1900,void 0,1),$e=P(de,oe,be+="",0),He,Y;if($e!=be.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(we&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(He=i5(Wp(de.y,0,1)),Y=He.getUTCDay(),He=Y>4||Y===0?Oy.ceil(He):Oy(He),He=Yb.offset(He,(de.V-1)*7),de.y=He.getUTCFullYear(),de.m=He.getUTCMonth(),de.d=He.getUTCDate()+(de.w+6)%7):(He=r5(Wp(de.y,0,1)),Y=He.getDay(),He=Y>4||Y===0?_y.ceil(He):_y(He),He=yg.offset(He,(de.V-1)*7),de.y=He.getFullYear(),de.m=He.getMonth(),de.d=He.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Y="Z"in de?i5(Wp(de.y,0,1)).getUTCDay():r5(Wp(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Y+5)%7:de.w+de.U*7-(Y+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,i5(de)):r5(de)}}function P(oe,we,be,de){for(var $e=0,He=we.length,Y=be.length,he,Ke;$e<He;){if(de>=Y)return-1;if(he=we.charCodeAt($e++),he===37){if(he=we.charAt($e++),Ke=j[he in PO?we.charAt($e++):he],!Ke||(de=Ke(oe,be,de))<0)return-1}else if(he!=be.charCodeAt(de++))return-1}return de}function T(oe,we,be){var de=u.exec(we.slice(be));return de?(oe.p=d.get(de[0].toLowerCase()),be+de[0].length):-1}function I(oe,we,be){var de=h.exec(we.slice(be));return de?(oe.w=m.get(de[0].toLowerCase()),be+de[0].length):-1}function k(oe,we,be){var de=f.exec(we.slice(be));return de?(oe.w=p.get(de[0].toLowerCase()),be+de[0].length):-1}function O(oe,we,be){var de=x.exec(we.slice(be));return de?(oe.m=w.get(de[0].toLowerCase()),be+de[0].length):-1}function R(oe,we,be){var de=g.exec(we.slice(be));return de?(oe.m=y.get(de[0].toLowerCase()),be+de[0].length):-1}function D(oe,we,be){return P(oe,e,we,be)}function B(oe,we,be){return P(oe,n,we,be)}function V(oe,we,be){return P(oe,r,we,be)}function Z(oe){return s[oe.getDay()]}function H(oe){return a[oe.getDay()]}function Q(oe){return l[oe.getMonth()]}function fe(oe){return o[oe.getMonth()]}function le(oe){return i[+(oe.getHours()>=12)]}function L(oe){return 1+~~(oe.getMonth()/3)}function F(oe){return s[oe.getUTCDay()]}function G(oe){return a[oe.getUTCDay()]}function ee(oe){return l[oe.getUTCMonth()]}function ie(oe){return o[oe.getUTCMonth()]}function se(oe){return i[+(oe.getUTCHours()>=12)]}function ye(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var we=E(oe+="",S);return we.toString=function(){return oe},we},parse:function(oe){var we=C(oe+="",!1);return we.toString=function(){return oe},we},utcFormat:function(oe){var we=E(oe+="",N);return we.toString=function(){return oe},we},utcParse:function(oe){var we=C(oe+="",!0);return we.toString=function(){return oe},we}}}var PO={"-":"",_:" ",0:"0"},ni=/^\s*\d+/,xle=/^%/,yle=/[\\^$*+?|[\]().{}]/g;function cn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function ble(t){return t.replace(yle,"\\$&")}function qp(t){return new RegExp("^(?:"+t.map(ble).join("|")+")","i")}function Up(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wle(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Sle(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Nle(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function jle(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function kle(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function TO(t,e,n){var r=ni.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function MO(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ale(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Cle(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ele(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function LO(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function _le(t,e,n){var r=ni.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function IO(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ole(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ple(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Tle(t,e,n){var r=ni.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mle(t,e,n){var r=ni.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lle(t,e,n){var r=xle.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ile(t,e,n){var r=ni.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dle(t,e,n){var r=ni.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function DO(t,e){return cn(t.getDate(),e,2)}function Rle(t,e){return cn(t.getHours(),e,2)}function $le(t,e){return cn(t.getHours()%12||12,e,2)}function zle(t,e){return cn(1+yg.count(Sl(t),t),e,3)}function U7(t,e){return cn(t.getMilliseconds(),e,3)}function Fle(t,e){return U7(t,e)+"000"}function Ble(t,e){return cn(t.getMonth()+1,e,2)}function Hle(t,e){return cn(t.getMinutes(),e,2)}function Wle(t,e){return cn(t.getSeconds(),e,2)}function qle(t){var e=t.getDay();return e===0?7:e}function Ule(t,e){return cn(Xb.count(Sl(t)-1,t),e,2)}function V7(t){var e=t.getDay();return e>=4||e===0?gh(t):gh.ceil(t)}function Vle(t,e){return t=V7(t),cn(gh.count(Sl(t),t)+(Sl(t).getDay()===4),e,2)}function Gle(t){return t.getDay()}function Kle(t,e){return cn(_y.count(Sl(t)-1,t),e,2)}function Yle(t,e){return cn(t.getFullYear()%100,e,2)}function Xle(t,e){return t=V7(t),cn(t.getFullYear()%100,e,2)}function Jle(t,e){return cn(t.getFullYear()%1e4,e,4)}function Zle(t,e){var n=t.getDay();return t=n>=4||n===0?gh(t):gh.ceil(t),cn(t.getFullYear()%1e4,e,4)}function Qle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+cn(e/60|0,"0",2)+cn(e%60,"0",2)}function RO(t,e){return cn(t.getUTCDate(),e,2)}function ece(t,e){return cn(t.getUTCHours(),e,2)}function tce(t,e){return cn(t.getUTCHours()%12||12,e,2)}function nce(t,e){return cn(1+Yb.count(Nl(t),t),e,3)}function G7(t,e){return cn(t.getUTCMilliseconds(),e,3)}function rce(t,e){return G7(t,e)+"000"}function ice(t,e){return cn(t.getUTCMonth()+1,e,2)}function ace(t,e){return cn(t.getUTCMinutes(),e,2)}function sce(t,e){return cn(t.getUTCSeconds(),e,2)}function oce(t){var e=t.getUTCDay();return e===0?7:e}function lce(t,e){return cn(Jb.count(Nl(t)-1,t),e,2)}function K7(t){var e=t.getUTCDay();return e>=4||e===0?vh(t):vh.ceil(t)}function cce(t,e){return t=K7(t),cn(vh.count(Nl(t),t)+(Nl(t).getUTCDay()===4),e,2)}function uce(t){return t.getUTCDay()}function dce(t,e){return cn(Oy.count(Nl(t)-1,t),e,2)}function fce(t,e){return cn(t.getUTCFullYear()%100,e,2)}function hce(t,e){return t=K7(t),cn(t.getUTCFullYear()%100,e,2)}function pce(t,e){return cn(t.getUTCFullYear()%1e4,e,4)}function mce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?vh(t):vh.ceil(t),cn(t.getUTCFullYear()%1e4,e,4)}function gce(){return"+0000"}function $O(){return"%"}function zO(t){return+t}function FO(t){return Math.floor(+t/1e3)}var nf,Y7,X7;vce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vce(t){return nf=vle(t),Y7=nf.format,nf.parse,X7=nf.utcFormat,nf.utcParse,nf}function xce(t){return new Date(t)}function yce(t){return t instanceof Date?+t:+new Date(+t)}function S3(t,e,n,r,i,a,s,o,l,u){var d=l3(),f=d.invert,p=d.domain,h=u(".%L"),m=u(":%S"),g=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),w=u("%b %d"),S=u("%B"),N=u("%Y");function j(E){return(l(E)<E?h:o(E)<E?m:s(E)<E?g:a(E)<E?y:r(E)<E?i(E)<E?x:w:n(E)<E?S:N)(E)}return d.invert=function(E){return new Date(f(E))},d.domain=function(E){return arguments.length?p(Array.from(E,yce)):p().map(xce)},d.ticks=function(E){var C=p();return t(C[0],C[C.length-1],E??10)},d.tickFormat=function(E,C){return C==null?j:u(C)},d.nice=function(E){var C=p();return(!E||typeof E.range!="function")&&(E=e(C[0],C[C.length-1],E??10)),E?p(D7(C,E)):d},d.copy=function(){return xg(d,S3(t,e,n,r,i,a,s,o,l,u))},d}function bce(){return ws.apply(S3(mle,gle,Sl,b3,Xb,yg,x3,g3,Bu,Y7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wce(){return ws.apply(S3(hle,ple,Nl,w3,Jb,Yb,y3,v3,Bu,X7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zb(){var t=0,e=1,n,r,i,a,s=Vi,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(p){var h,m;return arguments.length?([h,m]=p,s=f(h,m),u):[s(0),s(1)]}}return u.range=d(ep),u.rangeRound=d(o3),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Xc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function J7(){var t=Yc(Zb()(Vi));return t.copy=function(){return Xc(t,J7())},_l.apply(t,arguments)}function Z7(){var t=d3(Zb()).domain([1,10]);return t.copy=function(){return Xc(t,Z7()).base(t.base())},_l.apply(t,arguments)}function Q7(){var t=f3(Zb());return t.copy=function(){return Xc(t,Q7()).constant(t.constant())},_l.apply(t,arguments)}function N3(){var t=h3(Zb());return t.copy=function(){return Xc(t,N3()).exponent(t.exponent())},_l.apply(t,arguments)}function Sce(){return N3.apply(null,arguments).exponent(.5)}function eR(){var t=[],e=Vi;function n(r){if(r!=null&&!isNaN(r=+r))return e((gg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Tc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>loe(t,a/r))},n.copy=function(){return eR(e).domain(t)},_l.apply(n,arguments)}function Qb(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=Vi,d,f=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+d(g))-a)*(r*g<r*a?o:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function m(g){return function(y){var x,w,S;return arguments.length?([x,w,S]=y,u=Loe(g,[x,w,S]),h):[u(0),u(.5),u(1)]}}return h.range=m(ep),h.rangeRound=m(o3),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return d=g,i=g(t),a=g(e),s=g(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,h}}function tR(){var t=Yc(Qb()(Vi));return t.copy=function(){return Xc(t,tR())},_l.apply(t,arguments)}function nR(){var t=d3(Qb()).domain([.1,1,10]);return t.copy=function(){return Xc(t,nR()).base(t.base())},_l.apply(t,arguments)}function rR(){var t=f3(Qb());return t.copy=function(){return Xc(t,rR()).constant(t.constant())},_l.apply(t,arguments)}function j3(){var t=h3(Qb());return t.copy=function(){return Xc(t,j3()).exponent(t.exponent())},_l.apply(t,arguments)}function Nce(){return j3.apply(null,arguments).exponent(.5)}const BO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:m0,scaleDiverging:tR,scaleDivergingLog:nR,scaleDivergingPow:j3,scaleDivergingSqrt:Nce,scaleDivergingSymlog:rR,scaleIdentity:I7,scaleImplicit:UN,scaleLinear:Cy,scaleLog:R7,scaleOrdinal:i3,scalePoint:jm,scalePow:p3,scaleQuantile:F7,scaleQuantize:B7,scaleRadial:z7,scaleSequential:J7,scaleSequentialLog:Z7,scaleSequentialPow:N3,scaleSequentialQuantile:eR,scaleSequentialSqrt:Sce,scaleSequentialSymlog:Q7,scaleSqrt:rle,scaleSymlog:$7,scaleThreshold:H7,scaleTime:bce,scaleUtc:wce,tickFormat:L7},Symbol.toStringTag,{value:"Module"}));var jce=Uh;function kce(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!jce(s):n(s,o)))var o=s,l=a}return l}var e2=kce;function Ace(t,e){return t>e}var iR=Ace,Cce=e2,Ece=iR,_ce=Zh;function Oce(t){return t&&t.length?Cce(t,_ce,Ece):void 0}var Pce=Oce;const t2=pn(Pce);function Tce(t,e){return t<e}var aR=Tce,Mce=e2,Lce=aR,Ice=Zh;function Dce(t){return t&&t.length?Mce(t,Ice,Lce):void 0}var Rce=Dce;const n2=pn(Rce);var $ce=$A,zce=ko,Fce=h7,Bce=ga;function Hce(t,e){var n=Bce(t)?$ce:Fce;return n(t,zce(e))}var Wce=Hce,qce=d7,Uce=Wce;function Vce(t,e){return qce(Uce(t,e),1)}var Gce=Vce;const Kce=pn(Gce);var Yce=QA;function Xce(t,e){return Yce(t,e)}var Jce=Xce;const r2=pn(Jce);var tp=1e9,Zce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},A3,Xn=!0,xs="[DecimalError] ",Qu=xs+"Invalid argument: ",k3=xs+"Exponent out of range: ",np=Math.floor,Au=Math.pow,Qce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ta,Vr=1e7,Wn=7,sR=9007199254740991,Py=np(sR/Wn),gt={};gt.absoluteValue=gt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};gt.comparedTo=gt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};gt.decimalPlaces=gt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Wn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};gt.dividedBy=gt.div=function(t){return fl(this,new this.constructor(t))};gt.dividedToIntegerBy=gt.idiv=function(t){var e=this,n=e.constructor;return Pn(fl(e,new n(t),0,1),n.precision)};gt.equals=gt.eq=function(t){return!this.cmp(t)};gt.exponent=function(){return _r(this)};gt.greaterThan=gt.gt=function(t){return this.cmp(t)>0};gt.greaterThanOrEqualTo=gt.gte=function(t){return this.cmp(t)>=0};gt.isInteger=gt.isint=function(){return this.e>this.d.length-2};gt.isNegative=gt.isneg=function(){return this.s<0};gt.isPositive=gt.ispos=function(){return this.s>0};gt.isZero=function(){return this.s===0};gt.lessThan=gt.lt=function(t){return this.cmp(t)<0};gt.lessThanOrEqualTo=gt.lte=function(t){return this.cmp(t)<1};gt.logarithm=gt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ta))throw Error(xs+"NaN");if(n.s<1)throw Error(xs+(n.s?"NaN":"-Infinity"));return n.eq(Ta)?new r(0):(Xn=!1,e=fl(b0(n,a),b0(t,a),a),Xn=!0,Pn(e,i))};gt.minus=gt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cR(e,t):oR(e,(t.s=-t.s,t))};gt.modulo=gt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(xs+"NaN");return n.s?(Xn=!1,e=fl(n,t,0,1).times(t),Xn=!0,n.minus(e)):Pn(new r(n),i)};gt.naturalExponential=gt.exp=function(){return lR(this)};gt.naturalLogarithm=gt.ln=function(){return b0(this)};gt.negated=gt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};gt.plus=gt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?oR(e,t):cR(e,(t.s=-t.s,t))};gt.precision=gt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qu+t);if(e=_r(i)+1,r=i.d.length-1,n=r*Wn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};gt.squareRoot=gt.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(xs+"NaN")}for(t=_r(o),Xn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ho(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=np((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(fl(o,a,s+2)).times(.5),ho(a.d).slice(0,s)===(e=ho(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Pn(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return Xn=!0,Pn(r,n)};gt.times=gt.mul=function(t){var e,n,r,i,a,s,o,l,u,d=this,f=d.constructor,p=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,l=p.length,u=h.length,l<u&&(a=p,p=h,h=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+h[r]*p[i-r-1]+e,a[i--]=o%Vr|0,e=o/Vr|0;a[i]=(a[i]+e)%Vr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Xn?Pn(t,f.precision):t};gt.toDecimalPlaces=gt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(wo(t,0,tp),e===void 0?e=r.rounding:wo(e,0,8),Pn(n,t+_r(n)+1,e))};gt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=pd(r,!0):(wo(t,0,tp),e===void 0?e=i.rounding:wo(e,0,8),r=Pn(new i(r),t+1,e),n=pd(r,!0,t+1)),n};gt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?pd(i):(wo(t,0,tp),e===void 0?e=a.rounding:wo(e,0,8),r=Pn(new a(i),t+_r(i)+1,e),n=pd(r.abs(),!1,t+_r(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};gt.toInteger=gt.toint=function(){var t=this,e=t.constructor;return Pn(new e(t),_r(t)+1,e.rounding)};gt.toNumber=function(){return+this};gt.toPower=gt.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(Ta);if(o=new l(o),!o.s){if(t.s<1)throw Error(xs+"Infinity");return o}if(o.eq(Ta))return o;if(r=l.precision,t.eq(Ta))return Pn(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=sR){for(i=new l(Ta),e=Math.ceil(r/Wn+4),Xn=!1;n%2&&(i=i.times(o),WO(i.d,e)),n=np(n/2),n!==0;)o=o.times(o),WO(o.d,e);return Xn=!0,t.s<0?new l(Ta).div(i):Pn(i,r)}}else if(a<0)throw Error(xs+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Xn=!1,i=t.times(b0(o,r+u)),Xn=!0,i=lR(i),i.s=a,i};gt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=_r(i),r=pd(i,n<=a.toExpNeg||n>=a.toExpPos)):(wo(t,1,tp),e===void 0?e=a.rounding:wo(e,0,8),i=Pn(new a(i),t,e),n=_r(i),r=pd(i,t<=n||n<=a.toExpNeg,t)),r};gt.toSignificantDigits=gt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(wo(t,1,tp),e===void 0?e=r.rounding:wo(e,0,8)),Pn(new r(n),t,e)};gt.toString=gt.valueOf=gt.val=gt.toJSON=gt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=_r(t),n=t.constructor;return pd(t,e<=n.toExpNeg||e>=n.toExpPos)};function oR(t,e){var n,r,i,a,s,o,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Xn?Pn(e,f):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(f/Wn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Vr|0,l[a]%=Vr;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Xn?Pn(e,f):e}function wo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Qu+t)}function ho(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=Wn-r.length,n&&(a+=oc(n)),a+=r;s=t[e],r=s+"",n=Wn-r.length,n&&(a+=oc(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var fl=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Vr|0,s=a/Vr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Vr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,d,f,p,h,m,g,y,x,w,S,N,j,E,C,P,T=r.constructor,I=r.s==i.s?1:-1,k=r.d,O=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(xs+"Division by zero");for(l=r.e-i.e,C=O.length,j=k.length,h=new T(I),m=h.d=[],u=0;O[u]==(k[u]||0);)++u;if(O[u]>(k[u]||0)&&--l,a==null?w=a=T.precision:s?w=a+(_r(r)-_r(i))+1:w=a,w<0)return new T(0);if(w=w/Wn+2|0,u=0,C==1)for(d=0,O=O[0],w++;(u<j||d)&&w--;u++)S=d*Vr+(k[u]||0),m[u]=S/O|0,d=S%O|0;else{for(d=Vr/(O[0]+1)|0,d>1&&(O=t(O,d),k=t(k,d),C=O.length,j=k.length),N=C,g=k.slice(0,C),y=g.length;y<C;)g[y++]=0;P=O.slice(),P.unshift(0),E=O[0],O[1]>=Vr/2&&++E;do d=0,o=e(O,g,C,y),o<0?(x=g[0],C!=y&&(x=x*Vr+(g[1]||0)),d=x/E|0,d>1?(d>=Vr&&(d=Vr-1),f=t(O,d),p=f.length,y=g.length,o=e(f,g,p,y),o==1&&(d--,n(f,C<p?P:O,p))):(d==0&&(o=d=1),f=O.slice()),p=f.length,p<y&&f.unshift(0),n(g,f,y),o==-1&&(y=g.length,o=e(O,g,C,y),o<1&&(d++,n(g,C<y?P:O,y))),y=g.length):o===0&&(d++,g=[0]),m[u++]=d,o&&g[0]?g[y++]=k[N]||0:(g=[k[N]],y=1);while((N++<j||g[0]!==void 0)&&w--)}return m[0]||m.shift(),h.e=l,Pn(h,s?a+_r(h)+1:a)}}();function lR(t,e){var n,r,i,a,s,o,l=0,u=0,d=t.constructor,f=d.precision;if(_r(t)>16)throw Error(k3+_r(t));if(!t.s)return new d(Ta);for(Xn=!1,o=f,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Au(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(Ta),d.precision=o;;){if(i=Pn(i.times(t),o),n=n.times(++l),s=a.plus(fl(i,n,o)),ho(s.d).slice(0,o)===ho(a.d).slice(0,o)){for(;u--;)a=Pn(a.times(a),o);return d.precision=f,e==null?(Xn=!0,Pn(a,f)):a}a=s}}function _r(t){for(var e=t.e*Wn,n=t.d[0];n>=10;n/=10)e++;return e}function a5(t,e,n){if(e>t.LN10.sd())throw Xn=!0,n&&(t.precision=n),Error(xs+"LN10 precision limit exceeded");return Pn(new t(t.LN10),e)}function oc(t){for(var e="";t--;)e+="0";return e}function b0(t,e){var n,r,i,a,s,o,l,u,d,f=1,p=10,h=t,m=h.d,g=h.constructor,y=g.precision;if(h.s<1)throw Error(xs+(h.s?"NaN":"-Infinity"));if(h.eq(Ta))return new g(0);if(e==null?(Xn=!1,u=y):u=e,h.eq(10))return e==null&&(Xn=!0),a5(g,u);if(u+=p,g.precision=u,n=ho(m),r=n.charAt(0),a=_r(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=ho(h.d),r=n.charAt(0),f++;a=_r(h),r>1?(h=new g("0."+n),a++):h=new g(r+"."+n.slice(1))}else return l=a5(g,u+2,y).times(a+""),h=b0(new g(r+"."+n.slice(1)),u-p).plus(l),g.precision=y,e==null?(Xn=!0,Pn(h,y)):h;for(o=s=h=fl(h.minus(Ta),h.plus(Ta),u),d=Pn(h.times(h),u),i=3;;){if(s=Pn(s.times(d),u),l=o.plus(fl(s,new g(i),u)),ho(l.d).slice(0,u)===ho(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(a5(g,u+2,y).times(a+""))),o=fl(o,new g(f),u),g.precision=y,e==null?(Xn=!0,Pn(o,y)):o;o=l,i+=2}}function HO(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=np(n/Wn),t.d=[],r=(n+1)%Wn,n<0&&(r+=Wn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Wn;r<i;)t.d.push(+e.slice(r,r+=Wn));e=e.slice(r),r=Wn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Xn&&(t.e>Py||t.e<-Py))throw Error(k3+n)}else t.s=0,t.e=0,t.d=[0];return t}function Pn(t,e,n){var r,i,a,s,o,l,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=Wn,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/Wn),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;r%=Wn,i=r-Wn+s}if(n!==void 0&&(a=Au(10,s-i-1),o=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/Au(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=_r(t),f.length=1,e=e-a-1,f[0]=Au(10,(Wn-e%Wn)%Wn),t.e=np(-e/Wn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=Au(10,Wn-r),f[d]=i>0?(u/Au(10,s-i)%Au(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==Vr&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=Vr)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(Xn&&(t.e>Py||t.e<-Py))throw Error(k3+_r(t));return t}function cR(t,e){var n,r,i,a,s,o,l,u,d,f,p=t.constructor,h=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Xn?Pn(e,h):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(d=s<0,d?(n=l,s=-s,o=f.length):(n=f,r=u,o=l.length),i=Math.max(Math.ceil(h/Wn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}s=0}for(d&&(n=l,l=f,f=n,e.s=-e.s),o=l.length,i=f.length-o;i>0;--i)l[o++]=0;for(i=f.length;i>s;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Vr-1;--l[a],l[i]+=Vr}l[i]-=f[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Xn?Pn(e,h):e):new p(0)}function pd(t,e,n){var r,i=_r(t),a=ho(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+oc(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+oc(-i-1)+a,n&&(r=n-s)>0&&(a+=oc(r))):i>=s?(a+=oc(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+oc(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=oc(r))),t.s<0?"-"+a:a}function WO(t,e){if(t.length>e)return t.length=e,!0}function uR(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qu+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return HO(s,a.toString())}else if(typeof a!="string")throw Error(Qu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Qce.test(a))HO(s,a);else throw Error(Qu+a)}if(i.prototype=gt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uR,i.config=i.set=eue,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function eue(t){if(!t||typeof t!="object")throw Error(xs+"Object expected");var e,n,r,i=["precision",1,tp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(np(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Qu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qu+n+": "+r);return this}var A3=uR(Zce);Ta=new A3(1);const kn=A3;function tue(t){return aue(t)||iue(t)||rue(t)||nue()}function nue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rue(t,e){if(t){if(typeof t=="string")return YN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YN(t,e)}}function iue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function aue(t){if(Array.isArray(t))return YN(t)}function YN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sue=function(e){return e},dR={},fR=function(e){return e===dR},qO=function(e){return function n(){return arguments.length===0||arguments.length===1&&fR(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},oue=function t(e,n){return e===1?n:qO(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==dR}).length;return s>=e?n.apply(void 0,i):t(e-s,qO(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=i.map(function(f){return fR(f)?l.shift():f});return n.apply(void 0,tue(d).concat(l))}))})},i2=function(e){return oue(e.length,e)},XN=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},lue=i2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),cue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return sue;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},JN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hR=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function uue(t){var e;return t===0?e=1:e=Math.floor(new kn(t).abs().log(10).toNumber())+1,e}function due(t,e,n){for(var r=new kn(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var fue=i2(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),hue=i2(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),pue=i2(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const a2={rangeStep:due,getDigitCount:uue,interpolateNumber:fue,uninterpolateNumber:hue,uninterpolateTruncation:pue};function ZN(t){return vue(t)||gue(t)||pR(t)||mue()}function mue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function vue(t){if(Array.isArray(t))return QN(t)}function w0(t,e){return bue(t)||yue(t,e)||pR(t,e)||xue()}function xue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pR(t,e){if(t){if(typeof t=="string")return QN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QN(t,e)}}function QN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yue(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function bue(t){if(Array.isArray(t))return t}function mR(t){var e=w0(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function gR(t,e,n){if(t.lte(0))return new kn(0);var r=a2.getDigitCount(t.toNumber()),i=new kn(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new kn(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new kn(Math.ceil(l))}function wue(t,e,n){var r=1,i=new kn(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new kn(10).pow(a2.getDigitCount(t)-1),i=new kn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new kn(Math.floor(t)))}else t===0?i=new kn(Math.floor((e-1)/2)):n||(i=new kn(Math.floor(t)));var s=Math.floor((e-1)/2),o=cue(lue(function(l){return i.add(new kn(l-s).mul(r)).toNumber()}),XN);return o(0,e)}function vR(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new kn(0),tickMin:new kn(0),tickMax:new kn(0)};var a=gR(new kn(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new kn(0):(s=new kn(t).add(e).div(2),s=s.sub(new kn(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new kn(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?vR(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new kn(o).mul(a)),tickMax:s.add(new kn(l).mul(a))})}function Sue(t){var e=w0(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=mR([n,r]),l=w0(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(ZN(XN(0,i-1).map(function(){return 1/0}))):[].concat(ZN(XN(0,i-1).map(function(){return-1/0})),[d]);return n>r?JN(f):f}if(u===d)return wue(u,i,a);var p=vR(u,d,s,a),h=p.step,m=p.tickMin,g=p.tickMax,y=a2.rangeStep(m,g.add(new kn(.1).mul(h)),h);return n>r?JN(y):y}function Nue(t,e){var n=w0(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=mR([r,i]),o=w0(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var d=Math.max(e,2),f=gR(new kn(u).sub(l).div(d-1),a,0),p=[].concat(ZN(a2.rangeStep(new kn(l),new kn(u).sub(new kn(.99).mul(f)),f)),[u]);return r>i?JN(p):p}var jue=hR(Sue),kue=hR(Nue),Aue="Invariant failed";function md(t,e){throw new Error(Aue)}var Cue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function Eue(t,e){return Tue(t)||Pue(t,e)||Oue(t,e)||_ue()}function _ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oue(t,e){if(t){if(typeof t=="string")return UO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UO(t,e)}}function UO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Tue(t){if(Array.isArray(t))return t}function Mue(t,e){if(t==null)return{};var n=Lue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Iue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Due(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bR(r.key),r)}}function Rue(t,e,n){return e&&Due(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ue(t,e,n){return e=My(e),zue(t,xR()?Reflect.construct(e,n||[],My(t).constructor):e.apply(t,n))}function zue(t,e){if(e&&(xh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fue(t)}function Fue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xR=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},My(t)}function Bue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ej(t,e)}function ej(t,e){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ej(t,e)}function yR(t,e,n){return e=bR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bR(t){var e=Hue(t,"string");return xh(e)=="symbol"?e:e+""}function Hue(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s2=function(t){function e(){return Iue(this,e),$ue(this,e,arguments)}return Bue(e,t),Rue(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,p=Mue(r,Cue),h=It(p,!1);this.props.direction==="x"&&d.type!=="number"&&md();var m=l.map(function(g){var y=u(g,o),x=y.x,w=y.y,S=y.value,N=y.errorVal;if(!N)return null;var j=[],E,C;if(Array.isArray(N)){var P=Eue(N,2);E=P[0],C=P[1]}else E=C=N;if(a==="vertical"){var T=d.scale,I=w+i,k=I+s,O=I-s,R=T(S-E),D=T(S+C);j.push({x1:D,y1:k,x2:D,y2:O}),j.push({x1:R,y1:I,x2:D,y2:I}),j.push({x1:R,y1:k,x2:R,y2:O})}else if(a==="horizontal"){var B=f.scale,V=x+i,Z=V-s,H=V+s,Q=B(S-E),fe=B(S+C);j.push({x1:Z,y1:fe,x2:H,y2:fe}),j.push({x1:V,y1:Q,x2:V,y2:fe}),j.push({x1:Z,y1:Q,x2:H,y2:Q})}return ue.createElement(wn,Ty({className:"recharts-errorBar",key:"bar-".concat(j.map(function(le){return"".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))},h),j.map(function(le){return ue.createElement("line",Ty({},le,{key:"line-".concat(le.x1,"-").concat(le.x2,"-").concat(le.y1,"-").concat(le.y2)}))}))});return ue.createElement(wn,{className:"recharts-errorBars"},m)}}])}(ue.Component);yR(s2,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});yR(s2,"displayName","ErrorBar");function S0(t){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S0(t)}function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VO(Object(n),!0).forEach(function(r){Wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wue(t,e,n){return e=que(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function que(t){var e=Uue(t,"string");return S0(e)=="symbol"?e:e+""}function Uue(t,e){if(S0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(S0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wR=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Pa(n,Ju);if(!s)return null;var o=Ju.defaultProps,l=o!==void 0?xu(xu({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,f){var p=f.item,h=f.props,m=h.sectors||h.data||[];return d.concat(m.map(function(g){return{type:s.props.iconType||p.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?xu(xu({},p),f.props):{},m=h.dataKey,g=h.name,y=h.legendType,x=h.hide;return{inactive:x,dataKey:m,type:l.iconType||y||"square",color:C3(f),value:g||m,payload:h}}),xu(xu(xu({},l),Ju.getWithHeight(s,i)),{},{payload:u,item:s})};function N0(t){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N0(t)}function GO(t){return Yue(t)||Kue(t)||Gue(t)||Vue()}function Vue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gue(t,e){if(t){if(typeof t=="string")return tj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tj(t,e)}}function Kue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yue(t){if(Array.isArray(t))return tj(t)}function tj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(n),!0).forEach(function(r){Gf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gf(t,e,n){return e=Xue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xue(t){var e=Jue(t,"string");return N0(e)=="symbol"?e:e+""}function Jue(t,e){if(N0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(N0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pi(t,e,n){return Zt(t)||Zt(e)?n:Wr(e)?$a(t,e,n):Ft(e)?e(t):n}function km(t,e,n,r){var i=Kce(t,function(o){return Pi(o,e)});if(n==="number"){var a=i.filter(function(o){return nt(o)||parseFloat(o)});return a.length?[n2(a),t2(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!Zt(o)}):i;return s.map(function(o){return Wr(o)||o instanceof Date?o:""})}var Zue=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,p=u>=o-1?i[0].coordinate:i[u+1].coordinate,h=void 0;if(qi(f-d)!==qi(p-f)){var m=[];if(qi(p-f)===qi(l[1]-l[0])){h=p;var g=f+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{h=d;var y=p+l[1]-l[0];m[0]=Math.min(f,(y+f)/2),m[1]=Math.max(f,(y+f)/2)}var x=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){s=i[u].index;break}}else{var w=Math.min(d,p),S=Math.max(d,p);if(e>(w+f)/2&&e<=(S+f)/2){s=i[u].index;break}}}else for(var N=0;N<o;N++)if(N===0&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<o-1&&e>(r[N].coordinate+r[N-1].coordinate)/2&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N===o-1&&e>(r[N].coordinate+r[N-1].coordinate)/2){s=r[N].index;break}return s},C3=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Que=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var d=a[o[l]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var m=d[f[p]],g=m.items,y=m.cateAxisId,x=g.filter(function(C){return dl(C.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,S=w!==void 0?fr(fr({},w),x[0].props):x[0].props,N=S.barSize,j=S[y];s[j]||(s[j]=[]);var E=Zt(N)?n:N;s[j].push({item:x[0],stackList:x.slice(1),barSize:Zt(E)?void 0:Ui(E,r,0)})}}return s},ede=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=Ui(n,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var p=!1,h=i/l,m=s.reduce(function(N,j){return N+j.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&h>0&&(p=!0,h*=.9,m=l*h);var g=(i-m)/2>>0,y={offset:g-u,size:0};d=s.reduce(function(N,j){var E={item:j.item,position:{offset:y.offset+y.size+u,size:p?h:j.barSize}},C=[].concat(GO(N),[E]);return y=C[C.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){C.push({item:P,position:y})}),C},f)}else{var x=Ui(r,i,0,!0);i-2*x-(l-1)*u<=0&&(u=0);var w=(i-2*x-(l-1)*u)/l;w>1&&(w>>=0);var S=o===+o?Math.min(w,o):w;d=s.reduce(function(N,j,E){var C=[].concat(GO(N),[{item:j.item,position:{offset:x+(w+u)*E+(w-S)/2,size:S}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(P){C.push({item:P,position:C[C.length-1].position})}),C},f)}return d},tde=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=wR({children:a,legendWidth:l});if(u){var d=i||{},f=d.width,p=d.height,h=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&h!=="center"&&nt(e[h]))return fr(fr({},e),{},Gf({},h,e[h]+(f||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&m!=="middle"&&nt(e[m]))return fr(fr({},e),{},Gf({},m,e[m]+(p||0)))}return e},nde=function(e,n,r){return Zt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},SR=function(e,n,r,i,a){var s=n.props.children,o=hs(s,s2).filter(function(u){return nde(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Pi(d,r);if(Zt(f))return u;var p=Array.isArray(f)?[n2(f),t2(f)]:[f,f],h=l.reduce(function(m,g){var y=Pi(d,g,0),x=p[0]-Math.abs(Array.isArray(y)?y[0]:y),w=p[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,m[0]),Math.max(w,m[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},rde=function(e,n,r,i,a){var s=n.map(function(o){return SR(e,o,r,a,i)}).filter(function(o){return!Zt(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},NR=function(e,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&SR(e,l,u,i)||km(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},jR=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},kR=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},ol=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?qi(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=a?a.indexOf(f):f;return{coordinate:i(p)+u,value:f,offset:u}});return d.filter(function(f){return!hg(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:i(f)+u,value:f,index:p,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,p){return{coordinate:i(f)+u,value:a?a[f]:f,index:p,offset:u}})},s5=new WeakMap,Cv=function(e,n){if(typeof n!="function")return e;s5.has(e)||s5.set(e,new WeakMap);var r=s5.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},AR=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:m0(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:Cy(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:jm(),realScaleType:"point"}:a==="category"?{scale:m0(),realScaleType:"band"}:{scale:Cy(),realScaleType:"linear"};if(dd(i)){var l="scale".concat(Bb(i));return{scale:(BO[l]||jm)(),realScaleType:BO[l]?l:"point"}}return Ft(i)?{scale:i}:{scale:jm(),realScaleType:"point"}},YO=1e-4,CR=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-YO,s=Math.max(i[0],i[1])+YO,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},ide=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},ade=function(e,n){if(!n||n.length!==2||!nt(n[0])||!nt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!nt(e[0])||e[0]<r)&&(a[0]=r),(!nt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},sde=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=hg(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},ode=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=hg(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},lde={sign:sde,expand:CJ,none:ch,silhouette:EJ,wiggle:_J,positive:ode},cde=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=lde[r],s=AJ().keys(i).value(function(o,l){return+Pi(o,l,0)}).order(kN).offset(a);return s(e)},ude=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(f,p){var h,m=(h=p.type)!==null&&h!==void 0&&h.defaultProps?fr(fr({},p.type.defaultProps),p.props):p.props,g=m.stackId,y=m.hide;if(y)return f;var x=m[r],w=f[x]||{hasStack:!1,stackGroups:{}};if(Wr(g)){var S=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(p),w.hasStack=!0,w.stackGroups[g]=S}else w.stackGroups[pg("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[p]};return fr(fr({},f),{},Gf({},x,w))},l),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,y){var x=h.stackGroups[y];return fr(fr({},g),{},Gf({},y,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:cde(e,x.items,a)}))},m)}return fr(fr({},f),{},Gf({},p,h))},d)},ER=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=jue(u,a,o);return e.domain([n2(d),t2(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),p=kue(f,a,o);return{niceTicks:p}}return null},XO=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Pi(s,n.dataKey,n.domain[o]);return Zt(l)?null:n.scale(l)-a/2+i},dde=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},fde=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Wr(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},hde=function(e){return e.reduce(function(n,r){return[n2(r.concat([n[0]]).filter(nt)),t2(r.concat([n[1]]).filter(nt))]},[1/0,-1/0])},_R=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,d){var f=hde(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},JO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nj=function(e,n,r){if(Ft(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(nt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(JO.test(e[0])){var a=+JO.exec(e[0])[1];i[0]=n[0]-a}else Ft(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(nt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(ZO.test(e[1])){var s=+ZO.exec(e[1])[1];i[1]=n[1]+s}else Ft(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Ly=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=t3(n,function(f){return f.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},QO=function(e,n,r){return!e||!e.length||r2(e,$a(r,"type.defaultProps.domain"))?n:e},OR=function(e,n){var r=e.type.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,d=r.hide;return fr(fr({},It(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:C3(e),value:Pi(n,i),type:l,payload:n,chartType:u,hide:d})};function j0(t){"@babel/helpers - typeof";return j0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j0(t)}function eP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eP(Object(n),!0).forEach(function(r){PR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PR(t,e,n){return e=pde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pde(t){var e=mde(t,"string");return j0(e)=="symbol"?e:e+""}function mde(t,e){if(j0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(j0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gde(t,e){return bde(t)||yde(t,e)||xde(t,e)||vde()}function vde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xde(t,e){if(t){if(typeof t=="string")return tP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(t,e)}}function tP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function bde(t){if(Array.isArray(t))return t}var Iy=Math.PI/180,wde=function(e){return e*180/Math.PI},Rn=function(e,n,r,i){return{x:e+Math.cos(-Iy*i)*r,y:n+Math.sin(-Iy*i)*r}},TR=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Sde=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,d=Ui(e.cx,s,s/2),f=Ui(e.cy,o,o/2),p=TR(s,o,r),h=Ui(e.innerRadius,p,0),m=Ui(e.outerRadius,p,p*.8),g=Object.keys(n);return g.reduce(function(y,x){var w=n[x],S=w.domain,N=w.reversed,j;if(Zt(w.range))i==="angleAxis"?j=[l,u]:i==="radiusAxis"&&(j=[h,m]),N&&(j=[j[1],j[0]]);else{j=w.range;var E=j,C=gde(E,2);l=C[0],u=C[1]}var P=AR(w,a),T=P.realScaleType,I=P.scale;I.domain(S).range(j),CR(I);var k=ER(I,Xo(Xo({},w),{},{realScaleType:T})),O=Xo(Xo(Xo({},w),k),{},{range:j,radius:m,realScaleType:T,scale:I,cx:d,cy:f,innerRadius:h,outerRadius:m,startAngle:l,endAngle:u});return Xo(Xo({},y),{},PR({},x,O))},{})},Nde=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},jde=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=Nde({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:wde(u),angleInRadian:u}},kde=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},Ade=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},nP=function(e,n){var r=e.x,i=e.y,a=jde({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var d=kde(n),f=d.startAngle,p=d.endAngle,h=o,m;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=f}return m?Xo(Xo({},n),{},{radius:s,angle:Ade(h,n)}):null},MR=function(e){return!q.isValidElement(e)&&!Ft(e)&&typeof e!="boolean"?e.className:""};function k0(t){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k0(t)}var Cde=["offset"];function Ede(t){return Tde(t)||Pde(t)||Ode(t)||_de()}function _de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ode(t,e){if(t){if(typeof t=="string")return rj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rj(t,e)}}function Pde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tde(t){if(Array.isArray(t))return rj(t)}function rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mde(t,e){if(t==null)return{};var n=Lde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rP(Object(n),!0).forEach(function(r){Ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ide(t,e,n){return e=Dde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dde(t){var e=Rde(t,"string");return k0(e)=="symbol"?e:e+""}function Rde(t,e){if(k0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(k0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}var $de=function(e){var n=e.value,r=e.formatter,i=Zt(e.children)?n:e.children;return Ft(r)?r(i):i},zde=function(e,n){var r=qi(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Fde=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,p=l.outerRadius,h=l.startAngle,m=l.endAngle,g=l.clockWise,y=(f+p)/2,x=zde(h,m),w=x>=0?1:-1,S,N;i==="insideStart"?(S=h+w*s,N=g):i==="insideEnd"?(S=m-w*s,N=!g):i==="end"&&(S=m+w*s,N=g),N=x<=0?N:!N;var j=Rn(u,d,y,S),E=Rn(u,d,y,S+(N?1:-1)*359),C="M".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),P=Zt(e.id)?pg("recharts-radial-line-"):e.id;return ue.createElement("text",A0({},r,{dominantBaseline:"central",className:Jt("recharts-radial-bar-label",o)}),ue.createElement("defs",null,ue.createElement("path",{id:P,d:C})),ue.createElement("textPath",{xlinkHref:"#".concat(P)},n))},Bde=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,p=(d+f)/2;if(i==="outside"){var h=Rn(s,o,u+r,p),m=h.x,g=h.y;return{x:m,y:g,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(l+u)/2,x=Rn(s,o,y,p),w=x.x,S=x.y;return{x:w,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Hde=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,d=s.height,f=d>=0?1:-1,p=f*i,h=f>0?"end":"start",m=f>0?"start":"end",g=u>=0?1:-1,y=g*i,x=g>0?"end":"start",w=g>0?"start":"end";if(a==="top"){var S={x:o+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:h};return Fr(Fr({},S),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var N={x:o+u/2,y:l+d+p,textAnchor:"middle",verticalAnchor:m};return Fr(Fr({},N),r?{height:Math.max(r.y+r.height-(l+d),0),width:u}:{})}if(a==="left"){var j={x:o-y,y:l+d/2,textAnchor:x,verticalAnchor:"middle"};return Fr(Fr({},j),r?{width:Math.max(j.x-r.x,0),height:d}:{})}if(a==="right"){var E={x:o+u+y,y:l+d/2,textAnchor:w,verticalAnchor:"middle"};return Fr(Fr({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:d}:{})}var C=r?{width:u,height:d}:{};return a==="insideLeft"?Fr({x:o+y,y:l+d/2,textAnchor:w,verticalAnchor:"middle"},C):a==="insideRight"?Fr({x:o+u-y,y:l+d/2,textAnchor:x,verticalAnchor:"middle"},C):a==="insideTop"?Fr({x:o+u/2,y:l+p,textAnchor:"middle",verticalAnchor:m},C):a==="insideBottom"?Fr({x:o+u/2,y:l+d-p,textAnchor:"middle",verticalAnchor:h},C):a==="insideTopLeft"?Fr({x:o+y,y:l+p,textAnchor:w,verticalAnchor:m},C):a==="insideTopRight"?Fr({x:o+u-y,y:l+p,textAnchor:x,verticalAnchor:m},C):a==="insideBottomLeft"?Fr({x:o+y,y:l+d-p,textAnchor:w,verticalAnchor:h},C):a==="insideBottomRight"?Fr({x:o+u-y,y:l+d-p,textAnchor:x,verticalAnchor:h},C):Vh(a)&&(nt(a.x)||zu(a.x))&&(nt(a.y)||zu(a.y))?Fr({x:o+Ui(a.x,u),y:l+Ui(a.y,d),textAnchor:"end",verticalAnchor:"end"},C):Fr({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Wde=function(e){return"cx"in e&&nt(e.cx)};function Xr(t){var e=t.offset,n=e===void 0?5:e,r=Mde(t,Cde),i=Fr({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,d=i.className,f=d===void 0?"":d,p=i.textBreakAll;if(!a||Zt(o)&&Zt(l)&&!q.isValidElement(u)&&!Ft(u))return null;if(q.isValidElement(u))return q.cloneElement(u,i);var h;if(Ft(u)){if(h=q.createElement(u,i),q.isValidElement(h))return h}else h=$de(i);var m=Wde(a),g=It(i,!0);if(m&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Fde(i,h,g);var y=m?Bde(i):Hde(i);return ue.createElement(hd,A0({className:Jt("recharts-label",f)},g,y,{breakAll:p}),h)}Xr.displayName="Label";var LR=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,h=e.top,m=e.left,g=e.width,y=e.height,x=e.clockWise,w=e.labelViewBox;if(w)return w;if(nt(g)&&nt(y)){if(nt(f)&&nt(p))return{x:f,y:p,width:g,height:y};if(nt(h)&&nt(m))return{x:h,y:m,width:g,height:y}}return nt(f)&&nt(p)?{x:f,y:p,width:0,height:0}:nt(n)&&nt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},qde=function(e,n){return e?e===!0?ue.createElement(Xr,{key:"label-implicit",viewBox:n}):Wr(e)?ue.createElement(Xr,{key:"label-implicit",viewBox:n,value:e}):q.isValidElement(e)?e.type===Xr?q.cloneElement(e,{key:"label-implicit",viewBox:n}):ue.createElement(Xr,{key:"label-implicit",content:e,viewBox:n}):Ft(e)?ue.createElement(Xr,{key:"label-implicit",content:e,viewBox:n}):Vh(e)?ue.createElement(Xr,A0({viewBox:n},e,{key:"label-implicit"})):null:null},Ude=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=LR(e),s=hs(i,Xr).map(function(l,u){return q.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=qde(e.label,n||a);return[o].concat(Ede(s))};Xr.parseViewBox=LR;Xr.renderCallByParent=Ude;function Vde(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Gde=Vde;const Kde=pn(Gde);function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}var Yde=["valueAccessor"],Xde=["data","dataKey","clockWise","id","textBreakAll"];function Jde(t){return tfe(t)||efe(t)||Qde(t)||Zde()}function Zde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qde(t,e){if(t){if(typeof t=="string")return ij(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ij(t,e)}}function efe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tfe(t){if(Array.isArray(t))return ij(t)}function ij(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy.apply(this,arguments)}function iP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iP(Object(n),!0).forEach(function(r){nfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nfe(t,e,n){return e=rfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rfe(t){var e=ife(t,"string");return C0(e)=="symbol"?e:e+""}function ife(t,e){if(C0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(C0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sP(t,e){if(t==null)return{};var n=afe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function afe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sfe=function(e){return Array.isArray(e.value)?Kde(e.value):e.value};function Mc(t){var e=t.valueAccessor,n=e===void 0?sfe:e,r=sP(t,Yde),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=sP(r,Xde);return!i||!i.length?null:ue.createElement(wn,{className:"recharts-label-list"},i.map(function(d,f){var p=Zt(a)?n(d,f):Pi(d&&d.payload,a),h=Zt(o)?{}:{id:"".concat(o,"-").concat(f)};return ue.createElement(Xr,Dy({},It(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:l,viewBox:Xr.parseViewBox(Zt(s)?d:aP(aP({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}Mc.displayName="LabelList";function ofe(t,e){return t?t===!0?ue.createElement(Mc,{key:"labelList-implicit",data:e}):ue.isValidElement(t)||Ft(t)?ue.createElement(Mc,{key:"labelList-implicit",data:e,content:t}):Vh(t)?ue.createElement(Mc,Dy({data:e},t,{key:"labelList-implicit"})):null:null}function lfe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=hs(r,Mc).map(function(s,o){return q.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=ofe(t.label,e);return[a].concat(Jde(i))}Mc.renderCallByParent=lfe;function E0(t){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(t)}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aj.apply(this,arguments)}function oP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(n),!0).forEach(function(r){cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cfe(t,e,n){return e=ufe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ufe(t){var e=dfe(t,"string");return E0(e)=="symbol"?e:e+""}function dfe(t,e){if(E0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(E0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ffe=function(e,n){var r=qi(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Ev=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(o?1:-1)+i,f=Math.asin(l/d)/Iy,p=u?a:a+s*f,h=Rn(n,r,d,p),m=Rn(n,r,i,p),g=u?a-s*f:a,y=Rn(n,r,d*Math.cos(f*Iy),g);return{center:h,circleTangency:m,lineTangency:y,theta:f}},IR=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=ffe(s,o),u=s+l,d=Rn(n,r,a,s),f=Rn(n,r,a,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var h=Rn(n,r,i,s),m=Rn(n,r,i,u);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(n,",").concat(r," Z");return p},hfe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=qi(d-u),p=Ev({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:l}),h=p.circleTangency,m=p.lineTangency,g=p.theta,y=Ev({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),x=y.circleTangency,w=y.lineTangency,S=y.theta,N=l?Math.abs(u-d):Math.abs(u-d)-g-S;if(N<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):IR({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var j="M ".concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var E=Ev({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),C=E.circleTangency,P=E.lineTangency,T=E.theta,I=Ev({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),k=I.circleTangency,O=I.lineTangency,R=I.theta,D=l?Math.abs(u-d):Math.abs(u-d)-T-R;if(D<0&&s===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},pfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DR=function(e){var n=lP(lP({},pfe),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,p=n.className;if(s<a||d===f)return null;var h=Jt("recharts-sector",p),m=s-a,g=Ui(o,m,0,!0),y;return g>0&&Math.abs(d-f)<360?y=hfe({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):y=IR({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),ue.createElement("path",aj({},It(n,!0),{className:h,d:y,role:"img"}))};function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function sj(){return sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sj.apply(this,arguments)}function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(r){mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mfe(t,e,n){return e=gfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gfe(t){var e=vfe(t,"string");return _0(e)=="symbol"?e:e+""}function vfe(t,e){if(_0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dP={curveBasisClosed:mJ,curveBasisOpen:gJ,curveBasis:pJ,curveBumpX:eJ,curveBumpY:tJ,curveLinearClosed:vJ,curveLinear:Wb,curveMonotoneX:xJ,curveMonotoneY:yJ,curveNatural:bJ,curveStep:wJ,curveStepAfter:NJ,curveStepBefore:SJ},_v=function(e){return e.x===+e.x&&e.y===+e.y},Vp=function(e){return e.x},Gp=function(e){return e.y},xfe=function(e,n){if(Ft(e))return e;var r="curve".concat(Bb(e));return(r==="curveMonotone"||r==="curveBump")&&n?dP["".concat(r).concat(n==="vertical"?"Y":"X")]:dP[r]||Wb},yfe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=xfe(r,o),f=u?a.filter(function(g){return _v(g)}):a,p;if(Array.isArray(s)){var h=u?s.filter(function(g){return _v(g)}):s,m=f.map(function(g,y){return uP(uP({},g),{},{base:h[y]})});return o==="vertical"?p=yv().y(Gp).x1(Vp).x0(function(g){return g.base.x}):p=yv().x(Vp).y1(Gp).y0(function(g){return g.base.y}),p.defined(_v).curve(d),p(m)}return o==="vertical"&&nt(s)?p=yv().y(Gp).x1(Vp).x0(s):nt(s)?p=yv().x(Vp).y1(Gp).y0(s):p=OD().x(Vp).y(Gp),p.defined(_v).curve(d),p(f)},oj=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?yfe(e):i;return q.createElement("path",sj({},It(e,!1),oy(e),{className:Jt("recharts-curve",n),d:s,ref:a}))},RR={exports:{}},bfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wfe=bfe,Sfe=wfe;function $R(){}function zR(){}zR.resetWarningCache=$R;var Nfe=function(){function t(r,i,a,s,o,l){if(l!==Sfe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:zR,resetWarningCache:$R};return n.PropTypes=n,n};RR.exports=Nfe();var jfe=RR.exports;const hn=pn(jfe),{getOwnPropertyNames:kfe,getOwnPropertySymbols:Afe}=Object,{hasOwnProperty:Cfe}=Object.prototype;function o5(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Ov(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:a}=i,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);const l=t(n,r,i);return a.delete(n),a.delete(r),l}}function Efe(t){return t!=null?t[Symbol.toStringTag]:void 0}function fP(t){return kfe(t).concat(Afe(t))}const _fe=Object.hasOwn||((t,e)=>Cfe.call(t,e));function Md(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Ofe="__v",Pfe="__o",Tfe="_owner",{getOwnPropertyDescriptor:hP,keys:pP}=Object;function Mfe(t,e){return t.byteLength===e.byteLength&&Ry(new Uint8Array(t),new Uint8Array(e))}function Lfe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Ife(t,e){return t.byteLength===e.byteLength&&Ry(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Dfe(t,e){return Md(t.getTime(),e.getTime())}function Rfe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function $fe(t,e){return t===e}function mP(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.entries();let s,o,l=0;for(;(s=a.next())&&!s.done;){const u=e.entries();let d=!1,f=0;for(;(o=u.next())&&!o.done;){if(i[f]){f++;continue}const p=s.value,h=o.value;if(n.equals(p[0],h[0],l,f,t,e,n)&&n.equals(p[1],h[1],p[0],h[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}const zfe=Md;function Ffe(t,e,n){const r=pP(t);let i=r.length;if(pP(e).length!==i)return!1;for(;i-- >0;)if(!FR(t,e,n,r[i]))return!1;return!0}function Kp(t,e,n){const r=fP(t);let i=r.length;if(fP(e).length!==i)return!1;let a,s,o;for(;i-- >0;)if(a=r[i],!FR(t,e,n,a)||(s=hP(t,a),o=hP(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Bfe(t,e){return Md(t.valueOf(),e.valueOf())}function Hfe(t,e){return t.source===e.source&&t.flags===e.flags}function gP(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),a=t.values();let s,o;for(;(s=a.next())&&!s.done;){const l=e.values();let u=!1,d=0;for(;(o=l.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Ry(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Wfe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function FR(t,e,n,r){return(r===Tfe||r===Pfe||r===Ofe)&&(t.$$typeof||e.$$typeof)?!0:_fe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const qfe="[object ArrayBuffer]",Ufe="[object Arguments]",Vfe="[object Boolean]",Gfe="[object DataView]",Kfe="[object Date]",Yfe="[object Error]",Xfe="[object Map]",Jfe="[object Number]",Zfe="[object Object]",Qfe="[object RegExp]",ehe="[object Set]",the="[object String]",nhe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},rhe="[object URL]",ihe=Object.prototype.toString;function ahe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:o,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:m}){return function(y,x,w){if(y===x)return!0;if(y==null||x==null)return!1;const S=typeof y;if(S!==typeof x)return!1;if(S!=="object")return S==="number"?o(y,x,w):S==="function"?a(y,x,w):!1;const N=y.constructor;if(N!==x.constructor)return!1;if(N===Object)return l(y,x,w);if(Array.isArray(y))return e(y,x,w);if(N===Date)return r(y,x,w);if(N===RegExp)return d(y,x,w);if(N===Map)return s(y,x,w);if(N===Set)return f(y,x,w);const j=ihe.call(y);if(j===Kfe)return r(y,x,w);if(j===Qfe)return d(y,x,w);if(j===Xfe)return s(y,x,w);if(j===ehe)return f(y,x,w);if(j===Zfe)return typeof y.then!="function"&&typeof x.then!="function"&&l(y,x,w);if(j===rhe)return h(y,x,w);if(j===Yfe)return i(y,x,w);if(j===Ufe)return l(y,x,w);if(nhe[j])return p(y,x,w);if(j===qfe)return t(y,x,w);if(j===Gfe)return n(y,x,w);if(j===Vfe||j===Jfe||j===the)return u(y,x,w);if(m){let E=m[j];if(!E){const C=Efe(y);C&&(E=m[C])}if(E)return E(y,x,w)}return!1}}function she({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:Mfe,areArraysEqual:n?Kp:Lfe,areDataViewsEqual:Ife,areDatesEqual:Dfe,areErrorsEqual:Rfe,areFunctionsEqual:$fe,areMapsEqual:n?o5(mP,Kp):mP,areNumbersEqual:zfe,areObjectsEqual:n?Kp:Ffe,arePrimitiveWrappersEqual:Bfe,areRegExpsEqual:Hfe,areSetsEqual:n?o5(gP,Kp):gP,areTypedArraysEqual:n?o5(Ry,Kp):Ry,areUrlsEqual:Wfe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Ov(r.areArraysEqual),a=Ov(r.areMapsEqual),s=Ov(r.areObjectsEqual),o=Ov(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:o})}return r}function ohe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function lhe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(o,l){const{cache:u=t?new WeakMap:void 0,meta:d}=n();return e(o,l,{cache:u,equals:r,meta:d,strict:i})};if(t)return function(o,l){return e(o,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const a={cache:void 0,equals:r,meta:void 0,strict:i};return function(o,l){return e(o,l,a)}}const BR=Jc();Jc({strict:!0});Jc({circular:!0});Jc({circular:!0,strict:!0});Jc({createInternalComparator:()=>Md});Jc({strict:!0,createInternalComparator:()=>Md});Jc({circular:!0,createInternalComparator:()=>Md});Jc({circular:!0,createInternalComparator:()=>Md,strict:!0});function Jc(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,a=she(t),s=ahe(a),o=n?n(s):ohe(s);return lhe({circular:e,comparator:s,createState:r,equals:o,strict:i})}function che(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function vP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):che(i)};requestAnimationFrame(r)}function lj(t){"@babel/helpers - typeof";return lj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lj(t)}function uhe(t){return phe(t)||hhe(t)||fhe(t)||dhe()}function dhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fhe(t,e){if(t){if(typeof t=="string")return xP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xP(t,e)}}function xP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function phe(t){if(Array.isArray(t))return t}function mhe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=uhe(s),l=o[0],u=o.slice(1);if(typeof l=="number"){vP(i.bind(null,u),l);return}i(l),vP(i.bind(null,u));return}lj(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function O0(t){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){HR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HR(t,e,n){return e=ghe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ghe(t){var e=vhe(t,"string");return O0(e)==="symbol"?e:String(e)}function vhe(t,e){if(O0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(O0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xhe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},yhe=function(e){return e},bhe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Am=function(e,n){return Object.keys(n).reduce(function(r,i){return bP(bP({},r),{},HR({},i,e(i,n[i])))},{})},wP=function(e,n,r){return e.map(function(i){return"".concat(bhe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function whe(t,e){return jhe(t)||Nhe(t,e)||WR(t,e)||She()}function She(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function jhe(t){if(Array.isArray(t))return t}function khe(t){return Ehe(t)||Che(t)||WR(t)||Ahe()}function Ahe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(t,e){if(t){if(typeof t=="string")return cj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cj(t,e)}}function Che(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ehe(t){if(Array.isArray(t))return cj(t)}function cj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $y=1e-4,qR=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},UR=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},SP=function(e,n){return function(r){var i=qR(e,n);return UR(i,r)}},_he=function(e,n){return function(r){var i=qR(e,n),a=[].concat(khe(i.map(function(s,o){return s*o}).slice(1)),[0]);return UR(a,r)}},NP=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=whe(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=SP(i,s),p=SP(a,o),h=_he(i,s),m=function(x){return x>1?1:x<0?0:x},g=function(x){for(var w=x>1?1:x,S=w,N=0;N<8;++N){var j=f(S)-w,E=h(S);if(Math.abs(j-w)<$y||E<$y)return p(S);S=m(S-j/E)}return p(S)};return g.isStepper=!1,g},Ohe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(d,f,p){var h=-(d-f)*r,m=p*a,g=p+(h-m)*o/1e3,y=p*o/1e3+d;return Math.abs(y-f)<$y&&Math.abs(g)<$y?[f,0]:[y,g]};return l.isStepper=!0,l.dt=o,l},Phe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NP(i);case"spring":return Ohe();default:if(i.split("(")[0]==="cubic-bezier")return NP(i)}return typeof i=="function"?i:null};function P0(t){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(t)}function jP(t){return Lhe(t)||Mhe(t)||VR(t)||The()}function The(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lhe(t){if(Array.isArray(t))return dj(t)}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){uj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uj(t,e,n){return e=Ihe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ihe(t){var e=Dhe(t,"string");return P0(e)==="symbol"?e:String(e)}function Dhe(t,e){if(P0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(P0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rhe(t,e){return Fhe(t)||zhe(t,e)||VR(t,e)||$he()}function $he(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VR(t,e){if(t){if(typeof t=="string")return dj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dj(t,e)}}function dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Fhe(t){if(Array.isArray(t))return t}var zy=function(e,n,r){return e+(n-e)*r},fj=function(e){var n=e.from,r=e.to;return n!==r},Bhe=function t(e,n,r){var i=Am(function(a,s){if(fj(s)){var o=e(s.from,s.to,s.velocity),l=Rhe(o,2),u=l[0],d=l[1];return ci(ci({},s),{},{from:u,velocity:d})}return s},n);return r<1?Am(function(a,s){return fj(s)?ci(ci({},s),{},{velocity:zy(s.velocity,i[a].velocity,r),from:zy(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const Hhe=function(t,e,n,r,i){var a=xhe(t,e),s=a.reduce(function(y,x){return ci(ci({},y),{},uj({},x,[t[x],e[x]]))},{}),o=a.reduce(function(y,x){return ci(ci({},y),{},uj({},x,{from:t[x],velocity:0,to:e[x]}))},{}),l=-1,u,d,f=function(){return null},p=function(){return Am(function(x,w){return w.from},o)},h=function(){return!Object.values(o).filter(fj).length},m=function(x){u||(u=x);var w=x-u,S=w/n.dt;o=Bhe(n,o,S),i(ci(ci(ci({},t),e),p())),u=x,h()||(l=requestAnimationFrame(f))},g=function(x){d||(d=x);var w=(x-d)/r,S=Am(function(j,E){return zy.apply(void 0,jP(E).concat([n(w)]))},s);if(i(ci(ci(ci({},t),e),S)),w<1)l=requestAnimationFrame(f);else{var N=Am(function(j,E){return zy.apply(void 0,jP(E).concat([n(1)]))},s);i(ci(ci(ci({},t),e),N))}};return f=n.isStepper?m:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}var Whe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qhe(t,e){if(t==null)return{};var n=Uhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uhe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l5(t){return Yhe(t)||Khe(t)||Ghe(t)||Vhe()}function Vhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ghe(t,e){if(t){if(typeof t=="string")return hj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hj(t,e)}}function Khe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yhe(t){if(Array.isArray(t))return hj(t)}function hj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){om(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function om(t,e,n){return e=GR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GR(r.key),r)}}function Zhe(t,e,n){return e&&Jhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GR(t){var e=Qhe(t,"string");return yh(e)==="symbol"?e:String(e)}function Qhe(t,e){if(yh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function epe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pj(t,e)}function pj(t,e){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pj(t,e)}function tpe(t){var e=npe();return function(){var r=Fy(t),i;if(e){var a=Fy(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return mj(this,i)}}function mj(t,e){if(e&&(yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gj(t)}function gj(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function npe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fy(t)}var jl=function(t){epe(n,t);var e=tpe(n);function n(r,i){var a;Xhe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,d=s.to,f=s.steps,p=s.children,h=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(gj(a)),a.changeStyle=a.changeStyle.bind(gj(a)),!o||h<=0)return a.state={style:{}},typeof p=="function"&&(a.state={style:d}),mj(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof p=="function")return a.state={style:u},mj(a);a.state={style:l?om({},l,u):u}}else a.state={style:{}};return a}return Zhe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,p=this.state.style;if(o){if(!s){var h={style:l?om({},l,d):d};this.state&&p&&(l&&p[l]!==d||!l&&p!==d)&&this.setState(h);return}if(!(BR(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?f:i.to;if(this.state&&p){var y={style:l?om({},l,g):g};(l&&p[l]!==g||!l&&p!==g)&&this.setState(y)}this.runAnimation(Ps(Ps({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,p=i.onAnimationStart,h=Hhe(s,o,Phe(u),l,this.changeStyle),m=function(){a.stopJSAnimation=h()};this.manager.start([p,d,m,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(g,y,x){if(x===0)return g;var w=y.duration,S=y.easing,N=S===void 0?"ease":S,j=y.style,E=y.properties,C=y.onAnimationEnd,P=x>0?s[x-1]:y,T=E||Object.keys(j);if(typeof N=="function"||N==="spring")return[].concat(l5(g),[a.runJSAnimation.bind(a,{from:P.style,to:j,duration:w,easing:N}),w]);var I=wP(T,w,N),k=Ps(Ps(Ps({},P.style),j),{},{transition:I});return[].concat(l5(g),[k,w,C]).filter(yhe)};return this.manager.start([l].concat(l5(s.reduce(h,[d,Math.max(p,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=mhe());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,p=i.steps,h=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(i);return}if(p.length>1){this.runStepAnimation(i);return}var g=o?om({},o,l):l,y=wP(Object.keys(g),s,u);m.start([d,a,Ps(Ps({},g),{},{transition:y}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=qhe(i,Whe),u=q.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var f=function(h){var m=h.props,g=m.style,y=g===void 0?{}:g,x=m.className,w=q.cloneElement(h,Ps(Ps({},l),{},{style:Ps(Ps({},y),d),className:x}));return w};return u===1?f(q.Children.only(a)):ue.createElement("div",null,q.Children.map(a,function(p){return f(p)}))}}]),n}(q.PureComponent);jl.displayName="Animate";jl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};jl.propTypes={from:hn.oneOfType([hn.object,hn.string]),to:hn.oneOfType([hn.object,hn.string]),attributeName:hn.string,duration:hn.number,begin:hn.number,easing:hn.oneOfType([hn.string,hn.func]),steps:hn.arrayOf(hn.shape({duration:hn.number.isRequired,style:hn.object.isRequired,easing:hn.oneOfType([hn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hn.func]),properties:hn.arrayOf("string"),onAnimationEnd:hn.func})),children:hn.oneOfType([hn.node,hn.func]),isActive:hn.bool,canBegin:hn.bool,onAnimationEnd:hn.func,shouldReAnimate:hn.bool,onAnimationStart:hn.func,onAnimationReStart:hn.func};function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},By.apply(this,arguments)}function rpe(t,e){return ope(t)||spe(t,e)||ape(t,e)||ipe()}function ipe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ape(t,e){if(t){if(typeof t=="string")return CP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CP(t,e)}}function CP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function spe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ope(t){if(Array.isArray(t))return t}function EP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(n),!0).forEach(function(r){lpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lpe(t,e,n){return e=cpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cpe(t){var e=upe(t,"string");return T0(e)=="symbol"?e:e+""}function upe(t,e){if(T0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(T0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OP=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),d+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),d+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var m=Math.min(s,a);d="M ".concat(e,",").concat(n+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(n,`
            L `).concat(e+r-l*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*m,`
            L `).concat(e+r,",").concat(n+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-l*m,",").concat(n+i,`
            L `).concat(e+l*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*m," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},dpe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+l),p=Math.max(s,s+l);return r>=u&&r<=d&&i>=f&&i<=p}return!1},fpe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},E3=function(e){var n=_P(_P({},fpe),e),r=q.useRef(),i=q.useState(-1),a=rpe(i,2),s=a[0],o=a[1];q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&o(N)}catch{}},[]);var l=n.x,u=n.y,d=n.width,f=n.height,p=n.radius,h=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,x=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var S=Jt("recharts-rectangle",h);return w?ue.createElement(jl,{canBegin:s>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:g,animationEasing:m,isActive:w},function(N){var j=N.width,E=N.height,C=N.x,P=N.y;return ue.createElement(jl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:x,easing:m},ue.createElement("path",By({},It(n,!0),{className:S,d:OP(C,P,j,E,p),ref:r})))}):ue.createElement("path",By({},It(n,!0),{className:S,d:OP(l,u,d,f,p)}))},hpe=["points","className","baseLinePoints","connectNulls"];function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pf.apply(this,arguments)}function ppe(t,e){if(t==null)return{};var n=mpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function PP(t){return ype(t)||xpe(t)||vpe(t)||gpe()}function gpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vpe(t,e){if(t){if(typeof t=="string")return vj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vj(t,e)}}function xpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ype(t){if(Array.isArray(t))return vj(t)}function vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var TP=function(e){return e&&e.x===+e.x&&e.y===+e.y},bpe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){TP(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),TP(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Cm=function(e,n){var r=bpe(e);n&&(r=[r.reduce(function(a,s){return[].concat(PP(a),PP(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},wpe=function(e,n,r){var i=Cm(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Cm(n.reverse(),r).slice(1))},Spe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=ppe(e,hpe);if(!n||!n.length)return null;var o=Jt("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=wpe(n,i,a);return ue.createElement("g",{className:o},ue.createElement("path",Pf({},It(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?ue.createElement("path",Pf({},It(s,!0),{fill:"none",d:Cm(n,a)})):null,l?ue.createElement("path",Pf({},It(s,!0),{fill:"none",d:Cm(i,a)})):null)}var d=Cm(n,a);return ue.createElement("path",Pf({},It(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function xj(){return xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xj.apply(this,arguments)}var _3=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=Jt("recharts-dot",a);return n===+n&&r===+r&&i===+i?q.createElement("circle",xj({},It(e,!1),oy(e),{className:s,cx:n,cy:r,r:i})):null};function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}var Npe=["x","y","top","left","width","height","className"];function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(this,arguments)}function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(n),!0).forEach(function(r){kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kpe(t,e,n){return e=Ape(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ape(t){var e=Cpe(t,"string");return M0(e)=="symbol"?e:e+""}function Cpe(t,e){if(M0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(M0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Epe(t,e){if(t==null)return{};var n=_pe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _pe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ope=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Ppe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,d=e.width,f=d===void 0?0:d,p=e.height,h=p===void 0?0:p,m=e.className,g=Epe(e,Npe),y=jpe({x:r,y:a,top:o,left:u,width:f,height:h},g);return!nt(r)||!nt(a)||!nt(f)||!nt(h)||!nt(o)||!nt(u)?null:ue.createElement("path",yj({},It(y,!0),{className:Jt("recharts-cross",m),d:Ope(r,a,f,h,o,u)}))},Tpe=e2,Mpe=iR,Lpe=ko;function Ipe(t,e){return t&&t.length?Tpe(t,Lpe(e),Mpe):void 0}var Dpe=Ipe;const Rpe=pn(Dpe);var $pe=e2,zpe=ko,Fpe=aR;function Bpe(t,e){return t&&t.length?$pe(t,zpe(e),Fpe):void 0}var Hpe=Bpe;const Wpe=pn(Hpe);var qpe=["cx","cy","angle","ticks","axisLine"],Upe=["ticks","tick","angle","tickFormatter","stroke"];function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Em.apply(this,arguments)}function LP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LP(Object(n),!0).forEach(function(r){o2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IP(t,e){if(t==null)return{};var n=Vpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YR(r.key),r)}}function Kpe(t,e,n){return e&&DP(t.prototype,e),n&&DP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ype(t,e,n){return e=Hy(e),Xpe(t,KR()?Reflect.construct(e,n||[],Hy(t).constructor):e.apply(t,n))}function Xpe(t,e){if(e&&(bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jpe(t)}function Jpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KR=function(){return!!t})()}function Hy(t){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hy(t)}function Zpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bj(t,e)}function bj(t,e){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bj(t,e)}function o2(t,e,n){return e=YR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YR(t){var e=Qpe(t,"string");return bh(e)=="symbol"?e:e+""}function Qpe(t,e){if(bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l2=function(t){function e(){return Gpe(this,e),Ype(this,e,arguments)}return Zpe(e,t),Kpe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return Rn(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=Rpe(o,function(d){return d.coordinate||0}),u=Wpe(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=IP(r,qpe),d=o.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),f=Rn(i,a,d[0],s),p=Rn(i,a,d[1],s),h=yu(yu(yu({},It(u,!1)),{},{fill:"none"},It(l,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return ue.createElement("line",Em({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,d=IP(i,Upe),f=this.getTickTextAnchor(),p=It(d,!1),h=It(s,!1),m=a.map(function(g,y){var x=r.getTickValueCoord(g),w=yu(yu(yu(yu({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:y},x),{},{payload:g});return ue.createElement(wn,Em({className:Jt("recharts-polar-radius-axis-tick",MR(s)),key:"tick-".concat(g.coordinate)},fd(r.props,g,y)),e.renderTickItem(s,w,l?l(g.value,y):g.value))});return ue.createElement(wn,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:ue.createElement(wn,{className:Jt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Xr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ue.isValidElement(r)?s=ue.cloneElement(r,i):Ft(r)?s=r(i):s=ue.createElement(hd,Em({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(q.PureComponent);o2(l2,"displayName","PolarRadiusAxis");o2(l2,"axisType","radiusAxis");o2(l2,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pu.apply(this,arguments)}function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RP(Object(n),!0).forEach(function(r){c2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JR(r.key),r)}}function tme(t,e,n){return e&&$P(t.prototype,e),n&&$P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nme(t,e,n){return e=Wy(e),rme(t,XR()?Reflect.construct(e,n||[],Wy(t).constructor):e.apply(t,n))}function rme(t,e){if(e&&(wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ime(t)}function ime(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!t})()}function Wy(t){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wy(t)}function ame(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wj(t,e)}function wj(t,e){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wj(t,e)}function c2(t,e,n){return e=JR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JR(t){var e=sme(t,"string");return wh(e)=="symbol"?e:e+""}function sme(t,e){if(wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ome=Math.PI/180,zP=1e-5,u2=function(t){function e(){return eme(this,e),nme(this,e,arguments)}return ame(e,t),tme(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,d=u||8,f=Rn(a,s,o,r.coordinate),p=Rn(a,s,o+(l==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*ome),s;return a>zP?s=i==="outer"?"start":"end":a<-zP?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=bu(bu({},It(this.props,!1)),{},{fill:"none"},It(o,!1));if(l==="circle")return ue.createElement(_3,Pu({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,f=d.map(function(p){return Rn(i,a,s,p.coordinate)});return ue.createElement(Spe,Pu({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,d=It(this.props,!1),f=It(s,!1),p=bu(bu({},d),{},{fill:"none"},It(o,!1)),h=a.map(function(m,g){var y=r.getTickLineCoord(m),x=r.getTickTextAnchor(m),w=bu(bu(bu({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:m,x:y.x2,y:y.y2});return ue.createElement(wn,Pu({className:Jt("recharts-polar-angle-axis-tick",MR(s)),key:"tick-".concat(m.coordinate)},fd(r.props,m,g)),o&&ue.createElement("line",Pu({className:"recharts-polar-angle-axis-tick-line"},p,y)),s&&e.renderTickItem(s,w,l?l(m.value,g):m.value))});return ue.createElement(wn,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:ue.createElement(wn,{className:Jt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return ue.isValidElement(r)?s=ue.cloneElement(r,i):Ft(r)?s=r(i):s=ue.createElement(hd,Pu({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(q.PureComponent);c2(u2,"displayName","PolarAngleAxis");c2(u2,"axisType","angleAxis");c2(u2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var lme=e7,cme=lme(Object.getPrototypeOf,Object),ume=cme,dme=Cl,fme=ume,hme=El,pme="[object Object]",mme=Function.prototype,gme=Object.prototype,ZR=mme.toString,vme=gme.hasOwnProperty,xme=ZR.call(Object);function yme(t){if(!hme(t)||dme(t)!=pme)return!1;var e=fme(t);if(e===null)return!0;var n=vme.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&ZR.call(n)==xme}var bme=yme;const wme=pn(bme);var Sme=Cl,Nme=El,jme="[object Boolean]";function kme(t){return t===!0||t===!1||Nme(t)&&Sme(t)==jme}var Ame=kme;const Cme=pn(Ame);function L0(t){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L0(t)}function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(this,arguments)}function Eme(t,e){return Tme(t)||Pme(t,e)||Ome(t,e)||_me()}function _me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ome(t,e){if(t){if(typeof t=="string")return FP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(t,e)}}function FP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pme(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Tme(t){if(Array.isArray(t))return t}function BP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(n),!0).forEach(function(r){Mme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mme(t,e,n){return e=Lme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lme(t){var e=Ime(t,"string");return L0(e)=="symbol"?e:e+""}function Ime(t,e){if(L0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(L0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WP=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},Dme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rme=function(e){var n=HP(HP({},Dme),e),r=q.useRef(),i=q.useState(-1),a=Eme(i,2),s=a[0],o=a[1];q.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var l=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,p=n.height,h=n.className,m=n.animationEasing,g=n.animationDuration,y=n.animationBegin,x=n.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var w=Jt("recharts-trapezoid",h);return x?ue.createElement(jl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:p,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:l,y:u},duration:g,animationEasing:m,isActive:x},function(S){var N=S.upperWidth,j=S.lowerWidth,E=S.height,C=S.x,P=S.y;return ue.createElement(jl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:m},ue.createElement("path",qy({},It(n,!0),{className:w,d:WP(C,P,N,j,E),ref:r})))}):ue.createElement("g",null,ue.createElement("path",qy({},It(n,!0),{className:w,d:WP(l,u,d,f,p)})))},$me=["option","shapeType","propTransformer","activeClassName","isActive"];function I0(t){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I0(t)}function zme(t,e){if(t==null)return{};var n=Fme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){Bme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bme(t,e,n){return e=Hme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hme(t){var e=Wme(t,"string");return I0(e)=="symbol"?e:e+""}function Wme(t,e){if(I0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(I0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qme(t,e){return Uy(Uy({},e),t)}function Ume(t,e){return t==="symbols"}function UP(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ue.createElement(E3,n);case"trapezoid":return ue.createElement(Rme,n);case"sector":return ue.createElement(DR,n);case"symbols":if(Ume(e))return ue.createElement(GA,n);break;default:return null}}function Vme(t){return q.isValidElement(t)?t.props:t}function QR(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?qme:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=zme(t,$me),u;if(q.isValidElement(e))u=q.cloneElement(e,Uy(Uy({},l),Vme(e)));else if(Ft(e))u=e(l);else if(wme(e)&&!Cme(e)){var d=i(e,l);u=ue.createElement(UP,{shapeType:n,elementProps:d})}else{var f=l;u=ue.createElement(UP,{shapeType:n,elementProps:f})}return o?ue.createElement(wn,{className:s},u):u}function d2(t,e){return e!=null&&"trapezoids"in t.props}function f2(t,e){return e!=null&&"sectors"in t.props}function D0(t,e){return e!=null&&"points"in t.props}function Gme(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Kme(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Yme(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Xme(t,e){var n;return d2(t,e)?n=Gme:f2(t,e)?n=Kme:D0(t,e)&&(n=Yme),n}function Jme(t,e){var n;return d2(t,e)?n="trapezoids":f2(t,e)?n="sectors":D0(t,e)&&(n="points"),n}function Zme(t,e){if(d2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(f2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return D0(t,e)?e.payload:{}}function Qme(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Jme(n,e),a=Zme(n,e),s=r.filter(function(l,u){var d=r2(a,l),f=n.props[i].filter(function(m){var g=Xme(n,e);return g(m,e)}),p=n.props[i].indexOf(f[f.length-1]),h=u===p;return d&&h}),o=r.indexOf(s[s.length-1]);return o}var bx;function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function Tf(){return Tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tf.apply(this,arguments)}function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(r){ls(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t$(r.key),r)}}function t0e(t,e,n){return e&&GP(t.prototype,e),n&&GP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n0e(t,e,n){return e=Vy(e),r0e(t,e$()?Reflect.construct(e,n||[],Vy(t).constructor):e.apply(t,n))}function r0e(t,e){if(e&&(Sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0e(t)}function i0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e$=function(){return!!t})()}function Vy(t){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vy(t)}function a0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}function Sj(t,e){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sj(t,e)}function ls(t,e,n){return e=t$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t$(t){var e=s0e(t,"string");return Sh(e)=="symbol"?e:e+""}function s0e(t,e){if(Sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ol=function(t){function e(n){var r;return e0e(this,e),r=n0e(this,e,[n]),ls(r,"pieRef",null),ls(r,"sectorRefs",[]),ls(r,"id",pg("recharts-pie-")),ls(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ft(i)&&i()}),ls(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ft(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return a0e(e,t),t0e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,d=It(this.props,!1),f=It(s,!1),p=It(o,!1),h=s&&s.offsetRadius||20,m=r.map(function(g,y){var x=(g.startAngle+g.endAngle)/2,w=Rn(g.cx,g.cy,g.outerRadius+h,x),S=Ln(Ln(Ln(Ln({},d),g),{},{stroke:"none"},f),{},{index:y,textAnchor:e.getTextAnchor(w.x,g.cx)},w),N=Ln(Ln(Ln(Ln({},d),g),{},{fill:"none",stroke:g.fill},p),{},{index:y,points:[Rn(g.cx,g.cy,g.outerRadius,x),w]}),j=l;return Zt(l)&&Zt(u)?j="value":Zt(l)&&(j=u),ue.createElement(wn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},o&&e.renderLabelLineItem(o,N,"line"),e.renderLabelItem(s,S,Pi(g,j)))});return ue.createElement(wn,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),p=l&&i.hasActiveIndex()?l:null,h=f?s:p,m=Ln(Ln({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return ue.createElement(wn,Tf({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},fd(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),ue.createElement(QR,Tf({option:h,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return ue.createElement(jl,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,y=[],x=a&&a[0],w=x.startAngle;return a.forEach(function(S,N){var j=p&&p[N],E=N>0?$a(S,"paddingAngle",0):0;if(j){var C=sc(j.endAngle-j.startAngle,S.endAngle-S.startAngle),P=Ln(Ln({},S),{},{startAngle:w+E,endAngle:w+C(g)+E});y.push(P),w=P.endAngle}else{var T=S.endAngle,I=S.startAngle,k=sc(0,T-I),O=k(g),R=Ln(Ln({},S),{},{startAngle:w+E,endAngle:w+O+E});y.push(R),w=R.endAngle}}),ue.createElement(wn,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!r2(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,d=i.cy,f=i.innerRadius,p=i.outerRadius,h=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!s||!s.length||!nt(u)||!nt(d)||!nt(f)||!nt(p))return null;var g=Jt("recharts-pie",o);return ue.createElement(wn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){r.pieRef=x}},this.renderSectors(),l&&this.renderLabels(s),Xr.renderCallByParent(this.props,null,!1),(!h||m)&&Mc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(ue.isValidElement(r))return ue.cloneElement(r,i);if(Ft(r))return r(i);var s=Jt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ue.createElement(oj,Tf({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(ue.isValidElement(r))return ue.cloneElement(r,i);var s=a;if(Ft(r)&&(s=r(i),ue.isValidElement(s)))return s;var o=Jt("recharts-pie-label-text",typeof r!="boolean"&&!Ft(r)?r.className:"");return ue.createElement(hd,Tf({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(q.PureComponent);bx=Ol;ls(Ol,"displayName","Pie");ls(Ol,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Qh.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ls(Ol,"parseDeltaAngle",function(t,e){var n=qi(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ls(Ol,"getRealPieData",function(t){var e=t.data,n=t.children,r=It(t,!1),i=hs(n,ph);return e&&e.length?e.map(function(a,s){return Ln(Ln(Ln({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Ln(Ln({},r),a.props)}):[]});ls(Ol,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=TR(i,a),o=r+Ui(t.cx,i,i/2),l=n+Ui(t.cy,a,a/2),u=Ui(t.innerRadius,s,0),d=Ui(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});ls(Ol,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Ln(Ln({},e.type.defaultProps),e.props):e.props,i=bx.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,p=r.tooltipType,h=Math.abs(r.minAngle),m=bx.parseCoordinateOfPie(r,n),g=bx.parseDeltaAngle(s,o),y=Math.abs(g),x=u;Zt(u)&&Zt(f)?(Ws(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Zt(u)&&(Ws(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var w=i.filter(function(P){return Pi(P,x,0)!==0}).length,S=(y>=360?w:w-1)*l,N=y-w*h-S,j=i.reduce(function(P,T){var I=Pi(T,x,0);return P+(nt(I)?I:0)},0),E;if(j>0){var C;E=i.map(function(P,T){var I=Pi(P,x,0),k=Pi(P,d,T),O=(nt(I)?I:0)/j,R;T?R=C.endAngle+qi(g)*l*(I!==0?1:0):R=s;var D=R+qi(g)*((I!==0?h:0)+O*N),B=(R+D)/2,V=(m.innerRadius+m.outerRadius)/2,Z=[{name:k,value:I,payload:P,dataKey:x,type:p}],H=Rn(m.cx,m.cy,V,B);return C=Ln(Ln(Ln({percent:O,cornerRadius:a,name:k,tooltipPayload:Z,midAngle:B,middleRadius:V,tooltipPosition:H},P),m),{},{value:Pi(P,x),startAngle:R,endAngle:D,payload:P,paddingAngle:qi(g)*l}),C})}return Ln(Ln({},m),{},{sectors:E,data:i})});var o0e=Math.ceil,l0e=Math.max;function c0e(t,e,n,r){for(var i=-1,a=l0e(o0e((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var u0e=c0e,d0e=y7,KP=1/0,f0e=17976931348623157e292;function h0e(t){if(!t)return t===0?t:0;if(t=d0e(t),t===KP||t===-KP){var e=t<0?-1:1;return e*f0e}return t===t?t:0}var n$=h0e,p0e=u0e,m0e=Gb,c5=n$;function g0e(t){return function(e,n,r){return r&&typeof r!="number"&&m0e(e,n,r)&&(n=r=void 0),e=c5(e),n===void 0?(n=e,e=0):n=c5(n),r=r===void 0?e<n?1:-1:c5(r),p0e(e,n,r,t)}}var v0e=g0e,x0e=v0e,y0e=x0e(),b0e=y0e;const Gy=pn(b0e);function R0(t){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R0(t)}function YP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(n),!0).forEach(function(r){r$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r$(t,e,n){return e=w0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w0e(t){var e=S0e(t,"string");return R0(e)=="symbol"?e:e+""}function S0e(t,e){if(R0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(R0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N0e=["Webkit","Moz","O","ms"],j0e=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=N0e.reduce(function(a,s){return XP(XP({},a),{},r$({},s+r,n))},{});return i[e]=n,i};function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ky.apply(this,arguments)}function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(r){_a(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a$(r.key),r)}}function A0e(t,e,n){return e&&ZP(t.prototype,e),n&&ZP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C0e(t,e,n){return e=Yy(e),E0e(t,i$()?Reflect.construct(e,n||[],Yy(t).constructor):e.apply(t,n))}function E0e(t,e){if(e&&(Nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _0e(t)}function _0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i$=function(){return!!t})()}function Yy(t){return Yy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yy(t)}function O0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nj(t,e)}function Nj(t,e){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Nj(t,e)}function _a(t,e,n){return e=a$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a$(t){var e=P0e(t,"string");return Nh(e)=="symbol"?e:e+""}function P0e(t,e){if(Nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T0e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=jm().domain(Gy(0,l)).range([a,a+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},QP=function(e){return e.changedTouches&&!!e.changedTouches.length},jh=function(t){function e(n){var r;return k0e(this,e),r=C0e(this,e,[n]),_a(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),_a(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),_a(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),_a(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),_a(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),_a(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),_a(r,"handleSlideDragStart",function(i){var a=QP(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return O0e(e,t),A0e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,f=Math.min(i,a),p=Math.max(i,a),h=e.getIndexInRange(s,f),m=e.getIndexInRange(s,p);return{startIndex:h-h%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=Pi(a[r],o,r);return Ft(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.startIndex,h=l.endIndex,m=l.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-f-o,u+d-f-s):g<0&&(g=Math.max(g,u-s,u-o));var y=this.getIndex({startX:s+g,endX:o+g});(y.startIndex!==p||y.endIndex!==h)&&m&&m(y),this.setState({startX:s+g,endX:o+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=QP(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,m=d.onChange,g=d.gap,y=d.data,x={startX:this.state.startX,endX:this.state.endX},w=r.pageX-a;w>0?w=Math.min(w,f+p-h-u):w<0&&(w=Math.max(w,f-u)),x[s]=u+w;var S=this.getIndex(x),N=S.startIndex,j=S.endIndex,E=function(){var P=y.length-1;return s==="startX"&&(o>l?N%g===0:j%g===0)||o<l&&j===P||s==="endX"&&(o>l?j%g===0:N%g===0)||o>l&&j===P};this.setState(_a(_a({},s,u+w),"brushMoveStartX",r.pageX),function(){m&&E()&&m(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var p=f+r;if(!(p===-1||p>=o.length)){var h=o[p];i==="startX"&&h>=u||i==="endX"&&h<=l||this.setState(_a({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return ue.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,d=r.padding,f=q.Children.only(u);return f?ue.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,p=l.traveller,h=l.ariaLabel,m=l.data,g=l.startIndex,y=l.endIndex,x=Math.max(r,this.props.x),w=u5(u5({},It(this.props,!1)),{},{x,y:u,width:d,height:f}),S=h||"Min value: ".concat((a=m[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=m[y])===null||s===void 0?void 0:s.name);return ue.createElement(wn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),o.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,w))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return ue.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,p=d.endX,h=5,m={pointerEvents:"none",fill:u};return ue.createElement(wn,{className:"recharts-brush-texts"},ue.createElement(hd,Ky({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:s+o/2},m),this.getTextOfTick(i)),ue.createElement(hd,Ky({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+l+h,y:s+o/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,d=r.height,f=r.alwaysShowText,p=this.state,h=p.startX,m=p.endX,g=p.isTextActive,y=p.isSlideMoving,x=p.isTravellerMoving,w=p.isTravellerFocused;if(!i||!i.length||!nt(o)||!nt(l)||!nt(u)||!nt(d)||u<=0||d<=0)return null;var S=Jt("recharts-brush",a),N=ue.Children.count(s)===1,j=j0e("userSelect","none");return ue.createElement(wn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(g||y||x||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return ue.createElement(ue.Fragment,null,ue.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),ue.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),ue.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return ue.isValidElement(r)?a=ue.cloneElement(r,i):Ft(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return u5({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?T0e({data:a,width:s,x:o,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var p=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(q.PureComponent);_a(jh,"displayName","Brush");_a(jh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var M0e=e3;function L0e(t,e){var n;return M0e(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var I0e=L0e,D0e=VD,R0e=ko,$0e=I0e,z0e=ga,F0e=Gb;function B0e(t,e,n){var r=z0e(t)?D0e:$0e;return n&&F0e(t,e,n)&&(e=void 0),r(t,R0e(e))}var H0e=B0e;const W0e=pn(H0e);var xo=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},eT=p7;function q0e(t,e,n){e=="__proto__"&&eT?eT(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var U0e=q0e,V0e=U0e,G0e=f7,K0e=ko;function Y0e(t,e){var n={};return e=K0e(e),G0e(t,function(r,i,a){V0e(n,i,e(r,i,a))}),n}var X0e=Y0e;const J0e=pn(X0e);function Z0e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Q0e=Z0e,ege=e3;function tge(t,e){var n=!0;return ege(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var nge=tge,rge=Q0e,ige=nge,age=ko,sge=ga,oge=Gb;function lge(t,e,n){var r=sge(t)?rge:ige;return n&&oge(t,e,n)&&(e=void 0),r(t,age(e))}var cge=lge;const s$=pn(cge);var uge=["x","y"];function $0(t){"@babel/helpers - typeof";return $0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(t)}function jj(){return jj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jj.apply(this,arguments)}function tT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(n),!0).forEach(function(r){dge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dge(t,e,n){return e=fge(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fge(t){var e=hge(t,"string");return $0(e)=="symbol"?e:e+""}function hge(t,e){if($0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pge(t,e){if(t==null)return{};var n=mge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gge(t,e){var n=t.x,r=t.y,i=pge(t,uge),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),p=parseInt(f,10);return Yp(Yp(Yp(Yp(Yp({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function nT(t){return ue.createElement(QR,jj({shapeType:"rectangle",propTransformer:gge,activeClassName:"recharts-active-bar"},t))}var vge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=nt(r)||FY(r);return a?e(r,i):(a||md(),n)}},xge=["value","background"],o$;function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function yge(t,e){if(t==null)return{};var n=bge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xy.apply(this,arguments)}function rT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rT(Object(n),!0).forEach(function(r){yc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c$(r.key),r)}}function Sge(t,e,n){return e&&iT(t.prototype,e),n&&iT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nge(t,e,n){return e=Jy(e),jge(t,l$()?Reflect.construct(e,n||[],Jy(t).constructor):e.apply(t,n))}function jge(t,e){if(e&&(kh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kge(t)}function kge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l$=function(){return!!t})()}function Jy(t){return Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jy(t)}function Age(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kj(t,e)}function kj(t,e){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kj(t,e)}function yc(t,e,n){return e=c$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c$(t){var e=Cge(t,"string");return kh(e)=="symbol"?e:e+""}function Cge(t,e){if(kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zc=function(t){function e(){var n;wge(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nge(this,e,[].concat(i)),yc(n,"state",{isAnimationFinished:!1}),yc(n,"id",pg("recharts-bar-")),yc(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),yc(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Age(e,t),Sge(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,d=It(this.props,!1);return r&&r.map(function(f,p){var h=p===l,m=h?u:s,g=Ar(Ar(Ar({},d),f),{},{isActive:h,option:m,index:p,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ue.createElement(wn,Xy({className:"recharts-bar-rectangle"},fd(i.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),ue.createElement(nT,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,p=this.state.prevData;return ue.createElement(jl,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=a.map(function(y,x){var w=p&&p[x];if(w){var S=sc(w.x,y.x),N=sc(w.y,y.y),j=sc(w.width,y.width),E=sc(w.height,y.height);return Ar(Ar({},y),{},{x:S(m),y:N(m),width:j(m),height:E(m)})}if(s==="horizontal"){var C=sc(0,y.height),P=C(m);return Ar(Ar({},y),{},{y:y.y+y.height-P,height:P})}var T=sc(0,y.width),I=T(m);return Ar(Ar({},y),{},{width:I})});return ue.createElement(wn,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!r2(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=It(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,p=yge(u,xge);if(!f)return null;var h=Ar(Ar(Ar(Ar(Ar({},p),{},{fill:"#eee"},f),l),fd(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return ue.createElement(nT,Xy({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=hs(d,s2);if(!f)return null;var p=u==="vertical"?s[0].height/2:s[0].width/2,h=function(y,x){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:Pi(y,x)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ue.createElement(wn,m,f.map(function(g){return ue.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,d=r.top,f=r.width,p=r.height,h=r.isAnimationActive,m=r.background,g=r.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,x=Jt("recharts-bar",s),w=o&&o.allowDataOverflow,S=l&&l.allowDataOverflow,N=w||S,j=Zt(g)?this.id:g;return ue.createElement(wn,{className:x},w||S?ue.createElement("defs",null,ue.createElement("clipPath",{id:"clipPath-".concat(j)},ue.createElement("rect",{x:w?u:u-f/2,y:S?d:d-p/2,width:w?f:f*2,height:S?p:p*2}))):null,ue.createElement(wn,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(j,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,j),(!h||y)&&Mc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(q.PureComponent);o$=Zc;yc(Zc,"displayName","Bar");yc(Zc,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Qh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});yc(Zc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,h=ide(r,n);if(!h)return null;var m=e.layout,g=n.type.defaultProps,y=g!==void 0?Ar(Ar({},g),n.props):n.props,x=y.dataKey,w=y.children,S=y.minPointSize,N=m==="horizontal"?s:a,j=u?N.scale.domain():null,E=dde({numericAxis:N}),C=hs(w,ph),P=f.map(function(T,I){var k,O,R,D,B,V;u?k=ade(u[d+I],j):(k=Pi(T,x),Array.isArray(k)||(k=[E,k]));var Z=vge(S,o$.defaultProps.minPointSize)(k[1],I);if(m==="horizontal"){var H,Q=[s.scale(k[0]),s.scale(k[1])],fe=Q[0],le=Q[1];O=XO({axis:a,ticks:o,bandSize:i,offset:h.offset,entry:T,index:I}),R=(H=le??fe)!==null&&H!==void 0?H:void 0,D=h.size;var L=fe-le;if(B=Number.isNaN(L)?0:L,V={x:O,y:s.y,width:D,height:s.height},Math.abs(Z)>0&&Math.abs(B)<Math.abs(Z)){var F=qi(B||Z)*(Math.abs(Z)-Math.abs(B));R-=F,B+=F}}else{var G=[a.scale(k[0]),a.scale(k[1])],ee=G[0],ie=G[1];if(O=ee,R=XO({axis:s,ticks:l,bandSize:i,offset:h.offset,entry:T,index:I}),D=ie-ee,B=h.size,V={x:a.x,y:R,width:a.width,height:B},Math.abs(Z)>0&&Math.abs(D)<Math.abs(Z)){var se=qi(D||Z)*(Math.abs(Z)-Math.abs(D));D+=se}}return Ar(Ar(Ar({},T),{},{x:O,y:R,width:D,height:B,value:u?k:k[1],payload:T,background:V},C&&C[I]&&C[I].props),{},{tooltipPayload:[OR(n,T)],tooltipPosition:{x:O+D/2,y:R+B/2}})});return Ar({data:P,layout:m},p)});function z0(t){"@babel/helpers - typeof";return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z0(t)}function Ege(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u$(r.key),r)}}function _ge(t,e,n){return e&&aT(t.prototype,e),n&&aT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(n),!0).forEach(function(r){h2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h2(t,e,n){return e=u$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u$(t){var e=Oge(t,"string");return z0(e)=="symbol"?e:e+""}function Oge(t,e){if(z0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(z0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pge=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},p=!!Pa(u,Zc);return d.reduce(function(h,m){var g=n[m],y=g.orientation,x=g.domain,w=g.padding,S=w===void 0?{}:w,N=g.mirror,j=g.reversed,E="".concat(y).concat(N?"Mirror":""),C,P,T,I,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=x[1]-x[0],R=1/0,D=g.categoricalDomain.sort(WY);if(D.forEach(function(G,ee){ee>0&&(R=Math.min((G||0)-(D[ee-1]||0),R))}),Number.isFinite(R)){var B=R/O,V=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(C=B*V/2),g.padding==="no-gap"){var Z=Ui(e.barCategoryGap,B*V),H=B*V/2;C=H-Z-(H-Z)/V*Z}}}i==="xAxis"?P=[r.left+(S.left||0)+(C||0),r.left+r.width-(S.right||0)-(C||0)]:i==="yAxis"?P=l==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(C||0),r.top+r.height-(S.bottom||0)-(C||0)]:P=g.range,j&&(P=[P[1],P[0]]);var Q=AR(g,a,p),fe=Q.scale,le=Q.realScaleType;fe.domain(x).range(P),CR(fe);var L=ER(fe,Is(Is({},g),{},{realScaleType:le}));i==="xAxis"?(k=y==="top"&&!N||y==="bottom"&&N,T=r.left,I=f[E]-k*g.height):i==="yAxis"&&(k=y==="left"&&!N||y==="right"&&N,T=f[E]-k*g.width,I=r.top);var F=Is(Is(Is({},g),L),{},{realScaleType:le,x:T,y:I,scale:fe,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return F.bandSize=Ly(F,L),!g.hide&&i==="xAxis"?f[E]+=(k?-1:1)*F.height:g.hide||(f[E]+=(k?-1:1)*F.width),Is(Is({},h),{},h2({},m,F))},{})},d$=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},Tge=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return d$({x:n,y:r},{x:i,y:a})},f$=function(){function t(e){Ege(this,t),this.scale=e}return _ge(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();h2(f$,"EPS",1e-4);var O3=function(e){var n=Object.keys(e).reduce(function(r,i){return Is(Is({},r),{},h2({},i,f$.create(e[i])))},{});return Is(Is({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return J0e(i,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return s$(i,function(a,s){return n[s].isInRange(a)})}})};function Mge(t){return(t%180+180)%180}var Lge=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Mge(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Ige=ko,Dge=mg,Rge=Ub;function $ge(t){return function(e,n,r){var i=Object(e);if(!Dge(e)){var a=Ige(n);e=Rge(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var zge=$ge,Fge=n$;function Bge(t){var e=Fge(t),n=e%1;return e===e?n?e-n:e:0}var Hge=Bge,Wge=s7,qge=ko,Uge=Hge,Vge=Math.max;function Gge(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Uge(n);return i<0&&(i=Vge(r+i,0)),Wge(t,qge(e),i)}var Kge=Gge,Yge=zge,Xge=Kge,Jge=Yge(Xge),Zge=Jge;const Qge=pn(Zge);var eve=VK(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),P3=q.createContext(void 0),T3=q.createContext(void 0),h$=q.createContext(void 0),p$=q.createContext({}),m$=q.createContext(void 0),g$=q.createContext(0),v$=q.createContext(0),oT=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,d=eve(a);return ue.createElement(P3.Provider,{value:r},ue.createElement(T3.Provider,{value:i},ue.createElement(p$.Provider,{value:a},ue.createElement(h$.Provider,{value:d},ue.createElement(m$.Provider,{value:s},ue.createElement(g$.Provider,{value:u},ue.createElement(v$.Provider,{value:l},o)))))))},tve=function(){return q.useContext(m$)},x$=function(e){var n=q.useContext(P3);n==null&&md();var r=n[e];return r==null&&md(),r},nve=function(){var e=q.useContext(P3);return hc(e)},rve=function(){var e=q.useContext(T3),n=Qge(e,function(r){return s$(r.domain,Number.isFinite)});return n||hc(e)},y$=function(e){var n=q.useContext(T3);n==null&&md();var r=n[e];return r==null&&md(),r},ive=function(){var e=q.useContext(h$);return e},ave=function(){return q.useContext(p$)},M3=function(){return q.useContext(v$)},L3=function(){return q.useContext(g$)};function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function sve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ove(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w$(r.key),r)}}function lve(t,e,n){return e&&ove(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cve(t,e,n){return e=Zy(e),uve(t,b$()?Reflect.construct(e,n||[],Zy(t).constructor):e.apply(t,n))}function uve(t,e){if(e&&(Ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dve(t)}function dve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b$=function(){return!!t})()}function Zy(t){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zy(t)}function fve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aj(t,e)}function Aj(t,e){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Aj(t,e)}function lT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lT(Object(n),!0).forEach(function(r){I3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I3(t,e,n){return e=w$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w$(t){var e=hve(t,"string");return Ah(e)=="symbol"?e:e+""}function hve(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pve(t,e){return xve(t)||vve(t,e)||gve(t,e)||mve()}function mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gve(t,e){if(t){if(typeof t=="string")return uT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uT(t,e)}}function uT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function xve(t){if(Array.isArray(t))return t}function Cj(){return Cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cj.apply(this,arguments)}var yve=function(e,n){var r;return ue.isValidElement(e)?r=ue.cloneElement(e,n):Ft(e)?r=e(n):r=ue.createElement("line",Cj({},n,{className:"recharts-reference-line-line"})),r},bve=function(e,n,r,i,a,s,o,l,u){var d=a.x,f=a.y,p=a.width,h=a.height;if(r){var m=u.y,g=e.y.apply(m,{position:s});if(xo(u,"discard")&&!e.y.isInRange(g))return null;var y=[{x:d+p,y:g},{x:d,y:g}];return l==="left"?y.reverse():y}if(n){var x=u.x,w=e.x.apply(x,{position:s});if(xo(u,"discard")&&!e.x.isInRange(w))return null;var S=[{x:w,y:f+h},{x:w,y:f}];return o==="top"?S.reverse():S}if(i){var N=u.segment,j=N.map(function(E){return e.apply(E,{position:s})});return xo(u,"discard")&&W0e(j,function(E){return!e.isInRange(E)})?null:j}return null};function wve(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=tve(),d=x$(i),f=y$(a),p=ive();if(!u||!p)return null;Ws(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=O3({x:d.scale,y:f.scale}),m=Wr(e),g=Wr(n),y=r&&r.length===2,x=bve(h,m,g,y,p,t.position,d.orientation,f.orientation,t);if(!x)return null;var w=pve(x,2),S=w[0],N=S.x,j=S.y,E=w[1],C=E.x,P=E.y,T=xo(t,"hidden")?"url(#".concat(u,")"):void 0,I=cT(cT({clipPath:T},It(t,!0)),{},{x1:N,y1:j,x2:C,y2:P});return ue.createElement(wn,{className:Jt("recharts-reference-line",o)},yve(s,I),Xr.renderCallByParent(t,Tge({x1:N,y1:j,x2:C,y2:P})))}var D3=function(t){function e(){return sve(this,e),cve(this,e,arguments)}return fve(e,t),lve(e,[{key:"render",value:function(){return ue.createElement(wve,this.props)}}])}(ue.Component);I3(D3,"displayName","ReferenceLine");I3(D3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Ej(){return Ej=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ej.apply(this,arguments)}function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function dT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dT(Object(n),!0).forEach(function(r){p2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N$(r.key),r)}}function jve(t,e,n){return e&&Nve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kve(t,e,n){return e=Qy(e),Ave(t,S$()?Reflect.construct(e,n||[],Qy(t).constructor):e.apply(t,n))}function Ave(t,e){if(e&&(Ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cve(t)}function Cve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S$=function(){return!!t})()}function Qy(t){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qy(t)}function Eve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_j(t,e)}function _j(t,e){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_j(t,e)}function p2(t,e,n){return e=N$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N$(t){var e=_ve(t,"string");return Ch(e)=="symbol"?e:e+""}function _ve(t,e){if(Ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ove=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=O3({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return xo(e,"discard")&&!s.isInRange(o)?null:o},m2=function(t){function e(){return Sve(this,e),kve(this,e,arguments)}return Eve(e,t),jve(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=Wr(i),d=Wr(a);if(Ws(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Ove(this.props);if(!f)return null;var p=f.x,h=f.y,m=this.props,g=m.shape,y=m.className,x=xo(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=fT(fT({clipPath:x},It(this.props,!0)),{},{cx:p,cy:h});return ue.createElement(wn,{className:Jt("recharts-reference-dot",y)},e.renderDot(g,w),Xr.renderCallByParent(this.props,{x:p-s,y:h-s,width:2*s,height:2*s}))}}])}(ue.Component);p2(m2,"displayName","ReferenceDot");p2(m2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});p2(m2,"renderDot",function(t,e){var n;return ue.isValidElement(t)?n=ue.cloneElement(t,e):Ft(t)?n=t(e):n=ue.createElement(_3,Ej({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oj.apply(this,arguments)}function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function hT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hT(Object(n),!0).forEach(function(r){g2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k$(r.key),r)}}function Mve(t,e,n){return e&&Tve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lve(t,e,n){return e=e1(e),Ive(t,j$()?Reflect.construct(e,n||[],e1(t).constructor):e.apply(t,n))}function Ive(t,e){if(e&&(Eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dve(t)}function Dve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j$=function(){return!!t})()}function e1(t){return e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e1(t)}function Rve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pj(t,e)}function Pj(t,e){return Pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pj(t,e)}function g2(t,e,n){return e=k$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k$(t){var e=$ve(t,"string");return Eh(e)=="symbol"?e:e+""}function $ve(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zve=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var p=O3({x:d.scale,y:f.scale}),h={x:e?p.x.apply(s,{position:"start"}):p.x.rangeMin,y:r?p.y.apply(l,{position:"start"}):p.y.rangeMin},m={x:n?p.x.apply(o,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(u,{position:"end"}):p.y.rangeMax};return xo(a,"discard")&&(!p.isInRange(h)||!p.isInRange(m))?null:d$(h,m)},v2=function(t){function e(){return Pve(this,e),Lve(this,e,arguments)}return Rve(e,t),Mve(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,d=r.clipPathId;Ws(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Wr(i),p=Wr(a),h=Wr(s),m=Wr(o),g=this.props.shape;if(!f&&!p&&!h&&!m&&!g)return null;var y=zve(f,p,h,m,this.props);if(!y&&!g)return null;var x=xo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return ue.createElement(wn,{className:Jt("recharts-reference-area",l)},e.renderRect(g,pT(pT({clipPath:x},It(this.props,!0)),y)),Xr.renderCallByParent(this.props,y))}}])}(ue.Component);g2(v2,"displayName","ReferenceArea");g2(v2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});g2(v2,"renderRect",function(t,e){var n;return ue.isValidElement(t)?n=ue.cloneElement(t,e):Ft(t)?n=t(e):n=ue.createElement(E3,Oj({},e,{className:"recharts-reference-area-rect"})),n});function A$(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Fve(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Lge(r,n)}function Bve(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function t1(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Hve(t,e){return A$(t,e+1)}function Wve(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,d=s,f=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:A$(r,u)};var g=l,y,x=function(){return y===void 0&&(y=n(m,g)),y},w=m.coordinate,S=l===0||t1(t,w,x,d,o);S||(l=0,d=s,u+=1),S&&(d=w+t*(x()/2+i),l+=u)},p;u<=a.length;)if(p=f(),p)return p.v;return[]}function F0(t){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F0(t)}function mT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mT(Object(n),!0).forEach(function(r){qve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qve(t,e,n){return e=Uve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uve(t){var e=Vve(t,"string");return F0(e)=="symbol"?e:e+""}function Vve(t,e){if(F0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(F0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gve(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(p){var h=a[p],m,g=function(){return m===void 0&&(m=n(h,p)),m};if(p===s-1){var y=t*(h.coordinate+t*g()/2-l);a[p]=h=Ci(Ci({},h),{},{tickCoord:y>0?h.coordinate-y*t:h.coordinate})}else a[p]=h=Ci(Ci({},h),{},{tickCoord:h.coordinate});var x=t1(t,h.tickCoord,g,o,l);x&&(l=h.tickCoord-t*(g()/2+i),a[p]=Ci(Ci({},h),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function Kve(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var d=r[o-1],f=n(d,o-1),p=t*(d.coordinate+t*f/2-u);s[o-1]=d=Ci(Ci({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var h=t1(t,d.tickCoord,function(){return f},l,u);h&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Ci(Ci({},d),{},{isShow:!0}))}for(var m=a?o-1:o,g=function(w){var S=s[w],N,j=function(){return N===void 0&&(N=n(S,w)),N};if(w===0){var E=t*(S.coordinate-t*j()/2-l);s[w]=S=Ci(Ci({},S),{},{tickCoord:E<0?S.coordinate-E*t:S.coordinate})}else s[w]=S=Ci(Ci({},S),{},{tickCoord:S.coordinate});var C=t1(t,S.tickCoord,j,l,u);C&&(l=S.tickCoord+t*(j()/2+i),s[w]=Ci(Ci({},S),{},{isShow:!0}))},y=0;y<m;y++)g(y);return s}function R3(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(nt(l)||Qh.isSsr)return Hve(i,typeof l=="number"&&nt(l)?l:0);var p=[],h=o==="top"||o==="bottom"?"width":"height",m=d&&h==="width"?Nm(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(S,N){var j=Ft(u)?u(S.value,N):S.value;return h==="width"?Fve(Nm(j,{fontSize:e,letterSpacing:n}),m,f):Nm(j,{fontSize:e,letterSpacing:n})[h]},y=i.length>=2?qi(i[1].coordinate-i[0].coordinate):1,x=Bve(a,y,h);return l==="equidistantPreserveStart"?Wve(y,x,g,i,s):(l==="preserveStart"||l==="preserveStartEnd"?p=Kve(y,x,g,i,s,l==="preserveStartEnd"):p=Gve(y,x,g,i,s),p.filter(function(w){return w.isShow}))}var Yve=["viewBox"],Xve=["viewBox"],Jve=["ticks"];function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mf.apply(this,arguments)}function gT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(n),!0).forEach(function(r){$3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d5(t,e){if(t==null)return{};var n=Zve(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Qve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E$(r.key),r)}}function exe(t,e,n){return e&&vT(t.prototype,e),n&&vT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function txe(t,e,n){return e=n1(e),nxe(t,C$()?Reflect.construct(e,n||[],n1(t).constructor):e.apply(t,n))}function nxe(t,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rxe(t)}function rxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C$=function(){return!!t})()}function n1(t){return n1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n1(t)}function ixe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tj(t,e)}function Tj(t,e){return Tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tj(t,e)}function $3(t,e,n){return e=E$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E$(t){var e=axe(t,"string");return _h(e)=="symbol"?e:e+""}function axe(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rp=function(t){function e(n){var r;return Qve(this,e),r=txe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return ixe(e,t),exe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=d5(r,Yve),o=this.props,l=o.viewBox,u=d5(o,Xve);return!Uf(a,l)||!Uf(s,u)||!Uf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,p=i.tickMargin,h,m,g,y,x,w,S=f?-1:1,N=r.tickSize||d,j=nt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":h=m=r.coordinate,y=s+ +!f*l,g=y-S*N,w=g-S*p,x=j;break;case"left":g=y=r.coordinate,m=a+ +!f*o,h=m-S*N,x=h-S*p,w=j;break;case"right":g=y=r.coordinate,m=a+ +f*o,h=m+S*N,x=h+S*p,w=j;break;default:h=m=r.coordinate,y=s+ +f*l,g=y+S*N,w=g+S*p,x=j;break}return{line:{x1:h,y1:g,x2:m,y2:y},tick:{x,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,d=r.axisLine,f=zr(zr(zr({},It(this.props,!1)),It(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var p=+(l==="top"&&!u||l==="bottom"&&u);f=zr(zr({},f),{},{x1:i,y1:a+p*o,x2:i+s,y2:a+p*o})}else{var h=+(l==="left"&&!u||l==="right"&&u);f=zr(zr({},f),{},{x1:i+h*s,y1:a,x2:i+h*s,y2:a+o})}return ue.createElement("line",Mf({},f,{className:Jt("recharts-cartesian-axis-line",$a(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,p=o.unit,h=R3(zr(zr({},this.props),{},{ticks:r}),i,a),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=It(this.props,!1),x=It(d,!1),w=zr(zr({},y),{},{fill:"none"},It(l,!1)),S=h.map(function(N,j){var E=s.getTickLineCoord(N),C=E.line,P=E.tick,T=zr(zr(zr(zr({textAnchor:m,verticalAnchor:g},y),{},{stroke:"none",fill:u},x),P),{},{index:j,payload:N,visibleTicksCount:h.length,tickFormatter:f});return ue.createElement(wn,Mf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},fd(s.props,N,j)),l&&ue.createElement("line",Mf({},w,C,{className:Jt("recharts-cartesian-axis-tick-line",$a(l,"className"))})),d&&e.renderTickItem(d,T,"".concat(Ft(f)?f(N.value,j):N.value).concat(p||"")))});return ue.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,p=f.ticks,h=d5(f,Jve),m=p;return Ft(l)&&(m=p&&p.length>0?l(this.props):l(h)),s<=0||o<=0||!m||!m.length?null:ue.createElement(wn,{className:Jt("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Xr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=Jt(i.className,"recharts-cartesian-axis-tick-value");return ue.isValidElement(r)?s=ue.cloneElement(r,zr(zr({},i),{},{className:o})):Ft(r)?s=r(zr(zr({},i),{},{className:o})):s=ue.createElement(hd,Mf({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(q.Component);$3(rp,"displayName","CartesianAxis");$3(rp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sxe=["x1","y1","x2","y2","key"],oxe=["offset"];function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function xT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(n),!0).forEach(function(r){lxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lxe(t,e,n){return e=cxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cxe(t){var e=uxe(t,"string");return gd(e)=="symbol"?e:e+""}function uxe(t,e){if(gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}function yT(t,e){if(t==null)return{};var n=dxe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dxe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var fxe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return ue.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function _$(t,e){var n;if(ue.isValidElement(t))n=ue.cloneElement(t,e);else if(Ft(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=yT(e,sxe),u=It(l,!1);u.offset;var d=yT(u,oxe);n=ue.createElement("line",Hu({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function hxe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Oi(Oi({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return _$(i,u)});return ue.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function pxe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Oi(Oi({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return _$(i,u)});return ue.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function mxe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var d=o.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?i+s-p:d[h+1]-p;if(g<=0)return null;var y=h%e.length;return ue.createElement("rect",{key:"react-".concat(h),y:p,x:r,height:g,width:a,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ue.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function gxe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var m=!d[h+1],g=m?a+o-p:d[h+1]-p;if(g<=0)return null;var y=h%r.length;return ue.createElement("rect",{key:"react-".concat(h),x:p,y:s,width:g,height:l,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ue.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var vxe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return kR(R3(Oi(Oi(Oi({},rp.defaultProps),r),{},{ticks:ol(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},xxe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return kR(R3(Oi(Oi(Oi({},rp.defaultProps),r),{},{ticks:ol(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},rf={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function z3(t){var e,n,r,i,a,s,o=M3(),l=L3(),u=ave(),d=Oi(Oi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:rf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:rf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:rf.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:rf.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:rf.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:rf.verticalFill,x:nt(t.x)?t.x:u.left,y:nt(t.y)?t.y:u.top,width:nt(t.width)?t.width:u.width,height:nt(t.height)?t.height:u.height}),f=d.x,p=d.y,h=d.width,m=d.height,g=d.syncWithTicks,y=d.horizontalValues,x=d.verticalValues,w=nve(),S=rve();if(!nt(h)||h<=0||!nt(m)||m<=0||!nt(f)||f!==+f||!nt(p)||p!==+p)return null;var N=d.verticalCoordinatesGenerator||vxe,j=d.horizontalCoordinatesGenerator||xxe,E=d.horizontalPoints,C=d.verticalPoints;if((!E||!E.length)&&Ft(j)){var P=y&&y.length,T=j({yAxis:S?Oi(Oi({},S),{},{ticks:P?y:S.ticks}):void 0,width:o,height:l,offset:u},P?!0:g);Ws(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(gd(T),"]")),Array.isArray(T)&&(E=T)}if((!C||!C.length)&&Ft(N)){var I=x&&x.length,k=N({xAxis:w?Oi(Oi({},w),{},{ticks:I?x:w.ticks}):void 0,width:o,height:l,offset:u},I?!0:g);Ws(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(gd(k),"]")),Array.isArray(k)&&(C=k)}return ue.createElement("g",{className:"recharts-cartesian-grid"},ue.createElement(fxe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),ue.createElement(hxe,Hu({},d,{offset:u,horizontalPoints:E,xAxis:w,yAxis:S})),ue.createElement(pxe,Hu({},d,{offset:u,verticalPoints:C,xAxis:w,yAxis:S})),ue.createElement(mxe,Hu({},d,{horizontalPoints:E})),ue.createElement(gxe,Hu({},d,{verticalPoints:C})))}z3.displayName="CartesianGrid";function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}function yxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T$(r.key),r)}}function wxe(t,e,n){return e&&bxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sxe(t,e,n){return e=r1(e),Nxe(t,O$()?Reflect.construct(e,n||[],r1(t).constructor):e.apply(t,n))}function Nxe(t,e){if(e&&(Oh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jxe(t)}function jxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O$=function(){return!!t})()}function r1(t){return r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r1(t)}function kxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mj(t,e)}function Mj(t,e){return Mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mj(t,e)}function P$(t,e,n){return e=T$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T$(t){var e=Axe(t,"string");return Oh(e)=="symbol"?e:e+""}function Axe(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Lj(){return Lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lj.apply(this,arguments)}function Cxe(t){var e=t.xAxisId,n=M3(),r=L3(),i=x$(e);return i==null?null:q.createElement(rp,Lj({},i,{className:Jt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return ol(s,!0)}}))}var bg=function(t){function e(){return yxe(this,e),Sxe(this,e,arguments)}return kxe(e,t),wxe(e,[{key:"render",value:function(){return q.createElement(Cxe,this.props)}}])}(q.Component);P$(bg,"displayName","XAxis");P$(bg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}function Exe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I$(r.key),r)}}function Oxe(t,e,n){return e&&_xe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pxe(t,e,n){return e=i1(e),Txe(t,M$()?Reflect.construct(e,n||[],i1(t).constructor):e.apply(t,n))}function Txe(t,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mxe(t)}function Mxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M$=function(){return!!t})()}function i1(t){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i1(t)}function Lxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ij(t,e)}function Ij(t,e){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ij(t,e)}function L$(t,e,n){return e=I$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I$(t){var e=Ixe(t,"string");return Ph(e)=="symbol"?e:e+""}function Ixe(t,e){if(Ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Dj(){return Dj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dj.apply(this,arguments)}var Dxe=function(e){var n=e.yAxisId,r=M3(),i=L3(),a=y$(n);return a==null?null:q.createElement(rp,Dj({},a,{className:Jt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return ol(o,!0)}}))},wg=function(t){function e(){return Exe(this,e),Pxe(this,e,arguments)}return Lxe(e,t),Oxe(e,[{key:"render",value:function(){return q.createElement(Dxe,this.props)}}])}(q.Component);L$(wg,"displayName","YAxis");L$(wg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bT(t){return Fxe(t)||zxe(t)||$xe(t)||Rxe()}function Rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xe(t,e){if(t){if(typeof t=="string")return Rj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rj(t,e)}}function zxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fxe(t){if(Array.isArray(t))return Rj(t)}function Rj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $j=function(e,n,r,i,a){var s=hs(e,D3),o=hs(e,m2),l=[].concat(bT(s),bT(o)),u=hs(e,v2),d="".concat(i,"Id"),f=i[0],p=n;if(l.length&&(p=l.reduce(function(g,y){if(y.props[d]===r&&xo(y.props,"extendDomain")&&nt(y.props[f])){var x=y.props[f];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},p)),u.length){var h="".concat(f,"1"),m="".concat(f,"2");p=u.reduce(function(g,y){if(y.props[d]===r&&xo(y.props,"extendDomain")&&nt(y.props[h])&&nt(y.props[m])){var x=y.props[h],w=y.props[m];return[Math.min(g[0],x,w),Math.max(g[1],x,w)]}return g},p)}return a&&a.length&&(p=a.reduce(function(g,y){return nt(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},p)),p},D$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,f||l,p),m=n?n+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],h]:l._events[m].push(h):(l._events[m]=h,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,m=new Array(h);p<h;p++)m[p]=f[p].fn;return m},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,p,h,m){var g=n?n+u:u;if(!this._events[g])return!1;var y=this._events[g],x=arguments.length,w,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,p),!0;case 5:return y.fn.call(y.context,d,f,p,h),!0;case 6:return y.fn.call(y.context,d,f,p,h,m),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];y.fn.apply(y.context,w)}else{var N=y.length,j;for(S=0;S<N;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),x){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,d);break;case 3:y[S].fn.call(y[S].context,d,f);break;case 4:y[S].fn.call(y[S].context,d,f,p);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];y[S].fn.apply(y[S].context,w)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,p){var h=n?n+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!p||m.once)&&(!f||m.context===f)&&s(this,h);else{for(var g=0,y=[],x=m.length;g<x;g++)(m[g].fn!==d||p&&!m[g].once||f&&m[g].context!==f)&&y.push(m[g]);y.length?this._events[h]=y.length===1?y[0]:y:s(this,h)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(D$);var Bxe=D$.exports;const Hxe=pn(Bxe);var f5=new Hxe,h5="recharts.syncMouseEvents";function B0(t){"@babel/helpers - typeof";return B0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function Wxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R$(r.key),r)}}function Uxe(t,e,n){return e&&qxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p5(t,e,n){return e=R$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R$(t){var e=Vxe(t,"string");return B0(e)=="symbol"?e:e+""}function Vxe(t,e){if(B0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(B0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gxe=function(){function t(){Wxe(this,t),p5(this,"activeIndex",0),p5(this,"coordinateList",[]),p5(this,"layout","horizontal")}return Uxe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,d=n.offset,f=d===void 0?null:d,p=n.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+u,p=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function Kxe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&nt(r)&&nt(i))return!0}return!1}function Yxe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function $$(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=Rn(e,n,r,i),o=Rn(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Xxe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=Rn(o,l,u,f),h=Rn(o,l,d,f);r=p.x,i=p.y,a=h.x,s=h.y}else return $$(e);return[{x:r,y:i},{x:a,y:s}]}function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function wT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wT(Object(n),!0).forEach(function(r){Jxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jxe(t,e,n){return e=Zxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zxe(t){var e=Qxe(t,"string");return H0(e)=="symbol"?e:e+""}function Qxe(t,e){if(H0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(H0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eye(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!s||p!=="ScatterChart"&&i!=="axis")return null;var m,g=oj;if(p==="ScatterChart")m=s,g=Ppe;else if(p==="BarChart")m=Yxe(f,s,l,d),g=E3;else if(f==="radial"){var y=$$(s),x=y.cx,w=y.cy,S=y.radius,N=y.startAngle,j=y.endAngle;m={cx:x,cy:w,startAngle:N,endAngle:j,innerRadius:S,outerRadius:S},g=DR}else m={points:Xxe(f,s,l)},g=oj;var E=Pv(Pv(Pv(Pv({stroke:"#ccc",pointerEvents:"none"},l),m),It(h,!1)),{},{payload:o,payloadIndex:u,className:Jt("recharts-tooltip-cursor",h.className)});return q.isValidElement(h)?q.cloneElement(h,E):q.createElement(g,E)}var tye=["item"],nye=["children","className","width","height","style","compact","title","desc"];function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(this,arguments)}function ST(t,e){return aye(t)||iye(t,e)||F$(t,e)||rye()}function rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function aye(t){if(Array.isArray(t))return t}function NT(t,e){if(t==null)return{};var n=sye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B$(r.key),r)}}function cye(t,e,n){return e&&lye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uye(t,e,n){return e=a1(e),dye(t,z$()?Reflect.construct(e,n||[],a1(t).constructor):e.apply(t,n))}function dye(t,e){if(e&&(Th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fye(t)}function fye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z$=function(){return!!t})()}function a1(t){return a1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a1(t)}function hye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zj(t,e)}function zj(t,e){return zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zj(t,e)}function Mh(t){return gye(t)||mye(t)||F$(t)||pye()}function pye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F$(t,e){if(t){if(typeof t=="string")return Fj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fj(t,e)}}function mye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gye(t){if(Array.isArray(t))return Fj(t)}function Fj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jT(Object(n),!0).forEach(function(r){Tt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t,e,n){return e=B$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B$(t){var e=vye(t,"string");return Th(e)=="symbol"?e:e+""}function vye(t,e){if(Th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xye={xAxis:["bottom","top"],yAxis:["left","right"]},yye={width:"100%",height:"100%"},H$={x:0,y:0};function Tv(t){return t}var bye=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},wye=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return Te(Te(Te({},i),Rn(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return Te(Te(Te({},i),Rn(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return H$},x2=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(Mh(o),Mh(u)):o},[]);return s.length>0?s:e&&e.length&&nt(i)&&nt(a)?e.slice(i,a+1):[]};function W$(t){return t==="number"?[0,"auto"]:void 0}var Bj=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=x2(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(s.dataKey&&!s.allowDuplicatedCategory){var h=f===void 0?o:f;p=pN(h,s.dataKey,i)}else p=f&&f[r]||o[r];return p?[].concat(Mh(l),[OR(u,p)]):l},[])},kT=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=bye(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=Zue(s,o,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,p=Bj(e,n,d,f),h=wye(r,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},Sye=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,h=jR(d,a);return r.reduce(function(m,g){var y,x=g.type.defaultProps!==void 0?Te(Te({},g.type.defaultProps),g.props):g.props,w=x.type,S=x.dataKey,N=x.allowDataOverflow,j=x.allowDuplicatedCategory,E=x.scale,C=x.ticks,P=x.includeHidden,T=x[s];if(m[T])return m;var I=x2(e.data,{graphicalItems:i.filter(function(L){var F,G=s in L.props?L.props[s]:(F=L.type.defaultProps)===null||F===void 0?void 0:F[s];return G===T}),dataStartIndex:l,dataEndIndex:u}),k=I.length,O,R,D;Kxe(x.domain,N,w)&&(O=nj(x.domain,null,N),h&&(w==="number"||E!=="auto")&&(D=km(I,S,"category")));var B=W$(w);if(!O||O.length===0){var V,Z=(V=x.domain)!==null&&V!==void 0?V:B;if(S){if(O=km(I,S,w),w==="category"&&h){var H=HY(O);j&&H?(R=O,O=Gy(0,k)):j||(O=QO(Z,O,g).reduce(function(L,F){return L.indexOf(F)>=0?L:[].concat(Mh(L),[F])},[]))}else if(w==="category")j?O=O.filter(function(L){return L!==""&&!Zt(L)}):O=QO(Z,O,g).reduce(function(L,F){return L.indexOf(F)>=0||F===""||Zt(F)?L:[].concat(Mh(L),[F])},[]);else if(w==="number"){var Q=rde(I,i.filter(function(L){var F,G,ee=s in L.props?L.props[s]:(F=L.type.defaultProps)===null||F===void 0?void 0:F[s],ie="hide"in L.props?L.props.hide:(G=L.type.defaultProps)===null||G===void 0?void 0:G.hide;return ee===T&&(P||!ie)}),S,a,d);Q&&(O=Q)}h&&(w==="number"||E!=="auto")&&(D=km(I,S,"category"))}else h?O=Gy(0,k):o&&o[T]&&o[T].hasStack&&w==="number"?O=p==="expand"?[0,1]:_R(o[T].stackGroups,l,u):O=NR(I,i.filter(function(L){var F=s in L.props?L.props[s]:L.type.defaultProps[s],G="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return F===T&&(P||!G)}),w,d,!0);if(w==="number")O=$j(f,O,T,a,C),Z&&(O=nj(Z,O,N));else if(w==="category"&&Z){var fe=Z,le=O.every(function(L){return fe.indexOf(L)>=0});le&&(O=fe)}}return Te(Te({},m),{},Tt({},T,Te(Te({},x),{},{axisType:a,domain:O,categoricalDomain:D,duplicateDomain:R,originalDomain:(y=x.domain)!==null&&y!==void 0?y:B,isCategorical:h,layout:d})))},{})},Nye=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,p=x2(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),h=p.length,m=jR(d,a),g=-1;return r.reduce(function(y,x){var w=x.type.defaultProps!==void 0?Te(Te({},x.type.defaultProps),x.props):x.props,S=w[s],N=W$("number");if(!y[S]){g++;var j;return m?j=Gy(0,h):o&&o[S]&&o[S].hasStack?(j=_R(o[S].stackGroups,l,u),j=$j(f,j,S,a)):(j=nj(N,NR(p,r.filter(function(E){var C,P,T=s in E.props?E.props[s]:(C=E.type.defaultProps)===null||C===void 0?void 0:C[s],I="hide"in E.props?E.props.hide:(P=E.type.defaultProps)===null||P===void 0?void 0:P.hide;return T===S&&!I}),"number",d),i.defaultProps.allowDataOverflow),j=$j(f,j,S,a)),Te(Te({},y),{},Tt({},S,Te(Te({axisType:a},i.defaultProps),{},{hide:!0,orientation:$a(xye,"".concat(a,".").concat(g%2),null),domain:j,originalDomain:N,isCategorical:m,layout:d})))}return y},{})},jye=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),p=hs(d,a),h={};return p&&p.length?h=Sye(e,{axes:p,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(h=Nye(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),h},kye=function(e){var n=hc(e),r=ol(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:t3(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ly(n,r)}},AT=function(e){var n=e.children,r=e.defaultShowTooltip,i=Pa(n,jh),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Aye=function(e){return!e||!e.length?!1:e.some(function(n){var r=dl(n&&n.type);return r&&r.indexOf("Bar")>=0})},CT=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Cye=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,p=r.margin||{},h=Pa(f,jh),m=Pa(f,Ju),g=Object.keys(l).reduce(function(j,E){var C=l[E],P=C.orientation;return!C.mirror&&!C.hide?Te(Te({},j),{},Tt({},P,j[P]+C.width)):j},{left:p.left||0,right:p.right||0}),y=Object.keys(s).reduce(function(j,E){var C=s[E],P=C.orientation;return!C.mirror&&!C.hide?Te(Te({},j),{},Tt({},P,$a(j,"".concat(P))+C.height)):j},{top:p.top||0,bottom:p.bottom||0}),x=Te(Te({},y),g),w=x.bottom;h&&(x.bottom+=h.props.height||jh.defaultProps.height),m&&n&&(x=tde(x,i,r,n));var S=u-x.left-x.right,N=d-x.top-x.bottom;return Te(Te({brushBottom:w},x),{},{width:Math.max(S,0),height:Math.max(N,0)})},Eye=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},q$=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(x,w){var S=w.graphicalItems,N=w.stackGroups,j=w.offset,E=w.updateId,C=w.dataStartIndex,P=w.dataEndIndex,T=x.barSize,I=x.layout,k=x.barGap,O=x.barCategoryGap,R=x.maxBarSize,D=CT(I),B=D.numericAxisName,V=D.cateAxisName,Z=Aye(S),H=[];return S.forEach(function(Q,fe){var le=x2(x.data,{graphicalItems:[Q],dataStartIndex:C,dataEndIndex:P}),L=Q.type.defaultProps!==void 0?Te(Te({},Q.type.defaultProps),Q.props):Q.props,F=L.dataKey,G=L.maxBarSize,ee=L["".concat(B,"Id")],ie=L["".concat(V,"Id")],se={},ye=l.reduce(function(Je,ge){var Me=w["".concat(ge.axisType,"Map")],ut=L["".concat(ge.axisType,"Id")];Me&&Me[ut]||ge.axisType==="zAxis"||md();var st=Me[ut];return Te(Te({},Je),{},Tt(Tt({},ge.axisType,st),"".concat(ge.axisType,"Ticks"),ol(st)))},se),oe=ye[V],we=ye["".concat(V,"Ticks")],be=N&&N[ee]&&N[ee].hasStack&&fde(Q,N[ee].stackGroups),de=dl(Q.type).indexOf("Bar")>=0,$e=Ly(oe,we),He=[],Y=Z&&Que({barSize:T,stackGroups:N,totalSize:Eye(ye,V)});if(de){var he,Ke,qe=Zt(G)?R:G,Oe=(he=(Ke=Ly(oe,we,!0))!==null&&Ke!==void 0?Ke:qe)!==null&&he!==void 0?he:0;He=ede({barGap:k,barCategoryGap:O,bandSize:Oe!==$e?Oe:$e,sizeList:Y[ie],maxBarSize:qe}),Oe!==$e&&(He=He.map(function(Je){return Te(Te({},Je),{},{position:Te(Te({},Je.position),{},{offset:Je.position.offset-Oe/2})})}))}var it=Q&&Q.type&&Q.type.getComposedData;it&&H.push({props:Te(Te({},it(Te(Te({},ye),{},{displayedData:le,props:x,dataKey:F,item:Q,bandSize:$e,barPosition:He,offset:j,stackedData:be,layout:I,dataStartIndex:C,dataEndIndex:P}))),{},Tt(Tt(Tt({key:Q.key||"item-".concat(fe)},B,ye[B]),V,ye[V]),"animationId",E)),childIndex:eX(Q,x.children),item:Q})}),H},h=function(x,w){var S=x.props,N=x.dataStartIndex,j=x.dataEndIndex,E=x.updateId;if(!GE({props:S}))return null;var C=S.children,P=S.layout,T=S.stackOffset,I=S.data,k=S.reverseStackOrder,O=CT(P),R=O.numericAxisName,D=O.cateAxisName,B=hs(C,r),V=ude(I,B,"".concat(R,"Id"),"".concat(D,"Id"),T,k),Z=l.reduce(function(L,F){var G="".concat(F.axisType,"Map");return Te(Te({},L),{},Tt({},G,jye(S,Te(Te({},F),{},{graphicalItems:B,stackGroups:F.axisType===R&&V,dataStartIndex:N,dataEndIndex:j}))))},{}),H=Cye(Te(Te({},Z),{},{props:S,graphicalItems:B}),w==null?void 0:w.legendBBox);Object.keys(Z).forEach(function(L){Z[L]=d(S,Z[L],H,L.replace("Map",""),n)});var Q=Z["".concat(D,"Map")],fe=kye(Q),le=p(S,Te(Te({},Z),{},{dataStartIndex:N,dataEndIndex:j,updateId:E,graphicalItems:B,stackGroups:V,offset:H}));return Te(Te({formattedGraphicalItems:le,graphicalItems:B,offset:H,stackGroups:V},fe),Z)},m=function(y){function x(w){var S,N,j;return oye(this,x),j=uye(this,x,[w]),Tt(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Tt(j,"accessibilityManager",new Gxe),Tt(j,"handleLegendBBoxUpdate",function(E){if(E){var C=j.state,P=C.dataStartIndex,T=C.dataEndIndex,I=C.updateId;j.setState(Te({legendBBox:E},h({props:j.props,dataStartIndex:P,dataEndIndex:T,updateId:I},Te(Te({},j.state),{},{legendBBox:E}))))}}),Tt(j,"handleReceiveSyncEvent",function(E,C,P){if(j.props.syncId===E){if(P===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(C)}}),Tt(j,"handleBrushChange",function(E){var C=E.startIndex,P=E.endIndex;if(C!==j.state.dataStartIndex||P!==j.state.dataEndIndex){var T=j.state.updateId;j.setState(function(){return Te({dataStartIndex:C,dataEndIndex:P},h({props:j.props,dataStartIndex:C,dataEndIndex:P,updateId:T},j.state))}),j.triggerSyncEvent({dataStartIndex:C,dataEndIndex:P})}}),Tt(j,"handleMouseEnter",function(E){var C=j.getMouseInfo(E);if(C){var P=Te(Te({},C),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var T=j.props.onMouseEnter;Ft(T)&&T(P,E)}}),Tt(j,"triggeredAfterMouseMove",function(E){var C=j.getMouseInfo(E),P=C?Te(Te({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var T=j.props.onMouseMove;Ft(T)&&T(P,E)}),Tt(j,"handleItemMouseEnter",function(E){j.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Tt(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),Tt(j,"handleMouseMove",function(E){E.persist(),j.throttleTriggeredAfterMouseMove(E)}),Tt(j,"handleMouseLeave",function(E){j.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var P=j.props.onMouseLeave;Ft(P)&&P(C,E)}),Tt(j,"handleOuterEvent",function(E){var C=QY(E),P=$a(j.props,"".concat(C));if(C&&Ft(P)){var T,I;/.*touch.*/i.test(C)?I=j.getMouseInfo(E.changedTouches[0]):I=j.getMouseInfo(E),P((T=I)!==null&&T!==void 0?T:{},E)}}),Tt(j,"handleClick",function(E){var C=j.getMouseInfo(E);if(C){var P=Te(Te({},C),{},{isTooltipActive:!0});j.setState(P),j.triggerSyncEvent(P);var T=j.props.onClick;Ft(T)&&T(P,E)}}),Tt(j,"handleMouseDown",function(E){var C=j.props.onMouseDown;if(Ft(C)){var P=j.getMouseInfo(E);C(P,E)}}),Tt(j,"handleMouseUp",function(E){var C=j.props.onMouseUp;if(Ft(C)){var P=j.getMouseInfo(E);C(P,E)}}),Tt(j,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Tt(j,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&j.handleMouseDown(E.changedTouches[0])}),Tt(j,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&j.handleMouseUp(E.changedTouches[0])}),Tt(j,"handleDoubleClick",function(E){var C=j.props.onDoubleClick;if(Ft(C)){var P=j.getMouseInfo(E);C(P,E)}}),Tt(j,"handleContextMenu",function(E){var C=j.props.onContextMenu;if(Ft(C)){var P=j.getMouseInfo(E);C(P,E)}}),Tt(j,"triggerSyncEvent",function(E){j.props.syncId!==void 0&&f5.emit(h5,j.props.syncId,E,j.eventEmitterSymbol)}),Tt(j,"applySyncEvent",function(E){var C=j.props,P=C.layout,T=C.syncMethod,I=j.state.updateId,k=E.dataStartIndex,O=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)j.setState(Te({dataStartIndex:k,dataEndIndex:O},h({props:j.props,dataStartIndex:k,dataEndIndex:O,updateId:I},j.state)));else if(E.activeTooltipIndex!==void 0){var R=E.chartX,D=E.chartY,B=E.activeTooltipIndex,V=j.state,Z=V.offset,H=V.tooltipTicks;if(!Z)return;if(typeof T=="function")B=T(H,E);else if(T==="value"){B=-1;for(var Q=0;Q<H.length;Q++)if(H[Q].value===E.activeLabel){B=Q;break}}var fe=Te(Te({},Z),{},{x:Z.left,y:Z.top}),le=Math.min(R,fe.x+fe.width),L=Math.min(D,fe.y+fe.height),F=H[B]&&H[B].value,G=Bj(j.state,j.props.data,B),ee=H[B]?{x:P==="horizontal"?H[B].coordinate:le,y:P==="horizontal"?L:H[B].coordinate}:H$;j.setState(Te(Te({},E),{},{activeLabel:F,activeCoordinate:ee,activePayload:G,activeTooltipIndex:B}))}else j.setState(E)}),Tt(j,"renderCursor",function(E){var C,P=j.state,T=P.isTooltipActive,I=P.activeCoordinate,k=P.activePayload,O=P.offset,R=P.activeTooltipIndex,D=P.tooltipAxisBandSize,B=j.getTooltipEventType(),V=(C=E.props.active)!==null&&C!==void 0?C:T,Z=j.props.layout,H=E.key||"_recharts-cursor";return ue.createElement(eye,{key:H,activeCoordinate:I,activePayload:k,activeTooltipIndex:R,chartName:n,element:E,isActive:V,layout:Z,offset:O,tooltipAxisBandSize:D,tooltipEventType:B})}),Tt(j,"renderPolarAxis",function(E,C,P){var T=$a(E,"type.axisType"),I=$a(j.state,"".concat(T,"Map")),k=E.type.defaultProps,O=k!==void 0?Te(Te({},k),E.props):E.props,R=I&&I[O["".concat(T,"Id")]];return q.cloneElement(E,Te(Te({},R),{},{className:Jt(T,R.className),key:E.key||"".concat(C,"-").concat(P),ticks:ol(R,!0)}))}),Tt(j,"renderPolarGrid",function(E){var C=E.props,P=C.radialLines,T=C.polarAngles,I=C.polarRadius,k=j.state,O=k.radiusAxisMap,R=k.angleAxisMap,D=hc(O),B=hc(R),V=B.cx,Z=B.cy,H=B.innerRadius,Q=B.outerRadius;return q.cloneElement(E,{polarAngles:Array.isArray(T)?T:ol(B,!0).map(function(fe){return fe.coordinate}),polarRadius:Array.isArray(I)?I:ol(D,!0).map(function(fe){return fe.coordinate}),cx:V,cy:Z,innerRadius:H,outerRadius:Q,key:E.key||"polar-grid",radialLines:P})}),Tt(j,"renderLegend",function(){var E=j.state.formattedGraphicalItems,C=j.props,P=C.children,T=C.width,I=C.height,k=j.props.margin||{},O=T-(k.left||0)-(k.right||0),R=wR({children:P,formattedGraphicalItems:E,legendWidth:O,legendContent:u});if(!R)return null;var D=R.item,B=NT(R,tye);return q.cloneElement(D,Te(Te({},B),{},{chartWidth:T,chartHeight:I,margin:k,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),Tt(j,"renderTooltip",function(){var E,C=j.props,P=C.children,T=C.accessibilityLayer,I=Pa(P,rs);if(!I)return null;var k=j.state,O=k.isTooltipActive,R=k.activeCoordinate,D=k.activePayload,B=k.activeLabel,V=k.offset,Z=(E=I.props.active)!==null&&E!==void 0?E:O;return q.cloneElement(I,{viewBox:Te(Te({},V),{},{x:V.left,y:V.top}),active:Z,label:B,payload:Z?D:[],coordinate:R,accessibilityLayer:T})}),Tt(j,"renderBrush",function(E){var C=j.props,P=C.margin,T=C.data,I=j.state,k=I.offset,O=I.dataStartIndex,R=I.dataEndIndex,D=I.updateId;return q.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Cv(j.handleBrushChange,E.props.onChange),data:T,x:nt(E.props.x)?E.props.x:k.left,y:nt(E.props.y)?E.props.y:k.top+k.height+k.brushBottom-(P.bottom||0),width:nt(E.props.width)?E.props.width:k.width,startIndex:O,endIndex:R,updateId:"brush-".concat(D)})}),Tt(j,"renderReferenceElement",function(E,C,P){if(!E)return null;var T=j,I=T.clipPathId,k=j.state,O=k.xAxisMap,R=k.yAxisMap,D=k.offset,B=E.type.defaultProps||{},V=E.props,Z=V.xAxisId,H=Z===void 0?B.xAxisId:Z,Q=V.yAxisId,fe=Q===void 0?B.yAxisId:Q;return q.cloneElement(E,{key:E.key||"".concat(C,"-").concat(P),xAxis:O[H],yAxis:R[fe],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:I})}),Tt(j,"renderActivePoints",function(E){var C=E.item,P=E.activePoint,T=E.basePoint,I=E.childIndex,k=E.isRange,O=[],R=C.props.key,D=C.item.type.defaultProps!==void 0?Te(Te({},C.item.type.defaultProps),C.item.props):C.item.props,B=D.activeDot,V=D.dataKey,Z=Te(Te({index:I,dataKey:V,cx:P.x,cy:P.y,r:4,fill:C3(C.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},It(B,!1)),oy(B));return O.push(x.renderActiveDot(B,Z,"".concat(R,"-activePoint-").concat(I))),T?O.push(x.renderActiveDot(B,Te(Te({},Z),{},{cx:T.x,cy:T.y}),"".concat(R,"-basePoint-").concat(I))):k&&O.push(null),O}),Tt(j,"renderGraphicChild",function(E,C,P){var T=j.filterFormatItem(E,C,P);if(!T)return null;var I=j.getTooltipEventType(),k=j.state,O=k.isTooltipActive,R=k.tooltipAxis,D=k.activeTooltipIndex,B=k.activeLabel,V=j.props.children,Z=Pa(V,rs),H=T.props,Q=H.points,fe=H.isRange,le=H.baseLine,L=T.item.type.defaultProps!==void 0?Te(Te({},T.item.type.defaultProps),T.item.props):T.item.props,F=L.activeDot,G=L.hide,ee=L.activeBar,ie=L.activeShape,se=!!(!G&&O&&Z&&(F||ee||ie)),ye={};I!=="axis"&&Z&&Z.props.trigger==="click"?ye={onClick:Cv(j.handleItemMouseEnter,E.props.onClick)}:I!=="axis"&&(ye={onMouseLeave:Cv(j.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Cv(j.handleItemMouseEnter,E.props.onMouseEnter)});var oe=q.cloneElement(E,Te(Te({},T.props),ye));function we(ge){return typeof R.dataKey=="function"?R.dataKey(ge.payload):null}if(se)if(D>=0){var be,de;if(R.dataKey&&!R.allowDuplicatedCategory){var $e=typeof R.dataKey=="function"?we:"payload.".concat(R.dataKey.toString());be=pN(Q,$e,B),de=fe&&le&&pN(le,$e,B)}else be=Q==null?void 0:Q[D],de=fe&&le&&le[D];if(ie||ee){var He=E.props.activeIndex!==void 0?E.props.activeIndex:D;return[q.cloneElement(E,Te(Te(Te({},T.props),ye),{},{activeIndex:He})),null,null]}if(!Zt(be))return[oe].concat(Mh(j.renderActivePoints({item:T,activePoint:be,basePoint:de,childIndex:D,isRange:fe})))}else{var Y,he=(Y=j.getItemByXY(j.state.activeCoordinate))!==null&&Y!==void 0?Y:{graphicalItem:oe},Ke=he.graphicalItem,qe=Ke.item,Oe=qe===void 0?E:qe,it=Ke.childIndex,Je=Te(Te(Te({},T.props),ye),{},{activeIndex:it});return[q.cloneElement(Oe,Je),null,null]}return fe?[oe,null,null]:[oe,null]}),Tt(j,"renderCustomized",function(E,C,P){return q.cloneElement(E,Te(Te({key:"recharts-customized-".concat(P)},j.props),j.state))}),Tt(j,"renderMap",{CartesianGrid:{handler:Tv,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Tv},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Tv},YAxis:{handler:Tv},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((S=w.id)!==null&&S!==void 0?S:pg("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=b7(j.triggeredAfterMouseMove,(N=w.throttleDelay)!==null&&N!==void 0?N:1e3/60),j.state={},j}return hye(x,y),cye(x,[{key:"componentDidMount",value:function(){var S,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,N=S.children,j=S.data,E=S.height,C=S.layout,P=Pa(N,rs);if(P){var T=P.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,k=Bj(this.state,j,T,I),O=this.state.tooltipTicks[T].coordinate,R=(this.state.offset.top+E)/2,D=C==="horizontal",B=D?{x:O,y:R}:{y:O,x:R},V=this.state.formattedGraphicalItems.find(function(H){var Q=H.item;return Q.type.name==="Scatter"});V&&(B=Te(Te({},B),V.props.points[T].tooltipPosition),k=V.props.points[T].tooltipPayload);var Z={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:I,activePayload:k,activeCoordinate:B};this.setState(Z),this.renderCursor(P),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var j,E;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(S){gN([Pa(S.children,rs)],[Pa(this.props.children,rs)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Pa(this.props.children,rs);if(S&&typeof S.props.shared=="boolean"){var N=S.props.shared?"axis":"item";return o.indexOf(N)>=0?N:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var N=this.container,j=N.getBoundingClientRect(),E=Ase(j),C={chartX:Math.round(S.pageX-E.left),chartY:Math.round(S.pageY-E.top)},P=j.width/N.offsetWidth||1,T=this.inRange(C.chartX,C.chartY,P);if(!T)return null;var I=this.state,k=I.xAxisMap,O=I.yAxisMap,R=this.getTooltipEventType(),D=kT(this.state,this.props.data,this.props.layout,T);if(R!=="axis"&&k&&O){var B=hc(k).scale,V=hc(O).scale,Z=B&&B.invert?B.invert(C.chartX):null,H=V&&V.invert?V.invert(C.chartY):null;return Te(Te({},C),{},{xValue:Z,yValue:H},D)}return D?Te(Te({},C),D):null}},{key:"inRange",value:function(S,N){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,C=S/j,P=N/j;if(E==="horizontal"||E==="vertical"){var T=this.state.offset,I=C>=T.left&&C<=T.left+T.width&&P>=T.top&&P<=T.top+T.height;return I?{x:C,y:P}:null}var k=this.state,O=k.angleAxisMap,R=k.radiusAxisMap;if(O&&R){var D=hc(O);return nP({x:C,y:P},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,N=this.getTooltipEventType(),j=Pa(S,rs),E={};j&&N==="axis"&&(j.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=oy(this.props,this.handleOuterEvent);return Te(Te({},C),E)}},{key:"addListener",value:function(){f5.on(h5,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){f5.removeListener(h5,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,N,j){for(var E=this.state.formattedGraphicalItems,C=0,P=E.length;C<P;C++){var T=E[C];if(T.item===S||T.props.key===S.key||N===dl(T.item.type)&&j===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,N=this.state.offset,j=N.left,E=N.top,C=N.height,P=N.width;return ue.createElement("defs",null,ue.createElement("clipPath",{id:S},ue.createElement("rect",{x:j,y:E,height:C,width:P})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(N,j){var E=ST(j,2),C=E[0],P=E[1];return Te(Te({},N),{},Tt({},C,P.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(N,j){var E=ST(j,2),C=E[0],P=E[1];return Te(Te({},N),{},Tt({},C,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[S])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(S){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[S])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(S){var N=this.state,j=N.formattedGraphicalItems,E=N.activeItem;if(j&&j.length)for(var C=0,P=j.length;C<P;C++){var T=j[C],I=T.props,k=T.item,O=k.type.defaultProps!==void 0?Te(Te({},k.type.defaultProps),k.props):k.props,R=dl(k.type);if(R==="Bar"){var D=(I.data||[]).find(function(H){return dpe(S,H)});if(D)return{graphicalItem:T,payload:D}}else if(R==="RadialBar"){var B=(I.data||[]).find(function(H){return nP(S,H)});if(B)return{graphicalItem:T,payload:B}}else if(d2(T,E)||f2(T,E)||D0(T,E)){var V=Qme({graphicalItem:T,activeTooltipItem:E,itemData:O.data}),Z=O.activeIndex===void 0?V:O.activeIndex;return{graphicalItem:Te(Te({},T),{},{childIndex:Z}),payload:D0(T,E)?O.data[V]:T.props.data[V]}}}return null}},{key:"render",value:function(){var S=this;if(!GE(this))return null;var N=this.props,j=N.children,E=N.className,C=N.width,P=N.height,T=N.style,I=N.compact,k=N.title,O=N.desc,R=NT(N,nye),D=It(R,!1);if(I)return ue.createElement(oT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ue.createElement(xN,Lf({},D,{width:C,height:P,title:k,desc:O}),this.renderClipPath(),YE(j,this.renderMap)));if(this.props.accessibilityLayer){var B,V;D.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,D.role=(V=this.props.role)!==null&&V!==void 0?V:"application",D.onKeyDown=function(H){S.accessibilityManager.keyboardEvent(H)},D.onFocus=function(){S.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return ue.createElement(oT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ue.createElement("div",Lf({className:Jt("recharts-wrapper",E),style:Te({position:"relative",cursor:"default",width:C,height:P},T)},Z,{ref:function(Q){S.container=Q}}),ue.createElement(xN,Lf({},D,{width:C,height:P,title:k,desc:O,style:yye}),this.renderClipPath(),YE(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(q.Component);Tt(m,"displayName",n),Tt(m,"defaultProps",Te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Tt(m,"getDerivedStateFromProps",function(y,x){var w=y.dataKey,S=y.data,N=y.children,j=y.width,E=y.height,C=y.layout,P=y.stackOffset,T=y.margin,I=x.dataStartIndex,k=x.dataEndIndex;if(x.updateId===void 0){var O=AT(y);return Te(Te(Te({},O),{},{updateId:0},h(Te(Te({props:y},O),{},{updateId:0}),x)),{},{prevDataKey:w,prevData:S,prevWidth:j,prevHeight:E,prevLayout:C,prevStackOffset:P,prevMargin:T,prevChildren:N})}if(w!==x.prevDataKey||S!==x.prevData||j!==x.prevWidth||E!==x.prevHeight||C!==x.prevLayout||P!==x.prevStackOffset||!Uf(T,x.prevMargin)){var R=AT(y),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},B=Te(Te({},kT(x,S,C)),{},{updateId:x.updateId+1}),V=Te(Te(Te({},R),D),B);return Te(Te(Te({},V),h(Te({props:y},V),x)),{},{prevDataKey:w,prevData:S,prevWidth:j,prevHeight:E,prevLayout:C,prevStackOffset:P,prevMargin:T,prevChildren:N})}if(!gN(N,x.prevChildren)){var Z,H,Q,fe,le=Pa(N,jh),L=le&&(Z=(H=le.props)===null||H===void 0?void 0:H.startIndex)!==null&&Z!==void 0?Z:I,F=le&&(Q=(fe=le.props)===null||fe===void 0?void 0:fe.endIndex)!==null&&Q!==void 0?Q:k,G=L!==I||F!==k,ee=!Zt(S),ie=ee&&!G?x.updateId:x.updateId+1;return Te(Te({updateId:ie},h(Te(Te({props:y},x),{},{updateId:ie,dataStartIndex:L,dataEndIndex:F}),x)),{},{prevChildren:N,dataStartIndex:L,dataEndIndex:F})}return null}),Tt(m,"renderActiveDot",function(y,x,w){var S;return q.isValidElement(y)?S=q.cloneElement(y,x):Ft(y)?S=y(x):S=ue.createElement(_3,x),ue.createElement(wn,{className:"recharts-active-dot",key:w},S)});var g=q.forwardRef(function(x,w){return ue.createElement(m,Lf({},x,{ref:w}))});return g.displayName=m.displayName,g},U$=q$({chartName:"BarChart",GraphicalChild:Zc,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:bg},{axisType:"yAxis",AxisComp:wg}],formatAxisMap:Pge}),_ye=q$({chartName:"PieChart",GraphicalChild:Ol,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:u2},{axisType:"radiusAxis",AxisComp:l2}],formatAxisMap:Sde,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const V$=6048e5,Oye=864e5,G$=6e4,F3=36e5,ET=Symbol.for("constructDateFrom");function Li(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ET in t?t[ET](e):t instanceof Date?new t.constructor(e):new Date(e)}function Or(t,e){return Li(e||t,t)}function nc(t,e,n){const r=Or(t,n==null?void 0:n.in);return isNaN(e)?Li(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function K$(t,e,n){const r=Or(t,n==null?void 0:n.in);if(isNaN(e))return Li(t,NaN);if(!e)return r;const i=r.getDate(),a=Li(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}function Pye(t,e,n){return Li(t,+Or(t)+e)}function Tye(t,e,n){return Pye(t,e*F3)}let Mye={};function y2(){return Mye}function vd(t,e){var o,l,u,d;const n=y2(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Or(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function s1(t,e){return vd(t,{...e,weekStartsOn:1})}function Y$(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=Li(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=s1(i),s=Li(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=s1(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function _T(t){const e=Or(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function b2(t,...e){const n=Li.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function o1(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Lye(t,e,n){const[r,i]=b2(n==null?void 0:n.in,t,e),a=o1(r),s=o1(i),o=+a-_T(a),l=+s-_T(s);return Math.round((o-l)/Oye)}function Iye(t,e){const n=Y$(t,e),r=Li(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),s1(r)}function X$(t,e,n){return nc(t,e*7,n)}function Dye(t){return Li(t,Date.now())}function lm(t,e,n){const[r,i]=b2(n==null?void 0:n.in,t,e);return+o1(r)==+o1(i)}function Rye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $ye(t){return!(!Rye(t)&&typeof t!="number"||isNaN(+Or(t)))}function zye(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Fye(t,e){const[n,r]=b2(t,e.start,e.end);return{start:n,end:r}}function OT(t,e){const{start:n,end:r}=Fye(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0);let o=1;const l=[];for(;+s<=a;)l.push(Li(n,s)),s.setDate(s.getDate()+o),s.setHours(0,0,0,0);return i?l.reverse():l}function Bye(t,e){const n=Or(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Hye(t,e){const n=Or(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Wye(t,e){const n=e==null?void 0:e.weekStartsOn,r=Or(t,e==null?void 0:e.in),i=r.getDay(),a=(i<n?-7:0)+6-(i-n);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}const qye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uye=(t,e,n)=>{let r;const i=qye[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Kf(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Vye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yye={date:Kf({formats:Vye,defaultWidth:"full"}),time:Kf({formats:Gye,defaultWidth:"full"}),dateTime:Kf({formats:Kye,defaultWidth:"full"})},Xye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jye=(t,e,n,r)=>Xye[t];function co(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Zye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Qye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},e1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},t1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},n1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},r1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},i1e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},a1e={ordinalNumber:i1e,era:co({values:Zye,defaultWidth:"wide"}),quarter:co({values:Qye,defaultWidth:"wide",argumentCallback:t=>t-1}),month:co({values:e1e,defaultWidth:"wide"}),day:co({values:t1e,defaultWidth:"wide"}),dayPeriod:co({values:n1e,defaultWidth:"wide",formattingValues:r1e,defaultFormattingWidth:"wide"})};function uo(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?o1e(o,f=>f.test(s)):s1e(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function s1e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function o1e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function J$(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const l1e=/^(\d+)(th|st|nd|rd)?/i,c1e=/\d+/i,u1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},d1e={any:[/^b/i,/^(a|c)/i]},f1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h1e={any:[/1/i,/2/i,/3/i,/4/i]},p1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},m1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},g1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},v1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b1e={ordinalNumber:J$({matchPattern:l1e,parsePattern:c1e,valueCallback:t=>parseInt(t,10)}),era:uo({matchPatterns:u1e,defaultMatchWidth:"wide",parsePatterns:d1e,defaultParseWidth:"any"}),quarter:uo({matchPatterns:f1e,defaultMatchWidth:"wide",parsePatterns:h1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:uo({matchPatterns:p1e,defaultMatchWidth:"wide",parsePatterns:m1e,defaultParseWidth:"any"}),day:uo({matchPatterns:g1e,defaultMatchWidth:"wide",parsePatterns:v1e,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:x1e,defaultMatchWidth:"any",parsePatterns:y1e,defaultParseWidth:"any"})},w1e={code:"en-US",formatDistance:Uye,formatLong:Yye,formatRelative:Jye,localize:a1e,match:b1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function S1e(t,e){const n=Or(t,e==null?void 0:e.in);return Lye(n,Hye(n))+1}function N1e(t,e){const n=Or(t,e==null?void 0:e.in),r=+s1(n)-+Iye(n);return Math.round(r/V$)+1}function Z$(t,e){var d,f,p,h;const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=y2(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((h=(p=i.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=Li((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=vd(s,e),l=Li((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=vd(l,e);return+n>=+o?r+1:+n>=+u?r:r-1}function j1e(t,e){var o,l,u,d;const n=y2(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Z$(t,e),a=Li((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),vd(a,e)}function k1e(t,e){const n=Or(t,e==null?void 0:e.in),r=+vd(n,e)-+j1e(n,e);return Math.round(r/V$)+1}function xn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Zl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return xn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):xn(n+1,2)},d(t,e){return xn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return xn(t.getHours()%12||12,e.length)},H(t,e){return xn(t.getHours(),e.length)},m(t,e){return xn(t.getMinutes(),e.length)},s(t,e){return xn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return xn(i,e.length)}},af={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Zl.y(t,e)},Y:function(t,e,n,r){const i=Z$(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return xn(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):xn(a,e.length)},R:function(t,e){const n=Y$(t);return xn(n,e.length)},u:function(t,e){const n=t.getFullYear();return xn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return xn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return xn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Zl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return xn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=k1e(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):xn(i,e.length)},I:function(t,e,n){const r=N1e(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):xn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Zl.d(t,e)},D:function(t,e,n){const r=S1e(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return xn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return xn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return xn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=af.noon:r===0?i=af.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=af.evening:r>=12?i=af.afternoon:r>=4?i=af.morning:i=af.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Zl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Zl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Zl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Zl.s(t,e)},S:function(t,e){return Zl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return MT(r);case"XXXX":case"XX":return Cu(r);case"XXXXX":case"XXX":default:return Cu(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return MT(r);case"xxxx":case"xx":return Cu(r);case"xxxxx":case"xxx":default:return Cu(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+TT(r,":");case"OOOO":default:return"GMT"+Cu(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+TT(r,":");case"zzzz":default:return"GMT"+Cu(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return xn(r,e.length)},T:function(t,e,n){return xn(+t,e.length)}};function TT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+xn(a,2)}function MT(t,e){return t%60===0?(t>0?"-":"+")+xn(Math.abs(t)/60,2):Cu(t,e)}function Cu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=xn(Math.trunc(r/60),2),a=xn(r%60,2);return n+i+e+a}const LT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Q$=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},A1e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return LT(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",LT(r,e)).replace("{{time}}",Q$(i,e))},C1e={p:Q$,P:A1e},E1e=/^D+$/,_1e=/^Y+$/,O1e=["D","DD","YY","YYYY"];function P1e(t){return E1e.test(t)}function T1e(t){return _1e.test(t)}function M1e(t,e,n){const r=L1e(t,e,n);if(console.warn(r),O1e.includes(t))throw new RangeError(r)}function L1e(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const I1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D1e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,R1e=/^'([^]*?)'?$/,$1e=/''/g,z1e=/[a-zA-Z]/;function nn(t,e,n){var d,f,p,h,m,g,y,x;const r=y2(),i=(n==null?void 0:n.locale)??r.locale??w1e,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(p=r.locale)==null?void 0:p.options)==null?void 0:h.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,o=Or(t,n==null?void 0:n.in);if(!$ye(o))throw new RangeError("Invalid time value");let l=e.match(D1e).map(w=>{const S=w[0];if(S==="p"||S==="P"){const N=C1e[S];return N(w,i.formatLong)}return w}).join("").match(I1e).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const S=w[0];if(S==="'")return{isToken:!1,value:F1e(w)};if(PT[S])return{isToken:!0,value:w};if(S.match(z1e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const S=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&T1e(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&P1e(S))&&M1e(S,e,String(t));const N=PT[S[0]];return N(o,S,i.localize,u)}).join("")}function F1e(t){const e=t.match(R1e);return e?e[1].replace($1e,"'"):t}function IT(t,e){return Or(t,e==null?void 0:e.in).getHours()}function B1e(t,e,n){const[r,i]=b2(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Mv(t,e){return lm(Li(t,t),Dye(t))}function Hj(t,e){const n=()=>Li(e==null?void 0:e.in,NaN),i=U1e(t);let a;if(i.date){const u=V1e(i.date,2);a=G1e(u.restDateString,u.year)}if(!a||isNaN(+a))return n();const s=+a;let o=0,l;if(i.time&&(o=K1e(i.time),isNaN(o)))return n();if(i.timezone){if(l=Y1e(i.timezone),isNaN(l))return n()}else{const u=new Date(s+o),d=Or(0,e==null?void 0:e.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return Or(s+o+l,e==null?void 0:e.in)}const Lv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},H1e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,W1e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,q1e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function U1e(t){const e={},n=t.split(Lv.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Lv.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Lv.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=Lv.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function V1e(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?i:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function G1e(t,e){if(e===null)return new Date(NaN);const n=t.match(H1e);if(!n)return new Date(NaN);const r=!!n[4],i=Xp(n[1]),a=Xp(n[2])-1,s=Xp(n[3]),o=Xp(n[4]),l=Xp(n[5])-1;if(r)return ebe(e,o,l)?X1e(e,o,l):new Date(NaN);{const u=new Date(0);return!Z1e(e,a,s)||!Q1e(e,i)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(i,s)),u)}}function Xp(t){return t?parseInt(t):1}function K1e(t){const e=t.match(W1e);if(!e)return NaN;const n=m5(e[1]),r=m5(e[2]),i=m5(e[3]);return tbe(n,r,i)?n*F3+r*G$+i*1e3:NaN}function m5(t){return t&&parseFloat(t.replace(",","."))||0}function Y1e(t){if(t==="Z")return 0;const e=t.match(q1e);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return nbe(r,i)?n*(r*F3+i*G$):NaN}function X1e(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,a=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}const J1e=[31,null,31,30,31,30,31,31,30,31,30,31];function ez(t){return t%400===0||t%4===0&&t%100!==0}function Z1e(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(J1e[e]||(ez(t)?29:28))}function Q1e(t,e){return e>=1&&e<=(ez(t)?366:365)}function ebe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function tbe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function nbe(t,e){return e>=0&&e<=59}function rbe(t,e,n){return K$(t,-1,n)}function ibe(t,e,n){return X$(t,-1,n)}var ot=(t=>(t.NEW="lead",t.CONTACTED="contacted",t.QUALIFIED="qualified",t.MEETING="meeting_scheduled",t.PROPOSAL="proposal_sent",t.NEGOTIATION="negotiation",t.WON="closed_won",t.LOST="closed_lost",t))(ot||{}),xd=(t=>(t.META_ADS="Meta Ads",t.WEBSITE="Website",t.REFERRAL="Referral",t.WHATSAPP="WhatsApp",t))(xd||{});const hl=(t,e)=>{try{return new Intl.NumberFormat(void 0,{style:"currency",currency:e,maximumFractionDigits:2}).format(t)}catch{return`${e==="USD"||e==="MXN"?"$":e==="CRC"?"":"$"}${Number(t||0).toLocaleString()}`}};var tz={exports:{}},nz={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=q;function abe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sbe=typeof Object.is=="function"?Object.is:abe,obe=Lh.useState,lbe=Lh.useEffect,cbe=Lh.useLayoutEffect,ube=Lh.useDebugValue;function dbe(t,e){var n=e(),r=obe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return cbe(function(){i.value=n,i.getSnapshot=e,g5(i)&&a({inst:i})},[t,n,e]),lbe(function(){return g5(i)&&a({inst:i}),t(function(){g5(i)&&a({inst:i})})},[t]),ube(n),n}function g5(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sbe(t,n)}catch{return!0}}function fbe(t,e){return e()}var hbe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fbe:dbe;nz.useSyncExternalStore=Lh.useSyncExternalStore!==void 0?Lh.useSyncExternalStore:hbe;tz.exports=nz;var B3=tz.exports;function di(t){this.content=t}di.prototype={constructor:di,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),a=r.content.slice();return i==-1?a.push(n||t,e):(a[i+1]=e,n&&(a[i]=n)),new di(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new di(n)},addToStart:function(t,e){return new di([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new di(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),a=r.find(t);return i.splice(a==-1?i.length:a,0,e,n),new di(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=di.from(t),t.size?new di(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=di.from(t),t.size?new di(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=di.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};di.from=function(t){if(t instanceof di)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new di(e)};function rz(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),a=e.child(r);if(i==a){n+=i.nodeSize;continue}if(!i.sameMarkup(a))return n;if(i.isText&&i.text!=a.text){for(let s=0;i.text[s]==a.text[s];s++)n++;return n}if(i.content.size||a.content.size){let s=rz(i.content,a.content,n+1);if(s!=null)return s}n+=i.nodeSize}}function iz(t,e,n,r){for(let i=t.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:n,b:r};let s=t.child(--i),o=e.child(--a),l=s.nodeSize;if(s==o){n-=l,r-=l;continue}if(!s.sameMarkup(o))return{a:n,b:r};if(s.isText&&s.text!=o.text){let u=0,d=Math.min(s.text.length,o.text.length);for(;u<d&&s.text[s.text.length-u-1]==o.text[o.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||o.content.size){let u=iz(s.content,o.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class Ge{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,a){for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;if(u>e&&r(l,i+o,a||null,s)!==!1&&l.content.size){let d=o+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,i+d)}o=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let a="",s=!0;return this.nodesBetween(e,n,(o,l)=>{let u=o.isText?o.text.slice(Math.max(e,l)-l,n-l):o.isLeaf?i?typeof i=="function"?i(o):i:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&u||o.isTextblock)&&r&&(s?s=!1:a+=r),a+=u},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new Ge(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let a=0,s=0;s<n;a++){let o=this.content[a],l=s+o.nodeSize;l>e&&((s<e||l>n)&&(o.isText?o=o.cut(Math.max(0,e-s),Math.min(o.text.length,n-s)):o=o.cut(Math.max(0,e-s-1),Math.min(o.content.size,n-s-1))),r.push(o),i+=o.nodeSize),s=l}return new Ge(r,i)}cutByIndex(e,n){return e==n?Ge.empty:e==0&&n==this.content.length?this:new Ge(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ge(i,a)}addToStart(e){return new Ge([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ge(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return rz(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return iz(this,e,n,r)}findIndex(e){if(e==0)return Iv(0,e);if(e==this.size)return Iv(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),a=r+i.nodeSize;if(a>=e)return a==e?Iv(n+1,a):Iv(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ge.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ge(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ge.empty;let n,r=0;for(let i=0;i<e.length;i++){let a=e[i];r+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(n||(n=e.slice(0,i)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new Ge(n||e,r)}static from(e){if(!e)return Ge.empty;if(e instanceof Ge)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ge([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ge.empty=new Ge([],0);const v5={index:0,offset:0};function Iv(t,e){return v5.index=t,v5.offset=e,v5}function l1(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!l1(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!l1(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let On=class Wj{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&l1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Wj.none;if(e instanceof Wj)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};On.none=[];class c1 extends Error{}class ct{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=sz(this.content,e+this.openStart,n);return r&&new ct(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ct(az(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ct.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ct(Ge.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)i++;return new ct(e,r,i)}}ct.empty=new ct(Ge.empty,0,0);function az(t,e,n){let{index:r,offset:i}=t.findIndex(e),a=t.maybeChild(r),{index:s,offset:o}=t.findIndex(n);if(i==e||a.isText){if(o!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,a.copy(az(a.content,e-i-1,n-i-1)))}function sz(t,e,n,r){let{index:i,offset:a}=t.findIndex(e),s=t.maybeChild(i);if(a==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let o=sz(s.content,e-a-1,n,s);return o&&t.replaceChild(i,s.copy(o))}function pbe(t,e,n){if(n.openStart>t.depth)throw new c1("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new c1("Inconsistent open depths");return oz(t,e,n,0)}function oz(t,e,n,r){let i=t.index(r),a=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=oz(t,e,n,r+1);return a.copy(a.content.replaceChild(i,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,o=s.content;return td(s,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}else{let{start:s,end:o}=mbe(n,t);return td(a,cz(t,s,o,e,r))}else return td(a,u1(t,e,r))}function lz(t,e){if(!e.type.compatibleContent(t.type))throw new c1("Cannot join "+e.type.name+" onto "+t.type.name)}function qj(t,e,n){let r=t.node(n);return lz(r,e.node(n)),r}function ed(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function _m(t,e,n,r){let i=(e||t).node(n),a=0,s=e?e.index(n):i.childCount;t&&(a=t.index(n),t.depth>n?a++:t.textOffset&&(ed(t.nodeAfter,r),a++));for(let o=a;o<s;o++)ed(i.child(o),r);e&&e.depth==n&&e.textOffset&&ed(e.nodeBefore,r)}function td(t,e){return t.type.checkContent(e),t.copy(e)}function cz(t,e,n,r,i){let a=t.depth>i&&qj(t,e,i+1),s=r.depth>i&&qj(n,r,i+1),o=[];return _m(null,t,i,o),a&&s&&e.index(i)==n.index(i)?(lz(a,s),ed(td(a,cz(t,e,n,r,i+1)),o)):(a&&ed(td(a,u1(t,e,i+1)),o),_m(e,n,i,o),s&&ed(td(s,u1(n,r,i+1)),o)),_m(r,null,i,o),new Ge(o)}function u1(t,e,n){let r=[];if(_m(null,t,n,r),t.depth>n){let i=qj(t,e,n+1);ed(td(i,u1(t,e,n+1)),r)}return _m(e,null,n,r),new Ge(r)}function mbe(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let a=n-1;a>=0;a--)i=e.node(a).copy(Ge.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class W0{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let a=0;a<e;a++)i+=r.child(a).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return On.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let o=r;r=i,i=o}let a=r.marks;for(var s=0;s<a.length;s++)a[s].type.spec.inclusive===!1&&(!i||!a[s].isInSet(i.marks))&&(a=a[s--].removeFromSet(a));return a}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!i||!r[a].isInSet(i.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new d1(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,a=n;for(let s=e;;){let{index:o,offset:l}=s.content.findIndex(a),u=a-l;if(r.push(s,o,i+l),!u||(s=s.child(o),s.isText))break;a=u-1,i+=l+1}return new W0(n,r,a)}static resolveCached(e,n){let r=DT.get(e);if(r)for(let a=0;a<r.elts.length;a++){let s=r.elts[a];if(s.pos==n)return s}else DT.set(e,r=new gbe);let i=r.elts[r.i]=W0.resolve(e,n);return r.i=(r.i+1)%vbe,i}}class gbe{constructor(){this.elts=[],this.i=0}}const vbe=12,DT=new WeakMap;class d1{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const xbe=Object.create(null);class qs{constructor(e,n,r,i=On.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ge.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&l1(this.attrs,n||e.defaultAttrs||xbe)&&On.sameSet(this.marks,r||On.none)}copy(e=null){return e==this.content?this:new qs(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new qs(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ct.empty;let i=this.resolve(e),a=this.resolve(n),s=r?0:i.sharedDepth(n),o=i.start(s),u=i.node(s).content.cut(i.pos-o,a.pos-o);return new ct(u,i.depth-s,a.depth-s)}replace(e,n,r){return pbe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return W0.resolveCached(this,e)}resolveNoCache(e){return W0.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,a=>(r.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uz(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ge.empty,i=0,a=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,a),o=s&&s.matchFragment(this.content,n);if(!o||!o.validEnd)return!1;for(let l=i;l<a;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(r),s=a&&a.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=On.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!On.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ge.fromJSON(e,n.content),a=e.nodeType(n.type).create(n.attrs,i,r);return a.type.checkAttrs(a.attrs),a}}qs.prototype.text=void 0;class f1 extends qs{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uz(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new f1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new f1(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function uz(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class yd{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new ybe(e,n);if(r.next==null)return yd.empty;let i=dz(r);r.next&&r.err("Unexpected trailing text");let a=Abe(kbe(i));return Cbe(a,r),a}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let a=n;i&&a<r;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function a(s,o){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ge.from(o.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:d,next:f}=s.next[u];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let p=a(f,o.concat(d));if(p)return p}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),a=i.match;if(a.matchType(e)){let s=[];for(let o=i;o.type;o=o.via)s.push(o.type);return s.reverse()}for(let s=0;s<a.next.length;s++){let{type:o,next:l}=a.next[s];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in n)&&(!i.type||l.validEnd)&&(r.push({match:o.contentMatch,type:o,via:i}),n[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let a=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)a+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return a}).join(`
`)}}yd.empty=new yd(!0);class ybe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dz(t){let e=[];do e.push(bbe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function bbe(t){let e=[];do e.push(wbe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function wbe(t){let e=jbe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Sbe(t,e);else break;return e}function RT(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Sbe(t,e){let n=RT(t),r=n;return t.eat(",")&&(t.next!="}"?r=RT(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Nbe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let a in n){let s=n[a];s.isInGroup(e)&&i.push(s)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function jbe(t){if(t.eat("(")){let e=dz(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Nbe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function kbe(t){let e=[[]];return i(a(t,0),n()),e;function n(){return e.push([])-1}function r(s,o,l){let u={term:l,to:o};return e[s].push(u),u}function i(s,o){s.forEach(l=>l.to=o)}function a(s,o){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(a(u,o)),[]);if(s.type=="seq")for(let l=0;;l++){let u=a(s.exprs[l],o);if(l==s.exprs.length-1)return u;i(u,o=n())}else if(s.type=="star"){let l=n();return r(o,l),i(a(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return i(a(s.expr,o),l),i(a(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(o)].concat(a(s.expr,o));if(s.type=="range"){let l=o;for(let u=0;u<s.min;u++){let d=n();i(a(s.expr,l),d),l=d}if(s.max==-1)i(a(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let d=n();r(l,d),i(a(s.expr,l),d),l=d}return[r(l)]}else{if(s.type=="name")return[r(o,void 0,s.value)];throw new Error("Unknown expr type")}}}}function fz(t,e){return e-t}function $T(t,e){let n=[];return r(e),n.sort(fz);function r(i){let a=t[i];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(i);for(let s=0;s<a.length;s++){let{term:o,to:l}=a[s];!o&&n.indexOf(l)==-1&&r(l)}}}function Abe(t){let e=Object.create(null);return n($T(t,0));function n(r){let i=[];r.forEach(s=>{t[s].forEach(({term:o,to:l})=>{if(!o)return;let u;for(let d=0;d<i.length;d++)i[d][0]==o&&(u=i[d][1]);$T(t,l).forEach(d=>{u||i.push([o,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let a=e[r.join(",")]=new yd(r.indexOf(t.length-1)>-1);for(let s=0;s<i.length;s++){let o=i[s][1].sort(fz);a.next.push({type:i[s][0],next:e[o.join(",")]||n(o)})}return a}}function Cbe(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],a=!i.validEnd,s=[];for(let o=0;o<i.next.length;o++){let{type:l,next:u}=i.next[o];s.push(l.name),a&&!(l.isText||l.hasRequiredAttrs())&&(a=!1),r.indexOf(u)==-1&&r.push(u)}a&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hz(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function pz(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let a=t[r];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function mz(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let a=t[i];a.validate&&a.validate(e[i])}}function gz(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new _be(t,r,e[r]);return n}let zT=class vz{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=gz(e,r.attrs),this.defaultAttrs=hz(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yd.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pz(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qs(this,this.computeAttrs(e),Ge.from(n),On.setFrom(r))}createChecked(e=null,n,r){return n=Ge.from(n),this.checkContent(n),new qs(this,this.computeAttrs(e),n,On.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ge.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let i=this.contentMatch.matchFragment(n),a=i&&i.fillBefore(Ge.empty,!0);return a?new qs(this,e,n.append(a),On.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mz(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:On.none:e}static compile(e,n){let r=Object.create(null);e.forEach((a,s)=>r[a]=new vz(a,n,s));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Ebe(t,e,n){let r=n.split("|");return i=>{let a=i===null?"null":typeof i;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${a}`)}}class _be{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Ebe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class w2{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=gz(e,i.attrs),this.excluded=null;let a=hz(this.attrs);this.instance=a?new On(this,a):null}create(e=null){return!e&&this.instance?this.instance:new On(this,pz(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((a,s)=>r[a]=new w2(a,i++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){mz(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class xz{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=di.from(e.nodes),n.marks=di.from(e.marks||{}),this.nodes=zT.compile(this.spec.nodes,this),this.marks=w2.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],s=a.spec.content||"",o=a.spec.marks;if(a.contentMatch=r[s]||(r[s]=yd.parse(s,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=o=="_"?null:o?FT(this,o.split(" ")):o==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],s=a.spec.excludes;a.excluded=s==null?[a]:s==""?[]:FT(this,s.split(" "))}this.nodeFromJSON=i=>qs.fromJSON(this,i),this.markFromJSON=i=>On.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof zT){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new f1(r,r.defaultAttrs,e,On.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function FT(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],a=t.marks[i],s=a;if(a)n.push(a);else for(let o in t.marks){let l=t.marks[o];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Obe(t){return t.tag!=null}function Pbe(t){return t.style!=null}class Lc{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Obe(i))this.tags.push(i);else if(Pbe(i)){let a=/[^=]*/.exec(i.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,n={}){let r=new HT(this,n,!1);return r.addAll(e,On.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new HT(this,n,!0);return r.addAll(e,On.none,n.from,n.to),ct.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(Lbe(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let s=a.getAttrs(e);if(s===!1)continue;a.attrs=s||void 0}return a}}}matchStyle(e,n,r,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let s=this.styles[a],o=s.style;if(!(o.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||o.length>e.length&&(o.charCodeAt(e.length)!=61||o.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(i){let a=i.priority==null?50:i.priority,s=0;for(;s<n.length;s++){let o=n[s];if((o.priority==null?50:o.priority)<a)break}n.splice(s,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(s=>{r(s=WT(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(s=>{r(s=WT(s)),s.node||s.ignore||s.mark||(s.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Lc(e,Lc.schemaRules(e)))}}const yz={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Tbe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bz={ol:!0,ul:!0},q0=1,Uj=2,Om=4;function BT(t,e,n){return e!=null?(e?q0:0)|(e==="full"?Uj:0):t&&t.whitespace=="pre"?q0|Uj:n&~Om}class Dv{constructor(e,n,r,i,a,s){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=On.none,this.match=a||(s&Om?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ge.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&q0)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let n=Ge.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ge.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!yz.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class HT{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,a,s=BT(null,n.preserveWhitespace,0)|(r?Om:0);i?a=new Dv(i.type,i.attrs,On.none,!0,n.topMatch||i.type.contentMatch,s):r?a=new Dv(null,null,On.none,!0,null,s):a=new Dv(e.schema.topNodeType,null,On.none,!0,null,s),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,a=i.options&Uj?"full":this.localPreserveWS||(i.options&q0)>0,{schema:s}=this.parser;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let o=r.split(/\r?\n|\r/);for(let l=0;l<o.length;l++)l&&this.insertNode(s.linebreakReplacement.create(),n,!0),o[l]&&this.insertNode(s.text(o[l]),n,!/\S/.test(o[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),o;bz.hasOwnProperty(s)&&this.parser.normalizeLists&&Mbe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Tbe.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,d=this.needsBlock;if(yz.hasOwnProperty(s))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),u=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(a),this.needsBlock=d}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,l,u,l.consuming===!1?o:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],s=r.getPropertyValue(a);if(s)for(let o=void 0;;){let l=this.parser.matchStyle(a,s,this,o);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)o=l;else break}}return n}addElementByRule(e,n,r,i){let a,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(a=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let o=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}a&&this.sync(o)&&this.open--}addAll(e,n,r,i){let a=r||0;for(let s=r?e.childNodes[r]:e.firstChild,o=i==null?null:e.childNodes[i];s!=o;s=s.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(s,n);this.findAtPoint(e,a)}findPlace(e,n,r){let i,a;for(let s=this.open,o=0;s>=0;s--){let l=this.nodes[s],u=l.findWrapping(e);if(u&&(!i||i.length>u.length+o)&&(i=u,a=l,!u.length))break;if(l.solid){if(r)break;o+=2}}if(!i)return null;this.sync(a);for(let s=0;s<i.length;s++)n=this.enterInner(i[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let s=On.none;for(let o of i.concat(e.marks))(a.type?a.type.allowsMarkType(o.type):qT(o.type,e.type))&&(s=o.addToSet(s));return a.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let a=this.findPlace(e.create(n),r,!1);return a&&(a=this.enterInner(e,n,r,!0,i)),a}enterInner(e,n,r,i=!1,a){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let o=BT(e,a,s.options);s.options&Om&&s.content.length==0&&(o|=Om);let l=On.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):qT(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new Dv(e,n,l,i,null,o)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=q0)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(i?0:1),s=(o,l)=>{for(;o>=0;o--){let u=n[o];if(u==""){if(o==n.length-1||o==0)continue;for(;l>=a;l--)if(s(o-1,l))return!0;return!1}else{let d=l>0||l==0&&i?this.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Mbe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&bz.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Lbe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function WT(t){let e={};for(let n in t)e[n]=t[n];return e}function qT(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let a=[],s=o=>{a.push(o);for(let l=0;l<o.edgeCount;l++){let{type:u,next:d}=o.edge(l);if(u==e||a.indexOf(d)<0&&s(d))return!0}};if(s(i.contentMatch))return!0}}class Ld{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=x5(n).createDocumentFragment());let i=r,a=[];return e.forEach(s=>{if(a.length||s.marks.length){let o=0,l=0;for(;o<a.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(a[o][0])||u.type.spec.spanning===!1)break;o++,l++}for(;o<a.length;)i=a.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],d=this.serializeMark(u,s.isInline,n);d&&(a.push([u,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=wx(x5(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&wx(x5(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return wx(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ld(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=UT(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return UT(e.marks)}}function UT(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function x5(t){return t.document||window.document}const VT=new WeakMap;function Ibe(t){let e=VT.get(t);return e===void 0&&VT.set(t,e=Dbe(t)),e}function Dbe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function wx(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=Ibe(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let o,l=n?t.createElementNS(n,i):t.createElement(i),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),u[f]):f=="style"&&l.style?l.style.cssText=u[f]:l.setAttribute(f,u[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:m}=wx(t,p,n,r);if(l.appendChild(h),m){if(o)throw new RangeError("Multiple content holes");o=m}}}return{dom:l,contentDOM:o}}const wz=65535,Sz=Math.pow(2,16);function Rbe(t,e){return t+e*Sz}function GT(t){return t&wz}function $be(t){return(t-(t&wz))/Sz}const Nz=1,jz=2,Sx=4,kz=8;class Vj{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&kz)>0}get deletedBefore(){return(this.delInfo&(Nz|Sx))>0}get deletedAfter(){return(this.delInfo&(jz|Sx))>0}get deletedAcross(){return(this.delInfo&Sx)>0}}class Ma{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ma.empty)return Ma.empty}recover(e){let n=0,r=GT(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+$be(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[o+a],d=this.ranges[o+s],f=l+u;if(e<=f){let p=u?e==l?-1:e==f?1:n:n,h=l+i+(p<0?0:d);if(r)return h;let m=e==(n<0?l:f)?null:Rbe(o/3,e-l),g=e==l?jz:e==f?Nz:Sx;return(n<0?e!=l:e!=f)&&(g|=kz),new Vj(h,g,m)}i+=d-u}return r?e+i:new Vj(e+i,0,null)}touches(e,n){let r=0,i=GT(n),a=this.inverted?2:1,s=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let l=this.ranges[o]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[o+a],d=l+u;if(e<=d&&o==i*3)return!0;r+=this.ranges[o+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let s=this.ranges[i],o=s-(this.inverted?a:0),l=s+(this.inverted?0:a),u=this.ranges[i+n],d=this.ranges[i+r];e(o,o+u,l,l+d),a+=d-u}}invert(){return new Ma(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ma.empty:new Ma(e<0?[0,-e,0]:[0,0,e])}}Ma.empty=new Ma([]);class U0{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new U0(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new U0;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let a=this.from;a<this.to;a++){let s=this._maps[a],o=s.mapResult(e,n);if(o.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,e=this._maps[l].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return r?e:new Vj(e,i,null)}}const y5=Object.create(null);class Ii{getMap(){return Ma.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=y5[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in y5)throw new RangeError("Duplicate use of step JSON ID "+e);return y5[e]=n,n.prototype.jsonID=e,n}}class Er{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Er(e,null)}static fail(e){return new Er(null,e)}static fromReplace(e,n,r,i){try{return Er.ok(e.replace(n,r,i))}catch(a){if(a instanceof c1)return Er.fail(a.message);throw a}}}function H3(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let a=t.child(i);a.content.size&&(a=a.copy(H3(a.content,e,a))),a.isInline&&(a=e(a,n,i)),r.push(a)}return Ge.fromArray(r)}class bc extends Ii{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new ct(H3(n.content,(s,o)=>!s.isAtom||!o.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),n.openStart,n.openEnd);return Er.fromReplace(e,this.from,this.to,a)}invert(){return new Fs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new bc(n.pos,r.pos,this.mark)}merge(e){return e instanceof bc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new bc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new bc(n.from,n.to,e.markFromJSON(n.mark))}}Ii.jsonID("addMark",bc);class Fs extends Ii{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ct(H3(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Er.fromReplace(e,this.from,this.to,r)}invert(){return new bc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Fs(n.pos,r.pos,this.mark)}merge(e){return e instanceof Fs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Fs(n.from,n.to,e.markFromJSON(n.mark))}}Ii.jsonID("removeMark",Fs);class wc extends Ii{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Er.fromReplace(e,this.pos,this.pos+1,new ct(Ge.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new wc(this.pos,n.marks[i]);return new wc(this.pos,this.mark)}}return new bd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new wc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new wc(n.pos,e.markFromJSON(n.mark))}}Ii.jsonID("addNodeMark",wc);class bd extends Ii{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Er.fromReplace(e,this.pos,this.pos+1,new ct(Ge.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new wc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new bd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new bd(n.pos,e.markFromJSON(n.mark))}}Ii.jsonID("removeNodeMark",bd);class Jr extends Ii{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Gj(e,this.from,this.to)?Er.fail("Structure replace would overwrite content"):Er.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ma([this.from,this.to-this.from,this.slice.size])}invert(e){return new Jr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Jr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Jr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ct.empty:new ct(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Jr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ct.empty:new ct(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Jr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Jr(n.from,n.to,ct.fromJSON(e,n.slice),!!n.structure)}}Ii.jsonID("replace",Jr);class ei extends Ii{constructor(e,n,r,i,a,s,o=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=a,this.insert=s,this.structure=o}apply(e){if(this.structure&&(Gj(e,this.from,this.gapFrom)||Gj(e,this.gapTo,this.to)))return Er.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Er.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Er.fromReplace(e,this.from,this.to,r):Er.fail("Content does not fit in gap")}getMap(){return new Ma([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ei(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||a>r.pos?null:new ei(n.pos,r.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ei(n.from,n.to,n.gapFrom,n.gapTo,ct.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ii.jsonID("replaceAround",ei);function Gj(t,e,n){let r=t.resolve(e),i=n-e,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let s=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function zbe(t,e,n,r){let i=[],a=[],s,o;t.doc.nodesBetween(e,n,(l,u,d)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(u,e),h=Math.min(u+l.nodeSize,n),m=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(m)||(s&&s.to==p&&s.mark.eq(f[g])?s.to=h:i.push(s=new Fs(p,h,f[g])));o&&o.to==p?o.to=h:a.push(o=new bc(p,h,r))}}),i.forEach(l=>t.step(l)),a.forEach(l=>t.step(l))}function Fbe(t,e,n,r){let i=[],a=0;t.doc.nodesBetween(e,n,(s,o)=>{if(!s.isInline)return;a++;let l=null;if(r instanceof w2){let u=s.marks,d;for(;d=r.isInSet(u);)(l||(l=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(o+s.nodeSize,n);for(let d=0;d<l.length;d++){let f=l[d],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==a-1&&f.eq(i[h].style)&&(p=m)}p?(p.to=u,p.step=a):i.push({style:f,from:Math.max(o,e),to:u,step:a})}}}),i.forEach(s=>t.step(new Fs(s.from,s.to,s.style)))}function W3(t,e,n,r=n.contentMatch,i=!0){let a=t.doc.nodeAt(e),s=[],o=e+1;for(let l=0;l<a.childCount;l++){let u=a.child(l),d=o+u.nodeSize,f=r.matchType(u.type);if(!f)s.push(new Jr(o,d,ct.empty));else{r=f;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||t.step(new Fs(o,d,u.marks[p]));if(i&&u.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(u.text);)m||(m=new ct(Ge.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new Jr(o+p.index,o+p.index+p[0].length,m))}}o=d}if(!r.validEnd){let l=r.fillBefore(Ge.empty,!0);t.replace(o,o,new ct(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function Bbe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ip(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,a=0;;--r){let s=t.$from.node(r),o=t.$from.index(r)+i,l=t.$to.indexAfter(r)-a;if(r<t.depth&&s.canReplace(o,l,n))return r;if(r==0||s.type.spec.isolating||!Bbe(s,o,l))break;o&&(i=1),l<s.childCount&&(a=1)}return null}function Hbe(t,e,n){let{$from:r,$to:i,depth:a}=e,s=r.before(a+1),o=i.after(a+1),l=s,u=o,d=Ge.empty,f=0;for(let m=a,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,d=Ge.from(r.node(m).copy(d)),f++):l--;let p=Ge.empty,h=0;for(let m=a,g=!1;m>n;m--)g||i.after(m+1)<i.end(m)?(g=!0,p=Ge.from(i.node(m).copy(p)),h++):u++;t.step(new ei(l,u,s,o,new ct(d.append(p),f,h),d.size-f,!0))}function q3(t,e,n=null,r=t){let i=Wbe(t,e),a=i&&qbe(r,e);return a?i.map(KT).concat({type:e,attrs:n}).concat(a.map(KT)):null}function KT(t){return{type:t,attrs:null}}function Wbe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.contentMatchAt(r).findWrapping(e);if(!a)return null;let s=a.length?a[0]:e;return n.canReplaceWith(r,i,s)?a:null}function qbe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,a=n.child(r),s=e.contentMatch.findWrapping(a.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<i;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function Ube(t,e,n){let r=Ge.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let o=n[s].type.contentMatch.matchFragment(r);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ge.from(n[s].type.create(n[s].attrs,r))}let i=e.start,a=e.end;t.step(new ei(i,a,i,a,new ct(r,0,0),n.length,!0))}function Vbe(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,n,(s,o)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&Gbe(t.doc,t.mapping.slice(a).map(o),r)){let u=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?u=!1:!h&&m&&(u=!0)}u===!1&&Cz(t,s,o,a),W3(t,t.mapping.slice(a).map(o,1),r,void 0,u===null);let d=t.mapping.slice(a),f=d.map(o,1),p=d.map(o+s.nodeSize,1);return t.step(new ei(f,p,f+1,p-1,new ct(Ge.from(r.create(l,null,s.marks)),0,0),1,!0)),u===!0&&Az(t,s,o,a),!1}})}function Az(t,e,n,r){e.forEach((i,a)=>{if(i.isText){let s,o=/\r?\n|\r/g;for(;s=o.exec(i.text);){let l=t.mapping.slice(r).map(n+1+a+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Cz(t,e,n,r){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+a);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Gbe(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Kbe(t,e,n,r,i){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let s=n.create(r,null,i||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,s);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ei(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new ct(Ge.from(s),0,0),1,!0))}function pl(t,e,n=1,r){let i=t.resolve(e),a=i.depth-n,s=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,d=n-2;u>a;u--,d--){let f=i.node(u),p=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(p,f.childCount),m=r&&r[d+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!g.type.validContent(h))return!1}let o=i.indexAfter(a),l=r&&r[0];return i.node(a).canReplaceWith(o,o,l?l.type:i.node(a+1).type)}function Ybe(t,e,n=1,r){let i=t.doc.resolve(e),a=Ge.empty,s=Ge.empty;for(let o=i.depth,l=i.depth-n,u=n-1;o>l;o--,u--){a=Ge.from(i.node(o).copy(a));let d=r&&r[u];s=Ge.from(d?d.type.create(d.attrs,s):i.node(o).copy(s))}t.step(new Jr(e,e,new ct(a.append(s),n,n),!0))}function Qc(t,e){let n=t.resolve(e),r=n.index();return Ez(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Xbe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),s=a.type==r?t.type.schema.nodes.text:a.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(a.marks))return!1}return n.validEnd}function Ez(t,e){return!!(t&&e&&!t.isLeaf&&Xbe(t,e))}function S2(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let a,s,o=r.index(i);if(i==r.depth?(a=r.nodeBefore,s=r.nodeAfter):n>0?(a=r.node(i+1),o++,s=r.node(i).maybeChild(o)):(a=r.node(i).maybeChild(o-1),s=r.node(i+1)),a&&!a.isTextblock&&Ez(a,s)&&r.node(i).canReplace(o,o+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Jbe(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,a=t.doc.resolve(e-n),s=a.node().type;if(i&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(i);d&&!f?r=!1:!d&&f&&(r=!0)}let o=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);Cz(t,d.node(),d.before(),o)}s.inlineContent&&W3(t,e+n-1,s,a.node().contentMatchAt(a.index()),r==null);let l=t.mapping.slice(o),u=l.map(e-n);if(t.step(new Jr(u,l.map(e+n,-1),ct.empty,!0)),r===!0){let d=t.doc.resolve(u);Az(t,d.node(),d.before(),t.steps.length)}return t}function Zbe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let a=r.index(i);if(r.node(i).canReplaceWith(a,a,n))return r.before(i+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let a=r.indexAfter(i);if(r.node(i).canReplaceWith(a,a,n))return r.after(i+1);if(a<r.node(i).childCount)return null}return null}function _z(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let a=0;a<n.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let s=r.depth;s>=0;s--){let o=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(o>0?1:0),u=r.node(s),d=!1;if(a==1)d=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);d=f&&u.canReplaceWith(l,l,f[0])}if(d)return o==0?r.pos:o<0?r.before(s+1):r.after(s+1)}return null}function N2(t,e,n=e,r=ct.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),a=t.resolve(n);return Oz(i,a,r)?new Jr(e,n,r):new Qbe(i,a,r).fit()}function Oz(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Qbe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ge.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ge.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,s=r.depth,o=i.depth;for(;s&&o&&a.childCount==1;)a=a.firstChild.content,s--,o--;let l=new ct(a,s,o);return e>-1?new ei(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Jr(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let a=n.firstChild;if(n.childCount>1&&(i=0),a.type.spec.isolating&&i<=r){e=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,a=null;r?(a=b5(this.unplaced.content,r-1).firstChild,i=a.content):i=this.unplaced.content;let s=i.firstChild;for(let o=this.depth;o>=0;o--){let{type:l,match:u}=this.frontier[o],d,f=null;if(n==1&&(s?u.matchType(s.type)||(f=u.fillBefore(Ge.from(s),!1)):a&&l.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:o,parent:a,inject:f};if(n==2&&s&&(d=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:o,parent:a,wrap:d};if(a&&u.matchType(a.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=b5(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ct(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=b5(e,n);if(i.childCount<=1&&n>0){let a=e.size-n<=n+i.size;this.unplaced=new ct(cm(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new ct(cm(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let s=this.unplaced,o=r?r.content:s.content,l=s.openStart-e,u=0,d=[],{match:f,type:p}=this.frontier[n];if(i){for(let g=0;g<i.childCount;g++)d.push(i.child(g));f=f.matchFragment(i)}let h=o.size+e-(s.content.size-s.openEnd);for(;u<o.childCount;){let g=o.child(u),y=f.matchType(g.type);if(!y)break;u++,(u>1||l==0||g.content.size)&&(f=y,d.push(Pz(g.mark(p.allowedMarks(g.marks)),u==1?l:0,u==o.childCount?h:-1)))}let m=u==o.childCount;m||(h=-1),this.placed=um(this.placed,n,Ge.from(d)),this.frontier[n].match=f,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=o;g<h;g++){let x=y.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),y=x.content}this.unplaced=m?e==0?ct.empty:new ct(cm(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new ct(cm(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!w5(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],a=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=w5(e,n,i,r,a);if(s){for(let o=n-1;o>=0;o--){let{match:l,type:u}=this.frontier[o],d=w5(e,o,u,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:a?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=um(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=um(this.placed,this.depth,Ge.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ge.empty,!0);n.childCount&&(this.placed=um(this.placed,this.frontier.length,n))}}function cm(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(cm(t.firstChild.content,e-1,n)))}function um(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(um(t.lastChild.content,e-1,n)))}function b5(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Pz(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Pz(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ge.empty,!0)))),t.copy(r)}function w5(t,e,n,r,i){let a=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==a.childCount&&!n.compatibleContent(a.type))return null;let o=r.fillBefore(a.content,!0,s);return o&&!e2e(n,a.content,s)?o:null}function e2e(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function t2e(t){return t.spec.defining||t.spec.definingForContent}function n2e(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),a=t.doc.resolve(n);if(Oz(i,a,r))return t.step(new Jr(e,n,r));let s=Mz(i,a);s[s.length-1]==0&&s.pop();let o=-(i.depth+1);s.unshift(o);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;s.indexOf(p)>-1?o=p:i.before(p)==h&&s.splice(1,0,-p)}let l=s.indexOf(o),u=[],d=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(u.push(m),h==r.openStart)break;p=m.content}for(let p=d-1;p>=0;p--){let h=u[p],m=t2e(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(o)-1)))d=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+d+1)%(r.openStart+1),m=u[h];if(m)for(let g=0;g<s.length;g++){let y=s[(g+l)%s.length],x=!0;y<0&&(x=!1,y=-y);let w=i.node(y-1),S=i.index(y-1);if(w.canReplaceWith(S,S,m.type,m.marks))return t.replace(i.before(y),x?a.after(y):n,new ct(Tz(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let h=s[p];h<0||(e=i.before(h),n=a.after(h))}}function Tz(t,e,n,r,i){if(e<n){let a=t.firstChild;t=t.replaceChild(0,a.copy(Tz(a.content,e+1,n,r,a)))}if(e>r){let a=i.contentMatchAt(0),s=a.fillBefore(t).append(t);t=s.append(a.matchFragment(s).fillBefore(Ge.empty,!0))}return t}function r2e(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Zbe(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ct(Ge.from(r),0,0))}function i2e(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),a=Mz(r,i);for(let s=0;s<a.length;s++){let o=a[s],l=s==a.length-1;if(l&&o==0||r.node(o).type.contentMatch.validEnd)return t.delete(r.start(o),i.end(o));if(o>0&&(l||r.node(o-1).canReplace(r.index(o-1),i.indexAfter(o-1))))return t.delete(r.before(o),i.after(o))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function Mz(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let a=t.start(i);if(a<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&n.push(i)}return n}class Yf extends Ii{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Er.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Er.fromReplace(e,this.pos,this.pos+1,new ct(Ge.from(i),0,n.isLeaf?0:1))}getMap(){return Ma.empty}invert(e){return new Yf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yf(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Yf(n.pos,n.attr,n.value)}}Ii.jsonID("attr",Yf);class V0 extends Ii{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Er.ok(r)}getMap(){return Ma.empty}invert(e){return new V0(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new V0(n.attr,n.value)}}Ii.jsonID("docAttr",V0);let Ih=class extends Error{};Ih=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ih.prototype=Object.create(Error.prototype);Ih.prototype.constructor=Ih;Ih.prototype.name="TransformError";class Lz{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new U0}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ih(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ct.empty){let i=N2(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ct(Ge.from(r),0,0))}delete(e,n){return this.replace(e,n,ct.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return n2e(this,e,n,r),this}replaceRangeWith(e,n,r){return r2e(this,e,n,r),this}deleteRange(e,n){return i2e(this,e,n),this}lift(e,n){return Hbe(this,e,n),this}join(e,n=1){return Jbe(this,e,n),this}wrap(e,n){return Ube(this,e,n),this}setBlockType(e,n=e,r,i=null){return Vbe(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Kbe(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Yf(e,n,r)),this}setDocAttribute(e,n){return this.step(new V0(e,n)),this}addNodeMark(e,n){return this.step(new wc(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof On)n.isInSet(r.marks)&&this.step(new bd(e,n));else{let i=r.marks,a,s=[];for(;a=n.isInSet(i);)s.push(new bd(e,a)),i=a.removeFromSet(i);for(let o=s.length-1;o>=0;o--)this.step(s[o])}return this}split(e,n=1,r){return Ybe(this,e,n,r),this}addMark(e,n,r){return zbe(this,e,n,r),this}removeMark(e,n,r){return Fbe(this,e,n,r),this}clearIncompatible(e,n,r){return W3(this,e,n,r),this}}const S5=Object.create(null);class Xt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new a2e(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ct.empty){let r=n.content.lastChild,i=null;for(let o=0;o<n.openEnd;o++)i=r,r=r.lastChild;let a=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],d=e.mapping.slice(a);e.replaceRange(d.map(l.pos),d.map(u.pos),o?ct.empty:n),o==0&&JT(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:s,$to:o}=i[a],l=e.mapping.slice(r),u=l.map(s.pos),d=l.map(o.pos);a?e.deleteRange(u,d):(e.replaceRangeWith(u,d,n),JT(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Bt(e):df(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let a=e.depth-1;a>=0;a--){let s=n<0?df(e.node(0),e.node(a),e.before(a+1),e.index(a),n,r):df(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new za(e.node(0))}static atStart(e){return df(e,e,0,0,1)||new za(e)}static atEnd(e){return df(e,e,e.content.size,e.childCount,-1)||new za(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=S5[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in S5)throw new RangeError("Duplicate use of selection JSON ID "+e);return S5[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Bt.between(this.$anchor,this.$head).getBookmark()}}Xt.prototype.visible=!0;class a2e{constructor(e,n){this.$from=e,this.$to=n}}let YT=!1;function XT(t){!YT&&!t.parent.inlineContent&&(YT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Bt extends Xt{constructor(e,n=e){XT(e),XT(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Xt.near(r);let i=e.resolve(n.map(this.anchor));return new Bt(i.parent.inlineContent?i:r,r)}replace(e,n=ct.empty){if(super.replace(e,n),n==ct.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Bt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new j2(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Bt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let a=Xt.findFrom(n,r,!0)||Xt.findFrom(n,-r,!0);if(a)n=a.$head;else return Xt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Xt.findFrom(e,-r,!0)||Xt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Bt(e,n)}}Xt.jsonID("text",Bt);class j2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new j2(e.map(this.anchor),e.map(this.head))}resolve(e){return Bt.between(e.resolve(this.anchor),e.resolve(this.head))}}class _t extends Xt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),a=e.resolve(i);return r?Xt.near(a):new _t(a)}content(){return new ct(Ge.from(this.node),0,0)}eq(e){return e instanceof _t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new U3(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _t(e.resolve(n.anchor))}static create(e,n){return new _t(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}_t.prototype.visible=!1;Xt.jsonID("node",_t);class U3{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new j2(r,r):new U3(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&_t.isSelectable(r)?new _t(n):Xt.near(n)}}class za extends Xt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ct.empty){if(n==ct.empty){e.delete(0,e.doc.content.size);let r=Xt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new za(e)}map(e){return new za(e)}eq(e){return e instanceof za}getBookmark(){return s2e}}Xt.jsonID("all",za);const s2e={map(){return this},resolve(t){return new za(t)}};function df(t,e,n,r,i,a=!1){if(e.inlineContent)return Bt.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let o=e.child(s);if(o.isAtom){if(!a&&_t.isSelectable(o))return _t.create(t,n-(i<0?o.nodeSize:0))}else{let l=df(t,o,n+i,i<0?o.childCount:0,i,a);if(l)return l}n+=o.nodeSize*i}return null}function JT(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Jr||i instanceof ei))return;let a=t.mapping.maps[r],s;a.forEach((o,l,u,d)=>{s==null&&(s=d)}),t.setSelection(Xt.near(t.doc.resolve(s),n))}const ZT=1,Rv=2,QT=4;class o2e extends Lz{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ZT)&~Rv,this.storedMarks=null,this}get selectionSet(){return(this.updated&ZT)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Rv,this}ensureMarks(e){return On.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Rv)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Rv,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||On.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let s=this.doc.resolve(n);a=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,a)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Xt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=QT,this}get scrolledIntoView(){return(this.updated&QT)>0}}function e6(t,e){return!e||!t?t:t.bind(e)}class dm{constructor(e,n,r){this.name=e,this.init=e6(n.init,r),this.apply=e6(n.apply,r)}}const l2e=[new dm("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new dm("selection",{init(t,e){return t.selection||Xt.atStart(e.doc)},apply(t){return t.selection}}),new dm("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new dm("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class N5{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=l2e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new dm(r.key,r.spec.state,r))})}}class If{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let a=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=i?i[s].n:0,u=i?i[s].state:this,d=l<n.length&&o.spec.appendTransaction.call(o,l?n.slice(l):n,u,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),a=!0}i&&(i[s]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new If(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let a=r[i];n[a.name]=a.apply(e,this[a.name],this,n)}return n}get tr(){return new o2e(this)}static create(e){let n=new N5(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new If(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new N5(this.schema,e.plugins),r=n.fields,i=new If(n);for(let a=0;a<r.length;a++){let s=r[a].name;i[s]=this.hasOwnProperty(s)?this[s]:r[a].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],a=i.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new N5(e.schema,e.plugins),a=new If(i);return i.fields.forEach(s=>{if(s.name=="doc")a.doc=qs.fromJSON(e.schema,n.doc);else if(s.name=="selection")a.selection=Xt.fromJSON(a.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let l=r[o],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,o)){a[s.name]=u.fromJSON.call(l,e,n[o],a);return}}a[s.name]=s.init(e,a)}}),a}}function Iz(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Iz(i,e,{})),n[r]=i}return n}class rr{constructor(e){this.spec=e,this.props={},e.props&&Iz(e.props,this,this.props),this.key=e.key?e.key.key:Dz("plugin")}getState(e){return e[this.key]}}const j5=Object.create(null);function Dz(t){return t in j5?t+"$"+ ++j5[t]:(j5[t]=0,t+"$")}class Ur{constructor(e="key"){this.key=Dz(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const V3=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Rz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const $z=(t,e,n)=>{let r=Rz(t,n);if(!r)return!1;let i=G3(r);if(!i){let s=r.blockRange(),o=s&&ip(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)}let a=i.nodeBefore;if(Gz(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Dh(a,"end")||_t.isSelectable(a)))for(let s=r.depth;;s--){let o=N2(t.doc,r.before(s),r.after(s),ct.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(Dh(a,"end")?Xt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):_t.create(l.doc,i.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},c2e=(t,e,n)=>{let r=Rz(t,n);if(!r)return!1;let i=G3(r);return i?zz(t,i,e):!1},u2e=(t,e,n)=>{let r=Bz(t,n);if(!r)return!1;let i=K3(r);return i?zz(t,i,e):!1};function zz(t,e,n){let r=e.nodeBefore,i=r,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let d=i.lastChild;if(!d)return!1;i=d}let s=e.nodeAfter,o=s,l=e.pos+1;for(;!o.isTextblock;l++){if(o.type.spec.isolating)return!1;let d=o.firstChild;if(!d)return!1;o=d}let u=N2(t.doc,a,l,ct.empty);if(!u||u.from!=a||u instanceof Jr&&u.slice.size>=l-a)return!1;if(n){let d=t.tr.step(u);d.setSelection(Bt.create(d.doc,a)),n(d.scrollIntoView())}return!0}function Dh(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Fz=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;a=G3(r)}let s=a&&a.nodeBefore;return!s||!_t.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_t.create(t.doc,a.pos-s.nodeSize)).scrollIntoView()),!0)};function G3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Bz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Hz=(t,e,n)=>{let r=Bz(t,n);if(!r)return!1;let i=K3(r);if(!i)return!1;let a=i.nodeAfter;if(Gz(t,i,e,1))return!0;if(r.parent.content.size==0&&(Dh(a,"start")||_t.isSelectable(a))){let s=N2(t.doc,r.before(),r.after(),ct.empty);if(s&&s.slice.size<s.to-s.from){if(e){let o=t.tr.step(s);o.setSelection(Dh(a,"start")?Xt.findFrom(o.doc.resolve(o.mapping.map(i.pos)),1):_t.create(o.doc,o.mapping.map(i.pos))),e(o.scrollIntoView())}return!0}}return a.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},Wz=(t,e,n)=>{let{$head:r,empty:i}=t.selection,a=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;a=K3(r)}let s=a&&a.nodeAfter;return!s||!_t.isSelectable(s)?!1:(e&&e(t.tr.setSelection(_t.create(t.doc,a.pos)).scrollIntoView()),!0)};function K3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const d2e=(t,e)=>{let n=t.selection,r=n instanceof _t,i;if(r){if(n.node.isTextblock||!Qc(t.doc,n.from))return!1;i=n.from}else if(i=S2(t.doc,n.from,-1),i==null)return!1;if(e){let a=t.tr.join(i);r&&a.setSelection(_t.create(a.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},f2e=(t,e)=>{let n=t.selection,r;if(n instanceof _t){if(n.node.isTextblock||!Qc(t.doc,n.to))return!1;r=n.to}else if(r=S2(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},h2e=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),a=i&&ip(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)},qz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Y3(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const p2e=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),a=n.indexAfter(-1),s=Y3(i.contentMatchAt(a));if(!s||!i.canReplaceWith(a,a,s))return!1;if(e){let o=n.after(),l=t.tr.replaceWith(o,o,s.createAndFill());l.setSelection(Xt.near(l.doc.resolve(o),1)),e(l.scrollIntoView())}return!0},Uz=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof za||r.parent.inlineContent||i.parent.inlineContent)return!1;let a=Y3(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,o=t.tr.insert(s,a.createAndFill());o.setSelection(Bt.create(o.doc,s+1)),e(o.scrollIntoView())}return!0},Vz=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(pl(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),i=r&&ip(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function m2e(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof _t&&e.selection.node.isBlock)return!r.parentOffset||!pl(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],s,o,l=!1,u=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),u=r.start(h)==r.pos-(r.depth-h),o=Y3(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),a.unshift(l&&o?{type:o}:null),s=h;break}else{if(h==1)return!1;a.unshift(null)}let d=e.tr;(e.selection instanceof Bt||e.selection instanceof za)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=pl(d.doc,f,a.length,a);if(p||(a[0]=o?{type:o}:null,p=pl(d.doc,f,a.length,a)),!p)return!1;if(d.split(f,a.length,a),!l&&u&&r.node(s).type!=o){let h=d.mapping.map(r.before(s)),m=d.doc.resolve(h);o&&r.node(s-1).canReplaceWith(m.index(),m.index()+1,o)&&d.setNodeMarkup(d.mapping.map(r.before(s)),o)}return n&&n(d.scrollIntoView()),!0}}const g2e=m2e(),v2e=(t,e)=>{let{$from:n,to:r}=t.selection,i,a=n.sharedDepth(r);return a==0?!1:(i=n.before(a),e&&e(t.tr.setSelection(_t.create(t.doc,i))),!0)};function x2e(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,a=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||Qc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Gz(t,e,n,r){let i=e.nodeBefore,a=e.nodeAfter,s,o,l=i.type.spec.isolating||a.type.spec.isolating;if(!l&&x2e(t,e,n))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&o.matchType(s[0]||a.type).validEnd){if(n){let h=e.pos+a.nodeSize,m=Ge.empty;for(let x=s.length-1;x>=0;x--)m=Ge.from(s[x].create(null,m));m=Ge.from(i.copy(m));let g=t.tr.step(new ei(e.pos-1,h,e.pos,h,new ct(m,1,0),s.length,!0)),y=g.doc.resolve(h+2*s.length);y.nodeAfter&&y.nodeAfter.type==i.type&&Qc(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let d=a.type.spec.isolating||r>0&&l?null:Xt.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&ip(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&Dh(a,"start",!0)&&Dh(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let g=a,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(n){let x=Ge.empty;for(let S=m.length-1;S>=0;S--)x=Ge.from(m[S].copy(x));let w=t.tr.step(new ei(e.pos-m.length,e.pos+a.nodeSize,e.pos+y,e.pos+a.nodeSize-y,new ct(x,m.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function Kz(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(n&&n(e.tr.setSelection(Bt.create(e.doc,t<0?i.start(a):i.end(a)))),!0):!1}}const y2e=Kz(-1),b2e=Kz(1);function w2e(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a),o=s&&q3(s,t,e);return o?(r&&r(n.tr.wrap(s,o).scrollIntoView()),!0):!1}}function t6(t,e=null){return function(n,r){let i=!1;for(let a=0;a<n.selection.ranges.length&&!i;a++){let{$from:{pos:s},$to:{pos:o}}=n.selection.ranges[a];n.doc.nodesBetween(s,o,(l,u)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let d=n.doc.resolve(u),f=d.index();i=d.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let a=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];a.setBlockType(o,l,t,e)}r(a.scrollIntoView())}return!0}}function X3(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}X3(V3,$z,Fz);X3(V3,Hz,Wz);X3(qz,Uz,Vz,g2e);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function S2e(t,e=null){return function(n,r){let{$from:i,$to:a}=n.selection,s=i.blockRange(a);if(!s)return!1;let o=r?n.tr:null;return N2e(o,s,t,e)?(r&&r(o.scrollIntoView()),!0):!1}}function N2e(t,e,n,r=null){let i=!1,a=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);a=new d1(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new d1(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let o=q3(a,n,r,e);return o?(t&&j2e(t,e,o,i,n),!0):!1}function j2e(t,e,n,r,i){let a=Ge.empty;for(let d=n.length-1;d>=0;d--)a=Ge.from(n[d].type.create(n[d].attrs,a));t.step(new ei(e.start-(r?2:0),e.end,e.start,e.end,new ct(a,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==i&&(s=d+1);let o=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&pl(t.doc,l,o)&&(t.split(l,o),l+=2*o),l+=u.child(d).nodeSize;return t}function k2e(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==t);return a?n?r.node(a.depth-1).type==t?A2e(e,n,t,a):C2e(e,n,a):!0:!1}}function A2e(t,e,n,r){let i=t.tr,a=r.end,s=r.$to.end(r.depth);a<s&&(i.step(new ei(a-1,s,a,s,new ct(Ge.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new d1(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const o=ip(r);if(o==null)return!1;i.lift(r,o);let l=i.doc.resolve(i.mapping.map(a,-1)-1);return Qc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function C2e(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let a=r.doc.resolve(n.start),s=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let o=n.startIndex==0,l=n.endIndex==i.childCount,u=a.node(-1),d=a.index(-1);if(!u.canReplace(d+(o?0:1),d+1,s.content.append(l?Ge.empty:Ge.from(i))))return!1;let f=a.pos,p=f+s.nodeSize;return r.step(new ei(f-(o?1:0),p+(l?1:0),f+1,p-1,new ct((o?Ge.empty:Ge.from(i.copy(Ge.empty))).append(l?Ge.empty:Ge.from(i.copy(Ge.empty))),o?0:1,l?0:1),o?0:1)),e(r.scrollIntoView()),!0}function E2e(t){return function(e,n){let{$from:r,$to:i}=e.selection,a=r.blockRange(i,u=>u.childCount>0&&u.firstChild.type==t);if(!a)return!1;let s=a.startIndex;if(s==0)return!1;let o=a.parent,l=o.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==o.type,d=Ge.from(u?t.create():null),f=new ct(Ge.from(t.create(null,Ge.from(o.type.create(null,d)))),u?3:1,0),p=a.start,h=a.end;n(e.tr.step(new ei(p-(u?3:1),h,p,h,f,1,!0)).scrollIntoView())}return!0}}const hi=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Rh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Kj=null;const Jo=function(t,e,n){let r=Kj||(Kj=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},_2e=function(){Kj=null},wd=function(t,e,n,r){return n&&(n6(t,e,n,r,-1)||n6(t,e,n,r,1))},O2e=/^(img|br|input|textarea|hr)$/i;function n6(t,e,n,r,i){for(var a;;){if(t==n&&e==r)return!0;if(e==(i<0?0:cs(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Sg(t)||O2e.test(t.nodeName)||t.contentEditable=="false")return!1;e=hi(t)+(i<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((a=s.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else t=s,e=i<0?cs(t):0}else return!1}}function cs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function P2e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=cs(t)}else if(t.parentNode&&!Sg(t))e=hi(t),t=t.parentNode;else return null}}function T2e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Sg(t))e=hi(t)+1,t=t.parentNode;else return null}}function M2e(t,e,n){for(let r=e==0,i=e==cs(t);r||i;){if(t==n)return!0;let a=hi(t);if(t=t.parentNode,!t)return!1;r=r&&a==0,i=i&&a==cs(t)}}function Sg(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const k2=function(t){return t.focusNode&&wd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Tu(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function L2e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function I2e(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(cs(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(cs(r.startContainer),r.startOffset)}}}const So=typeof navigator<"u"?navigator:null,r6=typeof document<"u"?document:null,eu=So&&So.userAgent||"",Yj=/Edge\/(\d+)/.exec(eu),Yz=/MSIE \d/.exec(eu),Xj=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eu),ma=!!(Yz||Xj||Yj),Ic=Yz?document.documentMode:Xj?+Xj[1]:Yj?+Yj[1]:0,ps=!ma&&/gecko\/(\d+)/i.test(eu);ps&&+(/Firefox\/(\d+)/.exec(eu)||[0,0])[1];const Jj=!ma&&/Chrome\/(\d+)/.exec(eu),Zr=!!Jj,Xz=Jj?+Jj[1]:0,xi=!ma&&!!So&&/Apple Computer/.test(So.vendor),$h=xi&&(/Mobile\/\w+/.test(eu)||!!So&&So.maxTouchPoints>2),is=$h||(So?/Mac/.test(So.platform):!1),Jz=So?/Win/.test(So.platform):!1,ll=/Android \d/.test(eu),Ng=!!r6&&"webkitFontSmoothing"in r6.documentElement.style,D2e=Ng?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function R2e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Wo(t,e){return typeof t=="number"?t:t[e]}function $2e(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function i6(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Rh(s);continue}let o=s,l=o==a.body,u=l?R2e(a):$2e(o),d=0,f=0;if(e.top<u.top+Wo(r,"top")?f=-(u.top-e.top+Wo(i,"top")):e.bottom>u.bottom-Wo(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Wo(i,"top")-u.top:e.bottom-u.bottom+Wo(i,"bottom")),e.left<u.left+Wo(r,"left")?d=-(u.left-e.left+Wo(i,"left")):e.right>u.right-Wo(r,"right")&&(d=e.right-u.right+Wo(i,"right")),d||f)if(l)a.defaultView.scrollBy(d,f);else{let h=o.scrollLeft,m=o.scrollTop;f&&(o.scrollTop+=f),d&&(o.scrollLeft+=d);let g=o.scrollLeft-h,y=o.scrollTop-m;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:Rh(s)}}function z2e(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let a=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let o=t.root.elementFromPoint(a,s);if(!o||o==t.dom||!t.dom.contains(o))continue;let l=o.getBoundingClientRect();if(l.top>=n-20){r=o,i=l.top;break}}return{refDOM:r,refTop:i,stack:Zz(t.dom)}}function Zz(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Rh(r));return e}function F2e({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Qz(n,r==0?0:r-e)}function Qz(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:a}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let sf=null;function B2e(t){if(t.setActive)return t.setActive();if(sf)return t.focus(sf);let e=Zz(t);t.focus(sf==null?{get preventScroll(){return sf={preventScroll:!0},!0}}:void 0),sf||(sf=!1,Qz(e,0))}function eF(t,e){let n,r=2e8,i,a=0,s=e.top,o=e.top,l,u;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=Jo(d).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=s&&m.bottom>=o){s=Math.max(m.bottom,s),o=Math.min(m.top,o);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=d,r=g,i=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&g&&(a=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(a=f+1)}}return!n&&l&&(n=l,i=u,r=0),n&&n.nodeType==3?H2e(n,i):!n||r&&n.nodeType==1?{node:t,offset:a}:eF(n,i)}function H2e(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let a=0;a<n;a++){r.setEnd(t,a+1),r.setStart(t,a);let s=rc(r,1);if(s.top!=s.bottom&&J3(e,s)){i={node:t,offset:a+(e.left>=(s.left+s.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function J3(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function W2e(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function q2e(t,e,n){let{node:r,offset:i}=eF(e,n),a=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,i,a)}function U2e(t,e,n,r){let i=-1;for(let a=e,s=!1;a!=t.dom;){let o=t.docView.nearestDesc(a,!0),l;if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)&&((l=o.dom.getBoundingClientRect()).width||l.height)&&(o.node.isBlock&&o.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(o.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?i=o.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=o.posAfter),s=!0),!o.contentDOM&&i<0&&!o.node.isText))return(o.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?o.posBefore:o.posAfter;a=o.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function tF(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),a=i;;){let s=t.childNodes[a];if(s.nodeType==1){let o=s.getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(J3(e,u))return tF(s,e,u)}}if((a=(a+1)%r)==i)break}return t}function V2e(t,e){let n=t.dom.ownerDocument,r,i=0,a=I2e(n,e.left,e.top);a&&({node:r,offset:i}=a);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),o;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!J3(e,u)||(s=tF(t.dom,e,u),!s))return null}if(xi)for(let u=s;r&&u;u=Rh(u))u.draggable&&(r=void 0);if(s=W2e(s,e),r){if(ps&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let u;Ng&&i&&r.nodeType==1&&(u=r.childNodes[i-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(o=U2e(t,r,i,e))}o==null&&(o=q2e(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function a6(t){return t.top<t.bottom||t.left<t.right}function rc(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(a6(r))return r}return Array.prototype.find.call(n,a6)||t.getBoundingClientRect()}const G2e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nF(t,e,n){let{node:r,offset:i,atom:a}=t.docView.domFromPos(e,n<0?-1:1),s=Ng||ps;if(r.nodeType==3)if(s&&(G2e.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=rc(Jo(r,i,i),n);if(ps&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let u=rc(Jo(r,i-1,i-1),-1);if(u.top==l.top){let d=rc(Jo(r,i,i+1),-1);if(d.top!=l.top)return Jp(d,d.left<u.left)}}return l}else{let l=i,u=i,d=n<0?1:-1;return n<0&&!i?(u++,d=-1):n>=0&&i==r.nodeValue.length?(l--,d=1):n<0?l--:u++,Jp(rc(Jo(r,l,u),d),d<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(n<0||i==cs(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return k5(l.getBoundingClientRect(),!1)}if(a==null&&i<cs(r)){let l=r.childNodes[i];if(l.nodeType==1)return k5(l.getBoundingClientRect(),!0)}return k5(r.getBoundingClientRect(),n>=0)}if(a==null&&i&&(n<0||i==cs(r))){let l=r.childNodes[i-1],u=l.nodeType==3?Jo(l,cs(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Jp(rc(u,1),!1)}if(a==null&&i<cs(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Jo(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return Jp(rc(u,-1),!0)}return Jp(rc(r.nodeType==3?Jo(r):r,-n),n>=0)}function Jp(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function k5(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function rF(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function K2e(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return rF(t,e,()=>{let{node:a}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let o=t.docView.nearestDesc(a,!0);if(!o)break;if(o.node.isBlock){a=o.contentDOM||o.dom;break}a=o.dom.parentNode}let s=nF(t,i.pos,1);for(let o=a.firstChild;o;o=o.nextSibling){let l;if(o.nodeType==1)l=o.getClientRects();else if(o.nodeType==3)l=Jo(o,0,o.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let d=l[u];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const Y2e=/[\u0590-\u08ac]/;function X2e(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=!i,s=i==r.parent.content.size,o=t.domSelection();return o?!Y2e.test(r.parent.textContent)||!o.modify?n=="left"||n=="backward"?a:s:rF(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),y=m&&!h.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==g;try{o.collapse(d,f),l&&(l!=d||u!=f)&&o.extend&&o.extend(l,u)}catch{}return p!=null&&(o.caretBidiLevel=p),y}):r.pos==r.start()||r.pos==r.end()}let s6=null,o6=null,l6=!1;function J2e(t,e,n){return s6==e&&o6==n?l6:(s6=e,o6=n,l6=n=="up"||n=="down"?K2e(t,e,n):X2e(t,e,n))}const ms=0,c6=1,Wu=2,No=3;class jg{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=ms,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,s;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(s)+s.size:this.posAtStart}else{let a,s;if(e==this.contentDOM)a=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((s=a.pmViewDesc)&&s.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>hi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),s;if(a&&(!n||a.node))if(r&&(s=a.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return a}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],a=r+i.size;if(r==e&&a!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let o=i.children[s];if(o.size){i=o;break}}return i}if(e<a)return i.descAt(e-r-i.border);r=a}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let a=0;r<this.children.length;r++){let s=this.children[r],o=a+s.size;if(o>e||s instanceof aF){i=e-a;break}a=o}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof iF&&a.side>=0;r--);if(n<=0){let a,s=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,s=!1);return a&&n&&s&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?hi(a.dom)+1:0}}else{let a,s=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,s=!1);return a&&s&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?hi(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let s=r,o=0;;o++){let l=this.children[o],u=s+l.size;if(i==-1&&e<=u){let d=s+l.border;if(e>=d&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=s;for(let f=o;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=hi(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(u>n||o==this.children.length-1)){n=u;for(let d=o+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){a=hi(f.dom);break}n+=f.size}a==-1&&(a=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let a=Math.min(e,n),s=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let g=this.children[h],y=m+g.size;if(a>m&&s<y)return g.setSelection(e-m-g.border,n-m-g.border,r,i);m=y}let o=this.domFromPos(e,e?-1:1),l=n==e?o:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((ps||xi)&&e==n){let{node:h,offset:m}=o;if(h.nodeType==3){if(f=!!(m&&h.nodeValue[m-1]==`
`),f&&m==h.nodeValue.length)for(let g=h,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(o=l={node:y.parentNode,offset:hi(y)+1});break}let x=g.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let g=h.childNodes[m-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(ps&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let h=d.focusNode.childNodes[d.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&xi)&&wd(o.node,o.offset,d.anchorNode,d.anchorOffset)&&wd(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((u.extend||e==n)&&!(f&&ps)){u.collapse(o.node,o.offset);try{e!=n&&u.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(e>n){let m=o;o=l,l=m}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(o.node,o.offset),u.removeAllRanges(),u.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let a=this.children[i],s=r+a.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let o=r+a.border,l=s-a.border;if(e>=o&&n<=l){this.dirty=e==r||n==s?Wu:c6,e==o&&n==l&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=No:a.markDirty(e-o,n-o);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Wu:No}r=s}this.dirty=Wu}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Wu:c6;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class iF extends jg{constructor(e,n,r,i){let a,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(s.nodeType!=1){let o=document.createElement("span");o.appendChild(s),s=o}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,a=this}matchesWidget(e){return this.dirty==ms&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Z2e extends jg{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Sd extends jg{constructor(e,n,r,i,a){super(e,[],r,i),this.mark=n,this.spec=a}static create(e,n,r,i){let a=i.nodeViews[n.type.name],s=a&&a(n,i,r);return(!s||!s.dom)&&(s=Ld.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Sd(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&No||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=No&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ms){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ms}}slice(e,n,r){let i=Sd.create(this.parent,this.mark,!0,r),a=this.children,s=this.size;n<s&&(a=Qj(a,n,s,r)),e>0&&(a=Qj(a,0,e,r));for(let o=0;o<a.length;o++)a[o].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Dc extends jg{constructor(e,n,r,i,a,s,o,l,u){super(e,[],a,s),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=o}static create(e,n,r,i,a,s){let o=a.nodeViews[n.type.name],l,u=o&&o(n,a,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=Ld.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=lF(d,r,n),u?l=new Q2e(e,n,r,i,d,f||null,p,u,a,s+1):n.isText?new A2(e,n,r,i,d,p,a):new Dc(e,n,r,i,d,f||null,p,a,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ge.empty)}return e}matchesNode(e,n,r){return this.dirty==ms&&e.eq(this.node)&&h1(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,a=e.composing?this.localCompositionInfo(e,n):null,s=a&&a.pos>-1?a:null,o=a&&a.pos<0,l=new twe(this,s&&s.node,e);iwe(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e,d):u.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?On.none:this.node.child(d).marks,r,e,d),l.placeWidget(u,e,i)},(u,d,f,p)=>{l.syncToMarks(u.marks,r,e,p);let h;l.findNodeMatch(u,d,f,p)||o&&e.state.selection.from>i&&e.state.selection.to<i+u.nodeSize&&(h=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(u,d,f,h,e)||l.updateNextNode(u,d,f,e,p,i)||l.addNode(u,d,f,e,i),i+=u.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Wu)&&(s&&this.protectLocalComposition(e,s),sF(this.contentDOM,this.children,e),$h&&awe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Bt)||r<n||i>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let s=a.nodeValue,o=swe(this.node.content,s,r-n,i-n);return o<0?null:{node:a,pos:o,text:s}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let s=new Z2e(this,a,n,i);e.input.compositionNodes.push(s),this.children=Qj(this.children,r,r+i.length,e,s)}update(e,n,r,i){return this.dirty==No||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=ms}updateOuterDeco(e){if(h1(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=oF(this.dom,this.nodeDOM,Zj(this.outerDeco,this.node,n),Zj(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function u6(t,e,n,r,i){lF(r,e,t);let a=new Dc(void 0,t,e,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class A2 extends Dc{constructor(e,n,r,i,a,s,o){super(e,n,r,i,a,null,s,o,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==No||this.dirty!=ms&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ms||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=ms,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),a=document.createTextNode(i.text);return new A2(this.parent,i,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=No)}get domAtom(){return!1}isText(e){return this.node.text==e}}class aF extends jg{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ms&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Q2e extends Dc{constructor(e,n,r,i,a,s,o,l,u,d){super(e,n,r,i,a,s,o,u,d),this.spec=l}update(e,n,r,i){if(this.dirty==No)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,n,r);return a&&this.updateInner(e,n,r,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function sF(t,e,n){let r=t.firstChild,i=!1;for(let a=0;a<e.length;a++){let s=e[a],o=s.dom;if(o.parentNode==t){for(;o!=r;)r=d6(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(o,r);if(s instanceof Sd){let l=r?r.previousSibling:t.lastChild;sF(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=d6(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Pm=function(t){t&&(this.nodeName=t)};Pm.prototype=Object.create(null);const qu=[new Pm];function Zj(t,e,n){if(t.length==0)return qu;let r=n?qu[0]:new Pm,i=[r];for(let a=0;a<t.length;a++){let s=t[a].type.attrs;if(s){s.nodeName&&i.push(r=new Pm(s.nodeName));for(let o in s){let l=s[o];l!=null&&(n&&i.length==1&&i.push(r=new Pm(e.isInline?"span":"div")),o=="class"?r.class=(r.class?r.class+" ":"")+l:o=="style"?r.style=(r.style?r.style+";":"")+l:o!="nodeName"&&(r[o]=l))}}}return i}function oF(t,e,n,r){if(n==qu&&r==qu)return e;let i=e;for(let a=0;a<r.length;a++){let s=r[a],o=n[a];if(a){let l;o&&o.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),o=qu[0]),i=l}ewe(i,o||qu[0],s)}return i}function ewe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)i.indexOf(r[a])==-1&&t.classList.remove(r[a]);for(let a=0;a<i.length;a++)r.indexOf(i[a])==-1&&t.classList.add(i[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function lF(t,e,n){return oF(t,t,qu,Zj(e,n,t.nodeType!=1))}function h1(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function d6(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class twe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=nwe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let a=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;a<o&&(a==s-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<s;)this.destroyRest(),this.top.dirty=ms,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1,u=this.top.children.length;i<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let d=this.index;d<u;d++){let f=this.top.children[d];if(f.matchesMark(e[s])&&!this.isLocked(f.dom)){l=d;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let d=Sd.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let a=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))a=this.top.children.indexOf(s,this.index);else for(let o=this.index,l=Math.min(this.top.children.length,o+5);o<l;o++){let u=this.top.children[o];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){a=o;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,n,r,i,a){let s=this.top.children[i];return s.dirty==No&&s.dom==s.contentDOM&&(s.dirty=Wu),s.update(e,n,r,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,a,s){for(let o=this.index;o<this.top.children.length;o++){let l=this.top.children[o];if(l instanceof Dc){let u=this.preMatch.matched.get(l);if(u!=null&&u!=a)return!1;let d=l.dom,f,p=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=No&&h1(n,l.outerDeco));if(!p&&l.update(e,n,r,i))return this.destroyBetween(this.index,o),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,e,n,r,i,s)))return this.destroyBetween(this.index,o),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Wu,f.updateChildren(i,s+1),f.dirty=ms),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,a,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!h1(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let o=Dc.create(this.top,n,r,i,a,s);if(o.contentDOM){o.children=e.children,e.children=[];for(let l of o.children)l.parent=o}return e.destroy(),o}addNode(e,n,r,i,a){let s=Dc.create(this.top,e,n,r,i,a);s.contentDOM&&s.updateChildren(i,a+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new iF(this.top,e,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Sd;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof A2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xi||Zr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new aF(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function nwe(t,e){let n=e,r=n.children.length,i=t.childCount,a=new Map,s=[];e:for(;i>0;){let o;for(;;)if(r){let u=n.children[r-1];if(u instanceof Sd)n=u,r=u.children.length;else{o=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=o.node;if(l){if(l!=t.child(i-1))break;--i,a.set(o,i),s.push(o)}}return{index:i,matched:a,matches:s.reverse()}}function rwe(t,e){return t.type.side-e.type.side}function iwe(t,e,n,r){let i=e.locals(t),a=0;if(i.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);r(d,i,e.forChild(a,d),u),a+=d.nodeSize}return}let s=0,o=[],l=null;for(let u=0;;){let d,f;for(;s<i.length&&i[s].to==a;){let y=i[s++];y.widget&&(d?(f||(f=[d])).push(y):d=y)}if(d)if(f){f.sort(rwe);for(let y=0;y<f.length;y++)n(f[y],u,!!l)}else n(d,u,!!l);let p,h;if(l)h=-1,p=l,l=null;else if(u<t.childCount)h=u,p=t.child(u++);else break;for(let y=0;y<o.length;y++)o[y].to<=a&&o.splice(y--,1);for(;s<i.length&&i[s].from<=a&&i[s].to>a;)o.push(i[s++]);let m=a+p.nodeSize;if(p.isText){let y=m;s<i.length&&i[s].from<y&&(y=i[s].from);for(let x=0;x<o.length;x++)o[x].to<y&&(y=o[x].to);y<m&&(l=p.cut(y-a),p=p.cut(0,y-a),m=y,h=-1)}else for(;s<i.length&&i[s].to<m;)s++;let g=p.isInline&&!p.isLeaf?o.filter(y=>!y.inline):o.slice();r(p,g,e.forChild(a,p),h),a=m}}function awe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function swe(t,e,n,r){for(let i=0,a=0;i<t.childCount&&a<=r;){let s=t.child(i++),o=a;if(a+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<t.childCount;){let u=t.child(i++);if(a+=u.nodeSize,!u.isText)break;l+=u.text}if(a>=n){if(a>=r&&l.slice(r-e.length-o,r-o)==e)return r-e.length;let u=o<r?l.lastIndexOf(e,r-o-1):-1;if(u>=0&&u+e.length+o>=n)return o+u;if(n==r&&l.length>=r+e.length-o&&l.slice(r-o,r-o+e.length)==e)return r}}return-1}function Qj(t,e,n,r,i){let a=[];for(let s=0,o=0;s<t.length;s++){let l=t[s],u=o,d=o+=l.size;u>=n||d<=e?a.push(l):(u<e&&a.push(l.slice(0,e-u,r)),i&&(a.push(i),i=void 0),d>n&&a.push(l.slice(n-u,l.size,r)))}return a}function Z3(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),a=i&&i.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let o=r.resolve(s),l,u;if(k2(n)){for(l=s;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&_t.isSelectable(f)&&i.parent&&!(f.isInline&&M2e(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;u=new _t(s==p?o:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,s]=p==t.state.selection.anchor?[p,f]:[f,p],o=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!u){let f=e=="pointer"||t.state.selection.head<o.pos&&!a?1:-1;u=Q3(t,d,o,f)}return u}function cF(t){return t.editable?t.hasFocus():dF(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ml(t,e=!1){let n=t.state.selection;if(uF(t,n),!!cF(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Zr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&wd(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)lwe(t);else{let{anchor:r,head:i}=n,a,s;f6&&!(n instanceof Bt)&&(n.$from.parent.inlineContent||(a=h6(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=h6(t,n.to))),t.docView.setSelection(r,i,t,e),f6&&(a&&p6(a),s&&p6(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&owe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const f6=xi||Zr&&Xz<63;function h6(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(xi&&i&&i.contentEditable=="false")return A5(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return A5(i);if(a)return A5(a)}}function A5(t){return t.contentEditable="true",xi&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function p6(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function owe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!cF(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function lwe(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,hi(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&ma&&Ic<=11&&(n.disabled=!0,n.disabled=!1)}function uF(t,e){if(e instanceof _t){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(m6(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else m6(t)}function m6(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Q3(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Bt.between(e,n,r)}function g6(t){return t.editable&&!t.hasFocus()?!1:dF(t)}function dF(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function cwe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return wd(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ek(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),a=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Xt.findFrom(a,e)}function lc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function v6(t,e,n){let r=t.state.selection;if(r instanceof Bt)if(n.indexOf("s")>-1){let{$head:i}=r,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let s=t.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return lc(t,new Bt(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=ek(t.state,e);return i&&i instanceof _t?lc(t,i):!1}else if(!(is&&n.indexOf("m")>-1)){let i=r.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!a||a.isText)return!1;let o=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(s=t.docView.descAt(o))&&!s.contentDOM?_t.isSelectable(a)?lc(t,new _t(e<0?t.state.doc.resolve(i.pos-a.nodeSize):i)):Ng?lc(t,new Bt(t.state.doc.resolve(e<0?o:o+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _t&&r.node.isInline)return lc(t,new Bt(e>0?r.$to:r.$from));{let i=ek(t.state,e);return i?lc(t,i):!1}}}function p1(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tm(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function of(t,e){return e<0?uwe(t):dwe(t)}function uwe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,a,s=!1;for(ps&&n.nodeType==1&&r<p1(n)&&Tm(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let o=n.childNodes[r-1];if(Tm(o,-1))i=n,a=--r;else if(o.nodeType==3)n=o,r=n.nodeValue.length;else break}}else{if(fF(n))break;{let o=n.previousSibling;for(;o&&Tm(o,-1);)i=n.parentNode,a=hi(o),o=o.previousSibling;if(o)n=o,r=p1(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?tk(t,n,r):i&&tk(t,i,a)}function dwe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=p1(n),a,s;for(;;)if(r<i){if(n.nodeType!=1)break;let o=n.childNodes[r];if(Tm(o,1))a=n,s=++r;else break}else{if(fF(n))break;{let o=n.nextSibling;for(;o&&Tm(o,1);)a=o.parentNode,s=hi(o)+1,o=o.nextSibling;if(o)n=o,r=0,i=p1(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}a&&tk(t,a,s)}function fF(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function fwe(t,e){for(;t&&e==t.childNodes.length&&!Sg(t);)e=hi(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function hwe(t,e){for(;t&&!e&&!Sg(t);)e=hi(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function tk(t,e,n){if(e.nodeType!=3){let a,s;(s=fwe(e,n))?(e=s,n=0):(a=hwe(e,n))&&(e=a,n=a.nodeValue.length)}let r=t.domSelection();if(!r)return;if(k2(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ml(t)},50)}function x6(t,e){let n=t.state.doc.resolve(e);if(!(Zr||Jz)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let a=t.coordsAtPos(e-1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<n.end()){let a=t.coordsAtPos(e+1),s=(a.top+a.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function y6(t,e,n){let r=t.state.selection;if(r instanceof Bt&&!r.empty||n.indexOf("s")>-1||is&&n.indexOf("m")>-1)return!1;let{$from:i,$to:a}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=ek(t.state,e);if(s&&s instanceof _t)return lc(t,s)}if(!i.parent.inlineContent){let s=e<0?i:a,o=r instanceof za?Xt.near(s,e):Xt.findFrom(s,e);return o?lc(t,o):!1}return!1}function b6(t,e){if(!(t.state.selection instanceof Bt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let s=t.state.tr;return e<0?s.delete(n.pos-a.nodeSize,n.pos):s.delete(n.pos,n.pos+a.nodeSize),t.dispatch(s),!0}return!1}function w6(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function pwe(t){if(!xi||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;w6(t,r,"true"),setTimeout(()=>w6(t,r,"false"),20)}return!1}function mwe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function gwe(t,e){let n=e.keyCode,r=mwe(e);if(n==8||is&&n==72&&r=="c")return b6(t,-1)||of(t,-1);if(n==46&&!e.shiftKey||is&&n==68&&r=="c")return b6(t,1)||of(t,1);if(n==13||n==27)return!0;if(n==37||is&&n==66&&r=="c"){let i=n==37?x6(t,t.state.selection.from)=="ltr"?-1:1:-1;return v6(t,i,r)||of(t,i)}else if(n==39||is&&n==70&&r=="c"){let i=n==39?x6(t,t.state.selection.from)=="ltr"?1:-1:1;return v6(t,i,r)||of(t,i)}else{if(n==38||is&&n==80&&r=="c")return y6(t,-1,r)||of(t,-1);if(n==40||is&&n==78&&r=="c")return pwe(t)||y6(t,1,r)||of(t,1);if(r==(is?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function e4(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,a--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Ld.fromSchema(t.state.schema),o=xF(),l=o.createElement("div");l.appendChild(s.serializeFragment(r,{document:o}));let u=l.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=vF[u.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let m=o.createElement(d[h]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${i} ${a}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function hF(t,e,n,r,i){let a=i.parent.type.spec.code,s,o;if(!n&&!e)return null;let l=!!e&&(r||a||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,a||r,t)}),a)return o=new ct(Ge.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{o=p(o,t,!0)}),o;let f=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(f)o=f;else{let p=i.marks(),{schema:h}=t.state,m=Ld.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=s.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(h.text(g,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=bwe(n),Ng&&wwe(s);let u=s&&s.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(o||(o=(t.someProp("clipboardParser")||t.someProp("domParser")||Lc.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!vwe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)o=Swe(S6(o,+d[1],+d[2]),d[4]);else if(o=ct.maxOpen(xwe(o.content,i),!0),o.openStart||o.openEnd){let f=0,p=0;for(let h=o.content.firstChild;f<o.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=o.content.lastChild;p<o.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);o=S6(o,f,p)}return t.someProp("transformPasted",f=>{o=f(o,t,l)}),o}const vwe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xwe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),a,s=[];if(t.forEach(o=>{if(!s)return;let l=i.findWrapping(o.type),u;if(!l)return s=null;if(u=s.length&&a.length&&mF(l,a,o,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=gF(s[s.length-1],a.length));let d=pF(o,l);s.push(d),i=i.matchType(d.type),a=l}}),s)return Ge.from(s)}return t}function pF(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ge.from(t));return t}function mF(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let a=mF(t,e,n,r.lastChild,i+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ge.from(pF(n,t,i+1))))}}function gF(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,gF(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ge.empty,!0);return t.copy(n.append(r))}function nk(t,e,n,r,i,a){let s=e<0?t.firstChild:t.lastChild,o=s.content;return t.childCount>1&&(a=0),i<r-1&&(o=nk(o,e,n,r,i+1,a)),i>=n&&(o=e<0?s.contentMatchAt(0).fillBefore(o,a<=i).append(o):o.append(s.contentMatchAt(s.childCount).fillBefore(Ge.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(o))}function S6(t,e,n){return e<t.openStart&&(t=new ct(nk(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ct(nk(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const vF={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let N6=null;function xF(){return N6||(N6=document.implementation.createHTMLDocument("title"))}let C5=null;function ywe(t){let e=window.trustedTypes;return e?(C5||(C5=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),C5.createHTML(t)):t}function bwe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=xF().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&vF[r[1].toLowerCase()])&&(t=i.map(a=>"<"+a+">").join("")+t+i.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=ywe(t),i)for(let a=0;a<i.length;a++)n=n.querySelector(i[a])||n;return n}function wwe(t){let e=t.querySelectorAll(Zr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Swe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:a,openEnd:s}=t;for(let o=r.length-2;o>=0;o-=2){let l=n.nodes[r[o]];if(!l||l.hasRequiredAttrs())break;i=Ge.from(l.create(r[o+1],i)),a++,s++}return new ct(i,a,s)}const Yi={},Xi={},Nwe={touchstart:!0,touchmove:!0};class jwe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function kwe(t){for(let e in Yi){let n=Yi[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Cwe(t,r)&&!t4(t,r)&&(t.editable||!(r.type in Xi))&&n(t,r)},Nwe[e]?{passive:!0}:void 0)}xi&&t.dom.addEventListener("input",()=>null),rk(t)}function Sc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Awe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function rk(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>t4(t,r))})}function t4(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Cwe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ewe(t,e){!t4(t,e)&&Yi[e.type]&&(t.editable||!(e.type in Xi))&&Yi[e.type](t,e)}Xi.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!bF(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ll&&Zr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),$h&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Tu(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||gwe(t,n)?n.preventDefault():Sc(t,"key")};Xi.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Xi.keypress=(t,e)=>{let n=e;if(bF(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||is&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Bt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),a=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i,a))&&t.dispatch(a()),n.preventDefault()}};function C2(t){return{left:t.clientX,top:t.clientY}}function _we(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function n4(t,e,n,r,i){if(r==-1)return!1;let a=t.state.doc.resolve(r);for(let s=a.depth+1;s>0;s--)if(t.someProp(e,o=>s>a.depth?o(t,n,a.nodeAfter,a.before(s),i,!0):o(t,n,a.node(s),a.before(s),i,!1)))return!0;return!1}function Xf(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Owe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&_t.isSelectable(r)?(Xf(t,new _t(n)),!0):!1}function Pwe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof _t&&(r=n.node);let a=t.state.doc.resolve(e);for(let s=a.depth+1;s>0;s--){let o=s>a.depth?a.nodeAfter:a.node(s);if(_t.isSelectable(o)){r&&n.$from.depth>0&&s>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?i=a.before(n.$from.depth):i=a.before(s);break}}return i!=null?(Xf(t,_t.create(t.state.doc,i)),!0):!1}function Twe(t,e,n,r,i){return n4(t,"handleClickOn",e,n,r)||t.someProp("handleClick",a=>a(t,e,r))||(i?Pwe(t,n):Owe(t,n))}function Mwe(t,e,n,r){return n4(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Lwe(t,e,n,r){return n4(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Iwe(t,n,r)}function Iwe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xf(t,Bt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let a=i.depth+1;a>0;a--){let s=a>i.depth?i.nodeAfter:i.node(a),o=i.before(a);if(s.inlineContent)Xf(t,Bt.create(r,o+1,o+1+s.content.size));else if(_t.isSelectable(s))Xf(t,_t.create(r,o));else continue;return!0}}function r4(t){return m1(t)}const yF=is?"metaKey":"ctrlKey";Yi.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=r4(t),i=Date.now(),a="singleClick";i-t.input.lastClick.time<500&&_we(n,t.input.lastClick)&&!n[yF]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a,button:n.button};let s=t.posAtCoords(C2(n));s&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Dwe(t,s,n,!!r)):(a=="doubleClick"?Mwe:Lwe)(t,s.pos,s.inside,n)?n.preventDefault():Sc(t,"pointer"))};class Dwe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[yF],this.allowDefault=r.shiftKey;let a,s;if(n.inside>-1)a=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);a=d.parent,s=d.depth?d.before():0}const o=i?null:r.target,l=o?e.docView.nearestDesc(o,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||u instanceof _t&&u.from<=s&&u.to>s)&&(this.mightDrag={node:a,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ps&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Sc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ml(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(C2(e))),this.updateAllowDefault(e),this.allowDefault||!n?Sc(this.view,"pointer"):Twe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xi&&this.mightDrag&&!this.mightDrag.node.isAtom||Zr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xf(this.view,Xt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Sc(this.view,"pointer")}move(e){this.updateAllowDefault(e),Sc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Yi.touchstart=t=>{t.input.lastTouch=Date.now(),r4(t),Sc(t,"pointer")};Yi.touchmove=t=>{t.input.lastTouch=Date.now(),Sc(t,"pointer")};Yi.contextmenu=t=>r4(t);function bF(t,e){return t.composing?!0:xi&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Rwe=ll?5e3:-1;Xi.compositionstart=Xi.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Bt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Zr&&Jz&&$we(t)))t.markCursor=t.state.storedMarks||n.marks(),m1(t,!0),t.markCursor=null;else if(m1(t,!e.selection.empty),ps&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,a=r.focusOffset;i&&i.nodeType==1&&a!=0;){let s=a<0?i.lastChild:i.childNodes[a-1];if(!s)break;if(s.nodeType==3){let o=t.domSelection();o&&o.collapse(s,s.nodeValue.length);break}else i=s,a=-1}}t.input.composing=!0}wF(t,Rwe)};function $we(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Xi.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,wF(t,20))};function wF(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>m1(t),e))}function SF(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Fwe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function zwe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=P2e(e.focusNode,e.focusOffset),r=T2e(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function Fwe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function m1(t,e=!1){if(!(ll&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),SF(t),e||t.docView&&t.docView.dirty){let n=Z3(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Bwe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const G0=ma&&Ic<15||$h&&D2e<604;Yi.copy=Xi.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let a=G0?null:n.clipboardData,s=r.content(),{dom:o,text:l}=e4(t,s);a?(n.preventDefault(),a.clearData(),a.setData("text/html",o.innerHTML),a.setData("text/plain",l)):Bwe(t,o),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Hwe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Wwe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?K0(t,r.value,null,i,e):K0(t,r.textContent,r.innerHTML,i,e)},50)}function K0(t,e,n,r,i){let a=hF(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,a||ct.empty)))return!0;if(!a)return!1;let s=Hwe(a),o=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(a);return t.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function NF(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Xi.paste=(t,e)=>{let n=e;if(t.composing&&!ll)return;let r=G0?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&K0(t,NF(r),r.getData("text/html"),i,n)?n.preventDefault():Wwe(t,n)};class jF{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const qwe=is?"altKey":"ctrlKey";function kF(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[qwe]}Yi.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,a=i.empty?null:t.posAtCoords(C2(n)),s;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof _t?i.to-1:i.to))){if(r&&r.mightDrag)s=_t.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=_t.create(t.state.doc,f.posBefore))}}let o=(s||t.state.selection).content(),{dom:l,text:u,slice:d}=e4(t,o);(!n.dataTransfer.files.length||!Zr||Xz>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(G0?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",G0||n.dataTransfer.setData("text/plain",u),t.dragging=new jF(d,kF(t,n),s)};Yi.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Xi.dragover=Xi.dragenter=(t,e)=>e.preventDefault();Xi.drop=(t,e)=>{try{Uwe(t,e,t.dragging)}finally{t.dragging=null}};function Uwe(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(C2(e));if(!r)return;let i=t.state.doc.resolve(r.pos),a=n&&n.slice;a?t.someProp("transformPasted",h=>{a=h(a,t,!1)}):a=hF(t,NF(e.dataTransfer),G0?null:e.dataTransfer.getData("text/html"),!1,i);let s=!!(n&&kF(t,e));if(t.someProp("handleDrop",h=>h(t,e,a||ct.empty,s))){e.preventDefault();return}if(!a)return;e.preventDefault();let o=a?_z(t.state.doc,i.pos,a):i.pos;o==null&&(o=i.pos);let l=t.state.tr;if(s){let{node:h}=n;h?h.replace(l):l.deleteSelection()}let u=l.mapping.map(o),d=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,f=l.doc;if(d?l.replaceRangeWith(u,u,a.content.firstChild):l.replaceRange(u,u,a),l.doc.eq(f))return;let p=l.doc.resolve(u);if(d&&_t.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild))l.setSelection(new _t(p));else{let h=l.mapping.map(o);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,y,x)=>h=x),l.setSelection(Q3(t,p,l.doc.resolve(h)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Yi.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ml(t)},20))};Yi.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Yi.beforeinput=(t,e)=>{if(Zr&&ll&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,Tu(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Xi)Yi[t]=Xi[t];function Y0(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class g1{constructor(e,n){this.toDOM=e,this.spec=n||nd,this.side=this.spec.side||0}map(e,n,r,i){let{pos:a,deleted:s}=e.mapResult(n.from+i,this.side<0?-1:1);return s?null:new Gi(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof g1&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Y0(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Rc{constructor(e,n){this.attrs=e,this.spec=n||nd}map(e,n,r,i){let a=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return a>=s?null:new Gi(a,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Rc&&Y0(this.attrs,e.attrs)&&Y0(this.spec,e.spec)}static is(e){return e.type instanceof Rc}destroy(){}}class i4{constructor(e,n){this.attrs=e,this.spec=n||nd}map(e,n,r,i){let a=e.mapResult(n.from+i,1);if(a.deleted)return null;let s=e.mapResult(n.to+i,-1);return s.deleted||s.pos<=a.pos?null:new Gi(a.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),a;return i==n.from&&!(a=e.child(r)).isText&&i+a.nodeSize==n.to}eq(e){return this==e||e instanceof i4&&Y0(this.attrs,e.attrs)&&Y0(this.spec,e.spec)}destroy(){}}class Gi{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Gi(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Gi(e,e,new g1(n,r))}static inline(e,n,r,i){return new Gi(e,n,new Rc(r,i))}static node(e,n,r,i){return new Gi(e,n,new i4(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Rc}get widget(){return this.type instanceof g1}}const ff=[],nd={};class er{constructor(e,n){this.local=e.length?e:ff,this.children=n.length?n:ff}static create(e,n){return n.length?v1(n,e,0,nd):Ei}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,a){for(let s=0;s<this.local.length;s++){let o=this.local[s];o.from<=n&&o.to>=e&&(!a||a(o.spec))&&r.push(o.copy(o.from+i,o.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let o=this.children[s]+1;this.children[s+2].findInner(e-o,n-o,r,i+o,a)}}map(e,n,r){return this==Ei||e.maps.length==0?this:this.mapInner(e,n,0,0,r||nd)}mapInner(e,n,r,i,a){let s;for(let o=0;o<this.local.length;o++){let l=this.local[o].map(e,r,i);l&&l.type.valid(n,l)?(s||(s=[])).push(l):a.onRemove&&a.onRemove(this.local[o].spec)}return this.children.length?Vwe(this.children,s||[],e,n,r,i,a):s?new er(s.sort(rd),ff):Ei}add(e,n){return n.length?this==Ei?er.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,a=0;e.forEach((o,l)=>{let u=l+r,d;if(d=CF(n,o,u)){for(i||(i=this.children.slice());a<i.length&&i[a]<l;)a+=3;i[a]==l?i[a+2]=i[a+2].addInner(o,d,u+1):i.splice(a,0,l,l+o.nodeSize,v1(d,o,u+1,nd)),a+=3}});let s=AF(a?EF(n):n,-r);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||s.splice(o--,1);return new er(s.length?this.local.concat(s).sort(rd):this.local,i||this.children)}remove(e){return e.length==0||this==Ei?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let a=0;a<r.length;a+=3){let s,o=r[a]+n,l=r[a+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>o&&f.to<l&&(e[d]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[a+2].removeInner(s,o+1);u!=Ei?r[a+2]=u:(r.splice(a,3),a-=3)}if(i.length){for(let a=0,s;a<e.length;a++)if(s=e[a])for(let o=0;o<i.length;o++)i[o].eq(s,n)&&(i==this.local&&(i=this.local.slice()),i.splice(o--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new er(i,r):Ei}forChild(e,n){if(this==Ei)return this;if(n.isLeaf)return er.empty;let r,i;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}let a=e+1,s=a+n.content.size;for(let o=0;o<this.local.length;o++){let l=this.local[o];if(l.from<s&&l.to>a&&l.type instanceof Rc){let u=Math.max(a,l.from)-a,d=Math.min(s,l.to)-a;u<d&&(i||(i=[])).push(l.copy(u,d))}}if(i){let o=new er(i.sort(rd),ff);return r?new pc([o,r]):o}return r||Ei}eq(e){if(this==e)return!0;if(!(e instanceof er)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return a4(this.localsInner(e))}localsInner(e){if(this==Ei)return ff;if(e.inlineContent||!this.local.some(Rc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Rc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}er.empty=new er([],[]);er.removeOverlap=a4;const Ei=er.empty;class pc{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,nd));return pc.from(r)}forChild(e,n){if(n.isLeaf)return er.empty;let r=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,n);a!=Ei&&(a instanceof pc?r=r.concat(a.members):r.push(a))}return pc.from(r)}eq(e){if(!(e instanceof pc)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let s=0;s<a.length;s++)n.push(a[s])}}return n?a4(r?n:n.sort(rd)):ff}static from(e){switch(e.length){case 0:return Ei;case 1:return e[0];default:return new pc(e.every(n=>n instanceof er)?e:e.reduce((n,r)=>n.concat(r instanceof er?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Vwe(t,e,n,r,i,a,s){let o=t.slice();for(let u=0,d=a;u<n.maps.length;u++){let f=0;n.maps[u].forEach((p,h,m,g)=>{let y=g-m-(h-p);for(let x=0;x<o.length;x+=3){let w=o[x+1];if(w<0||p>w+d-f)continue;let S=o[x]+d-f;h>=S?o[x+1]=p<=S?-2:-1:p>=d&&y&&(o[x]+=y,o[x+1]+=y)}f+=y}),d=n.maps[u].map(d,-1)}let l=!1;for(let u=0;u<o.length;u+=3)if(o[u+1]<0){if(o[u+1]==-2){l=!0,o[u+1]=-1;continue}let d=n.map(t[u]+a),f=d-i;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(t[u+1]+a,-1),h=p-i,{index:m,offset:g}=r.content.findIndex(f),y=r.maybeChild(m);if(y&&g==f&&g+y.nodeSize==h){let x=o[u+2].mapInner(n,y,d+1,t[u]+a+1,s);x!=Ei?(o[u]=f,o[u+1]=h,o[u+2]=x):(o[u+1]=-2,l=!0)}else l=!0}if(l){let u=Gwe(o,t,e,n,i,a,s),d=v1(u,r,0,s);e=d.local;for(let f=0;f<o.length;f+=3)o[f+1]<0&&(o.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let h=d.children[f];for(;p<o.length&&o[p]<h;)p+=3;o.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new er(e.sort(rd),o)}function AF(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Gi(i.from+e,i.to+e,i.type))}return n}function Gwe(t,e,n,r,i,a,s){function o(l,u){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(r,i,u);f?n.push(f):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)o(l.children[d+2],l.children[d]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&o(t[l+2],e[l]+a+1);return n}function CF(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let a=0,s;a<t.length;a++)(s=t[a])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[a]=null);return i}function EF(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function v1(t,e,n,r){let i=[],a=!1;e.forEach((o,l)=>{let u=CF(t,o,l+n);if(u){a=!0;let d=v1(u,o,n+l+1,r);d!=Ei&&i.push(l,l+o.nodeSize,d)}});let s=AF(a?EF(t):t,-n).sort(rd);for(let o=0;o<s.length;o++)s[o].type.valid(e,s[o])||(r.onRemove&&r.onRemove(s[o].spec),s.splice(o--,1));return s.length||i.length?new er(s,i):Ei}function rd(t,e){return t.from-e.from||t.to-e.to}function a4(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let a=e[i];if(a.from==r.from){a.to!=r.to&&(e==t&&(e=t.slice()),e[i]=a.copy(a.from,r.to),j6(e,i+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,a.from),j6(e,i,r.copy(a.from,r.to)));break}}}return e}function j6(t,e,n){for(;e<t.length&&rd(n,t[e])>0;)e++;t.splice(e,0,n)}function E5(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ei&&e.push(r)}),t.cursorWrapper&&e.push(er.create(t.state.doc,[t.cursorWrapper.deco])),pc.from(e)}const Kwe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ywe=ma&&Ic<=11;class Xwe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Jwe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Xwe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);ma&&Ic<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():xi&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Ywe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Kwe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(g6(this.view)){if(this.suppressingSelectionUpdates)return ml(this.view);if(ma&&Ic<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&wd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let a=e.focusNode;a;a=Rh(a))n.add(a);for(let a=e.anchorNode;a;a=Rh(a))if(n.has(a)){r=a;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&g6(e)&&!this.ignoreSelectionChange(r),a=-1,s=-1,o=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],l);f&&(a=a<0?f.from:Math.min(f.from,a),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(o=!0))}if(ps&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let h=p.parentNode;h&&h.nodeName=="LI"&&(!f||e5e(e,f)!=h)&&p.remove()}}}else if((Zr||xi)&&l.some(d=>d.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let d of l)if(d.nodeName=="BR"&&d.parentNode){let f=d.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&d.parentNode.removeChild(d)}}let u=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&k2(r)&&(u=Z3(e))&&u.eq(Xt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ml(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,s),Zwe(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,t5e(e,l)),this.handleDOMChange(a,s,o,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ml(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,a=e.nextSibling;if(ma&&Ic<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(a=p)}let s=i&&i.parentNode==e.target?hi(i)+1:0,o=r.localPosFromDOM(e.target,s,-1),l=a&&a.parentNode==e.target?hi(a):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:o,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let k6=new WeakMap,A6=!1;function Zwe(t){if(!k6.has(t)&&(k6.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ps,A6)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),A6=!0}}function C6(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return wd(s.node,s.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function Qwe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return C6(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?C6(t,n):null}function e5e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function t5e(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let a of e)if(((n=a.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let s=a.nextSibling;for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.nextSibling;if(s){let o=s;for(;;){let l=o.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;o=l}o.insertBefore(a,o.firstChild),r==a&&t.domSelection().collapse(a,i)}else a.parentNode.removeChild(a)}}function n5e(t,e,n){let{node:r,fromOffset:i,toOffset:a,from:s,to:o}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:l.anchorOffset}],k2(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Zr&&t.input.lastKeyCode===8)for(let y=a;y>i;y--){let x=r.childNodes[y-1],w=x.pmViewDesc;if(x.nodeName=="BR"&&!w){a=y;break}if(!w||w.size)break}let f=t.state.doc,p=t.someProp("domParser")||Lc.fromSchema(t.state.schema),h=f.resolve(s),m=null,g=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:a,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:r5e,context:h});if(u&&u[0].pos!=null){let y=u[0].pos,x=u[1]&&u[1].pos;x==null&&(x=y),m={anchor:y+s,head:x+s}}return{doc:g,sel:m,from:s,to:o}}function r5e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(xi&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||xi&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const i5e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function a5e(t,e,n,r,i){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=Z3(t,C);if(P&&!t.state.selection.eq(P)){if(Zr&&ll&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",I=>I(t,Tu(13,"Enter"))))return;let T=t.state.tr.setSelection(P);C=="pointer"?T.setMeta("pointer",!0):C=="key"&&T.scrollIntoView(),a&&T.setMeta("composition",a),t.dispatch(T)}return}let s=t.state.doc.resolve(e),o=s.sharedDepth(n);e=s.before(o+1),n=t.state.doc.resolve(n).after(o+1);let l=t.state.selection,u=n5e(t,e,n),d=t.state.doc,f=d.slice(u.from,u.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=l5e(f.content,u.doc.content,u.from,p,h);if(m&&t.input.domChangeCount++,($h&&t.input.lastIOSEnter>Date.now()-225||ll)&&i.some(C=>C.nodeType==1&&!i5e.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Tu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Bt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let C=E6(t,t.state.doc,u.sel);if(C&&!C.eq(t.state.selection)){let P=t.state.tr.setSelection(C);a&&P.setMeta("composition",a),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Bt&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ma&&Ic<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=u.doc.resolveNoCache(m.start-u.from),y=u.doc.resolveNoCache(m.endB-u.from),x=d.resolve(m.start),w=g.sameParent(y)&&g.parent.inlineContent&&x.end()>=m.endA;if(($h&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!w&&g.pos<u.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(u.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Tu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&o5e(d,m.start,m.endA,g,y)&&t.someProp("handleKeyDown",C=>C(t,Tu(8,"Backspace")))){ll&&Zr&&t.domObserver.suppressSelectionUpdates();return}Zr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),ll&&!w&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,y=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Tu(13,"Enter"))})},20));let S=m.start,N=m.endA,j=C=>{let P=C||t.state.tr.replace(S,N,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let T=E6(t,P.doc,u.sel);T&&!(Zr&&t.composing&&T.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==S||T.head==P.mapping.map(N)-1)||ma&&T.empty&&T.head==S)&&P.setSelection(T)}return a&&P.setMeta("composition",a),P.scrollIntoView()},E;if(w)if(g.pos==y.pos){ma&&Ic<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ml(t),20));let C=j(t.state.tr.delete(S,N)),P=d.resolve(m.start).marksAcross(d.resolve(m.endA));P&&C.ensureMarks(P),t.dispatch(C)}else if(m.endA==m.endB&&(E=s5e(g.parent.content.cut(g.parentOffset,y.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let C=j(t.state.tr);E.type=="add"?C.addMark(S,N,E.mark):C.removeMark(S,N,E.mark),t.dispatch(C)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let C=g.parent.textBetween(g.parentOffset,y.parentOffset),P=()=>j(t.state.tr.insertText(C,S,N));t.someProp("handleTextInput",T=>T(t,S,N,C,P))||t.dispatch(P())}else t.dispatch(j());else t.dispatch(j())}function E6(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Q3(t,e.resolve(n.anchor),e.resolve(n.head))}function s5e(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,a=r,s,o,l;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<n.length;d++)a=n[d].removeFromSet(a);if(i.length==1&&a.length==0)o=i[0],s="add",l=d=>d.mark(o.addToSet(d.marks));else if(i.length==0&&a.length==1)o=a[0],s="remove",l=d=>d.mark(o.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(l(e.child(d)));if(Ge.from(u).eq(t))return{mark:o,type:s}}function o5e(t,e,n,r,i){if(n-e<=i.pos-r.pos||_5(r,!0,!1)<i.pos)return!1;let a=t.resolve(e);if(!r.parent.isTextblock){let o=a.nodeAfter;return o!=null&&n==e+o.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let s=t.resolve(_5(a,!0,!0));return!s.parent.isTextblock||s.pos>n||_5(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _5(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let a=t.node(r).maybeChild(t.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function l5e(t,e,n,r,i){let a=t.findDiffStart(e,n);if(a==null)return null;let{a:s,b:o}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,a-Math.min(s,o));r-=s+l-a}if(s<a&&t.size<e.size){let l=r<=a&&r>=s?a-r:0;a-=l,a&&a<e.size&&_6(e.textBetween(a-1,a+1))&&(a+=l?1:-1),o=a+(o-s),s=a}else if(o<a){let l=r<=a&&r>=o?a-r:0;a-=l,a&&a<t.size&&_6(t.textBetween(a-1,a+1))&&(a+=l?1:-1),s=a+(s-o),o=a}return{start:a,endA:s,endB:o}}function _6(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class _F{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jwe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(L6),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=T6(this),P6(this),this.nodeViews=M6(this),this.docView=u6(this.state.doc,O6(this),E5(this),this.dom,this),this.domObserver=new Jwe(this,(r,i,a,s)=>a5e(this,r,i,a,s)),this.domObserver.start(),kwe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&rk(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(L6),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,a=!1,s=!1;e.storedMarks&&this.composing&&(SF(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=M6(this);u5e(h,this.nodeViews)&&(this.nodeViews=h,a=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&rk(this),this.editable=T6(this),P6(this);let l=E5(this),u=O6(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&z2e(this);if(s){this.domObserver.stop();let h=f&&(ma||Zr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&c5e(i.selection,e.selection);if(f){let m=Zr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zwe(this)),(a||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=u6(e.doc,u,l,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&cwe(this))?ml(this,h):(uF(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&F2e(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof _t){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&i6(this,n.getBoundingClientRect(),e)}else i6(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(i=a)}this.dragging=new jF(e.slice,e.move,i<0?void 0:_t.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s].props[e];if(o!=null&&(i=n?n(o):o))return i}let a=this.state.plugins;if(a)for(let s=0;s<a.length;s++){let o=a[s].props[e];if(o!=null&&(i=n?n(o):o))return i}}hasFocus(){if(ma){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&B2e(this.dom),ml(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return V2e(this,e)}coordsAtPos(e,n=1){return nF(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return J2e(this,n||this.state,e)}pasteHTML(e,n){return K0(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return K0(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return e4(this,e)}destroy(){this.docView&&(Awe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],E5(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_2e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Ewe(this,e)}domSelectionRange(){let e=this.domSelection();return e?xi&&this.root.nodeType===11&&L2e(this.dom.ownerDocument)==this.dom&&Qwe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}_F.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function O6(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Gi.node(0,t.state.doc.content.size,e)]}function P6(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Gi.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function T6(t){return!t.someProp("editable",e=>e(t.state)===!1)}function c5e(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function M6(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function u5e(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function L6(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Hc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},d5e=typeof navigator<"u"&&/Mac/.test(navigator.platform),f5e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pi=0;pi<10;pi++)Hc[48+pi]=Hc[96+pi]=String(pi);for(var pi=1;pi<=24;pi++)Hc[pi+111]="F"+pi;for(var pi=65;pi<=90;pi++)Hc[pi]=String.fromCharCode(pi+32),x1[pi]=String.fromCharCode(pi);for(var O5 in Hc)x1.hasOwnProperty(O5)||(x1[O5]=Hc[O5]);function h5e(t){var e=d5e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||f5e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?x1:Hc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const p5e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),m5e=typeof navigator<"u"&&/Win/.test(navigator.platform);function g5e(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o++){let l=e[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))p5e?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),s&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function v5e(t){let e=Object.create(null);for(let n in t)e[g5e(n)]=t[n];return e}function P5(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function x5e(t){return new rr({props:{handleKeyDown:OF(t)}})}function OF(t){let e=v5e(t);return function(n,r){let i=h5e(r),a,s=e[P5(i,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let o=e[P5(i,r,!1)];if(o&&o(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(m5e&&r.ctrlKey&&r.altKey)&&(a=Hc[r.keyCode])&&a!=i){let o=e[P5(a,r)];if(o&&o(n.state,n.dispatch,n))return!0}}return!1}}var y5e=Object.defineProperty,s4=(t,e)=>{for(var n in e)y5e(t,n,{get:e[n],enumerable:!0})};function E2(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}var _2=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,a=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([s,o])=>[s,(...u)=>{const d=o(...u)(a);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:a}=r,s=[],o=!!t,l=t||i.tr,u=()=>(!o&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(l),s.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,p])=>[f,(...m)=>{const g=this.buildProps(l,e),y=p(...m)(g);return s.push(y),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,a=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...u)=>l(...u)({...a,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:a}=r,s={tr:t,editor:r,view:a,state:E2({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([o,l])=>[o,(...u)=>l(...u)(s)]))}};return s}},PF={};s4(PF,{blur:()=>b5e,clearContent:()=>w5e,clearNodes:()=>S5e,command:()=>N5e,createParagraphNear:()=>j5e,cut:()=>k5e,deleteCurrentNode:()=>A5e,deleteNode:()=>C5e,deleteRange:()=>E5e,deleteSelection:()=>_5e,enter:()=>O5e,exitCode:()=>P5e,extendMarkRange:()=>T5e,first:()=>M5e,focus:()=>I5e,forEach:()=>D5e,insertContent:()=>R5e,insertContentAt:()=>F5e,joinBackward:()=>W5e,joinDown:()=>H5e,joinForward:()=>q5e,joinItemBackward:()=>U5e,joinItemForward:()=>V5e,joinTextblockBackward:()=>G5e,joinTextblockForward:()=>K5e,joinUp:()=>B5e,keyboardShortcut:()=>X5e,lift:()=>J5e,liftEmptyBlock:()=>Z5e,liftListItem:()=>Q5e,newlineInCode:()=>eSe,resetAttributes:()=>tSe,scrollIntoView:()=>nSe,selectAll:()=>rSe,selectNodeBackward:()=>iSe,selectNodeForward:()=>aSe,selectParentNode:()=>sSe,selectTextblockEnd:()=>oSe,selectTextblockStart:()=>lSe,setContent:()=>cSe,setMark:()=>_Se,setMeta:()=>OSe,setNode:()=>PSe,setNodeSelection:()=>TSe,setTextDirection:()=>MSe,setTextSelection:()=>LSe,sinkListItem:()=>ISe,splitBlock:()=>DSe,splitListItem:()=>RSe,toggleList:()=>$Se,toggleMark:()=>zSe,toggleNode:()=>FSe,toggleWrap:()=>BSe,undoInputRule:()=>HSe,unsetAllMarks:()=>WSe,unsetMark:()=>qSe,unsetTextDirection:()=>USe,updateAttributes:()=>VSe,wrapIn:()=>GSe,wrapInList:()=>KSe});var b5e=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),w5e=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),S5e=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:a,$to:s})=>{t.doc.nodesBetween(a.pos,s.pos,(o,l)=>{if(o.type.isText)return;const{doc:u,mapping:d}=e,f=u.resolve(d.map(l)),p=u.resolve(d.map(l+o.nodeSize)),h=f.blockRange(p);if(!h)return;const m=ip(h);if(o.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,g)}(m||m===0)&&e.lift(h,m)})}),!0},N5e=t=>e=>t(e),j5e=()=>({state:t,dispatch:e})=>Uz(t,e),k5e=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,a=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,a.content),r.setSelection(new Bt(r.doc.resolve(Math.max(s-1,0)))),!0},A5e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===r.type){if(e){const o=i.before(a),l=i.after(a);t.delete(o,l).scrollIntoView()}return!0}return!1};function Pr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var C5e=t=>({tr:e,state:n,dispatch:r})=>{const i=Pr(t,n.schema),a=e.selection.$anchor;for(let s=a.depth;s>0;s-=1)if(a.node(s).type===i){if(r){const l=a.before(s),u=a.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},E5e=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},_5e=()=>({state:t,dispatch:e})=>V3(t,e),O5e=()=>({commands:t})=>t.keyboardShortcut("Enter"),P5e=()=>({state:t,dispatch:e})=>p2e(t,e);function o4(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function y1(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:o4(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function TF(t,e,n={}){return t.find(r=>r.type===e&&y1(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function I6(t,e,n={}){return!!TF(t,e,n)}function l4(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(d=>d.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(d=>d.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!TF([...i.node.marks],e,n)))return;let s=i.index,o=t.start()+i.offset,l=s+1,u=o+i.node.nodeSize;for(;s>0&&I6([...t.parent.child(s-1).marks],e,n);)s-=1,o-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&I6([...t.parent.child(l).marks],e,n);)u+=t.parent.child(l).nodeSize,l+=1;return{from:o,to:u}}function Pl(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var T5e=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const a=Pl(t,r.schema),{doc:s,selection:o}=n,{$from:l,from:u,to:d}=o;if(i){const f=l4(l,a,e);if(f&&f.from<=u&&f.to>=d){const p=Bt.create(s,f.from,f.to);n.setSelection(p)}}return!0},M5e=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function MF(t){return t instanceof Bt}function Uu(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function LF(t,e=null){if(!e)return null;const n=Xt.atStart(t),r=Xt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,a=r.to;return e==="all"?Bt.create(t,Uu(0,i,a),Uu(t.content.size,i,a)):Bt.create(t,Uu(e,i,a),Uu(e,i,a))}function D6(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function b1(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function L5e(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var I5e=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const s=()=>{(b1()||D6())&&r.dom.focus(),L5e()&&!b1()&&!D6()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!MF(n.state.selection))return s(),!0;const o=LF(i.doc,t)||n.state.selection,l=n.state.selection.eq(o);return a&&(l||i.setSelection(o),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},D5e=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),R5e=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),IF=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&IF(r)}return t};function $v(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return IF(n)}function X0(t,e,n){if(t instanceof qs||t instanceof Ge)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ge.fromArray(t.map(o=>e.nodeFromJSON(o)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),X0("",e,n)}if(i){if(n.errorOnInvalidContent){let s=!1,o="";const l=new xz({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,o=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Lc.fromSchema(l).parseSlice($v(t),n.parseOptions):Lc.fromSchema(l).parse($v(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const a=Lc.fromSchema(e);return n.slice?a.parseSlice($v(t),n.parseOptions).content:a.parse($v(t),n.parseOptions)}return X0("",e,n)}function $5e(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Jr||i instanceof ei))return;const a=t.mapping.maps[r];let s=0;a.forEach((o,l,u,d)=>{s===0&&(s=d)}),t.setSelection(Xt.near(t.doc.resolve(s),n))}var z5e=t=>!("type"in t),F5e=(t,e,n)=>({tr:r,dispatch:i,editor:a})=>{var s;if(i){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let o;const l=y=>{a.emit("contentError",{editor:a,error:y,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{X0(e,a.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(y){l(y)}try{o=X0(e,a.schema,{parseOptions:u,errorOnInvalidContent:(s=n.errorOnInvalidContent)!=null?s:a.options.enableContentCheck})}catch(y){return l(y),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((z5e(o)?o:[o]).forEach(y=>{y.check(),p=p?y.isText&&y.marks.length===0:!1,h=h?y.isBlock:!1}),d===f&&h){const{parent:y}=r.doc.resolve(d);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(d-=1,f+=1)}let g;if(p){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof Ge){let y="";e.forEach(x=>{x.text&&(y+=x.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,d,f)}else{g=o;const y=r.doc.resolve(d),x=y.node(),w=y.parentOffset===0,S=x.isText||x.isTextblock,N=x.content.size>0;w&&S&&N&&(d=Math.max(0,d-1)),r.replaceWith(d,f,g)}n.updateSelection&&$5e(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:g})}return!0},B5e=()=>({state:t,dispatch:e})=>d2e(t,e),H5e=()=>({state:t,dispatch:e})=>f2e(t,e),W5e=()=>({state:t,dispatch:e})=>$z(t,e),q5e=()=>({state:t,dispatch:e})=>Hz(t,e),U5e=()=>({state:t,dispatch:e,tr:n})=>{try{const r=S2(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},V5e=()=>({state:t,dispatch:e,tr:n})=>{try{const r=S2(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},G5e=()=>({state:t,dispatch:e})=>c2e(t,e),K5e=()=>({state:t,dispatch:e})=>u2e(t,e);function DF(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Y5e(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,a,s;for(let o=0;o<e.length-1;o+=1){const l=e[o];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))b1()||DF()?s=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var X5e=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const a=Y5e(t).split(/-(?!$)/),s=a.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),o=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,o))});return l==null||l.steps.forEach(u=>{const d=u.map(r.mapping);d&&i&&r.maybeStep(d)}),!0};function Wc(t,e,n={}){const{from:r,to:i,empty:a}=t.selection,s=e?Pr(e,t.schema):null,o=[];t.doc.nodesBetween(r,i,(f,p)=>{if(f.isText)return;const h=Math.max(r,p),m=Math.min(i,p+f.nodeSize);o.push({node:f,from:h,to:m})});const l=i-r,u=o.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>y1(f.node.attrs,n,{strict:!1}));return a?!!u.length:u.reduce((f,p)=>f+p.to-p.from,0)>=l}var J5e=(t,e={})=>({state:n,dispatch:r})=>{const i=Pr(t,n.schema);return Wc(n,i,e)?h2e(n,r):!1},Z5e=()=>({state:t,dispatch:e})=>Vz(t,e),Q5e=t=>({state:e,dispatch:n})=>{const r=Pr(t,e.schema);return k2e(r)(e,n)},eSe=()=>({state:t,dispatch:e})=>qz(t,e);function O2(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function R6(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var tSe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=O2(typeof t=="string"?t:t.name,r.schema);if(!o)return!1;o==="node"&&(a=Pr(t,r.schema)),o==="mark"&&(s=Pl(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,f)=>{a&&a===d.type&&(l=!0,i&&n.setNodeMarkup(f,void 0,R6(d.attrs,e))),s&&d.marks.length&&d.marks.forEach(p=>{s===p.type&&(l=!0,i&&n.addMark(f,f+d.nodeSize,s.create(R6(p.attrs,e))))})})}),l},nSe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),rSe=()=>({tr:t,dispatch:e})=>{if(e){const n=new za(t.doc);t.setSelection(n)}return!0},iSe=()=>({state:t,dispatch:e})=>Fz(t,e),aSe=()=>({state:t,dispatch:e})=>Wz(t,e),sSe=()=>({state:t,dispatch:e})=>v2e(t,e),oSe=()=>({state:t,dispatch:e})=>b2e(t,e),lSe=()=>({state:t,dispatch:e})=>y2e(t,e);function ik(t,e,n={},r={}){return X0(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var cSe=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:a,dispatch:s,commands:o})=>{const{doc:l}=a;if(r.preserveWhitespace!=="full"){const u=ik(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return s&&a.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!n),!0}return s&&a.setMeta("preventUpdate",!n),o.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function RF(t,e){const n=Pl(e,t.schema),{from:r,to:i,empty:a}=t.selection,s=[];a?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{s.push(...l.marks)});const o=s.find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function $F(t,e){const n=new Lz(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function uSe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function dSe(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,a)=>{n(i)&&r.push({node:i,pos:a})}),r}function fSe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function P2(t){return e=>fSe(e.$from,t)}function Ct(t,e,n){return t.config[e]===void 0&&t.parent?Ct(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ct(t.parent,e,n):null}):t.config[e]}function c4(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ct(e,"addExtensions",n);return r?[e,...c4(r())]:e}).flat(10)}function u4(t,e){const n=Ld.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function zF(t){return typeof t=="function"}function vn(t,e=void 0,...n){return zF(t)?e?t.bind(e)(...n):t(...n):t}function hSe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function zh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function FF(t){const e=[],{nodeExtensions:n,markExtensions:r}=zh(t),i=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage,extensions:i},l=Ct(s,"addGlobalAttributes",o);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,h])=>{e.push({type:f,name:p,attribute:{...a,...h}})})})})}),i.forEach(s=>{const o={name:s.name,options:s.options,storage:s.storage},l=Ct(s,"addAttributes",o);if(!l)return;const u=l();Object.entries(u).forEach(([d,f])=>{const p={...a,...f};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:s.name,name:d,attribute:p})})}),e}function Nr(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,a])=>{if(!r[i]){r[i]=a;return}if(i==="class"){const o=a?String(a).split(" "):[],l=r[i]?r[i].split(" "):[],u=o.filter(d=>!l.includes(d));r[i]=[...l,...u].join(" ")}else if(i==="style"){const o=a?a.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;l.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());u.set(f,p)}),o.forEach(d=>{const[f,p]=d.split(":").map(h=>h.trim());u.set(f,p)}),r[i]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[i]=a}),r},{})}function J0(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Nr(n,r),{})}function pSe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function $6(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((a,s)=>{const o=s.attribute.parseHTML?s.attribute.parseHTML(n):pSe(n.getAttribute(s.name));return o==null?a:{...a,[s.name]:o}},{});return{...r,...i}}}}function z6(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&hSe(n)?!1:n!=null))}function F6(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function mSe(t,e){var n;const r=FF(t),{nodeExtensions:i,markExtensions:a}=zh(t),s=(n=i.find(u=>Ct(u,"topNode")))==null?void 0:n.name,o=Object.fromEntries(i.map(u=>{const d=r.filter(x=>x.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((x,w)=>{const S=Ct(w,"extendNodeSchema",f);return{...x,...S?S(u):{}}},{}),h=z6({...p,content:vn(Ct(u,"content",f)),marks:vn(Ct(u,"marks",f)),group:vn(Ct(u,"group",f)),inline:vn(Ct(u,"inline",f)),atom:vn(Ct(u,"atom",f)),selectable:vn(Ct(u,"selectable",f)),draggable:vn(Ct(u,"draggable",f)),code:vn(Ct(u,"code",f)),whitespace:vn(Ct(u,"whitespace",f)),linebreakReplacement:vn(Ct(u,"linebreakReplacement",f)),defining:vn(Ct(u,"defining",f)),isolating:vn(Ct(u,"isolating",f)),attrs:Object.fromEntries(d.map(F6))}),m=vn(Ct(u,"parseHTML",f));m&&(h.parseDOM=m.map(x=>$6(x,d)));const g=Ct(u,"renderHTML",f);g&&(h.toDOM=x=>g({node:x,HTMLAttributes:J0(x,d)}));const y=Ct(u,"renderText",f);return y&&(h.toText=y),[u.name,h]})),l=Object.fromEntries(a.map(u=>{const d=r.filter(y=>y.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((y,x)=>{const w=Ct(x,"extendMarkSchema",f);return{...y,...w?w(u):{}}},{}),h=z6({...p,inclusive:vn(Ct(u,"inclusive",f)),excludes:vn(Ct(u,"excludes",f)),group:vn(Ct(u,"group",f)),spanning:vn(Ct(u,"spanning",f)),code:vn(Ct(u,"code",f)),attrs:Object.fromEntries(d.map(F6))}),m=vn(Ct(u,"parseHTML",f));m&&(h.parseDOM=m.map(y=>$6(y,d)));const g=Ct(u,"renderHTML",f);return g&&(h.toDOM=y=>g({mark:y,HTMLAttributes:J0(y,d)})),[u.name,h]}));return new xz({topNode:s,nodes:o,marks:l})}function gSe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function w1(t){return t.sort((n,r)=>{const i=Ct(n,"priority")||100,a=Ct(r,"priority")||100;return i>a?-1:i<a?1:0})}function BF(t){const e=w1(c4(t)),n=gSe(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function HF(t,e,n){const{from:r,to:i}=e,{blockSeparator:a=`

`,textSerializers:s={}}=n||{};let o="";return t.nodesBetween(r,i,(l,u,d,f)=>{var p;l.isBlock&&u>r&&(o+=a);const h=s==null?void 0:s[l.type.name];if(h)return d&&(o+=h({node:l,pos:u,parent:d,index:f,range:e})),!1;l.isText&&(o+=(p=l==null?void 0:l.text)==null?void 0:p.slice(Math.max(r,u)-u,i-u))}),o}function vSe(t,e){const n={from:0,to:t.content.size};return HF(t,n,e)}function WF(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function xSe(t,e){const n=Pr(e,t.schema),{from:r,to:i}=t.selection,a=[];t.doc.nodesBetween(r,i,o=>{a.push(o)});const s=a.reverse().find(o=>o.type.name===n.name);return s?{...s.attrs}:{}}function qF(t,e){const n=O2(typeof e=="string"?e:e.name,t.schema);return n==="node"?xSe(t,e):n==="mark"?RF(t,e):{}}function ySe(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function bSe(t){const e=ySe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,s)=>s!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function UF(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,a)=>{const s=[];if(i.ranges.length)i.forEach((o,l)=>{s.push({from:o,to:l})});else{const{from:o,to:l}=n[a];if(o===void 0||l===void 0)return;s.push({from:o,to:l})}s.forEach(({from:o,to:l})=>{const u=e.slice(a).map(o,-1),d=e.slice(a).map(l),f=e.invert().map(u,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:u,to:d}})})}),bSe(r)}function d4(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const a=n.resolve(t),s=l4(a,i.type);s&&r.push({mark:i,...s})}):n.nodesBetween(t,e,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(s=>({from:a,to:a+i.nodeSize,mark:s})))}),r}var wSe=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let a=r,s=null;for(;a>0&&s===null;){const o=i.node(a);(o==null?void 0:o.type.name)===e?s=o:a-=1}return[s,a]};function zv(t,e){return e.nodes[t]||e.marks[t]||null}function Nx(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(a=>a.type===e&&a.name===r);return i?i.attribute.keepOnSplit:!1}))}var SSe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,a,s,o)=>{var l,u;const d=((u=(l=i.type.spec).toText)==null?void 0:u.call(l,{node:i,pos:a,parent:s,index:o}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?d:d.slice(0,Math.max(0,r-a))}),n};function ak(t,e,n={}){const{empty:r,ranges:i}=t.selection,a=e?Pl(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>a?a.name===f.type.name:!0).find(f=>y1(f.attrs,n,{strict:!1}));let s=0;const o=[];if(i.forEach(({$from:f,$to:p})=>{const h=f.pos,m=p.pos;t.doc.nodesBetween(h,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const x=Math.max(h,y),w=Math.min(m,y+g.nodeSize),S=w-x;s+=S,o.push(...g.marks.map(N=>({mark:N,from:x,to:w})))})}),s===0)return!1;const l=o.filter(f=>a?a.name===f.mark.type.name:!0).filter(f=>y1(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),u=o.filter(f=>a?f.mark.type!==a&&f.mark.type.excludes(a):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+u:l)>=s}function NSe(t,e,n={}){if(!e)return Wc(t,null,n)||ak(t,null,n);const r=O2(e,t.schema);return r==="node"?Wc(t,e,n):r==="mark"?ak(t,e,n):!1}var jSe=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const a=P2(o=>o.type.name===e)(t.selection);if(!a)return!1;const s=t.doc.resolve(a.pos+1);return i.pos+1===s.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},kSe=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function B6(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function H6(t,e){const{nodeExtensions:n}=zh(e),r=n.find(s=>s.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},a=vn(Ct(r,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function T2(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(a=>{i!==!1&&(T2(a,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function VF(t){return t instanceof _t}var GF=class KF{constructor(e){this.position=e}static fromJSON(e){return new KF(e.position)}toJSON(){return{position:this.position}}};function ASe(t,e){const n=e.mapping.mapResult(t.position);return{position:new GF(n.pos),mapResult:n}}function CSe(t){return new GF(t)}function ESe(t,e,n){var r;const{selection:i}=e;let a=null;if(MF(i)&&(a=i.$cursor),a){const o=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(o)||!o.some(u=>u.type.excludes(n)))}const{ranges:s}=i;return s.some(({$from:o,$to:l})=>{let u=o.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(o.pos,l.pos,(d,f,p)=>{if(u)return!1;if(d.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(g=>g.type.excludes(n));u=h&&m}return!u}),u})}var _Se=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=n,{empty:s,ranges:o}=a,l=Pl(t,r.schema);if(i)if(s){const u=RF(r,l);n.addStoredMark(l.create({...u,...e}))}else o.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(p,h)=>{const m=Math.max(h,d),g=Math.min(h+p.nodeSize,f);p.marks.find(x=>x.type===l)?p.marks.forEach(x=>{l===x.type&&n.addMark(m,g,l.create({...x.attrs,...e}))}):n.addMark(m,g,l.create(e))})});return ESe(r,n,l)},OSe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),PSe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const a=Pr(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:o})=>t6(a,{...s,...e})(n)?!0:o.clearNodes()).command(({state:o})=>t6(a,{...s,...e})(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},TSe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Uu(t,0,r.content.size),a=_t.create(r,i);e.setSelection(a)}return!0},MSe=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:a}=r;let s,o;return typeof e=="number"?(s=e,o=e):e&&"from"in e&&"to"in e?(s=e.from,o=e.to):(s=a.from,o=a.to),i&&n.doc.nodesBetween(s,o,(l,u)=>{l.isText||n.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},LSe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:a}=typeof t=="number"?{from:t,to:t}:t,s=Bt.atStart(r).from,o=Bt.atEnd(r).to,l=Uu(i,s,o),u=Uu(a,s,o),d=Bt.create(r,l,u);e.setSelection(d)}return!0},ISe=t=>({state:e,dispatch:n})=>{const r=Pr(t,e.schema);return E2e(r)(e,n)};function W6(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}var DSe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:a,doc:s}=e,{$from:o,$to:l}=a,u=i.extensionManager.attributes,d=Nx(u,o.node().type.name,o.node().attrs);if(a instanceof _t&&a.node.isBlock)return!o.parentOffset||!pl(s,o.pos)?!1:(r&&(t&&W6(n,i.extensionManager.splittableMarks),e.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=o.depth===0?void 0:uSe(o.node(-1).contentMatchAt(o.indexAfter(-1)));let h=f&&p?[{type:p,attrs:d}]:void 0,m=pl(e.doc,e.mapping.map(o.pos),1,h);if(!h&&!m&&pl(e.doc,e.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:d}]:void 0),r){if(m&&(a instanceof Bt&&e.deleteSelection(),e.split(e.mapping.map(o.pos),1,h),p&&!f&&!o.parentOffset&&o.parent.type!==p)){const g=e.mapping.map(o.before()),y=e.doc.resolve(g);o.node(-1).canReplaceWith(y.index(),y.index()+1,p)&&e.setNodeMarkup(e.mapping.map(o.before()),p)}t&&W6(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},RSe=(t,e={})=>({tr:n,state:r,dispatch:i,editor:a})=>{var s;const o=Pr(t,r.schema),{$from:l,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(u))return!1;const f=l.node(-1);if(f.type!==o)return!1;const p=a.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let x=Ge.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let P=l.depth-w;P>=l.depth-3;P-=1)x=Ge.from(l.node(P).copy(x));const S=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,N={...Nx(p,l.node().type.name,l.node().attrs),...e},j=((s=o.contentMatch.defaultType)==null?void 0:s.createAndFill(N))||void 0;x=x.append(Ge.from(o.createAndFill(null,j)||void 0));const E=l.before(l.depth-(w-1));n.replace(E,l.after(-S),new ct(x,4-w,0));let C=-1;n.doc.nodesBetween(E,n.doc.content.size,(P,T)=>{if(C>-1)return!1;P.isTextblock&&P.content.size===0&&(C=T+1)}),C>-1&&n.setSelection(Bt.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=u.pos===l.end()?f.contentMatchAt(0).defaultType:null,m={...Nx(p,f.type.name,f.attrs),...e},g={...Nx(p,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,u.pos);const y=h?[{type:o,attrs:m},{type:h,attrs:g}]:[{type:o,attrs:m}];if(!pl(n.doc,l.pos,2))return!1;if(i){const{selection:x,storedMarks:w}=r,{splittableMarks:S}=a.extensionManager,N=w||x.$to.parentOffset&&x.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!N||!i)return!0;const j=N.filter(E=>S.includes(E.type.name));n.ensureMarks(j)}return!0},T5=(t,e)=>{const n=P2(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qc(t.doc,n.pos)&&t.join(n.pos),!0},M5=(t,e)=>{const n=P2(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Qc(t.doc,r)&&t.join(r),!0},$Se=(t,e,n,r={})=>({editor:i,tr:a,state:s,dispatch:o,chain:l,commands:u,can:d})=>{const{extensions:f,splittableMarks:p}=i.extensionManager,h=Pr(t,s.schema),m=Pr(e,s.schema),{selection:g,storedMarks:y}=s,{$from:x,$to:w}=g,S=x.blockRange(w),N=y||g.$to.parentOffset&&g.$from.marks();if(!S)return!1;const j=P2(E=>H6(E.type.name,f))(g);if(S.depth>=1&&j&&S.depth-j.depth<=1){if(j.node.type===h)return u.liftListItem(m);if(H6(j.node.type.name,f)&&h.validContent(j.node.content)&&o)return l().command(()=>(a.setNodeMarkup(j.pos,h),!0)).command(()=>T5(a,h)).command(()=>M5(a,h)).run()}return!n||!N||!o?l().command(()=>d().wrapInList(h,r)?!0:u.clearNodes()).wrapInList(h,r).command(()=>T5(a,h)).command(()=>M5(a,h)).run():l().command(()=>{const E=d().wrapInList(h,r),C=N.filter(P=>p.includes(P.type.name));return a.ensureMarks(C),E?!0:u.clearNodes()}).wrapInList(h,r).command(()=>T5(a,h)).command(()=>M5(a,h)).run()},zSe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:a=!1}=n,s=Pl(t,r.schema);return ak(r,s,e)?i.unsetMark(s,{extendEmptyMarkRange:a}):i.setMark(s,e)},FSe=(t,e,n={})=>({state:r,commands:i})=>{const a=Pr(t,r.schema),s=Pr(e,r.schema),o=Wc(r,a,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),o?i.setNode(s,l):i.setNode(a,{...l,...n})},BSe=(t,e={})=>({state:n,commands:r})=>{const i=Pr(t,n.schema);return Wc(n,i,e)?r.lift(i):r.wrapIn(i,e)},HSe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let a;if(i.spec.isInputRules&&(a=i.getState(t))){if(e){const s=t.tr,o=a.transform;for(let l=o.steps.length-1;l>=0;l-=1)s.step(o.steps[l].invert(o.docs[l]));if(a.text){const l=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,t.schema.text(a.text,l))}else s.delete(a.from,a.to)}return!0}}return!1},WSe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},qSe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var a;const{extendEmptyMarkRange:s=!1}=e,{selection:o}=n,l=Pl(t,r.schema),{$from:u,empty:d,ranges:f}=o;if(!i)return!0;if(d&&s){let{from:p,to:h}=o;const m=(a=u.marks().find(y=>y.type===l))==null?void 0:a.attrs,g=l4(u,l,m);g&&(p=g.from,h=g.to),n.removeMark(p,h,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},USe=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let a,s;return typeof t=="number"?(a=t,s=t):t&&"from"in t&&"to"in t?(a=t.from,s=t.to):(a=i.from,s=i.to),r&&e.doc.nodesBetween(a,s,(o,l)=>{if(o.isText)return;const u={...o.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},VSe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let a=null,s=null;const o=O2(typeof t=="string"?t:t.name,r.schema);if(!o)return!1;o==="node"&&(a=Pr(t,r.schema)),o==="mark"&&(s=Pl(t,r.schema));let l=!1;return n.selection.ranges.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;let p,h,m,g;n.selection.empty?r.doc.nodesBetween(d,f,(y,x)=>{a&&a===y.type&&(l=!0,m=Math.max(x,d),g=Math.min(x+y.nodeSize,f),p=x,h=y)}):r.doc.nodesBetween(d,f,(y,x)=>{x<d&&a&&a===y.type&&(l=!0,m=Math.max(x,d),g=Math.min(x+y.nodeSize,f),p=x,h=y),x>=d&&x<=f&&(a&&a===y.type&&(l=!0,i&&n.setNodeMarkup(x,void 0,{...y.attrs,...e})),s&&y.marks.length&&y.marks.forEach(w=>{if(s===w.type&&(l=!0,i)){const S=Math.max(x,d),N=Math.min(x+y.nodeSize,f);n.addMark(S,N,s.create({...w.attrs,...e}))}}))}),h&&(p!==void 0&&i&&n.setNodeMarkup(p,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(y=>{s===y.type&&i&&n.addMark(m,g,s.create({...y.attrs,...e}))}))}),l},GSe=(t,e={})=>({state:n,dispatch:r})=>{const i=Pr(t,n.schema);return w2e(i,e)(n,r)},KSe=(t,e={})=>({state:n,dispatch:r})=>{const i=Pr(t,n.schema);return S2e(i,e)(n,r)},YSe=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},M2=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},XSe=(t,e)=>{if(o4(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Fv(t){var e;const{editor:n,from:r,to:i,text:a,rules:s,plugin:o}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=SSe(u)+a;return s.forEach(p=>{if(d)return;const h=XSe(f,p.find);if(!h)return;const m=l.state.tr,g=E2({state:l.state,transaction:m}),y={from:r-(h[0].length-a.length),to:i},{commands:x,chain:w,can:S}=new _2({editor:n,state:g});p.handler({state:g,range:y,match:h,commands:x,chain:w,can:S})===null||!m.steps.length||(p.undoable&&m.setMeta(o,{transform:m,from:r,to:i,text:a}),l.dispatch(m),d=!0)}),d}function JSe(t){const{editor:e,rules:n}=t,r=new rr({state:{init(){return null},apply(i,a,s){const o=i.getMeta(r);if(o)return o;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=u4(Ge.from(d),s.schema);const{from:f}=l,p=f+d.length;Fv({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,s,o){return Fv({editor:e,from:a,to:s,text:o,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&Fv({editor:e,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:s}=i.state.selection;return s?Fv({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function ZSe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Bv(t){return ZSe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function YF(t,e){const n={...t};return Bv(t)&&Bv(e)&&Object.keys(e).forEach(r=>{Bv(e[r])&&Bv(t[r])?n[r]=YF(t[r],e[r]):n[r]=e[r]}),n}var f4=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...vn(Ct(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...vn(Ct(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>YF(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},tu=class XF extends f4{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new XF(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const s=i.marks();if(!!!s.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const l=s.find(u=>(u==null?void 0:u.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function QSe(t){return typeof t=="number"}var eNe=class{constructor(t){this.find=t.find,this.handler=t.handler}},tNe=(t,e,n)=>{if(o4(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const a=[i.text];return a.index=i.index,a.input=t,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function nNe(t){const{editor:e,state:n,from:r,to:i,rule:a,pasteEvent:s,dropEvent:o}=t,{commands:l,chain:u,can:d}=new _2({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,m)=>{var g,y,x,w,S;if((y=(g=h.type)==null?void 0:g.spec)!=null&&y.code||!(h.isText||h.isTextblock||h.isInline))return;const N=(S=(w=(x=h.content)==null?void 0:x.size)!=null?w:h.nodeSize)!=null?S:0,j=Math.max(r,m),E=Math.min(i,m+N);if(j>=E)return;const C=h.isText?h.text||"":h.textBetween(j-m,E-m,void 0,"");tNe(C,a.find,s).forEach(T=>{if(T.index===void 0)return;const I=j+T.index+1,k=I+T[0].length,O={from:n.tr.mapping.map(I),to:n.tr.mapping.map(k)},R=a.handler({state:n,range:O,match:T,commands:l,chain:u,can:d,pasteEvent:s,dropEvent:o});f.push(R)})}),f.every(h=>h!==null)}var Hv=null,rNe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function iNe(t){const{editor:e,rules:n}=t;let r=null,i=!1,a=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}const l=({state:d,from:f,to:p,rule:h,pasteEvt:m})=>{const g=d.tr,y=E2({state:d,transaction:g});if(!(!nNe({editor:e,state:y,from:Math.max(f-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:o})||!g.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(d=>new rr({view(f){const p=m=>{var g;r=(g=f.dom.parentElement)!=null&&g.contains(m.target)?f.dom.parentElement:null,r&&(Hv=e)},h=()=>{Hv&&(Hv=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(a=r===f.dom.parentElement,o=p,!a){const h=Hv;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,p)=>{var h;const m=(h=p.clipboardData)==null?void 0:h.getData("text/html");return s=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,p,h)=>{const m=f[0],g=m.getMeta("uiEvent")==="paste"&&!i,y=m.getMeta("uiEvent")==="drop"&&!a,x=m.getMeta("applyPasteRules"),w=!!x;if(!g&&!y&&!w)return;if(w){let{text:j}=x;typeof j=="string"?j=j:j=u4(Ge.from(j),h.schema);const{from:E}=x,C=E+j.length,P=rNe(j);return l({rule:d,state:h,from:E,to:{b:C},pasteEvt:P})}const S=p.doc.content.findDiffStart(h.doc.content),N=p.doc.content.findDiffEnd(h.doc.content);if(!(!QSe(S)||!N||S===N.b))return l({rule:d,state:h,from:S,to:N,pasteEvt:s})}}))}var L2=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=BF(t),this.schema=mSe(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:zv(e.name,this.schema)},r=Ct(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return w1([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:zv(r.name,this.schema)},a=[],s=Ct(r,"addKeyboardShortcuts",i);let o={};if(r.type==="mark"&&Ct(r,"exitable",i)&&(o.ArrowRight=()=>tu.handleExit({editor:t,mark:r})),s){const p=Object.fromEntries(Object.entries(s()).map(([h,m])=>[h,()=>m({editor:t})]));o={...o,...p}}const l=x5e(o);a.push(l);const u=Ct(r,"addInputRules",i);if(B6(r,t.options.enableInputRules)&&u){const p=u();if(p&&p.length){const h=JSe({editor:t,rules:p}),m=Array.isArray(h)?h:[h];a.push(...m)}}const d=Ct(r,"addPasteRules",i);if(B6(r,t.options.enablePasteRules)&&d){const p=d();if(p&&p.length){const h=iNe({editor:t,rules:p});a.push(...h)}}const f=Ct(r,"addProseMirrorPlugins",i);if(f){const p=f();a.push(...p)}return a})}get attributes(){return FF(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=zh(this.extensions);return Object.fromEntries(e.filter(n=>!!Ct(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Pr(n.name,this.schema)},a=Ct(n,"addNodeView",i);if(!a)return[];const s=a();if(!s)return[];const o=(l,u,d,f,p)=>{const h=J0(l,r);return s({node:l,view:u,getPos:d,decorations:f,innerDecorations:p,editor:t,extension:n,HTMLAttributes:h})};return[n.name,o]}))}dispatchTransaction(t){const{editor:e}=this;return w1([...this.extensions].reverse()).reduceRight((r,i)=>{const a={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:zv(i.name,this.schema)},s=Ct(i,"dispatchTransaction",a);return s?o=>{s.call(a,{transaction:o,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=zh(this.extensions);return Object.fromEntries(e.filter(n=>!!Ct(n,"addMarkView")).map(n=>{const r=this.attributes.filter(o=>o.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Pl(n.name,this.schema)},a=Ct(n,"addMarkView",i);if(!a)return[];const s=(o,l,u)=>{const d=J0(o,r);return a()({mark:o,view:l,inline:u,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{xNe(o,t,f)}})};return[n.name,s]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:zv(e.name,this.schema)};e.type==="mark"&&((n=vn(Ct(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Ct(e,"onBeforeCreate",r),a=Ct(e,"onCreate",r),s=Ct(e,"onUpdate",r),o=Ct(e,"onSelectionUpdate",r),l=Ct(e,"onTransaction",r),u=Ct(e,"onFocus",r),d=Ct(e,"onBlur",r),f=Ct(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),s&&this.editor.on("update",s),o&&this.editor.on("selectionUpdate",o),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};L2.resolve=BF;L2.sort=w1;L2.flatten=c4;var aNe={};s4(aNe,{ClipboardTextSerializer:()=>ZF,Commands:()=>QF,Delete:()=>e9,Drop:()=>t9,Editable:()=>n9,FocusEvents:()=>i9,Keymap:()=>a9,Paste:()=>s9,Tabindex:()=>o9,TextDirection:()=>l9,focusEventsPluginKey:()=>r9});var An=class JF extends f4{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new JF(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},ZF=An.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new rr({key:new Ur("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:a}=i,s=Math.min(...a.map(d=>d.$from.pos)),o=Math.max(...a.map(d=>d.$to.pos)),l=WF(n);return HF(r,{from:s,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),QF=An.create({name:"commands",addCommands(){return{...PF}}}),e9=An.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const a=()=>{var s,o,l,u;if((u=(l=(o=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:o.filterTransaction)==null?void 0:l.call(o,t))!=null?u:t.getMeta("y-sync$"))return;const d=$F(t.before,[t,...e]);UF(d).forEach(h=>{d.mapping.mapResult(h.oldRange.from).deletedAfter&&d.mapping.mapResult(h.oldRange.to).deletedBefore&&d.before.nodesBetween(h.oldRange.from,h.oldRange.to,(m,g)=>{const y=g+m.nodeSize-2,x=h.oldRange.from<=g&&y<=h.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:y,newFrom:d.mapping.map(g),newTo:d.mapping.map(y),deletedRange:h.oldRange,newRange:h.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:d})})});const p=d.mapping;d.steps.forEach((h,m)=>{var g,y;if(h instanceof Fs){const x=p.slice(m).map(h.from,-1),w=p.slice(m).map(h.to),S=p.invert().map(x,-1),N=p.invert().map(w),j=(g=d.doc.nodeAt(x-1))==null?void 0:g.marks.some(C=>C.eq(h.mark)),E=(y=d.doc.nodeAt(w))==null?void 0:y.marks.some(C=>C.eq(h.mark));this.editor.emit("delete",{type:"mark",mark:h.mark,from:h.from,to:h.to,deletedRange:{from:S,to:N},newRange:{from:x,to:w},partial:!!(E||j),editor:this.editor,transaction:t,combinedTransform:d})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(a,0):a()}}),t9=An.create({name:"drop",addProseMirrorPlugins(){return[new rr({key:new Ur("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),n9=An.create({name:"editable",addProseMirrorPlugins(){return[new rr({key:new Ur("editable"),props:{editable:()=>this.editor.options.editable}})]}}),r9=new Ur("focusEvents"),i9=An.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new rr({key:r9,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),a9=An.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:o})=>{const{selection:l,doc:u}=o,{empty:d,$anchor:f}=l,{pos:p,parent:h}=f,m=f.parent.isTextblock&&p>0?o.doc.resolve(p-1):f,g=m.parent.type.spec.isolating,y=f.pos-f.parentOffset,x=g&&m.parent.childCount===1?y===f.pos:Xt.atStart(u).from===p;return!d||!h.type.isTextblock||h.textContent.length||!x||x&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return b1()||DF()?a:i},addProseMirrorPlugins(){return[new rr({key:new Ur("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),i=t.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:a,from:s,to:o}=e.selection,l=Xt.atStart(e.doc).from,u=Xt.atEnd(e.doc).to;if(a||!(s===l&&o===u)||!T2(n.doc))return;const p=n.tr,h=E2({state:n,transaction:p}),{commands:m}=new _2({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),s9=An.create({name:"paste",addProseMirrorPlugins(){return[new rr({key:new Ur("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),o9=An.create({name:"tabindex",addProseMirrorPlugins(){return[new rr({key:new Ur("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),l9=An.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=zh(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new rr({key:new Ur("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),sNe=class hf{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new hf(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new hf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new hf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,s=this.pos+r+(a?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const l=new hf(o,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new hf(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const a=i.node.attrs,s=Object.keys(n);for(let o=0;o<s.length;o+=1){const l=s[o];if(a[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(n);return this.children.forEach(s=>{r&&i.length>0||(s.node.type.name===e&&a.every(l=>n[l]===s.node.attrs[l])&&i.push(s),!(r&&i.length>0)&&(i=i.concat(s.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},oNe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function lNe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var cNe=class extends YSe{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:ASe,createMappablePosition:CSe},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:a})=>this.options.onDrop(r,i,a)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=LF(e,this.options.autofocus);this.editorState=If.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=lNe(oNe,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=zF(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const a=typeof i=="string"?`${i}$`:i.key;n=n.filter(s=>!s.key.startsWith(a))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[n9,ZF.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),QF,i9,a9,o9,t9,s9,e9,l9.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new L2(r,this)}createCommandManager(){this.commandManager=new _2({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=ik(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=ik(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new _F(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const s=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),o=s==null?void 0:s.getMeta("focus"),l=s==null?void 0:s.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:s}),l&&this.emit("blur",{editor:this,event:l.event,transaction:s}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return qF(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return NSe(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return u4(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return vSe(this.state.doc,{blockSeparator:e,textSerializers:{...WF(this.schema),...n}})}get isEmpty(){return T2(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new sNe(e,this)}get $doc(){return this.$pos(0)}};function Fh(t){return new M2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=vn(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:a}=e,s=r[r.length-1],o=r[0];if(s){const l=o.search(/\S/),u=n.from+o.indexOf(s),d=u+s.length;if(d4(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>u).length)return null;d<n.to&&a.delete(d,n.to),u>n.from&&a.delete(n.from+l,u);const p=n.from+l+s.length;a.addMark(n.from+l,p,t.type.create(i||{})),a.removeStoredMark(t.type)}},undoable:t.undoable})}function uNe(t){return new M2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=vn(t.getAttributes,void 0,r)||{},{tr:a}=e,s=n.from;let o=n.to;const l=t.type.create(i);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=s+u;d>o?d=o:o=d+r[1].length;const f=r[0][r[0].length-1];a.insertText(f,s+r[0].length-1),a.replaceWith(d,o,l)}else if(r[0]){const u=t.type.isInline?s:s-1;a.insert(u,t.type.create(i)).delete(a.mapping.map(s),a.mapping.map(o))}a.scrollIntoView()},undoable:t.undoable})}function sk(t){return new M2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),a=vn(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,a)},undoable:t.undoable})}function Bh(t){return new M2({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const a=vn(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),u=l&&q3(l,t.type,a);if(!u)return null;if(s.wrap(l,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||f.$to.parentOffset&&f.$from.marks();if(m){const g=m.filter(y=>h.includes(y.type.name));s.ensureMarks(g)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,a).run()}const d=s.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Qc(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&s.join(n.from-1)},undoable:t.undoable})}function dNe(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof _t){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let i=r.depth;for(;i>=0;){const a=r.index(i);if(r.node(i).contentMatchAt(a).matchType(e))return!0;i-=1}return!1}var fNe={};s4(fNe,{createAtomBlockMarkdownSpec:()=>hNe,createBlockMarkdownSpec:()=>pNe,createInlineMarkdownSpec:()=>vNe,parseAttributes:()=>h4,parseIndentedBlocks:()=>ok,renderNestedMarkdownContent:()=>m4,serializeAttributes:()=>p4});function h4(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const u=i.map(d=>d.trim().slice(1));e.class=u.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const s=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(s)).forEach(([,u,d])=>{var f;const p=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),h=n[p];h&&(e[u]=h.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function p4(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function hNe(t){const{nodeName:e,name:n,parseAttributes:r=h4,serializeAttributes:i=p4,defaultAttributes:a={},requiredAttributes:s=[],allowedAttributes:o}=t,l=n||e,u=d=>{if(!o)return d;const f={};return o.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{const p={...a,...d.attributes};return f.createNode(e,p,[])},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${l}(?:\\s|$)`,"m"),h=(f=d.match(p))==null?void 0:f.index;return h!==void 0?h:-1},tokenize(d,f,p){const h=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(h);if(!m)return;const g=m[1]||"",y=r(g);if(!s.find(w=>!(w in y)))return{type:e,raw:m[0],attributes:y}}},renderMarkdown:d=>{const f=u(d.attrs||{}),p=i(f),h=p?` {${p}}`:"";return`:::${l}${h} :::`}}}function pNe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=h4,serializeAttributes:a=p4,defaultAttributes:s={},content:o="block",allowedAttributes:l}=t,u=n||e,d=f=>{if(!l)return f;const p={};return l.forEach(h=>{h in f&&(p[h]=f[h])}),p};return{parseMarkdown:(f,p)=>{let h;if(r){const g=r(f);h=typeof g=="string"?[{type:"text",text:g}]:g}else o==="block"?h=p.parseChildren(f.tokens||[]):h=p.parseInline(f.tokens||[]);const m={...s,...f.attributes};return p.createNode(e,m,h)},markdownTokenizer:{name:e,level:"block",start(f){var p;const h=new RegExp(`^:::${u}`,"m"),m=(p=f.match(h))==null?void 0:p.index;return m!==void 0?m:-1},tokenize(f,p,h){var m;const g=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=f.match(g);if(!y)return;const[x,w=""]=y,S=i(w);let N=1;const j=x.length;let E="";const C=/^:::([\w-]*)(\s.*)?/gm,P=f.slice(j);for(C.lastIndex=0;;){const T=C.exec(P);if(T===null)break;const I=T.index,k=T[1];if(!((m=T[2])!=null&&m.endsWith(":::"))){if(k)N+=1;else if(N-=1,N===0){const O=P.slice(0,I);E=O.trim();const R=f.slice(0,j+I+T[0].length);let D=[];if(E)if(o==="block")for(D=h.blockTokens(O),D.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=h.inlineTokens(B.text))});D.length>0;){const B=D[D.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))D.pop();else break}else D=h.inlineTokens(E);return{type:e,raw:R,attributes:S,content:E,tokens:D}}}}}},renderMarkdown:(f,p)=>{const h=d(f.attrs||{}),m=a(h),g=m?` {${m}}`:"",y=p.renderChildren(f.content||[],`

`);return`:::${u}${g}

${y}

:::`}}}function mNe(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,a,s]=r;e[i]=a||s,r=n.exec(t)}return e}function gNe(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function vNe(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=mNe,serializeAttributes:a=gNe,defaultAttributes:s={},selfClosing:o=!1,allowedAttributes:l}=t,u=n||e,d=p=>{if(!l)return p;const h={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,y=typeof m=="string"?void 0:m.skipIfDefault;if(g in p){const x=p[g];if(y!==void 0&&x===y)return;h[g]=x}}),h},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(p,h)=>{const m={...s,...p.attributes};if(o)return h.createNode(e,m);const g=r?r(p):p.content||"";return g?h.createNode(e,m,[h.createTextNode(g)]):h.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(p){const h=o?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=p.match(h),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(p,h,m){const g=o?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),y=p.match(g);if(!y)return;let x="",w="";if(o){const[,N]=y;w=N}else{const[,N,j]=y;w=N,x=j||""}const S=i(w.trim());return{type:e,raw:y[0],content:x.trim(),attributes:S}}},renderMarkdown:p=>{let h="";r?h=r(p):p.content&&p.content.length>0&&(h=p.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const m=d(p.attrs||{}),g=a(m),y=g?` ${g}`:"";return o?`[${u}${y}]`:`[${u}${y}]${h}[/${u}]`}}}function ok(t,e,n){var r,i,a,s;const o=t.split(`
`),l=[];let u="",d=0;const f=e.baseIndentSize||2;for(;d<o.length;){const p=o[d],h=p.match(e.itemPattern);if(!h){if(l.length>0)break;if(p.trim()===""){d+=1,u=`${u}${p}
`;continue}else return}const m=e.extractItemData(h),{indentLevel:g,mainContent:y}=m;u=`${u}${p}
`;const x=[y];for(d+=1;d<o.length;){const j=o[d];if(j.trim()===""){const C=o.slice(d+1).findIndex(I=>I.trim()!=="");if(C===-1)break;if((((i=(r=o[d+1+C].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>g){x.push(j),u=`${u}${j}
`,d+=1;continue}else break}if((((s=(a=j.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:s.length)||0)>g)x.push(j),u=`${u}${j}
`,d+=1;else break}let w;const S=x.slice(1);if(S.length>0){const j=S.map(E=>E.slice(g+f)).join(`
`);j.trim()&&(e.customNestedParser?w=e.customNestedParser(j):w=n.blockTokens(j))}const N=e.createToken(m,w);l.push(N)}if(l.length!==0)return{items:l,raw:u}}function m4(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[a,...s]=t.content,o=e.renderChildren([a]),l=[`${i}${o}`];return s&&s.length>0&&s.forEach(u=>{const d=e.renderChildren([u]);if(d){const f=d.split(`
`).map(p=>p?e.indent(p):"").join(`
`);l.push(f)}}),l.join(`
`)}function xNe(t,e,n={}){const{state:r}=e,{doc:i,tr:a}=r,s=t;i.descendants((o,l)=>{const u=a.mapping.map(l),d=a.mapping.map(l)+o.nodeSize;let f=null;if(o.marks.forEach(h=>{if(h!==s)return!1;f=h}),!f)return;let p=!1;if(Object.keys(n).forEach(h=>{n[h]!==f.attrs[h]&&(p=!0)}),p){const h=t.type.create({...t.attrs,...n});a.removeMark(u,d,t.type),a.addMark(u,d,h)}}),a.docChanged&&e.view.dispatch(a)}var Wa=class c9 extends f4{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new c9(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Nd(t){return new eNe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const a=vn(t.getAttributes,void 0,r,i);if(a===!1||a===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];let u=n.to;if(o){const d=l.search(/\S/),f=n.from+l.indexOf(o),p=f+o.length;if(d4(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+d,f),u=n.from+d+o.length,s.addMark(n.from+d,u,t.type.create(a||{})),s.removeStoredMark(t.type)}}})}var u9={exports:{}},d9={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2=q,yNe=B3;function bNe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wNe=typeof Object.is=="function"?Object.is:bNe,SNe=yNe.useSyncExternalStore,NNe=I2.useRef,jNe=I2.useEffect,kNe=I2.useMemo,ANe=I2.useDebugValue;d9.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=NNe(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=kNe(function(){function l(h){if(!u){if(u=!0,d=h,h=r(h),i!==void 0&&s.hasValue){var m=s.value;if(i(m,h))return f=m}return f=h}if(m=f,wNe(d,h))return m;var g=r(h);return i!==void 0&&i(m,g)?(d=h,m):(d=h,f=g)}var u=!1,d,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var o=SNe(t,a[0],a[1]);return jNe(function(){s.hasValue=!0,s.value=o},[o]),ANe(o),o};u9.exports=d9;var CNe=u9.exports,ENe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},_Ne=({contentComponent:t})=>{const e=B3.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return c.jsx(c.Fragment,{children:Object.values(e)})};function ONe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:hU.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var PNe=class extends ue.Component{constructor(t){var e;super(t),this.editorContentRef=ue.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=ONe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:ENe(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&c.jsx(_Ne,{contentComponent:t.contentComponent})]})}},TNe=q.forwardRef((t,e)=>{const n=ue.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ue.createElement(PNe,{key:n,innerRef:e,...t})}),MNe=ue.memo(TNe),LNe=typeof window<"u"?q.useLayoutEffect:q.useEffect,INe=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function DNe(t){var e;const[n]=q.useState(()=>new INe(t.editor)),r=CNe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:BR);return LNe(()=>n.watch(t.editor),[t.editor,n]),q.useDebugValue(r),r}var RNe=!1,lk=typeof window>"u",$Ne=lk||!!(typeof window<"u"&&window.next),zNe=class f9{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?lk||$Ne?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)==null?void 0:a.call(i,...r)},onBlur:(...r)=>{var i,a;return(a=(i=this.options.current).onBlur)==null?void 0:a.call(i,...r)},onCreate:(...r)=>{var i,a;return(a=(i=this.options.current).onCreate)==null?void 0:a.call(i,...r)},onDestroy:(...r)=>{var i,a;return(a=(i=this.options.current).onDestroy)==null?void 0:a.call(i,...r)},onFocus:(...r)=>{var i,a;return(a=(i=this.options.current).onFocus)==null?void 0:a.call(i,...r)},onSelectionUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)==null?void 0:a.call(i,...r)},onTransaction:(...r)=>{var i,a;return(a=(i=this.options.current).onTransaction)==null?void 0:a.call(i,...r)},onUpdate:(...r)=>{var i,a;return(a=(i=this.options.current).onUpdate)==null?void 0:a.call(i,...r)},onContentError:(...r)=>{var i,a;return(a=(i=this.options.current).onContentError)==null?void 0:a.call(i,...r)},onDrop:(...r)=>{var i,a;return(a=(i=this.options.current).onDrop)==null?void 0:a.call(i,...r)},onPaste:(...r)=>{var i,a;return(a=(i=this.options.current).onPaste)==null?void 0:a.call(i,...r)},onDelete:(...r)=>{var i,a;return(a=(i=this.options.current).onDelete)==null?void 0:a.call(i,...r)}};return new cNe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,a)=>{var s;return i===((s=n.extensions)==null?void 0:s[a])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?f9.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function FNe(t={},e=[]){const n=q.useRef(t);n.current=t;const[r]=q.useState(()=>new zNe(n)),i=B3.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return q.useDebugValue(i),q.useEffect(r.onRender(e)),DNe({editor:i,selector:({transactionNumber:a})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&a===0?0:a+1}),i}var BNe=q.createContext({editor:null});BNe.Consumer;var HNe=q.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),WNe=()=>q.useContext(HNe);ue.forwardRef((t,e)=>{const{onDragStart:n}=WNe(),r=t.as||"div";return c.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ue.createContext({markViewContentRef:()=>{}});var S1=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},qNe=/^\s*>\s$/,UNe=Wa.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return S1("blockquote",{...Nr(this.options.HTMLAttributes,t),children:S1("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const o=e.renderChildren([i]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(o.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bh({find:qNe,type:this.type})]}}),VNe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,GNe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,KNe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,YNe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,XNe=tu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return S1("strong",{...Nr(this.options.HTMLAttributes,t),children:S1("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Fh({find:VNe,type:this.type}),Fh({find:KNe,type:this.type})]},addPasteRules(){return[Nd({find:GNe,type:this.type}),Nd({find:YNe,type:this.type})]}}),JNe=/(^|[^`])`([^`]+)`(?!`)$/,ZNe=/(^|[^`])`([^`]+)`(?!`)/g,QNe=tu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Fh({find:JNe,type:this.type})]},addPasteRules(){return[Nd({find:ZNe,type:this.type})]}}),L5=4,eje=/^```([a-z]+)?[\s\n]$/,tje=/^~~~([a-z]+)?[\s\n]$/,nje=Wa.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:L5,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const a=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Nr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:L5,{state:r}=t,{selection:i}=r,{$from:a,empty:s}=i;if(a.parent.type!==this.type)return!1;const o=" ".repeat(n);return s?t.commands.insertContent(o):t.commands.command(({tr:l})=>{const{from:u,to:d}=i,h=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>o+m).join(`
`);return l.replaceWith(u,d,r.schema.text(h)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:L5,{state:r}=t,{selection:i}=r,{$from:a,empty:s}=i;return a.parent.type!==this.type?!1:s?t.commands.command(({tr:o})=>{var l;const{pos:u}=a,d=a.start(),f=a.end(),h=r.doc.textBetween(d,f,`
`,`
`).split(`
`);let m=0,g=0;const y=u-d;for(let E=0;E<h.length;E+=1){if(g+h[E].length>=y){m=E;break}g+=h[E].length+1}const w=((l=h[m].match(/^ */))==null?void 0:l[0])||"",S=Math.min(w.length,n);if(S===0)return!0;let N=d;for(let E=0;E<m;E+=1)N+=h[E].length+1;return o.delete(N,N+S),u-N<=S&&o.setSelection(Bt.create(o.doc,N)),!0}):t.commands.command(({tr:o})=>{const{from:l,to:u}=i,p=r.doc.textBetween(l,u,`
`,`
`).split(`
`).map(h=>{var m;const g=((m=h.match(/^ */))==null?void 0:m[0])||"",y=Math.min(g.length,n);return h.slice(y)}).join(`
`);return o.replaceWith(l,u,r.schema.text(p)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!a||!s?!1:t.chain().command(({tr:o})=>(o.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:a}=n;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const o=i.after();return o===void 0?!1:r.nodeAt(o)?t.commands.command(({tr:u})=>(u.setSelection(Xt.near(r.resolve(o))),!0)):t.commands.exitCode()}}},addInputRules(){return[sk({find:eje,type:this.type,getAttributes:t=>({language:t[1]})}),sk({find:tje,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new rr({key:new Ur("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,a=i==null?void 0:i.mode;if(!n||!a)return!1;const{tr:s,schema:o}=t.state,l=o.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:a},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Bt.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),rje=Wa.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),ije=Wa.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Nr(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:a}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:o}=r.extensionManager,l=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&l&&s){const f=l.filter(p=>o.includes(p.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),aje=Wa.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Nr(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>sk({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),sje=Wa.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Nr(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!dNe(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return VF(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:a,tr:s,dispatch:o})=>{if(o){const{$to:l}=s.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?s.setSelection(Bt.create(s.doc,l.pos+1)):l.nodeAfter.isBlock?s.setSelection(_t.create(s.doc,l.pos)):s.setSelection(Bt.create(s.doc,l.pos));else{const d=a.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(s.insert(u,f),s.setSelection(Bt.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[uNe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),oje=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lje=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,cje=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,uje=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,dje=tu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Nr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Fh({find:oje,type:this.type}),Fh({find:cje,type:this.type})]},addPasteRules(){return[Nd({find:lje,type:this.type}),Nd({find:uje,type:this.type})]}});const fje="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",hje="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ck="numeric",uk="ascii",dk="alpha",Mm="asciinumeric",fm="alphanumeric",fk="domain",h9="emoji",pje="scheme",mje="slashscheme",I5="whitespace";function gje(t,e){return t in e||(e[t]=[]),e[t]}function Vu(t,e,n){e[ck]&&(e[Mm]=!0,e[fm]=!0),e[uk]&&(e[Mm]=!0,e[dk]=!0),e[Mm]&&(e[fm]=!0),e[dk]&&(e[fm]=!0),e[fm]&&(e[fk]=!0),e[h9]&&(e[fk]=!0);for(const r in e){const i=gje(r,n);i.indexOf(t)<0&&i.push(t)}}function vje(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function la(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}la.groups={};la.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],a=e.jr[r][1];if(a&&i.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||la.groups;let i;return e&&e.j?i=e:(i=new la(e),n&&r&&Vu(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const a=t.length;if(!a)return i;for(let s=0;s<a-1;s++)i=i.tt(t[s]);return i.tt(t[a-1],e,n,r)},tt(t,e,n,r){r=r||la.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const a=e;let s,o=i.go(t);if(o?(s=new la,Object.assign(s.j,o.j),s.jr.push.apply(s.jr,o.jr),s.jd=o.jd,s.t=o.t):s=new la,a){if(r)if(s.t&&typeof s.t=="string"){const l=Object.assign(vje(s.t,r),n);Vu(a,l,r)}else n&&Vu(a,n,r);s.t=a}return i.j[t]=s,s}};const Yt=(t,e,n,r,i)=>t.ta(e,n,r,i),cr=(t,e,n,r,i)=>t.tr(e,n,r,i),q6=(t,e,n,r,i)=>t.ts(e,n,r,i),Qe=(t,e,n,r,i)=>t.tt(e,n,r,i),Ko="WORD",hk="UWORD",p9="ASCIINUMERICAL",m9="ALPHANUMERICAL",Z0="LOCALHOST",pk="TLD",mk="UTLD",jx="SCHEME",pf="SLASH_SCHEME",g4="NUM",gk="WS",v4="NL",Lm="OPENBRACE",Im="CLOSEBRACE",N1="OPENBRACKET",j1="CLOSEBRACKET",k1="OPENPAREN",A1="CLOSEPAREN",C1="OPENANGLEBRACKET",E1="CLOSEANGLEBRACKET",_1="FULLWIDTHLEFTPAREN",O1="FULLWIDTHRIGHTPAREN",P1="LEFTCORNERBRACKET",T1="RIGHTCORNERBRACKET",M1="LEFTWHITECORNERBRACKET",L1="RIGHTWHITECORNERBRACKET",I1="FULLWIDTHLESSTHAN",D1="FULLWIDTHGREATERTHAN",R1="AMPERSAND",$1="APOSTROPHE",z1="ASTERISK",cc="AT",F1="BACKSLASH",B1="BACKTICK",H1="CARET",mc="COLON",x4="COMMA",W1="DOLLAR",ao="DOT",q1="EQUALS",y4="EXCLAMATION",ns="HYPHEN",Dm="PERCENT",U1="PIPE",V1="PLUS",G1="POUND",Rm="QUERY",b4="QUOTE",g9="FULLWIDTHMIDDLEDOT",w4="SEMI",so="SLASH",$m="TILDE",K1="UNDERSCORE",v9="EMOJI",Y1="SYM";var x9=Object.freeze({__proto__:null,ALPHANUMERICAL:m9,AMPERSAND:R1,APOSTROPHE:$1,ASCIINUMERICAL:p9,ASTERISK:z1,AT:cc,BACKSLASH:F1,BACKTICK:B1,CARET:H1,CLOSEANGLEBRACKET:E1,CLOSEBRACE:Im,CLOSEBRACKET:j1,CLOSEPAREN:A1,COLON:mc,COMMA:x4,DOLLAR:W1,DOT:ao,EMOJI:v9,EQUALS:q1,EXCLAMATION:y4,FULLWIDTHGREATERTHAN:D1,FULLWIDTHLEFTPAREN:_1,FULLWIDTHLESSTHAN:I1,FULLWIDTHMIDDLEDOT:g9,FULLWIDTHRIGHTPAREN:O1,HYPHEN:ns,LEFTCORNERBRACKET:P1,LEFTWHITECORNERBRACKET:M1,LOCALHOST:Z0,NL:v4,NUM:g4,OPENANGLEBRACKET:C1,OPENBRACE:Lm,OPENBRACKET:N1,OPENPAREN:k1,PERCENT:Dm,PIPE:U1,PLUS:V1,POUND:G1,QUERY:Rm,QUOTE:b4,RIGHTCORNERBRACKET:T1,RIGHTWHITECORNERBRACKET:L1,SCHEME:jx,SEMI:w4,SLASH:so,SLASH_SCHEME:pf,SYM:Y1,TILDE:$m,TLD:pk,UNDERSCORE:K1,UTLD:mk,UWORD:hk,WORD:Ko,WS:gk});const qo=/[a-z]/,Zp=new RegExp("\\p{L}","u"),D5=new RegExp("\\p{Emoji}","u"),Uo=/\d/,R5=/\s/,U6="\r",$5=`
`,xje="",yje="",z5="";let Wv=null,qv=null;function bje(t=[]){const e={};la.groups=e;const n=new la;Wv==null&&(Wv=V6(fje)),qv==null&&(qv=V6(hje)),Qe(n,"'",$1),Qe(n,"{",Lm),Qe(n,"}",Im),Qe(n,"[",N1),Qe(n,"]",j1),Qe(n,"(",k1),Qe(n,")",A1),Qe(n,"<",C1),Qe(n,">",E1),Qe(n,"",_1),Qe(n,"",O1),Qe(n,"",P1),Qe(n,"",T1),Qe(n,"",M1),Qe(n,"",L1),Qe(n,"",I1),Qe(n,"",D1),Qe(n,"&",R1),Qe(n,"*",z1),Qe(n,"@",cc),Qe(n,"`",B1),Qe(n,"^",H1),Qe(n,":",mc),Qe(n,",",x4),Qe(n,"$",W1),Qe(n,".",ao),Qe(n,"=",q1),Qe(n,"!",y4),Qe(n,"-",ns),Qe(n,"%",Dm),Qe(n,"|",U1),Qe(n,"+",V1),Qe(n,"#",G1),Qe(n,"?",Rm),Qe(n,'"',b4),Qe(n,"/",so),Qe(n,";",w4),Qe(n,"~",$m),Qe(n,"_",K1),Qe(n,"\\",F1),Qe(n,"",g9);const r=cr(n,Uo,g4,{[ck]:!0});cr(r,Uo,r);const i=cr(r,qo,p9,{[Mm]:!0}),a=cr(r,Zp,m9,{[fm]:!0}),s=cr(n,qo,Ko,{[uk]:!0});cr(s,Uo,i),cr(s,qo,s),cr(i,Uo,i),cr(i,qo,i);const o=cr(n,Zp,hk,{[dk]:!0});cr(o,qo),cr(o,Uo,a),cr(o,Zp,o),cr(a,Uo,a),cr(a,qo),cr(a,Zp,a);const l=Qe(n,$5,v4,{[I5]:!0}),u=Qe(n,U6,gk,{[I5]:!0}),d=cr(n,R5,gk,{[I5]:!0});Qe(n,z5,d),Qe(u,$5,l),Qe(u,z5,d),cr(u,R5,d),Qe(d,U6),Qe(d,$5),cr(d,R5,d),Qe(d,z5,d);const f=cr(n,D5,v9,{[h9]:!0});Qe(f,"#"),cr(f,D5,f),Qe(f,xje,f);const p=Qe(f,yje);Qe(p,"#"),cr(p,D5,f);const h=[[qo,s],[Uo,i]],m=[[qo,null],[Zp,o],[Uo,a]];for(let g=0;g<Wv.length;g++)Ql(n,Wv[g],pk,Ko,h);for(let g=0;g<qv.length;g++)Ql(n,qv[g],mk,hk,m);Vu(pk,{tld:!0,ascii:!0},e),Vu(mk,{utld:!0,alpha:!0},e),Ql(n,"file",jx,Ko,h),Ql(n,"mailto",jx,Ko,h),Ql(n,"http",pf,Ko,h),Ql(n,"https",pf,Ko,h),Ql(n,"ftp",pf,Ko,h),Ql(n,"ftps",pf,Ko,h),Vu(jx,{scheme:!0,ascii:!0},e),Vu(pf,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],w=t[g][1]?{[pje]:!0}:{[mje]:!0};y.indexOf("-")>=0?w[fk]=!0:qo.test(y)?Uo.test(y)?w[Mm]=!0:w[uk]=!0:w[ck]=!0,q6(n,y,y,w)}return q6(n,"localhost",Z0,{ascii:!0}),n.jd=new la(Y1),{start:n,tokens:Object.assign({groups:e},x9)}}function y9(t,e){const n=wje(e.replace(/[A-Z]/g,o=>o.toLowerCase())),r=n.length,i=[];let a=0,s=0;for(;s<r;){let o=t,l=null,u=0,d=null,f=-1,p=-1;for(;s<r&&(l=o.go(n[s]));)o=l,o.accepts()?(f=0,p=0,d=o):f>=0&&(f+=n[s].length,p++),u+=n[s].length,a+=n[s].length,s++;a-=f,s-=p,u-=f,i.push({t:d.t,v:e.slice(a-u,a),s:a-u,e:a})}return i}function wje(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),a,s=i<55296||i>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function Ql(t,e,n,r,i){let a;const s=e.length;for(let o=0;o<s-1;o++){const l=e[o];t.j[l]?a=t.j[l]:(a=new la(r),a.jr=i.slice(),t.j[l]=a),t=a}return a=new la(n),a.jr=i.slice(),t.j[e[s-1]]=a,a}function V6(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let a=0;for(;i.indexOf(t[r+a])>=0;)a++;if(a>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+a),10);s>0;s--)n.pop();r+=a}else n.push(t[r]),r++}return e}const Q0={defaultProtocol:"http",events:null,format:G6,formatHref:G6,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function S4(t,e=null){let n=Object.assign({},Q0);t&&(n=Object.assign(n,t instanceof S4?t.o:t));const r=n.ignoreTags,i=[];for(let a=0;a<r.length;a++)i.push(r[a].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}S4.prototype={o:Q0,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Q0[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function G6(t){return t}function b9(t,e){this.t="token",this.v=t,this.tk=e}b9.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Q0.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),a=this.toFormattedString(t),s={},o=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,o&&(s.class=o),l&&(s.target=l),u&&(s.rel=u),d&&Object.assign(s,d),{tagName:i,attributes:s,content:a,eventListeners:f}}};function D2(t,e){class n extends b9{constructor(i,a){super(i,a),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const K6=D2("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Y6=D2("text"),Sje=D2("nl"),Uv=D2("url",{isLink:!0,toHref(t=Q0.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Z0&&t[1].t===mc}}),ts=t=>new la(t);function Nje({groups:t}){const e=t.domain.concat([R1,z1,cc,F1,B1,H1,W1,q1,ns,g4,Dm,U1,V1,G1,so,Y1,$m,K1]),n=[$1,mc,x4,ao,y4,Dm,Rm,b4,w4,C1,E1,Lm,Im,j1,N1,k1,A1,_1,O1,P1,T1,M1,L1,I1,D1],r=[R1,$1,z1,F1,B1,H1,W1,q1,ns,Lm,Im,Dm,U1,V1,G1,Rm,so,Y1,$m,K1],i=ts(),a=Qe(i,$m);Yt(a,r,a),Yt(a,t.domain,a);const s=ts(),o=ts(),l=ts();Yt(i,t.domain,s),Yt(i,t.scheme,o),Yt(i,t.slashscheme,l),Yt(s,r,a),Yt(s,t.domain,s);const u=Qe(s,cc);Qe(a,cc,u),Qe(o,cc,u),Qe(l,cc,u);const d=Qe(a,ao);Yt(d,r,a),Yt(d,t.domain,a);const f=ts();Yt(u,t.domain,f),Yt(f,t.domain,f);const p=Qe(f,ao);Yt(p,t.domain,f);const h=ts(K6);Yt(p,t.tld,h),Yt(p,t.utld,h),Qe(u,Z0,h);const m=Qe(f,ns);Qe(m,ns,m),Yt(m,t.domain,f),Yt(h,t.domain,f),Qe(h,ao,p),Qe(h,ns,m);const g=Qe(h,mc);Yt(g,t.numeric,K6);const y=Qe(s,ns),x=Qe(s,ao);Qe(y,ns,y),Yt(y,t.domain,s),Yt(x,r,a),Yt(x,t.domain,s);const w=ts(Uv);Yt(x,t.tld,w),Yt(x,t.utld,w),Yt(w,t.domain,s),Yt(w,r,a),Qe(w,ao,x),Qe(w,ns,y),Qe(w,cc,u);const S=Qe(w,mc),N=ts(Uv);Yt(S,t.numeric,N);const j=ts(Uv),E=ts();Yt(j,e,j),Yt(j,n,E),Yt(E,e,j),Yt(E,n,E),Qe(w,so,j),Qe(N,so,j);const C=Qe(o,mc),P=Qe(l,mc),T=Qe(P,so),I=Qe(T,so);Yt(o,t.domain,s),Qe(o,ao,x),Qe(o,ns,y),Yt(l,t.domain,s),Qe(l,ao,x),Qe(l,ns,y),Yt(C,t.domain,j),Qe(C,so,j),Qe(C,Rm,j),Yt(I,t.domain,j),Yt(I,e,j),Qe(I,so,j);const k=[[Lm,Im],[N1,j1],[k1,A1],[C1,E1],[_1,O1],[P1,T1],[M1,L1],[I1,D1]];for(let O=0;O<k.length;O++){const[R,D]=k[O],B=Qe(j,R);Qe(E,R,B),Qe(B,D,j);const V=ts(Uv);Yt(B,e,V);const Z=ts();Yt(B,n),Yt(V,e,V),Yt(V,n,Z),Yt(Z,e,V),Yt(Z,n,Z),Qe(V,D,j),Qe(Z,D,j)}return Qe(i,Z0,w),Qe(i,v4,Sje),{start:i,tokens:x9}}function jje(t,e,n){let r=n.length,i=0,a=[],s=[];for(;i<r;){let o=t,l=null,u=null,d=0,f=null,p=-1;for(;i<r&&!(l=o.go(n[i].t));)s.push(n[i++]);for(;i<r&&(u=l||o.go(n[i].t));)l=null,o=u,o.accepts()?(p=0,f=o):p>=0&&p++,i++,d++;if(p<0)i-=d,i<r&&(s.push(n[i]),i++);else{s.length>0&&(a.push(F5(Y6,e,s)),s=[]),i-=p,d-=p;const h=f.t,m=n.slice(i-d,i);a.push(F5(h,e,m))}}return s.length>0&&a.push(F5(Y6,e,s)),a}function F5(t,e,n){const r=n[0].s,i=n[n.length-1].e,a=e.slice(r,i);return new t(a,n)}const kje=typeof console<"u"&&console&&console.warn||(()=>{}),Aje="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Hn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Cje(){return la.groups={},Hn.scanner=null,Hn.parser=null,Hn.tokenQueue=[],Hn.pluginQueue=[],Hn.customSchemes=[],Hn.initialized=!1,Hn}function X6(t,e=!1){if(Hn.initialized&&kje(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Aje}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Hn.customSchemes.push([t,e])}function Eje(){Hn.scanner=bje(Hn.customSchemes);for(let t=0;t<Hn.tokenQueue.length;t++)Hn.tokenQueue[t][1]({scanner:Hn.scanner});Hn.parser=Nje(Hn.scanner.tokens);for(let t=0;t<Hn.pluginQueue.length;t++)Hn.pluginQueue[t][1]({scanner:Hn.scanner,parser:Hn.parser});return Hn.initialized=!0,Hn}function N4(t){return Hn.initialized||Eje(),jje(Hn.parser.start,t,y9(Hn.scanner.start,t))}N4.scan=y9;function w9(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new S4(n),i=N4(t),a=[];for(let s=0;s<i.length;s++){const o=i[s];o.isLink&&(!e||o.t===e)&&r.check(o)&&a.push(o.toFormattedObject(r))}return a}var j4="[\0- -\u2029]",_je=new RegExp(j4),Oje=new RegExp(`${j4}$`),Pje=new RegExp(j4,"g");function Tje(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Mje(t){return new rr({key:new Ur("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),a=e.some(u=>u.getMeta("preventAutolink"));if(!i||a)return;const{tr:s}=r,o=$F(n.doc,[...e]);if(UF(o).forEach(({newRange:u})=>{const d=dSe(r.doc,u,h=>h.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const h=r.doc.textBetween(u.from,u.to," "," ");if(!Oje.test(h))return;f=d[0],p=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&p){const h=p.split(_je).filter(Boolean);if(h.length<=0)return!1;const m=h[h.length-1],g=f.pos+p.lastIndexOf(m);if(!m)return!1;const y=N4(m).map(x=>x.toObject(t.defaultProtocol));if(!Tje(y))return!1;y.filter(x=>x.isLink).map(x=>({...x,from:g+x.start+1,to:g+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{d4(x.from,x.to,r.doc).some(w=>w.mark.type===t.type)||s.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!s.steps.length)return s}})}function Lje(t){return new rr({key:new Ur("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,a;if(r.button!==0||!e.editable)return!1;let s=!1;if(t.enableClickSelection&&(s=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let f=r.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(h=>h.nodeName==="A")}if(!o)return s;const l=qF(e.state,t.type.name),u=(i=o==null?void 0:o.href)!=null?i:l.href,d=(a=o==null?void 0:o.target)!=null?a:l.target;o&&u&&(window.open(u,d),s=!0)}return s}}})}function Ije(t){return new rr({key:new Ur("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:a}=e,{selection:s}=a,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=w9(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u||i!==void 0&&!i(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function wu(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(Pje,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var S9=tu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){X6(t);return}X6(t.scheme,t.optionalSlashes)})},onDestroy(){Cje()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!wu(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!wu(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!wu(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Nr(this.options.HTMLAttributes,t),0]:["a",Nr(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!wu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!wu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Nd({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=w9(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:s=>!!wu(s,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Mje({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!wu(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(Lje({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Ije({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Dje=S9,Rje=Object.defineProperty,$je=(t,e)=>{for(var n in e)Rje(t,n,{get:e[n],enumerable:!0})},zje="listItem",J6="textStyle",Z6=/^\s*([-+*])\s$/,N9=Wa.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zje,this.editor.getAttributes(J6)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Bh({find:Z6,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bh({find:Z6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(J6),editor:this.editor})),[t]}}),j9=Wa.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const s=t.tokens.slice(1),o=e.parseChildren(s);n.push(...o)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>m4(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Fje={};$je(Fje,{findListItemPos:()=>kg,getNextListDepth:()=>k4,handleBackspace:()=>vk,handleDelete:()=>xk,hasListBefore:()=>k9,hasListItemAfter:()=>Bje,hasListItemBefore:()=>A9,listItemHasSubList:()=>C9,nextListIsDeeper:()=>E9,nextListIsHigher:()=>_9});var kg=(t,e)=>{const{$from:n}=e.selection,r=Pr(t,e.schema);let i=null,a=n.depth,s=n.pos,o=null;for(;a>0&&o===null;)i=n.node(a),i.type===r?o=a:(a-=1,s-=1);return o===null?null:{$pos:e.doc.resolve(s),depth:o}},k4=(t,e)=>{const n=kg(t,e);if(!n)return!1;const[,r]=wSe(e,t,n.$pos.pos+4);return r},k9=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),a=t.doc.resolve(i).node();return!(!a||!n.includes(a.type.name))},A9=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},C9=(t,e,n)=>{if(!n)return!1;const r=Pr(t,e.schema);let i=!1;return n.descendants(a=>{a.type===r&&(i=!0)}),i},vk=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Wc(t.state,e)&&k9(t.state,e,n)){const{$anchor:o}=t.state.selection,l=t.state.doc.resolve(o.before()-1),u=[];l.node().descendants((p,h)=>{p.type.name===e&&u.push({node:p,pos:h})});const d=u.at(-1);if(!d)return!1;const f=t.state.doc.resolve(l.start()+d.pos+1);return t.chain().cut({from:o.start()-1,to:o.end()+1},f.end()).joinForward().run()}if(!Wc(t.state,e)||!kSe(t.state))return!1;const r=kg(e,t.state);if(!r)return!1;const a=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),s=C9(e,t.state,a);return A9(e,t.state)&&!s?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},E9=(t,e)=>{const n=k4(t,e),r=kg(t,e);return!r||!n?!1:n>r.depth},_9=(t,e)=>{const n=k4(t,e),r=kg(t,e);return!r||!n?!1:n<r.depth},xk=(t,e)=>{if(!Wc(t.state,e)||!jSe(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:E9(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():_9(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Bje=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},O9=An.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&xk(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&xk(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&vk(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&vk(t,n,r)&&(e=!0)}),e}}}}),Q6=/^(\s*)(\d+)\.\s+(.*)$/,Hje=/^\s/;function Wje(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],a=i.match(Q6);if(!a)break;const[,s,o,l]=a,u=s.length;let d=l,f=n+1;const p=[i];for(;f<t.length;){const h=t[f];if(h.match(Q6))break;if(h.trim()==="")p.push(h),d+=`
`,f+=1;else if(h.match(Hje))p.push(h),d+=`
${h.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(o,10),content:d.trim(),raw:p.join(`
`)}),r=f,n=f}return[e,r]}function P9(t,e,n){var r;const i=[];let a=0;for(;a<t.length;){const s=t[a];if(s.indent===e){const o=s.content.split(`
`),l=((r=o[0])==null?void 0:r.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const d=o.slice(1).join(`
`).trim();if(d){const h=n.blockTokens(d);u.push(...h)}let f=a+1;const p=[];for(;f<t.length&&t[f].indent>e;)p.push(t[f]),f+=1;if(p.length>0){const h=Math.min(...p.map(g=>g.indent)),m=P9(p,h,n);u.push({type:"list",ordered:!0,start:p[0].number,items:m,raw:p.map(g=>g.raw).join(`
`)})}i.push({type:"list_item",raw:s.raw,tokens:u}),a=f}else a+=1}return i}function qje(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const a=e.parseChildren([i]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([i]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var Uje="listItem",eM="textStyle",tM=/^(\d+)\.\s$/,T9=Wa.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Nr(this.options.HTMLAttributes,n),0]:["ol",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?qje(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[a,s]=Wje(i);if(a.length===0)return;const o=P9(a,0,n);return o.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:o,raw:i.slice(0,s).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Uje,this.editor.getAttributes(eM)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Bh({find:tM,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bh({find:tM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(eM)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Vje=/^\s*(\[([( |x])?\])\s$/,Gje=Wa.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Nr(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return m4(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),a=document.createElement("label"),s=document.createElement("span"),o=document.createElement("input"),l=document.createElement("div"),u=f=>{var p,h;o.ariaLabel=((h=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:h.call(p,f,o.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};u(t),a.contentEditable="false",o.type="checkbox",o.addEventListener("mousedown",f=>f.preventDefault()),o.addEventListener("change",f=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){o.checked=!o.checked;return}const{checked:p}=f.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const m=n();if(typeof m!="number")return!1;const g=h.doc.nodeAt(m);return h.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,p)||(o.checked=!o.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,p])=>{i.setAttribute(f,p)}),i.dataset.checked=t.attrs.checked,o.checked=t.attrs.checked,a.append(o,s),i.append(a,l),Object.entries(e).forEach(([f,p])=>{i.setAttribute(f,p)});let d=new Set(Object.keys(e));return{dom:i,contentDOM:l,update:f=>{if(f.type!==this.type)return!1;i.dataset.checked=f.attrs.checked,o.checked=f.attrs.checked,u(f);const p=r.extensionManager.attributes,h=J0(f,p),m=new Set(Object.keys(h)),g=this.options.HTMLAttributes;return d.forEach(y=>{m.has(y)||(y in g?i.setAttribute(y,g[y]):i.removeAttribute(y))}),Object.entries(h).forEach(([y,x])=>{x==null?y in g?i.setAttribute(y,g[y]):i.removeAttribute(y):i.setAttribute(y,x)}),d=m,!0}}}},addInputRules(){return[Bh({find:Vje,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Kje=Wa.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Nr(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=a=>{const s=ok(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);return s?[{type:"taskList",raw:s.raw,items:s.items}]:n.blockTokens(a)},i=ok(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,s)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:s}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});An.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(N9.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(j9.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(O9.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(T9.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Gje.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Kje.configure(this.options.taskList)),t}});var Yje=Wa.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Xje=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Jje=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Zje=tu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Nr(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Fh({find:Xje,type:this.type})]},addPasteRules(){return[Nd({find:Jje,type:this.type})]}}),Qje=Wa.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),M9=tu.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Nr(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const a=i[2].trim();return{type:"underline",raw:i[0],text:a,tokens:n.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),eke=M9;function tke(t={}){return new rr({view(e){return new nke(e,t)}})}class nke{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=s=>{this[i](s)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,a=i.getBoundingClientRect(),s=a.width/i.offsetWidth,o=a.height/i.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let m=h.getBoundingClientRect(),g=f?m.bottom:m.top;f&&p&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*o;r={left:m.left,right:m.right,top:g-y,bottom:g+y}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,h=f.height/l.offsetHeight;u=f.left-l.scrollLeft*p,d=f.top-l.scrollTop*h}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-d)/o+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/o+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!a){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=_z(this.editorView.state.doc,s,this.editorView.dragging.slice);o!=null&&(s=o)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class hr extends Xt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return hr.valid(r)?new hr(r):Xt.near(r)}content(){return ct.empty}eq(e){return e instanceof hr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new hr(e.resolve(n.pos))}getBookmark(){return new A4(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!rke(e)||!ike(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&hr.valid(e))return e;let i=e.pos,a=null;for(let s=e.depth;;s--){let o=e.node(s);if(n>0?e.indexAfter(s)<o.childCount:e.index(s)>0){a=o.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=n;let l=e.doc.resolve(i);if(hr.valid(l))return l}for(;;){let s=n>0?a.firstChild:a.lastChild;if(!s){if(a.isAtom&&!a.isText&&!_t.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*n),r=!1;continue e}break}a=s,i+=n;let o=e.doc.resolve(i);if(hr.valid(o))return o}return null}}}hr.prototype.visible=!1;hr.findFrom=hr.findGapCursorFrom;Xt.jsonID("gapcursor",hr);class A4{constructor(e){this.pos=e}map(e){return new A4(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return hr.valid(n)?new hr(n):Xt.near(n)}}function L9(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function rke(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||L9(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ike(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||L9(i.type))return!0;if(i.inlineContent)return!1}}return!0}function ake(){return new rr({props:{decorations:cke,createSelectionBetween(t,e,n){return e.pos==n.pos&&hr.valid(n)?new hr(n):null},handleClick:oke,handleKeyDown:ske,handleDOMEvents:{beforeinput:lke}}})}const ske=OF({ArrowLeft:Vv("horiz",-1),ArrowRight:Vv("horiz",1),ArrowUp:Vv("vert",-1),ArrowDown:Vv("vert",1)});function Vv(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,a){let s=r.selection,o=e>0?s.$to:s.$from,l=s.empty;if(s instanceof Bt){if(!a.endOfTextblock(n)||o.depth==0)return!1;l=!1,o=r.doc.resolve(e>0?o.after():o.before())}let u=hr.findGapCursorFrom(o,e,l);return u?(i&&i(r.tr.setSelection(new hr(u))),!0):!1}}function oke(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!hr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&_t.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new hr(r))),!0)}function lke(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof hr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ge.empty;for(let s=r.length-1;s>=0;s--)i=Ge.from(r[s].createAndFill(null,i));let a=t.state.tr.replace(n.pos,n.pos,new ct(i,0,0));return a.setSelection(Bt.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function cke(t){if(!(t.selection instanceof hr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",er.create(t.doc,[Gi.widget(t.selection.head,e,{key:"gapcursor"})])}var X1=200,ti=function(){};ti.prototype.append=function(e){return e.length?(e=ti.from(e),!this.length&&e||e.length<X1&&this.leafAppend(e)||this.length<X1&&e.leafPrepend(this)||this.appendInner(e)):this};ti.prototype.prepend=function(e){return e.length?ti.from(e).append(this):this};ti.prototype.appendInner=function(e){return new uke(this,e)};ti.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ti.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ti.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ti.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ti.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(a,s){return i.push(e(a,s))},n,r),i};ti.from=function(e){return e instanceof ti?e:e&&e.length?new I9(e):ti.empty};var I9=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,s,o){for(var l=a;l<s;l++)if(i(this.values[l],o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,s,o){for(var l=a-1;l>=s;l--)if(i(this.values[l],o+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=X1)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=X1)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ti);ti.empty=new I9([]);var uke=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,a,s){var o=this.left.length;if(i<o&&this.left.forEachInner(r,i,Math.min(a,o),s)===!1||a>o&&this.right.forEachInner(r,Math.max(i-o,0),Math.min(this.length,a)-o,s+o)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,a,s){var o=this.left.length;if(i>o&&this.right.forEachInvertedInner(r,i-o,Math.max(a,o)-o,s+o)===!1||a<o&&this.left.forEachInvertedInner(r,Math.min(i,o),a,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(r,i):r>=a?this.right.slice(r-a,i-a):this.left.slice(r,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ti);const dke=500;class zs{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,a;n&&(i=this.remapping(r,this.items.length),a=i.maps.length);let s=e.tr,o,l,u=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){i||(i=this.remapping(r,p+1),a=i.maps.length),a--,d.push(f);return}if(i){d.push(new oo(f.map));let h=f.step.map(i.slice(a)),m;h&&s.maybeStep(h).doc&&(m=s.mapping.maps[s.mapping.maps.length-1],u.push(new oo(m,void 0,void 0,u.length+d.length))),a--,m&&i.appendMap(m,a)}else s.maybeStep(f.step);if(f.selection)return o=i?f.selection.map(i.slice(a)):f.selection,l=new zs(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:o}}addTransform(e,n,r,i){let a=[],s=this.eventCount,o=this.items,l=!i&&o.length?o.get(o.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new oo(e.mapping.maps[d],f,n),h;(h=l&&l.merge(p))&&(p=h,d?a.pop():o=o.slice(0,o.length-1)),a.push(p),n&&(s++,n=void 0),i||(l=p)}let u=s-r.depth;return u>hke&&(o=fke(o,u),s-=u),new zs(o.append(a),s)}remapping(e,n){let r=new U0;return this.items.forEach((i,a)=>{let s=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new zs(this.items.append(e.map(n=>new oo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),a=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},i);let l=n;this.items.forEach(p=>{let h=a.getMirror(--l);if(h==null)return;s=Math.min(s,h);let m=a.maps[h];if(p.step){let g=e.steps[h].invert(e.docs[h]),y=p.selection&&p.selection.map(a.slice(l+1,h));y&&o++,r.push(new oo(m,g,y))}else r.push(new oo(m))},i);let u=[];for(let p=n;p<s;p++)u.push(new oo(a.maps[p]));let d=this.items.slice(0,i).append(u).append(r),f=new zs(d,o);return f.emptyItemCount()>dke&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],a=0;return this.items.forEach((s,o)=>{if(o>=e)i.push(s),s.selection&&a++;else if(s.step){let l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let d=s.selection&&s.selection.map(n.slice(r));d&&a++;let f=new oo(u.invert(),l,d),p,h=i.length-1;(p=i.length&&i[h].merge(f))?i[h]=p:i.push(f)}}else s.map&&r--},this.items.length,0),new zs(ti.from(i.reverse()),a)}}zs.empty=new zs(ti.empty,0);function fke(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class oo{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new oo(n.getMap().invert(),n,this.selection)}}}class uc{constructor(e,n,r,i,a){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=a}}const hke=20;function pke(t,e,n,r){let i=n.getMeta(id),a;if(i)return i.historyState;n.getMeta(vke)&&(t=new uc(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(id))return s.getMeta(id).redo?new uc(t.done.addTransform(n,void 0,r,kx(e)),t.undone,nM(n.mapping.maps),t.prevTime,t.prevComposition):new uc(t.done,t.undone.addTransform(n,void 0,r,kx(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let o=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=o&&(t.prevTime<(n.time||0)-r.newGroupDelay||!mke(n,t.prevRanges)),u=s?B5(t.prevRanges,n.mapping):nM(n.mapping.maps);return new uc(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,kx(e)),zs.empty,u,n.time,o??t.prevComposition)}else return(a=n.getMeta("rebased"))?new uc(t.done.rebased(n,a),t.undone.rebased(n,a),B5(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new uc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),B5(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function mke(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&i>=e[a]&&(n=!0)}),n}function nM(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,a,s)=>e.push(a,s));return e}function B5(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),a=e.map(t[r+1],-1);i<=a&&n.push(i,a)}return n}function gke(t,e,n){let r=kx(e),i=id.get(e).spec.config,a=(n?t.undone:t.done).popEvent(e,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),o=(n?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),i,r),l=new uc(n?o:a.remaining,n?a.remaining:o,null,0,-1);return a.transform.setSelection(s).setMeta(id,{redo:n,historyState:l})}let H5=!1,rM=null;function kx(t){let e=t.plugins;if(rM!=e){H5=!1,rM=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){H5=!0;break}}return H5}const id=new Ur("history"),vke=new Ur("closeHistory");function xke(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new rr({key:id,state:{init(){return new uc(zs.empty,zs.empty,null,0,-1)},apply(e,n,r){return pke(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?R9:r=="historyRedo"?$9:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function D9(t,e){return(n,r)=>{let i=id.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let a=gke(i,n,t);a&&r(e?a.scrollIntoView():a)}return!0}}const R9=D9(!1,!0),$9=D9(!0,!0);An.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new rr({key:new Ur("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const a=this.storage.characters({node:r.doc});if(a>i){const s=a-i,o=0,l=s;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(o,l);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),a=this.storage.characters({node:e.doc});if(a<=r||i>r&&a>r&&a<=i)return!0;if(i>r&&a>r&&a>i||!e.getMeta("paste"))return!1;const o=e.selection.$head.pos,l=a-r,u=o-l,d=o;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>r)}})]}});var yke=An.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[tke(this.options)]}});An.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new rr({key:new Ur("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,a=[];if(!n||!r)return er.create(t,[]);let s=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(i>=u&&i<=u+l.nodeSize-1))return!1;s+=1});let o=0;return t.descendants((l,u)=>{if(l.isText||!(i>=u&&i<=u+l.nodeSize-1))return!1;if(o+=1,this.options.mode==="deepest"&&s-o>0||this.options.mode==="shallowest"&&o>1)return this.options.mode==="deepest";a.push(Gi.node(u,u+l.nodeSize,{class:this.options.className}))}),er.create(t,a)}}})]}});var bke=An.create({name:"gapCursor",addProseMirrorPlugins(){return[ake()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=vn(Ct(t,"allowGapCursor",n)))!=null?e:null}}});An.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new rr({key:new Ur("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const a=this.editor.isEmpty;return t.descendants((s,o)=>{const l=r>=o&&r<=o+s.nodeSize,u=!s.isLeaf&&T2(s);if((l||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];a&&d.push(this.options.emptyEditorClass);const f=Gi.node(o,o+s.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:o,hasAnchor:l}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),er.create(t,i)}}})]}});An.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new rr({key:new Ur("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||VF(n.selection)||t.view.dragging?null:er.create(n.doc,[Gi.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function iM({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var wke=An.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ur(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new rr({key:e,appendTransaction:(i,a,s)=>{const{doc:o,tr:l,schema:u}=s,d=e.getState(s),f=o.content.size,p=u.nodes[n];if(d)return l.insert(f,p.create())},state:{init:(i,a)=>{const s=a.tr.doc.lastChild;return!iM({node:s,types:r})},apply:(i,a)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return a;const s=i.doc.lastChild;return!iM({node:s,types:r})}}})]}}),Ske=An.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>R9(t,e),redo:()=>({state:t,dispatch:e})=>$9(t,e)}},addProseMirrorPlugins(){return[xke(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Nke=An.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(XNe.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(UNe.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(N9.configure(this.options.bulletList)),this.options.code!==!1&&i.push(QNe.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(nje.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(rje.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(yke.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(bke.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(ije.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(aje.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Ske.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(sje.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(dje.configure(this.options.italic)),this.options.listItem!==!1&&i.push(j9.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(O9.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(S9.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(T9.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Yje.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Zje.configure(this.options.strike)),this.options.text!==!1&&i.push(Qje.configure(this.options.text)),this.options.underline!==!1&&i.push(M9.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(wke.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),jke=Nke,kke=An.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Ake=kke,Cke=20,z9=(t,e=0)=>{const n=[];return!t.children.length||e>Cke||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...z9(r,e+1))}),n},Eke=t=>{if(!t.children.length)return;const e=z9(t);e&&e.forEach(n=>{var r,i;const a=n.getAttribute("style"),s=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${s};${a}`)})},F9=tu.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&Eke(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Nr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(a=>!!a))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),_ke=An.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="background-color")return o.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),B9=An.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const a=r[i].split(":");if(a.length>=2){const s=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if(s==="color")return o.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),Oke=An.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Pke=An.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Tke=An.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});An.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(_ke.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(B9.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(Oke.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Pke.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(Tke.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(F9.configure(this.options.textStyle)),t}});const Bi=({onClick:t,isActive:e,disabled:n,title:r,children:i})=>c.jsx("button",{type:"button",onClick:t,disabled:n,title:r,className:`p-1.5 rounded transition-colors ${e?"bg-blue-100 text-blue-600":"text-slate-500 hover:bg-slate-100 hover:text-slate-700"} ${n?"opacity-40 cursor-not-allowed":""}`,children:i}),Mke=["#1e293b","#334155","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#d946ef","#ec4899","#ef4444","#f97316","#eab308","#22c55e","#14b8a6"],C4=({content:t,onChange:e,placeholder:n="Escribe aqu...",minHeight:r="200px"})=>{const[i,a]=ue.useState(!1),s=FNe({extensions:[jke.configure({heading:{levels:[1,2,3]}}),eke,Dje.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}}),Ake.configure({types:["heading","paragraph"]}),F9,B9],content:t,onUpdate:({editor:l})=>{e(l.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none px-3 py-2",style:`min-height: ${r}`}}});if(!s)return null;const o=()=>{const l=window.prompt("URL del enlace:");l&&s.chain().focus().extendMarkRange("link").setLink({href:l}).run()};return c.jsxs("div",{className:"border border-slate-300 rounded-lg overflow-hidden bg-white",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-0.5 p-1.5 border-b border-slate-200 bg-slate-50",children:[c.jsx(Bi,{onClick:()=>s.chain().focus().undo().run(),disabled:!s.can().undo(),title:"Deshacer",children:c.jsx(iV,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().redo().run(),disabled:!s.can().redo(),title:"Rehacer",children:c.jsx(YU,{size:16})}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleHeading({level:1}).run(),isActive:s.isActive("heading",{level:1}),title:"Ttulo 1",children:c.jsx(TU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleHeading({level:2}).run(),isActive:s.isActive("heading",{level:2}),title:"Ttulo 2",children:c.jsx(MU,{size:16})}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleBold().run(),isActive:s.isActive("bold"),title:"Negrita",children:c.jsx(jU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleItalic().run(),isActive:s.isActive("italic"),title:"Cursiva",children:c.jsx(DU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleUnderline().run(),isActive:s.isActive("underline"),title:"Subrayado",children:c.jsx(rV,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleStrike().run(),isActive:s.isActive("strike"),title:"Tachado",children:c.jsx(tV,{size:16})}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsxs("div",{className:"relative",children:[c.jsx(Bi,{onClick:()=>a(!i),title:"Color de texto",children:c.jsx(GU,{size:16})}),i&&c.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-white rounded-lg shadow-xl border border-slate-200 z-10 grid grid-cols-5 gap-1",children:Mke.map(l=>c.jsx("button",{type:"button",onClick:()=>{s.chain().focus().setColor(l).run(),a(!1)},className:"w-5 h-5 rounded-full border border-slate-200 hover:scale-110 transition-transform",style:{backgroundColor:l},title:l},l))})]}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleBulletList().run(),isActive:s.isActive("bulletList"),title:"Lista con vietas",children:c.jsx(BU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().toggleOrderedList().run(),isActive:s.isActive("orderedList"),title:"Lista numerada",children:c.jsx(FU,{size:16})}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsx(Bi,{onClick:()=>s.chain().focus().setTextAlign("left").run(),isActive:s.isActive({textAlign:"left"}),title:"Alinear Izquierda",children:c.jsx(yU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().setTextAlign("center").run(),isActive:s.isActive({textAlign:"center"}),title:"Centrar",children:c.jsx(xU,{size:16})}),c.jsx(Bi,{onClick:()=>s.chain().focus().setTextAlign("right").run(),isActive:s.isActive({textAlign:"right"}),title:"Alinear Derecha",children:c.jsx(bU,{size:16})}),c.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),c.jsx(Bi,{onClick:o,isActive:s.isActive("link"),title:"Insertar Enlace",children:c.jsx(zU,{size:16})})]}),c.jsx(MNe,{editor:s}),s.isEmpty&&c.jsx("div",{className:"absolute top-12 left-4 text-slate-400 pointer-events-none text-sm",children:n}),c.jsx("style",{children:`
        .ProseMirror {
          min-height: ${r};
          outline: none;
        }
        .ProseMirror p.is-editor-empty:first-child::before {
          color: #94a3b8;
          content: attr(data-placeholder);
          float: left;
          height: 0;
          pointer-events: none;
        }
        .ProseMirror ul {
          list-style-type: disc;
          padding-left: 1.5em;
        }
        .ProseMirror ol {
          list-style-type: decimal;
          padding-left: 1.5em;
        }
        .ProseMirror h1 {
          font-size: 1.5em;
          font-weight: bold;
          margin: 0.5em 0;
        }
        .ProseMirror h2 {
          font-size: 1.25em;
          font-weight: bold;
          margin: 0.5em 0;
        }
        .ProseMirror a {
          color: #2563eb;
          text-decoration: underline;
        }
      `})]})},Qp=[{name:"Contacto inicial",options:["Llamar a cliente","Primer contacto con lead","Contactar lead nuevo","Intento de llamada","Enviar mensaje de bienvenida","Escribir por WhatsApp","Enviar correo inicial","Responder consulta del lead"]},{name:"Seguimiento",options:["Seguimiento por llamada","Seguimiento por WhatsApp","Seguimiento por email","Reintentar contacto","Dar seguimiento a cotizacin","Confirmar inters del cliente","Validar necesidades del cliente","Resolver dudas del cliente"]},{name:"Reuniones y citas",options:["Agendar cita","Confirmar cita","Reunin inicial","Reunin de seguimiento","Reunin de presentacin","Reunin de propuesta","Llamada de descubrimiento","Demo del producto/servicio","Presentacin comercial"]},{name:"Propuesta y negociacin",options:["Enviar propuesta","Preparar propuesta comercial","Ajustar propuesta","Negociar condiciones","Revisar feedback del cliente","Enviar cotizacin","Explicar propuesta al cliente"]},{name:"Cierre",options:["Cerrar venta","Cerrar trato","Solicitar confirmacin final","Enviar contrato","Firmar contrato","Coordinar pago","Confirmar cierre","Venta ganada ","Venta perdida "]},{name:"Postventa",options:["Onboarding del cliente","Entrega de servicio","Seguimiento postventa","Solicitar feedback","Solicitar testimonio","Upsell / Cross-sell","Renovacin de servicio","Soporte al cliente"]},{name:"Administrativas / internas",options:["Actualizar informacin del lead","Registrar llamada","Registrar nota de reunin","Revisar historial del cliente","Calificar lead","Asignar lead","Cerrar tarea pendiente"]}],Lke=t=>{const e=t.toLowerCase();return e.includes("llamar")||e.includes("llamada")||e.includes("telfono")?"Call":e.includes("correo")||e.includes("email")||e.includes("mensaje")||e.includes("whatsapp")?"Email":e.includes("reunin")||e.includes("cita")||e.includes("demo")||e.includes("presentacin")||e.includes("discovery")?"Meeting":"Task"},Ag=({isOpen:t,onClose:e,onSubmit:n,contact:r,contacts:i,currentUser:a,team:s=[],initialTask:o})=>{var h;const[l,u]=q.useState(Qp[0].name),[d,f]=q.useState({title:"",dueDate:new Date().toISOString().split("T")[0],dueTime:"10:00",description:"",priority:"Normal",assignedTo:(a==null?void 0:a.name)||"Me",contactId:(r==null?void 0:r.id)||"",reminder:{enabled:!0,timeValue:30,timeUnit:"minutes"}});if(q.useEffect(()=>{if(t)if(o){f({title:o.title,dueDate:o.dueDate,dueTime:o.dueTime||"10:00",description:o.description||"",priority:o.priority,assignedTo:o.assignedTo,contactId:o.relatedContactId||"",reminder:{enabled:!0,timeValue:30,timeUnit:"minutes"}});const m=Qp.find(g=>g.options.includes(o.title));m&&u(m.name)}else f({title:"",dueDate:new Date().toISOString().split("T")[0],dueTime:"10:00",description:"",priority:"Normal",assignedTo:(a==null?void 0:a.name)||"Me",contactId:(r==null?void 0:r.id)||"",reminder:{enabled:!0,timeValue:30,timeUnit:"minutes"}}),u(Qp[0].name)},[t,a,r,o]),!t)return null;const p=async m=>{if(m.preventDefault(),!d.title)return;const g=Lke(d.title),y=r||(i==null?void 0:i.find(w=>w.id===d.contactId)),x={title:d.title,type:g,dueDate:d.dueDate,dueTime:d.dueTime,description:d.description,status:"Pending",priority:d.priority,assignedTo:d.assignedTo,relatedContactName:y==null?void 0:y.name,relatedContactId:y==null?void 0:y.id,reminder:d.reminder};await n(x)};return c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:c.jsx(Wi,{size:20})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:o?"Editar Tarea":"Nueva Tarea"})]}),c.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors",children:c.jsx(yn,{size:24})})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[!r&&i&&i.length>0&&c.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-200",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Contacto Relacionado"}),c.jsxs("select",{value:d.contactId,onChange:m=>f({...d,contactId:m.target.value}),title:"Seleccionar contacto relacionado","aria-label":"Seleccionar contacto relacionado",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",children:[c.jsx("option",{value:"",children:"-- Sin contacto especfico --"}),i.map(m=>c.jsxs("option",{value:m.id,children:[m.name," (",m.company,")"]},m.id))]})]}),c.jsxs("div",{className:"space-y-3 bg-slate-50 p-3 rounded-xl border border-slate-200",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Qu quieres hacer?"}),c.jsx("select",{value:l,onChange:m=>{u(m.target.value),f(g=>({...g,title:""}))},title:"Categora de tarea","aria-label":"Categora de tarea",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",children:Qp.map(m=>c.jsx("option",{value:m.name,children:m.name},m.name))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Accin Especfica"}),c.jsxs("select",{value:d.title,onChange:m=>f({...d,title:m.target.value}),title:"Accin especfica de tarea","aria-label":"Accin especfica de tarea",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-medium",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar accin..."}),(h=Qp.find(m=>m.name===l))==null?void 0:h.options.map(m=>c.jsx("option",{value:m,children:m},m))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fecha"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",readOnly:!0,value:d.dueDate?nn(Hj(d.dueDate),"dd/MM/yyyy"):"",title:"Fecha de vencimiento (formato)",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"}),c.jsx("input",{required:!0,type:"date",value:d.dueDate,title:"Seleccionar Fecha",onChange:m=>f({...d,dueDate:m.target.value}),onClick:m=>m.target.showPicker&&m.target.showPicker(),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),c.jsx(fo,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hora"}),c.jsx("input",{required:!0,type:"time",value:d.dueTime,onChange:m=>f({...d,dueTime:m.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prioridad"}),c.jsxs("select",{value:d.priority,onChange:m=>f({...d,priority:m.target.value}),title:"Prioridad de la tarea","aria-label":"Prioridad de la tarea",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",children:[c.jsx("option",{value:"Low",children:"Baja"}),c.jsx("option",{value:"Normal",children:"Normal"}),c.jsx("option",{value:"High",children:"Alta"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asignar a"}),c.jsxs("select",{value:d.assignedTo,onChange:m=>f({...d,assignedTo:m.target.value}),title:"Asignar tarea a","aria-label":"Asignar tarea a",className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",children:[c.jsx("option",{value:(a==null?void 0:a.name)||"Me",children:"M (Actual)"}),s.filter(m=>m.role!=="Support").map(m=>c.jsx("option",{value:m.name,children:m.name},m.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descripcin (Opcional)"}),c.jsx(C4,{content:d.description,onChange:m=>f({...d,description:m}),placeholder:"Detalles adicionales...",minHeight:"80px"})]}),c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[c.jsx(xc,{size:16,className:"text-blue-600"})," Recordatorio"]}),c.jsx("input",{type:"checkbox",checked:d.reminder.enabled,onChange:m=>f({...d,reminder:{...d.reminder,enabled:m.target.checked}}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"})]}),d.reminder.enabled&&c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("span",{className:"text-sm text-slate-600",children:"Avisar"}),c.jsx("input",{type:"number",min:"1",value:d.reminder.timeValue,title:"Valor del tiempo de recordatorio",onChange:m=>f({...d,reminder:{...d.reminder,timeValue:Number(m.target.value)}}),className:"w-16 px-2 py-1 bg-white border border-slate-300 rounded text-sm text-center"}),c.jsxs("select",{value:d.reminder.timeUnit,onChange:m=>f({...d,reminder:{...d.reminder,timeUnit:m.target.value}}),title:"Unidad de tiempo del recordatorio","aria-label":"Unidad de tiempo del recordatorio",className:"px-2 py-1 bg-white border border-slate-300 rounded text-sm",children:[c.jsx("option",{value:"minutes",children:"Minutos antes"}),c.jsx("option",{value:"hours",children:"Horas antes"}),c.jsx("option",{value:"days",children:"Das antes"})]})]})]}),c.jsx("div",{className:"pt-2",children:c.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm flex items-center justify-center gap-2",children:[c.jsx(Wi,{size:18}),"Guardar Tarea"]})})]})]})})};function Ike(t){const[e,n]=q.useState(!1);return q.useEffect(()=>{const r=window.matchMedia(t);n(r.matches);const i=a=>n(a.matches);return r.addEventListener?(r.addEventListener("change",i),()=>r.removeEventListener("change",i)):(r.addListener(i),()=>r.removeListener(i))},[t]),e}const H9=()=>Ike("(max-width: 768px)"),Gv=({title:t,value:e,icon:n,color:r})=>c.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-500",children:t}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mt-2",children:e})]}),c.jsx("div",{className:`p-3 rounded-lg ${r} bg-opacity-10`,children:c.jsx(n,{className:`w-6 h-6 ${r.replace("bg-","text-")}`})})]})}),Kv=({currentUser:t,tasks:e,setTasks:n,appointments:r=[],contacts:i,companyCurrency:a="USD",onViewAllTasks:s})=>{var I;const o=(t==null?void 0:t.role)==="MANAGER",[l,u]=q.useState(!1),d=H9(),[f,p]=q.useState(()=>{const k=localStorage.getItem("nexus_dashboard_show_stats");return k!==null?JSON.parse(k):!0}),h=()=>{const k=!f;p(k),localStorage.setItem("nexus_dashboard_show_stats",JSON.stringify(k))},m=r.filter(k=>(k.assignedTo===(t==null?void 0:t.name)||k.userName===(t==null?void 0:t.name))&&new Date(k.start)>=new Date).map(k=>({id:k.id,title:k.title,status:"Pending",dueDate:nn(new Date(k.start),"yyyy-MM-dd"),dueTime:nn(new Date(k.start),"HH:mm"),priority:"Normal",assignedTo:k.assignedTo||k.userName,relatedContactName:k.contactName,type:"Meeting",isAppointment:!0,description:k.description,location:k.location})),y=[...e.filter(k=>k.assignedTo===(t==null?void 0:t.name)&&k.status!=="Done"),...m].sort((k,O)=>{const R=new Date(`${k.dueDate}T${k.dueTime||"00:00"}`),D=new Date(`${O.dueDate}T${O.dueTime||"00:00"}`);return R.getTime()-D.getTime()}),x=k=>{if(k.status==="Done")return!1;if(k.isAppointment){const R=new Date;return new Date(`${k.dueDate}T${k.dueTime}`)<R}const O=new Date().toISOString().split("T")[0];return k.dueDate<O},w=o?i:i.filter(k=>k.owner===(t==null?void 0:t.name)),S=w.reduce((k,O)=>k+O.value,0),N=w.length,j=w.filter(k=>k.status===ot.WON).length,E=N>0?(j/N*100).toFixed(1):"0.0";w.filter(k=>k.status===ot.NEW).length,w.filter(k=>k.status===ot.CONTACTED).length,w.filter(k=>k.status===ot.MEETING).length,w.filter(k=>k.status===ot.PROPOSAL).length,w.filter(k=>k.status===ot.NEGOTIATION).length,w.filter(k=>k.status===ot.WON).length;const C=async k=>{try{const{api:O}=await Et(async()=>{const{api:R}=await Promise.resolve().then(()=>Ot);return{api:R}},void 0,import.meta.url);await O.tasks.update(k,{status:"Done"}),n(e.map(R=>R.id===k?{...R,status:"Done"}:R))}catch(O){console.error("Error completing task:",O)}},P=async k=>{try{const{api:O}=await Et(async()=>{const{api:V}=await Promise.resolve().then(()=>Ot);return{api:V}},void 0,import.meta.url),R={...k,status:"Pending",assignedTo:k.assignedTo||(t==null?void 0:t.name)||"Me"},D=await O.tasks.create(R),B={...R,id:D.id||Date.now().toString()};n([B,...e]),u(!1)}catch(O){console.error("Error creating task:",O)}},T=[{name:"Nuevos",value:w.filter(k=>k.status===ot.NEW).reduce((k,O)=>k+O.value,0)},{name:"Contactados",value:w.filter(k=>k.status===ot.CONTACTED).reduce((k,O)=>k+O.value,0)},{name:"Reuniones",value:w.filter(k=>k.status===ot.MEETING).reduce((k,O)=>k+O.value,0)},{name:"Propuestas",value:w.filter(k=>k.status===ot.PROPOSAL).reduce((k,O)=>k+O.value,0)},{name:"Negociacin",value:w.filter(k=>k.status===ot.NEGOTIATION).reduce((k,O)=>k+O.value,0)},{name:"Ganados",value:w.filter(k=>k.status===ot.WON).reduce((k,O)=>k+O.value,0)}];return c.jsxs("div",{className:"h-full flex flex-col p-4 md:p-6 bg-slate-50 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Hola, ",((I=t==null?void 0:t.name)==null?void 0:I.split(" ")[0])||"Usuario"," "]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("p",{className:"text-slate-500",children:"Aqu tienes un resumen de tu actividad hoy."}),d&&c.jsx("button",{onClick:h,className:"text-slate-400 hover:text-blue-600 transition-colors p-1 rounded-md hover:bg-slate-100",title:f?"Ocultar estadsticas":"Mostrar estadsticas",children:f?c.jsx(PE,{size:16}):c.jsx(Xu,{size:16})})]})]}),c.jsx("div",{className:"flex gap-2",children:!d&&c.jsxs("button",{onClick:h,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${f?"text-slate-600 bg-white border border-slate-200 hover:bg-slate-50":"text-blue-600 bg-blue-50 border border-blue-100 hover:bg-blue-100"}`,children:[f?c.jsx(PE,{size:16}):c.jsx(Xu,{size:16}),f?"Ocultar Resumen":"Mostrar Resumen"]})})]}),f&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 animate-in fade-in slide-in-from-top-4 duration-300",children:[c.jsx(Gv,{title:"Total Leads",value:N,icon:Bc,color:"bg-blue-500"}),c.jsx(Gv,{title:"Valor Pipeline",value:hl(S,a),icon:eD,color:"bg-green-500"}),c.jsx(Gv,{title:"Tasa Conversin",value:`${E}%`,icon:rD,color:"bg-purple-500"}),c.jsx(Gv,{title:"Leads Ganados",value:j,icon:vx,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Valor por Etapa"}),c.jsx("div",{className:"flex-1 w-full min-h-[300px]",children:c.jsx(zN,{width:"100%",height:"100%",children:c.jsxs(U$,{data:T,margin:{top:10,right:30,left:0,bottom:0},children:[c.jsx(z3,{strokeDasharray:"3 3",vertical:!1}),c.jsx(bg,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:d?10:12,fill:"#64748b"},dy:10,interval:d?0:"preserveEnd",angle:d?-45:0,textAnchor:d?"end":"middle",height:d?60:30}),c.jsx(wg,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#64748b"},tickFormatter:k=>`$${k/1e3}k`}),c.jsx(rs,{cursor:{fill:"transparent"},contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},itemStyle:{color:"#1e293b"},formatter:k=>[`$${k.toLocaleString()}`,"Valor"]}),c.jsx(Zc,{dataKey:"value",fill:"#2563eb",radius:[4,4,0,0],barSize:d?24:40,children:T.map((k,O)=>c.jsx(ph,{fill:["#94a3b8","#3b82f6","#14b8a6","#06b6d4","#10b981"][O]||"#2563eb"},`cell-${O}`))})]})})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 h-[400px] flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[c.jsx(Wi,{className:"text-blue-600",size:20}),"Mis Prximas Tareas"]}),s&&c.jsx("button",{onClick:s,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Ver todas"})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:y.length>0?y.slice(0,10).map(k=>{var R;const O=x(k);return c.jsxs("div",{className:`p-3 border rounded-lg hover:bg-slate-50 transition-colors group ${O?"border-red-300 bg-red-50":"border-slate-100"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase ${k.isAppointment?"bg-purple-100 text-purple-600":k.priority==="High"?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:k.isAppointment?"Cita":k.priority==="High"?"Alta":k.priority==="Normal"?"Normal":"Baja"}),c.jsxs("span",{className:`text-xs ${O?"text-red-600 font-bold":"text-slate-400"}`,children:[k.dueDate," ",k.dueTime?` ${k.dueTime}`:""," ",O&&"(Vencida)"]})]}),c.jsx("h4",{className:`text-sm font-medium ${O?"text-red-900":"text-slate-800"}`,children:k.title}),k.location&&c.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[c.jsx($u,{size:10})," ",k.location]}),k.relatedContactName&&c.jsxs("p",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[c.jsx(Bc,{size:10})," ",k.relatedContactName]}),((R=k.reminder)==null?void 0:R.enabled)&&c.jsxs("p",{className:"text-[10px] text-blue-500 mt-1 flex items-center gap-1",children:[c.jsx(Wi,{size:10})," Recordatorio: ",k.reminder.timeValue," ",k.reminder.timeUnit," antes"]}),k.isAppointment?c.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-slate-500 bg-slate-50 p-2 rounded border border-slate-100",children:[c.jsx(fo,{size:12,className:"text-purple-500"}),c.jsx("span",{children:"Ver detalle en Agenda"})]}):c.jsxs("div",{className:"mt-3 flex gap-2",children:[c.jsxs("button",{onClick:()=>C(k.id),className:"flex-1 bg-white border border-slate-200 text-slate-600 text-xs py-1.5 rounded hover:bg-green-50 hover:text-green-600 hover:border-green-200 transition-colors flex items-center justify-center gap-1",children:[c.jsx(Wi,{size:12})," Completar"]}),k.type==="Call"&&c.jsx("button",{"aria-label":"Call",className:"px-2 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:c.jsx(dg,{size:12})}),k.type==="Email"&&c.jsx("button",{"aria-label":"Email",className:"px-2 bg-blue-50 text-blue-600 rounded hover:bg-blue-100",children:c.jsx(gi,{size:12})})]})]},k.id)}):c.jsxs("div",{className:"text-center py-8 text-slate-400",children:[c.jsx(Wi,{size:32,className:"mx-auto mb-2 opacity-20"}),c.jsx("p",{className:"text-sm",children:"No hay tareas pendientes."})]})}),c.jsx("button",{onClick:()=>u(!0),className:"mt-4 w-full py-2 border border-dashed border-slate-300 rounded-lg text-slate-500 text-sm hover:bg-slate-50 hover:text-slate-700",children:"+ Agregar Nueva Tarea"})]})]}),c.jsx(Ag,{isOpen:l,onClose:()=>u(!1),onSubmit:P,contacts:w,currentUser:t})]})},Dke=({contact:t,products:e,onSaveQuote:n})=>{const[r,i]=q.useState([]),[a,s]=q.useState(!1),[o,l]=q.useState(!1),u=r.reduce((g,y)=>g+y.product.price*y.quantity,0),d=u*.16,f=u+d,p=g=>{const y=e.find(w=>w.id===g);if(!y)return;const x=r.find(w=>w.product.id===g);i(x?r.map(w=>w.product.id===g?{...w,quantity:w.quantity+1}:w):[...r,{product:y,quantity:1}])},h=g=>{i(r.filter(y=>y.product.id!==g))},m=()=>{r.length!==0&&(s(!0),setTimeout(()=>{const y={id:`QT-${Date.now()}`,name:`Cotizacin - ${t.company||t.name}`,type:"PDF / Quote",url:"#",createdAt:new Date().toLocaleString()};n(y),s(!1),l(!0),i([]),setTimeout(()=>l(!1),3e3)},1500))};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-600 rounded-lg text-white",children:c.jsx(rl,{size:20})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-blue-900",children:"Generador de Cotizaciones (CPQ)"}),c.jsx("p",{className:"text-[11px] text-blue-700",children:"Selecciona productos para generar una propuesta formal."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1",children:"Agregar Producto"}),c.jsx("div",{className:"flex gap-2",children:c.jsxs("select",{className:"flex-1 px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500",onChange:g=>{g.target.value&&(p(g.target.value),g.target.value="")},children:[c.jsx("option",{value:"",children:"Seleccionar producto..."}),e.map(g=>c.jsxs("option",{value:g.id,children:[g.name," ($",g.price,")"]},g.id))]})})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:[c.jsxs("table",{className:"w-full text-left text-sm",children:[c.jsx("thead",{className:"bg-slate-50 text-slate-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 font-semibold",children:"Producto"}),c.jsx("th",{className:"px-4 py-2 font-semibold text-center",children:"Cant."}),c.jsx("th",{className:"px-4 py-2 font-semibold text-right",children:"Subtotal"}),c.jsx("th",{className:"px-4 py-2"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:r.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-slate-400 italic",children:"No hay productos seleccionados."})}):r.map(g=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:g.product.name}),c.jsx("td",{className:"px-4 py-3 text-center",children:g.quantity}),c.jsxs("td",{className:"px-4 py-3 text-right text-slate-600",children:["$",(g.product.price*g.quantity).toLocaleString()]}),c.jsx("td",{className:"px-4 py-3 text-right",children:c.jsx("button",{onClick:()=>h(g.product.id),className:"text-slate-300 hover:text-red-500 transition-colors",children:c.jsx(Ra,{size:16})})})]},g.product.id))})]}),r.length>0&&c.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"Subtotal"}),c.jsxs("span",{children:["$",u.toLocaleString()]})]}),c.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"Impuestos (16%)"}),c.jsxs("span",{children:["$",d.toLocaleString()]})]}),c.jsxs("div",{className:"flex justify-between text-sm font-bold text-slate-900 pt-1",children:[c.jsx("span",{children:"Total Estimado"}),c.jsxs("span",{children:["$",f.toLocaleString()]})]})]})]}),c.jsxs("button",{onClick:m,disabled:r.length===0||a,className:`w-full py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-all shadow-lg ${r.length===0||a?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":"bg-green-600 text-white hover:bg-green-700 shadow-green-100"}`,children:[a?c.jsx(fi,{className:"animate-spin"}):c.jsx(Sb,{size:18}),a?"Generando PDF...":"Generar y Registrar Propuesta"]}),o&&c.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-xs font-bold justify-center animate-bounce",children:[c.jsx(sa,{size:14})," Propuesta registrada en Documentos!"]})]})]})};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aM;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(aM||(aM={}));var sM;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sM||(sM={}));var oM;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(oM||(oM={}));var lM;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(lM||(lM={}));var J1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER"})(J1||(J1={}));var cM;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(cM||(cM={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class uM extends eg{constructor(e,n){super(e),this.response=n}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rke="https://generativelanguage.googleapis.com",$ke="v1",zke="0.1.3",Fke="genai-js";var jd;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(jd||(jd={}));class Cg{constructor(e,n,r,i){this.model=e,this.task=n,this.apiKey=r,this.stream=i}toString(){let e=`${Rke}/${$ke}/models/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function Bke(){return`${Fke}/${zke}`}async function Eg(t,e){let n;try{if(n=await fetch(t.toString(),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":Bke(),"x-goog-api-key":t.apiKey},body:e}),!n.ok){let r="";try{const i=await n.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${r}`)}}catch(r){const i=new eg(`Error fetching from ${t.toString()}: ${r.message}`);throw i.stack=r.stack,i}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),W9(t.candidates[0]))throw new uM(`${Z1(t)}`,t);return Hke(t)}else if(t.promptFeedback)throw new uM(`Text not available. ${Z1(t)}`,t);return""},t}function Hke(t){var e,n,r,i;return!((i=(r=(n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r[0])===null||i===void 0)&&i.text?t.candidates[0].content.parts[0].text:""}const Wke=[J1.RECITATION,J1.SAFETY];function W9(t){return!!t.finishReason&&Wke.includes(t.finishReason)}function Z1(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const a=t.candidates[0];W9(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function tg(t){return this instanceof tg?(this.v=t,this):new tg(t)}function qke(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(p){r[p]&&(i[p]=function(h){return new Promise(function(m,g){a.push([p,h,m,g])>1||o(p,h)})})}function o(p,h){try{l(r[p](h))}catch(m){f(a[0][3],m)}}function l(p){p.value instanceof tg?Promise.resolve(p.value.v).then(u,d):f(a[0][2],p)}function u(p){o("next",p)}function d(p){o("throw",p)}function f(p,h){p(h),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Uke(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Kke(e),[r,i]=n.tee();return{stream:Gke(r),response:Vke(i)}}async function Vke(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return E4(Yke(e));e.push(i)}}function Gke(t){return qke(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield tg(n.read());if(i)break;yield yield tg(E4(r))}})}function Kke(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return a();function a(){return e.read().then(({value:s,done:o})=>{if(o){if(i.trim()){r.error(new eg("Failed to parse stream"));return}r.close();return}i+=s;let l=i.match(dM),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new eg(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),i=i.substring(l[0].length),l=i.match(dM)}return a()})}}})}function Yke(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const a=i.index;if(n.candidates||(n.candidates=[]),n.candidates[a]||(n.candidates[a]={index:i.index}),n.candidates[a].citationMetadata=i.citationMetadata,n.candidates[a].finishReason=i.finishReason,n.candidates[a].finishMessage=i.finishMessage,n.candidates[a].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[a].content||(n.candidates[a].content={role:i.content.role||"user",parts:[{text:""}]});for(const s of i.content.parts)s.text&&(n.candidates[a].content.parts[0].text+=s.text)}}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e,n){const r=new Cg(e,jd.STREAM_GENERATE_CONTENT,t,!0),i=await Eg(r,JSON.stringify(n));return Uke(i)}async function U9(t,e,n){const r=new Cg(e,jd.GENERATE_CONTENT,t,!1),a=await(await Eg(r,JSON.stringify(n))).json();return{response:E4(a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){let n=[];if(typeof t=="string")n=[{text:t}];else for(const r of t)typeof r=="string"?n.push({text:r}):n.push(r);return{role:e,parts:n}}function W5(t){return t.contents?t:{contents:[zm(t,"user")]}}function Xke(t){return typeof t=="string"||Array.isArray(t)?{content:zm(t,"user")}:t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="SILENT_ERROR";class Jke{constructor(e,n,r){this.model=n,this.params=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(this._history=r.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return zm(i.parts,i.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var n,r;await this._sendPromise;const i=zm(e,"user"),a={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]};let s;return this._sendPromise=this._sendPromise.then(()=>U9(this._apiKey,this.model,a)).then(o=>{var l;if(o.response.candidates&&o.response.candidates.length>0){this._history.push(i);const u=Object.assign({parts:[],role:"model"},(l=o.response.candidates)===null||l===void 0?void 0:l[0].content);this._history.push(u)}else{const u=Z1(o.response);u&&console.warn(`sendMessage() was unsuccessful. ${u}. Inspect response object for details.`)}s=o}),await this._sendPromise,s}async sendMessageStream(e){var n,r;await this._sendPromise;const i=zm(e,"user"),a={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]},s=q9(this._apiKey,this.model,a);return this._sendPromise=this._sendPromise.then(()=>s).catch(o=>{throw new Error(fM)}).then(o=>o.response).then(o=>{if(o.candidates&&o.candidates.length>0){this._history.push(i);const l=Object.assign({},o.candidates[0].content);l.role||(l.role="model"),this._history.push(l)}else{const l=Z1(o);l&&console.warn(`sendMessageStream() was unsuccessful. ${l}. Inspect response object for details.`)}}).catch(o=>{o.message!==fM&&console.error(o)}),s}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zke(t,e,n){const r=new Cg(e,jd.COUNT_TOKENS,t,!1);return(await Eg(r,JSON.stringify(Object.assign(Object.assign({},n),{model:e})))).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qke(t,e,n){const r=new Cg(e,jd.EMBED_CONTENT,t,!1);return(await Eg(r,JSON.stringify(n))).json()}async function eAe(t,e,n){const r=new Cg(e,jd.BATCH_EMBED_CONTENTS,t,!1),i=n.requests.map(s=>Object.assign(Object.assign({},s),{model:`models/${e}`}));return(await Eg(r,JSON.stringify({requests:i}))).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tAe{constructor(e,n){var r;this.apiKey=e,n.model.startsWith("models/")?this.model=(r=n.model.split("models/"))===null||r===void 0?void 0:r[1]:this.model=n.model,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[]}async generateContent(e){const n=W5(e);return U9(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n))}async generateContentStream(e){const n=W5(e);return q9(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n))}startChat(e){return new Jke(this.apiKey,this.model,e)}async countTokens(e){const n=W5(e);return Zke(this.apiKey,this.model,n)}async embedContent(e){const n=Xke(e);return Qke(this.apiKey,this.model,n)}async batchEmbedContents(e){return eAe(this.apiKey,this.model,e)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this.apiKey=e}getGenerativeModel(e){if(!e.model)throw new eg("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new tAe(this.apiKey,e)}}var hM={};const V9=({contact:t,onClose:e,onUpdateContact:n,onNavigateToChat:r,onOpenWhatsApp:i,onCreateTask:a,products:s,companyCurrency:o,hasAiAccess:l=!1,contactAppointments:u=[],aiConfig:d,onNotify:f})=>{const[p,h]=q.useState("info"),[m,g]=q.useState(""),[y,x]=q.useState(!1),[w,S]=q.useState(!1),[N,j]=q.useState(null),[E,C]=q.useState(t.bant||{}),[P,T]=q.useState(!1);q.useEffect(()=>{C(t.bant||{}),j(null),h("info")},[t.id]);const I=B=>{B.target.files&&B.target.files[0]&&n&&(x(!0),setTimeout(()=>{const V=B.target.files[0],Z={id:Date.now().toString(),name:V.name,type:V.type,url:"#",createdAt:new Date().toISOString()},H=[...t.documents||[],Z];n(t.id,{documents:H}),x(!1)},1500))},k=()=>{if(n&&t&&m.trim()){const V=[{id:Date.now().toString(),content:m,createdAt:new Date().toLocaleString(),author:"Usuario"},...t.notes||[]];n(t.id,{notes:V}),g(""),f&&f("Nota Agregada","La nota se ha guardado correctamente.","success")}},O=()=>{n&&(n(t.id,{bant:E}),f&&f("BANT Actualizado","La calificacin se ha guardado.","success"))},R=B=>{if(n){const V=t.documents||[];n(t.id,{documents:[B,...V]})}},D=async()=>{var B,V;if(!(!(d!=null&&d.apiKey)&&!hM.API_KEY)){S(!0);try{const Z=(d==null?void 0:d.apiKey)||hM.API_KEY||"",H=`
            Acta como un Experto Senior en Ventas (Sales Coach). Analiza esta oportunidad de venta.
            
            Contexto:
            - Cliente: ${t.name} (${t.company})
            - Valor del Trato: ${t.value}
            - Etapa Actual: ${t.status}
            - Productos Disponibles: ${s.map(le=>`${le.name} ($${le.price})`).join(", ")}
            - Calificacin BANT: ${t.bant?JSON.stringify(t.bant):"No calificado an"}
            
            Historial de Conversacin:
            ${t.history.map(le=>`${le.sender}: ${le.content}`).join(`
`)}

            Instrucciones:
            Analiza la probabilidad de cierre basndote en el inters mostrado y el historial.
            Proporciona consejos tcticos para mover el trato a la siguiente etapa.
            
            Devuelve NICAMENTE un objeto JSON vlido (sin bloques de cdigo ni markdown):
            {
                "score": (entero 0-100 representando la probabilidad de cierre),
                "advice": (cadena, 1-2 oraciones de consejo estratgico EN ESPAOL),
                "nextStep": (cadena, una accin especfica a tomar ahora mismo EN ESPAOL)
            }
          `;let Q="";if((d==null?void 0:d.provider)==="openai"){const L=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({model:d.model||"gpt-4",messages:[{role:"system",content:"You are a helpful JSON response generator."},{role:"user",content:H}],max_tokens:300,response_format:{type:"json_object"}})})).json();if(L.error)throw new Error(L.error.message);Q=((V=(B=L.choices[0])==null?void 0:B.message)==null?void 0:V.content)||"{}"}else{const le=new Gu(Z),L=(d==null?void 0:d.model)||"gemini-1.5-flash",F=L.includes("gemini-pro")?"gemini-1.5-flash":L;Q=(await le.getGenerativeModel({model:F}).generateContent(H)).response.text().replace(/```json/g,"").replace(/```/g,"").trim()}const fe=JSON.parse(Q);j(fe),f&&f("Anlisis Completado","Tu Sales Coach ha generado nuevas recomendaciones.","success")}catch(Z){console.error("AI Analysis Failed",Z),j({score:50,advice:"No se pudo conectar con la IA. Revisa tu conexin.",nextStep:"Intentar manualmente."}),f&&f("Error de Anlisis","Hubo un problema al consultar la IA.","error")}finally{S(!1)}}};return c.jsxs("div",{className:"absolute inset-y-0 right-0 w-full md:w-96 bg-white shadow-2xl border-l border-slate-200 transform transition-transform duration-300 ease-in-out z-[60] flex flex-col slide-in-from-right",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("button",{onClick:e,className:"md:hidden text-slate-600",children:c.jsx(Q8,{})}),c.jsx("button",{onClick:e,className:"hidden md:block text-slate-400 hover:text-slate-600 ml-auto",children:c.jsx(yn,{size:24})})]}),c.jsx("div",{className:"flex items-center gap-3 mb-4",children:c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900 leading-tight flex items-center gap-2",children:t.name}),c.jsx("p",{className:"text-sm text-slate-500",children:t.company})]})}),c.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>h("info"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all ${p==="info"?"bg-white text-slate-900 shadow":"text-slate-500 hover:text-slate-700"}`,children:"Informacin"}),l&&c.jsxs("button",{onClick:()=>h("ai"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${p==="ai"?"bg-blue-600 text-white shadow":"text-blue-600 hover:bg-blue-50"}`,children:[c.jsx(Sm,{size:12})," AI Coach"]}),c.jsxs("button",{onClick:()=>h("qual"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${p==="qual"?"bg-amber-500 text-white shadow":"text-amber-600 hover:bg-amber-50"}`,children:[c.jsx(Nb,{size:12})," BANT"]}),c.jsxs("button",{onClick:()=>h("docs"),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center gap-1 ${p==="docs"?"bg-green-600 text-white shadow":"text-green-600 hover:bg-green-50"}`,children:[c.jsx(rl,{size:12})," Docs"]})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[p==="info"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[c.jsxs("button",{onClick:()=>r&&r(t.id),className:"flex-1 min-w-[120px] bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 shadow-sm flex items-center justify-center gap-2",children:[c.jsx(Wf,{size:18})," Ir al Chat"]}),c.jsxs("button",{onClick:i,className:"flex-1 min-w-[120px] bg-[#25D366] text-white py-2 rounded-lg font-medium hover:bg-[#128C7E] shadow-sm flex items-center justify-center gap-2",children:[c.jsx(jb,{size:18})," WhatsApp"]}),c.jsxs("button",{className:"flex-1 min-w-[120px] bg-white border border-slate-300 text-slate-700 py-2 rounded-lg font-medium hover:bg-slate-50 flex items-center justify-center gap-2",children:[c.jsx(dg,{size:18})," Llamar"]}),c.jsxs("button",{onClick:a,className:"flex-1 min-w-[120px] bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 shadow-sm flex items-center justify-center gap-2",children:[c.jsx(xc,{size:18})," Tarea"]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg shadow-sm",children:[c.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Valor"}),c.jsx("p",{className:"text-lg font-bold text-slate-900",children:hl(t.value,o)})]}),c.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg shadow-sm",children:[c.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Probabilidad"}),c.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[t.probability,"%"]})]})]}),c.jsxs("div",{children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-2 flex items-center gap-2",children:[c.jsx(Ou,{size:16,className:"text-blue-600"})," Info Contacto"]}),c.jsxs("ul",{className:"space-y-2 text-sm text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[c.jsxs("li",{className:"flex justify-between border-b border-slate-200 pb-1",children:[c.jsx("span",{children:"Email:"})," ",c.jsx("span",{className:"text-slate-900 font-medium truncate max-w-[180px]",children:t.email})]}),c.jsxs("li",{className:"flex justify-between border-b border-slate-200 pb-1",children:[c.jsx("span",{children:"Tel:"})," ",c.jsx("span",{className:"text-slate-900 font-medium",children:t.phone})]}),c.jsxs("li",{className:"flex justify-between border-b border-slate-200 pb-1",children:[c.jsx("span",{children:"Fuente:"})," ",c.jsx("span",{className:"text-slate-900 font-medium",children:t.source})]}),c.jsxs("li",{className:"flex justify-between",children:[c.jsx("span",{children:"Dueo:"})," ",c.jsx("span",{className:"text-blue-600 font-medium",children:t.owner})]})]})]}),c.jsxs("div",{className:"bg-blue-50/50 border border-blue-100 rounded-xl p-4 shadow-inner",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:[c.jsx(Sm,{size:16,className:"text-blue-600"})," Concordancia de Producto"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(B=>c.jsx("button",{onClick:()=>{const V=t.productInterests||[],Z=V.includes(B.name)?V.filter(H=>H!==B.name):[...V,B.name];n==null||n(t.id,{productInterests:Z})},className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${(t.productInterests||[]).includes(B.name)?"bg-blue-600 text-white border-blue-700 shadow-md":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:B.name},B.id))}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-3 italic text-center",children:"Selecciona productos para calibrar la atribucin en reportes."})]}),c.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-4 flex items-center gap-2",children:[c.jsx(xc,{size:16,className:"text-blue-600"})," Historial & Notas"]}),c.jsxs("div",{className:"mb-6 bg-slate-50 p-3 rounded-xl border border-slate-200",children:[c.jsx("textarea",{value:m,onChange:B=>g(B.target.value),placeholder:"Escribe una nota sobre la conversacin, detalles importantes, etc...",className:"w-full p-3 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none bg-white mb-2",rows:3}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{onClick:k,disabled:!m.trim(),className:"bg-blue-600 text-white text-xs font-bold py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:[c.jsx(ay,{size:14})," Guardar Nota"]})})]}),c.jsxs("div",{className:"relative pl-4 border-l-2 border-slate-200 space-y-6",children:[u.length>0&&u.map(B=>c.jsxs("div",{className:"relative bg-white p-3 rounded-lg border border-blue-200 shadow-sm",children:[c.jsx("span",{className:"absolute -left-[23px] top-3 w-3 h-3 rounded-full bg-blue-500 border-2 border-white"}),c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsxs("p",{className:"text-xs text-blue-700 font-bold flex items-center gap-1",children:[c.jsx(fo,{size:10})," Cita Programada"]}),c.jsx("span",{className:"text-xs text-slate-400",children:new Date(B.start).toLocaleDateString()})]}),c.jsx("p",{className:"text-sm font-medium text-slate-900",children:B.title}),c.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[new Date(B.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(B.end).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),B.location&&c.jsxs("p",{className:"text-xs text-slate-500 mt-1 italic",children:[" ",B.location]})]},`apt-${B.id}`)),t.notes&&t.notes.length>0&&t.notes.map(B=>c.jsxs("div",{className:"relative bg-amber-50 p-3 rounded-lg border border-amber-100 shadow-sm",children:[c.jsx("span",{className:"absolute -left-[23px] top-3 w-3 h-3 rounded-full bg-amber-400 border-2 border-white ring-2 ring-amber-100"}),c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("p",{className:"text-xs font-bold text-amber-800 uppercase flex items-center gap-1",children:[c.jsx(ay,{size:10})," Nota Interna"]}),c.jsx("span",{className:"text-[10px] text-amber-600",children:B.createdAt})]}),c.jsxs("p",{className:"text-sm text-slate-800 italic",children:['"',B.content,'"']}),c.jsxs("p",{className:"text-xs text-amber-700 mt-2 text-right",children:["- ",B.author]})]},`note-${B.id}`)),t.history.map(B=>c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:`absolute -left-[21px] top-1 w-3 h-3 rounded-full border-2 border-white ${B.sender==="agent"?"bg-blue-500":"bg-green-500"}`}),c.jsxs("div",{className:"flex justify-between mb-0.5",children:[c.jsxs("span",{className:`text-xs font-bold ${B.sender==="agent"?"text-blue-600":"text-green-600"}`,children:[B.sender==="agent"?"Nosotros":"Cliente"," (",B.channel,")"]}),c.jsx("span",{className:"text-[10px] text-slate-400",children:B.timestamp})]}),c.jsx("p",{className:"text-sm text-slate-700 bg-white p-2 rounded border border-slate-100 shadow-sm",children:B.content})]},`hist-${B.id}`))]})]})]}),p==="ai"&&l&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-900 to-slate-900 rounded-xl p-6 text-white text-center",children:[c.jsx(OE,{size:48,className:"mx-auto mb-3 text-blue-400 opacity-80"}),c.jsx("h4",{className:"text-lg font-bold",children:"KiwLead AI Sales Coach"}),c.jsx("p",{className:"text-sm text-blue-200 mt-1",children:"Analizo el historial de conversaciones y el perfil del cliente para aumentar tus cierres."})]}),N?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Probabilidad de Cierre"}),c.jsxs("span",{className:`text-xl font-bold ${N.score>=70?"text-green-600":N.score>=40?"text-amber-500":"text-red-500"}`,children:[N.score,"%"]})]}),c.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:c.jsx("div",{className:`h-2.5 rounded-full ${N.score>=70?"bg-green-500":N.score>=40?"bg-amber-500":"bg-red-500"}`,style:{width:`${N.score}%`}})})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4",children:[c.jsxs("h5",{className:"text-xs font-bold text-blue-800 uppercase mb-2 flex items-center gap-1",children:[c.jsx(OE,{size:14})," Consejo Estratgico"]}),c.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed italic",children:['"',N.advice,'"']})]}),c.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-xl p-4",children:[c.jsxs("h5",{className:"text-xs font-bold text-emerald-800 uppercase mb-2 flex items-center gap-1",children:[c.jsx(Ru,{size:14})," Prximo Paso Recomendado"]}),c.jsx("p",{className:"text-sm text-emerald-900 font-medium",children:N.nextStep})]}),c.jsx("button",{onClick:()=>j(null),className:"text-xs text-slate-400 hover:text-slate-600 w-full text-center mt-2",children:"Regenerar anlisis"})]}):c.jsxs("div",{className:"text-center py-6",children:[c.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Haz clic para generar un reporte predictivo en tiempo real."}),c.jsxs("button",{onClick:D,disabled:w,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-blue-200 transition-all transform active:scale-95 flex items-center gap-2 mx-auto",children:[w?c.jsx(fi,{className:"animate-spin"}):c.jsx(Sm,{}),w?"Analizando...":"Analizar Trato con IA"]})]})]}),p==="qual"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"bg-amber-50 border border-amber-100 p-4 rounded-xl relative",children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("h4",{className:"text-sm font-bold text-amber-800",children:"Calificacin BANT"}),c.jsx("button",{onClick:()=>T(!0),className:"text-amber-600 hover:text-amber-800 p-1 hover:bg-amber-100 rounded transition-colors",title:"Qu es BANT?",children:c.jsx(ug,{size:16})})]}),c.jsx("p",{className:"text-xs text-amber-700",children:"Budget, Authority, Need, Timeline. Evala la calidad de esta oportunidad."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Presupuesto (",o,")"]}),c.jsx("input",{type:"number",value:(E==null?void 0:E.budget)||"",onChange:B=>C({...E,budget:Number(B.target.value)}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Ej. 5000"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[c.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Tiene Autoridad?"}),c.jsx("input",{type:"checkbox",checked:(E==null?void 0:E.authority)||!1,onChange:B=>C({...E,authority:B.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Necesidad Detectada"}),c.jsx("textarea",{value:(E==null?void 0:E.need)||"",onChange:B=>C({...E,need:B.target.value}),rows:2,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Qu problema resolvemos?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Lnea de Tiempo (Timeline)"}),c.jsxs("select",{value:(E==null?void 0:E.timeline)||"",onChange:B=>C({...E,timeline:B.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:ring-2 focus:ring-amber-500",children:[c.jsx("option",{value:"",children:"Seleccionar..."}),c.jsx("option",{value:"Inmediato",children:"Inmediato (1 mes)"}),c.jsx("option",{value:"Corto Plazo",children:"Corto Plazo (1-3 meses)"}),c.jsx("option",{value:"Medio Plazo",children:"Medio Plazo (3-6 meses)"}),c.jsxs("option",{value:"Largo Plazo",children:["Largo Plazo (",">"," 6 meses)"]})]})]}),c.jsx("button",{onClick:O,className:"w-full bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 rounded-lg shadow-md transition-all",children:"Guardar Calificacin"})]})]}),p==="docs"&&c.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[c.jsx(Dke,{contact:t,products:s,onSaveQuote:R}),c.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[c.jsx(rl,{size:16,className:"text-green-600"})," Historial de Documentos"]}),c.jsxs("label",{className:`cursor-pointer text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100 flex items-center gap-1 ${y?"opacity-50 pointer-events-none":""}`,children:[y?"Subiendo...":"+ Subir",c.jsx("input",{type:"file",className:"hidden",onChange:I,accept:".pdf,.doc,.docx,.png,.jpg,.jpeg"})]})]}),c.jsx("div",{className:"space-y-3",children:t.documents&&t.documents.length>0?t.documents.map(B=>c.jsxs("div",{className:"p-3 bg-white border border-slate-200 rounded-lg flex justify-between items-center group hover:border-green-300 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-slate-50 rounded group-hover:bg-green-50",children:c.jsx(rl,{size:18,className:"text-slate-400 group-hover:text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-slate-900 leading-none",children:B.name}),c.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:[B.type,"  ",B.createdAt]})]})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("a",{href:B.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-blue-600 transition-colors",children:c.jsx(Sb,{size:18})})})]},B.id)):c.jsxs("div",{className:"text-center py-6 bg-slate-50 rounded-lg border border-dashed border-slate-300",children:[c.jsx(rl,{size:24,className:"mx-auto mb-2 text-slate-300"}),c.jsx("p",{className:"text-xs text-slate-500",children:"No hay documentos registrados para este trato."})]})})]})]})]}),P&&c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",onClick:()=>T(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 animate-in zoom-in-95 duration-200",onClick:B=>B.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Qu es BANT?"}),c.jsx("button",{onClick:()=>T(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsxs("div",{className:"space-y-4 text-slate-600 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"B (Budget):"})," El cliente tiene el presupuesto necesario?"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"A (Authority):"})," La persona con la que hablas puede tomar la decisin final?"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"N (Need):"})," Tiene una necesidad o problema que tu producto resuelve?"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"T (Timeline):"})," Cundo planean comprar o implementar la solucin?"]})]})]})})]})},q5=({status:t})=>{const e={[ot.NEW]:"bg-blue-100 text-blue-700",[ot.CONTACTED]:"bg-blue-100 text-blue-700",[ot.QUALIFIED]:"bg-cyan-100 text-cyan-700",[ot.NEGOTIATION]:"bg-orange-100 text-orange-700",[ot.WON]:"bg-green-100 text-green-700",[ot.LOST]:"bg-red-100 text-red-700"},n={[ot.NEW]:"Nuevo",[ot.CONTACTED]:"Contactado",[ot.QUALIFIED]:"Calificado",[ot.NEGOTIATION]:"Negociacin",[ot.WON]:"Ganado",[ot.LOST]:"Perdido"};return c.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold ${e[t]||"bg-gray-100 text-gray-700"} whitespace-nowrap`,children:n[t]||t})},nAe=({currentUser:t,contacts:e=[],setContacts:n,onAddContact:r,onNotify:i,team:a=[],onAddTask:s,onNavigateToChat:o,products:l=[],pipelineColumns:u,onMoveContact:d,onUpdateContact:f,enableHeader:p=!0})=>{const[h,m]=q.useState(null),[g,y]=q.useState(!1),[x,w]=q.useState(!1),[S,N]=q.useState(null),[j,E]=q.useState(""),[C,P]=q.useState(!1),[T,I]=q.useState(null),[k,O]=q.useState(new Set),[R,D]=q.useState(""),[B,V]=q.useState(!1),[Z,H]=q.useState(!1),[Q,fe]=q.useState([]),[le,L]=q.useState(null);ue.useEffect(()=>{h?(async()=>{try{const{api:Me}=await Et(async()=>{const{api:st}=await Promise.resolve().then(()=>Ot);return{api:st}},void 0,import.meta.url),ut=await Me.appointments.list({contactId:h.id});fe(ut)}catch(Me){console.error("Failed to fetch appointments",Me)}})():fe([])},[h]);const[F,G]=q.useState(!1),[ee,ie]=q.useState({status:"All",source:"All",owner:"All"}),[se,ye]=q.useState({name:"",company:"",email:"",phone:"",value:0,owner:"Unassigned"}),oe=["MANAGER","Manager","Admin"].includes((t==null?void 0:t.role)||""),we=oe?e:e.filter(ge=>ge.owner===(t==null?void 0:t.name)),be=p?we.filter(ge=>{const Me=ge.name.toLowerCase().includes(R.toLowerCase())||ge.company.toLowerCase().includes(R.toLowerCase())||ge.email.toLowerCase().includes(R.toLowerCase()),ut=ee.status==="All"||ge.status===ee.status,st=ee.source==="All"||ge.source===ee.source;let ft=!0;return ee.owner!=="All"&&(ee.owner==="Unassigned"?ft=ge.owner==="Unassigned"||ge.owner==="Sin asignar":ft=ge.owner===ee.owner),Me&&ut&&st&&ft}):e,de=ge=>e.filter(Me=>Me.owner===ge&&Me.status!==ot.WON&&Me.status!==ot.LOST).length,$e=async()=>{if(!(!S||!t))try{const{api:ge}=await Et(async()=>{const{api:ut}=await Promise.resolve().then(()=>Ot);return{api:ut}},void 0,import.meta.url),Me=` [Intento de Duplicado] ${t.name} intent registrar este lead.
Nota: ${j}`;await ge.notes.create({contactId:S.id,content:Me,authorId:t.id}),await ge.tasks.create({title:` Conflicto de Lead: ${S.name}`,type:"ToDo",dueDate:new Date().toISOString().split("T")[0],priority:"High",assignedTo:S.owner,relatedContactId:S.id,description:`El vendedor ${t.name} intent registrar este lead. Nota: ${j}`}),i&&i("Dueo Notificado",`Se ha enviado una alerta a ${S.owner}.`,"success"),w(!1),N(null),E(""),ye({name:"",company:"",email:"",phone:"",value:0,owner:"Unassigned"})}catch(ge){console.error(ge),i&&i("Error","No se pudo registrar el conflicto.","error")}},He=ge=>{if(ge.preventDefault(),T){const Me=e.find(st=>st.id===T);if(!Me)return;const ut={...Me,name:se.name,company:se.company,email:se.email,phone:se.phone,value:Number(se.value),owner:se.owner};n(e.map(st=>st.id===T?ut:st)),(async()=>{try{const{api:st}=await Et(async()=>{const{api:ft}=await Promise.resolve().then(()=>Ot);return{api:ft}},void 0,import.meta.url);await st.contacts.update(T,{name:se.name,company:se.company,email:se.email,phone:se.phone,value:Number(se.value),owner:se.owner})}catch(st){console.error("Error persisting contact edit:",st)}})(),h&&h.id===T&&m(ut),i&&i("Contacto Actualizado","Los datos del contacto han sido guardados.","success")}else{const Me=e.find(st=>st.email&&se.email&&st.email.toLowerCase()===se.email.toLowerCase()||st.phone&&se.phone&&st.phone===se.phone);if(Me)if(Me.owner===(t==null?void 0:t.name)){i&&i("Ya Gestionas este Lead","Abriendo ficha existente...","info"),m(Me),y(!1),ye({name:"",company:"",email:"",phone:"",value:0,owner:"Unassigned"});return}else{N(Me),w(!0),y(!1);return}const ut={id:Date.now().toString(),name:se.name,company:se.company,email:se.email,phone:se.phone,value:Number(se.value),status:ot.NEW,source:xd.REFERRAL,owner:se.owner,createdAt:new Date().toISOString(),lastActivity:"Ahora",tags:[],probability:10,notes:[],history:[]};r?r(ut):n([ut,...e])}y(!1),ye({name:"",company:"",email:"",phone:"",value:0,owner:"Unassigned"}),I(null)},Y=ge=>{const Me=new Set(k);Me.has(ge)?Me.delete(ge):Me.add(ge),O(Me)},he=()=>{k.size===be.length&&be.length>0?O(new Set):O(new Set(be.map(ge=>ge.id)))},Ke=async ge=>{const Me=k.size;if(Me!==0)try{const{api:ut}=await Et(async()=>{const{api:At}=await Promise.resolve().then(()=>Ot);return{api:At}},void 0,import.meta.url),st=a.find(At=>At.name===ge),ft=st?st.id:null;if(await Promise.all(Array.from(k).map(At=>ut.contacts.update(At,{owner_id:ft}))),n(e.map(At=>k.has(At.id)?{...At,owner:ge}:At)),i){const At=ge==="Unassigned"?`${Me} leads han sido liberados (Sin Asignar).`:`${Me} leads transferidos a ${ge}.`;i("Operacin Exitosa",At,"success")}O(new Set)}catch(ut){console.error("Bulk assign error",ut),i&&i("Error","No se pudieron asignar los leads.","error")}},qe=()=>{ie({status:"All",source:"All",owner:"All"}),D("")},Oe=ee.status!=="All"||ee.source!=="All"||ee.owner!=="All"||R!=="",it=()=>{h&&P(!0)},Je=async ge=>{if(h)try{const{api:Me}=await Et(async()=>{const{api:ft}=await Promise.resolve().then(()=>Ot);return{api:ft}},void 0,import.meta.url),ut={...ge,relatedContactName:h.name,relatedContactId:h.id},st=await Me.tasks.create(ut);if(s){const ft={...ut,id:st.id||Date.now().toString()};s(ft)}i&&i("Tarea Creada","Tarea guardada correctamente.","success"),P(!1)}catch(Me){console.error(Me),i&&i("Error","No se pudo crear la tarea.","error")}};return c.jsxs("div",{className:"flex h-full overflow-hidden relative bg-slate-50",children:[c.jsxs("div",{className:"flex-1 flex flex-col p-4 md:p-6 overflow-hidden",children:[p&&c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:oe?"Gestin de Contactos":"Mis Contactos"}),c.jsxs("p",{className:"text-slate-500 text-sm",children:["Mostrando ",be.length," de ",we.length," registros"]})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto relative",children:[c.jsxs("button",{onClick:()=>G(!F),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 border rounded-lg transition-colors ${F?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[c.jsx(Nb,{size:18})," Filtros ",F?c.jsx(_u,{size:14,className:"rotate-180 transition-transform"}):c.jsx(_u,{size:14,className:"transition-transform"})]}),c.jsxs("button",{onClick:()=>{ye({name:"",company:"",email:"",phone:"",value:0,owner:(t==null?void 0:t.name)||"Unassigned"}),y(!0)},className:"flex-1 md:flex-none bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 whitespace-nowrap flex items-center justify-center gap-2",children:[c.jsx(bl,{size:18})," Agregar"]})]})]}),oe&&k.size>0&&c.jsxs("div",{className:"mb-4 bg-blue-900 text-white p-3 rounded-xl flex flex-col md:flex-row items-center justify-between shadow-lg animate-in slide-in-from-top-2 gap-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-bold bg-white text-blue-900 px-2 py-0.5 rounded text-sm",children:k.size}),c.jsx("span",{className:"text-sm font-medium",children:"Leads seleccionados"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-center",children:[c.jsxs("button",{onClick:()=>V(!0),className:"text-xs bg-blue-800 hover:bg-blue-700 border border-blue-700 px-4 py-2 rounded transition-colors flex items-center gap-2",children:[c.jsx(Bc,{size:14}),c.jsxs("span",{className:"font-medium",children:["Reasignar (",k.size,")"]})]}),c.jsx("div",{className:"w-px h-8 bg-blue-700 mx-2 hidden md:block"}),c.jsxs("button",{onClick:()=>H(!0),className:"text-xs bg-red-900/50 hover:bg-red-800 border border-red-800 px-4 py-2 rounded transition-colors flex items-center gap-2",children:[c.jsx(yn,{size:14}),c.jsx("span",{className:"font-medium",children:"Desasignar"})]})]})]}),p&&F&&c.jsxs("div",{className:"mb-6 p-4 bg-white border border-slate-200 rounded-xl shadow-sm grid grid-cols-1 md:grid-cols-4 gap-4 animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Buscar"}),c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",value:R,onChange:ge=>D(ge.target.value),placeholder:"Nombre, empresa...",className:"w-full pl-9 pr-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Etapa / Estado"}),c.jsxs("select",{value:ee.status,onChange:ge=>ie({...ee,status:ge.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todas las etapas"}),Object.values(ot).map(ge=>c.jsx("option",{value:ge,children:ge},ge))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Fuente"}),c.jsxs("select",{value:ee.source,onChange:ge=>ie({...ee,source:ge.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todos los orgenes"}),Object.values(xd).map(ge=>c.jsx("option",{value:ge,children:ge},ge))]})]}),oe&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Vendedor"}),c.jsxs("select",{value:ee.owner,onChange:ge=>ie({...ee,owner:ge.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todos"}),c.jsx("option",{value:"Unassigned",children:"Sin Asignar"}),a.map(ge=>c.jsx("option",{value:ge.name,children:ge.name},ge.id))]})]}),Oe&&c.jsx("div",{className:"md:col-span-4 flex justify-end",children:c.jsxs("button",{onClick:qe,className:"text-xs text-red-600 hover:underline flex items-center gap-1",children:[c.jsx(yn,{size:12})," Limpiar todos los filtros"]})})]}),c.jsx("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden flex-1 flex flex-col",children:c.jsx("div",{className:"overflow-x-auto flex-1",children:c.jsxs("table",{className:"w-full text-left border-collapse",children:[c.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10",children:c.jsxs("tr",{className:"text-xs uppercase text-slate-500 font-semibold tracking-wider",children:[oe&&c.jsx("th",{className:"px-6 py-4 w-10",children:c.jsx("button",{onClick:he,className:"text-slate-400 hover:text-blue-600",children:k.size===be.length&&be.length>0?c.jsx(Wi,{size:18}):c.jsx(ME,{size:18})})}),c.jsx("th",{className:"px-6 py-4",children:"Nombre"}),c.jsx("th",{className:"px-6 py-4",children:"Estado"}),c.jsx("th",{className:"px-6 py-4",children:"Fuente"}),c.jsx("th",{className:"px-6 py-4",children:"Dueo"}),c.jsx("th",{className:"px-6 py-4",children:"Valor"}),c.jsx("th",{className:"px-6 py-4",children:"ltima Actividad"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:be.length>0?be.map(ge=>c.jsxs("tr",{className:`hover:bg-blue-50/50 transition-colors ${k.has(ge.id)?"bg-blue-50":""}`,children:[oe&&c.jsx("td",{className:"px-6 py-4",children:c.jsx("button",{onClick:()=>Y(ge.id),className:`${k.has(ge.id)?"text-blue-600":"text-slate-300 hover:text-slate-500"}`,children:k.has(ge.id)?c.jsx(Wi,{size:18}):c.jsx(ME,{size:18})})}),c.jsx("td",{className:"px-6 py-4 cursor-pointer",onClick:()=>m(ge),children:c.jsx("div",{className:"flex items-center",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-900",children:ge.name}),c.jsx("p",{className:"text-xs text-slate-500",children:ge.company})]})})}),c.jsx("td",{className:"px-6 py-4 cursor-pointer",onClick:Me=>{Me.target.closest(".status-dropdown")||m(ge)},children:u&&d?c.jsxs("div",{className:"relative status-dropdown",children:[c.jsxs("button",{onClick:Me=>{Me.stopPropagation(),L(le===ge.id?null:ge.id)},className:"flex items-center gap-1 focus:outline-none hover:opacity-80",children:[c.jsx(q5,{status:ge.status}),c.jsx(_u,{size:12,className:"text-slate-400"})]}),le===ge.id&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10 cursor-default",onClick:Me=>{Me.stopPropagation(),L(null)}}),c.jsx("div",{className:"absolute left-0 top-full mt-1 w-48 bg-white rounded-lg shadow-xl border border-slate-100 z-20",children:u.map(Me=>c.jsxs("button",{onClick:ut=>{ut.stopPropagation(),d(ge.id,Me.id),L(null)},className:`w-full text-left px-3 py-2 text-sm hover:bg-slate-50 flex items-center gap-2 ${ge.status===Me.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-600"}`,children:[c.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Me.color}}),Me.title]},Me.id))})]})]}):c.jsx(q5,{status:ge.status})}),c.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 cursor-pointer",onClick:()=>m(ge),children:ge.source}),c.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:ge.owner==="Sin asignar"||ge.owner==="Unassigned"?c.jsx("span",{className:"text-amber-600 font-medium text-xs bg-amber-50 px-2 py-1 rounded",children:"Sin asignar"}):ge.owner}),c.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 cursor-pointer",onClick:()=>m(ge),children:["$",ge.value.toLocaleString()]}),c.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 cursor-pointer",onClick:()=>m(ge),children:ge.lastActivity})]},ge.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:oe?7:6,className:"p-12 text-center",children:c.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[c.jsx(Fc,{size:48,className:"mb-4 opacity-20"}),c.jsx("p",{className:"text-lg font-medium text-slate-600",children:"No se encontraron resultados"}),c.jsx("p",{className:"text-sm",children:"Intenta ajustar los filtros de bsqueda."}),c.jsx("button",{onClick:qe,className:"mt-4 text-blue-600 hover:underline",children:"Limpiar filtros"})]})})})})]})})})]}),g&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:T?"Editar Contacto":"Agregar Nuevo Lead"}),c.jsx("button",{onClick:()=>{y(!1),I(null),ye({name:"",company:"",email:"",phone:"",value:0,owner:"Unassigned"})},className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsxs("form",{onSubmit:He,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre Completo"}),c.jsx("input",{required:!0,type:"text",value:se.name,onChange:ge=>ye({...se,name:ge.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Maria Perez"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Empresa"}),c.jsx("input",{required:!0,type:"text",value:se.company,onChange:ge=>ye({...se,company:ge.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Acme Corp"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:se.email,onChange:ge=>ye({...se,email:ge.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"email@ejemplo.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telfono"}),c.jsx("input",{type:"tel",value:se.phone,onChange:ge=>ye({...se,phone:ge.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"+1 555..."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Producto de Inters"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full pl-9 px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none",onChange:ge=>{const Me=ge.target.value,ut=l.find(st=>st.id===Me);ut&&ye(st=>({...st,value:ut.price}))},defaultValue:"",children:[c.jsx("option",{value:"",children:"Seleccionar producto..."}),l.map(ge=>c.jsxs("option",{value:ge.id,children:[ge.name," - $",ge.price," ",ge.currency]},ge.id))]}),c.jsx(s0,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),c.jsx(_u,{size:16,className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valor Estimado"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-500",children:"$"}),c.jsx("input",{type:"number",value:se.value,onChange:ge=>ye({...se,value:Number(ge.target.value)}),className:"w-full pl-8 px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),oe&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asignar a"}),c.jsxs("select",{value:se.owner,onChange:ge=>ye({...se,owner:ge.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"Unassigned",children:"Sin Asignar"}),a.map(ge=>c.jsx("option",{value:ge.name,children:ge.name},ge.id))]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700",children:T?"Guardar Cambios":"Crear Lead"})})]})]})}),h&&c.jsx(V9,{contact:h,onClose:()=>m(null),onUpdateContact:(ge,Me)=>{n(e.map(ut=>ut.id===ge?{...ut,...Me}:ut)),h&&h.id===ge&&m({...h,...Me}),f&&f(ge,Me)},onNavigateToChat:o,onOpenWhatsApp:()=>{if(!(h!=null&&h.phone))return;const ge=h.phone.replace(/\D/g,"");window.open(`https://wa.me/${ge}`,"_blank")},onCreateTask:it,products:l,companyCurrency:"USD",contactAppointments:Q}),x&&S&&c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-50 animate-in fade-in",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 border-l-4 border-amber-500",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-amber-100 rounded-full",children:c.jsx(bo,{className:"text-amber-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Lead Existente"}),c.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Este contacto ya est registrado en el sistema."})]})]}),c.jsx("div",{className:"bg-slate-50 p-4 rounded-lg mb-4 border border-slate-200",children:c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsx("span",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{className:"font-medium text-slate-900",children:S.name}),c.jsx("span",{className:"text-slate-500",children:"Empresa:"}),c.jsx("span",{className:"font-medium text-slate-900",children:S.company}),c.jsx("span",{className:"text-slate-500",children:"Dueo Actual:"}),c.jsx("span",{className:"font-bold text-blue-700 bg-blue-50 px-2 py-0.5 rounded w-fit",children:S.owner}),c.jsx("span",{className:"text-slate-500",children:"Estado:"}),c.jsx(q5,{status:S.status})]})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Deja una nota para el dueo actual:"}),c.jsx("textarea",{value:j,onChange:ge=>E(ge.target.value),className:"w-full p-3 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 outline-none h-24 resize-none",placeholder:"Ej. El cliente me contact para una nueva cotizacin..."}),c.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Se crear una tarea de alta prioridad para ",S.owner,"."]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:()=>{w(!1),N(null),E("")},className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:"Cancelar"}),c.jsxs("button",{onClick:$e,disabled:!j.trim(),className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[c.jsx(bo,{size:16}),"Notificar Conflicto"]})]})]})}),c.jsx(Ag,{isOpen:C,onClose:()=>P(!1),onSubmit:Je,contact:h||void 0,currentUser:t,team:a}),B&&c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Reasignar Leads"}),c.jsx("button",{onClick:()=>V(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Selecciona un agente para asignar los ",k.size," leads seleccionados."]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.filter(ge=>ge.role==="Sales").map(ge=>c.jsxs("button",{onClick:()=>{Ke(ge.name),V(!1)},className:"w-full flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:bg-blue-50 hover:border-blue-200 transition-colors group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-xs",children:ge.name.substring(0,2).toUpperCase()}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-sm font-medium text-slate-900",children:ge.name}),c.jsxs("p",{className:"text-xs text-slate-500",children:[de(ge.name)," leads activos"]})]})]}),c.jsx(_u,{className:"text-slate-300 group-hover:text-blue-600 -rotate-90",size:16})]},ge.id))})]})}),Z&&c.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-600",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:c.jsx(yn,{size:24})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Desasignar Leads?"})]}),c.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Ests a punto de liberar ",c.jsxs("strong",{children:[k.size," leads"]}),'. Pasarn a estado "Sin asignar" y cualquiera podr tomarlos.']}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>H(!1),className:"flex-1 py-2 border border-slate-300 rounded-lg text-slate-700 font-medium hover:bg-slate-50",children:"Cancelar"}),c.jsx("button",{onClick:()=>{Ke("Unassigned"),H(!1)},className:"flex-1 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700",children:"Confirmar"})]})]})})]})},rAe=({contact:t,onDragStart:e,onClaim:n,onClick:r,companyCurrency:i,onOpenMoveMenu:a})=>{const s=t.lastActivity.includes("das")&&parseInt(t.lastActivity)>3,o=t.owner==="Sin asignar"||t.owner==="Unassigned",l=t.notes.length+t.history.filter(u=>u.type==="note"||u.channel==="internal").length;return c.jsxs("div",{draggable:!0,onDragStart:u=>e(u,t.id),onClick:()=>r(t),className:`bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-all cursor-grab active:cursor-grabbing mb-3 group relative ${s?"border-l-4 border-l-red-400":"border-slate-200"} active:scale-95`,children:[c.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1.5",children:[!t.bant&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400 animate-pulse",title:"BANT pendiente"}),s&&c.jsx("div",{className:"text-red-400",title:"Sin actividad reciente (> 3 das)",children:c.jsx(cg,{size:14})})]}),c.jsxs("div",{className:"flex justify-between items-start mb-2 pr-4",children:[c.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full font-medium truncate max-w-[120px]",children:t.company}),l>0&&c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-600 bg-amber-50 px-1.5 py-0.5 rounded border border-amber-100",title:`${l} Notas internas`,children:[c.jsx(ay,{size:10})," ",l]})]}),c.jsx("h4",{className:"font-semibold text-slate-800 truncate",children:t.name}),c.jsx("p",{className:"text-slate-500 text-sm mt-1 mb-3",children:hl(t.value,i||"USD")}),o?c.jsxs("button",{onClick:u=>{u.stopPropagation(),n(t.id)},className:"w-full mt-2 mb-2 bg-blue-50 text-blue-700 text-xs py-1.5 rounded border border-blue-100 font-bold hover:bg-blue-100 flex items-center justify-center gap-1 transition-colors",children:[c.jsx(iD,{size:12})," Asignarme"]}):c.jsxs("div",{className:"flex justify-between items-center text-slate-400 text-xs mt-3 border-t border-slate-100 pt-3 relative",children:[c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(dg,{size:14,className:"hover:text-blue-600 cursor-pointer"}),c.jsx(gi,{size:14,className:"hover:text-blue-600 cursor-pointer"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:`${t.probability>80?"text-green-600 font-bold":""}`,children:[t.probability,"% prob."]}),c.jsx("div",{className:"relative",children:c.jsx("button",{onClick:u=>{u.stopPropagation(),a(t.id)},className:"p-4 hover:bg-slate-100 rounded-full text-slate-500 hover:text-blue-600 transition-colors",title:"Mover etapa",children:c.jsx(uN,{size:24})})})]})]}),c.jsxs("div",{className:"mt-2 text-[10px] text-slate-400 flex justify-between",children:[c.jsx("span",{children:t.owner==="Unassigned"||t.owner==="Sin asignar"?"Libre":t.owner.split(" ")[0]}),c.jsx("span",{children:t.lastActivity})]})]})},iAe=({currentUser:t,contacts:e,setContacts:n,onStatusChange:r,onNavigateToChat:i,products:a=[],onNotify:s,onAddDeal:o,onAssign:l,onUpdateContact:u,onAddTask:d,team:f=[],aiConfig:p,companyCurrency:h="USD"})=>{const[m,g]=q.useState([]),[y,x]=q.useState(!0),[w,S]=q.useState("board"),[N,j]=q.useState("ALL");q.useEffect(()=>{(async()=>{try{const{api:Re}=await Et(async()=>{const{api:en}=await Promise.resolve().then(()=>Ot);return{api:en}},void 0,import.meta.url);let Pt=(await Re.pipeline.list()).map(en=>({id:en.keyName,title:en.name,color:en.color,probability:Math.max(0,Math.min(100,Number(en.probability??0)))}));const pt=Pt.findIndex(en=>en.id==="lead");pt>=0?Pt[pt].title="Nuevo":Pt=[{id:"lead",title:"Nuevo",color:"border-blue-500",probability:5},...Pt],g(Pt),Pt.length>0&&j(Pt[0].id)}catch(Re){console.error("Failed to load pipeline stages",Re),s&&s("Error","No se pudieron cargar las etapas del pipeline.","error")}finally{x(!1)}})()},[]);const[E,C]=q.useState(null),[P,T]=q.useState([]);q.useEffect(()=>{E?(async()=>{try{const{api:Re}=await Et(async()=>{const{api:Pt}=await Promise.resolve().then(()=>Ot);return{api:Pt}},void 0,import.meta.url),lt=await Re.appointments.list({contactId:E.id});T(lt)}catch(Re){console.error("Failed to fetch appointments",Re)}})():T([])},[E]);const[I,k]=q.useState(!1),[O,R]=q.useState(!1),[D,B]=q.useState({name:"",company:"",email:"",phone:"",value:0,owner:(t==null?void 0:t.name)||"Unassigned",productInterest:""}),[V,Z]=q.useState(!1),[H,Q]=q.useState(null),[fe,le]=q.useState(""),[L,F]=q.useState([]),[G,ee]=q.useState(!1),[ie,se]=q.useState({status:"All",source:"All",owner:"All"}),[ye,oe]=q.useState(""),[we,be]=q.useState({});q.useEffect(()=>{be({})},[ye,ie]);const de=pe=>{be(Re=>({...Re,[pe]:(Re[pe]||10)+10}))},$e=()=>{se({status:"All",source:"All",owner:"All"}),oe("")},He=ie.status!=="All"||ie.source!=="All"||ie.owner!=="All"||ye!=="",Y=e.filter(pe=>{if(ye){const lt=ye.toLowerCase();if(!(pe.name.toLowerCase().includes(lt)||pe.company.toLowerCase().includes(lt)||pe.email&&pe.email.toLowerCase().includes(lt)))return!1}if(ie.status!=="All"&&pe.status!==ie.status||ie.source!=="All"&&pe.source!==ie.source)return!1;const Re=ie.owner;if((t==null?void 0:t.role)==="MANAGER")return Re==="All"?!0:Re==="Unassigned"?pe.owner==="Sin asignar"||pe.owner==="Unassigned":pe.owner===Re;{const lt=pe.owner===(t==null?void 0:t.name),Pt=pe.owner==="Sin asignar"||pe.owner==="Unassigned";return!lt&&!Pt?!1:Re!=="All"?Re==="Unassigned"?Pt:Re===(t==null?void 0:t.name)?lt:!1:!0}});q.useEffect(()=>{const pe=D.name.trim().toLowerCase(),Re=D.email.trim().toLowerCase();if(!pe&&!Re){F([]);return}const lt=e.filter(Pt=>Re&&Pt.email&&Pt.email.toLowerCase()===Re||pe&&Pt.name.toLowerCase().includes(pe)).slice(0,5);F(lt)},[D.name,D.email,e]);const[he,Ke]=q.useState(null),qe=pe=>{Ke(pe)},[Oe,it]=q.useState(!1),[Je,ge]=q.useState(null),[Me,ut]=q.useState("Precio demasiado alto"),[st,ft]=q.useState(!1),[At,Rt]=q.useState(null),[Se,Fe]=q.useState({products:[],finalPrice:0,closingNotes:""}),Le=(pe,Re)=>{if(Re==="Lost"){ge(pe),it(!0);return}if(Re==="Won"){const lt=e.find(Pt=>Pt.id===pe);lt&&(Rt(pe),Fe({products:lt.productInterests||[],finalPrice:lt.value,closingNotes:""}),ft(!0));return}r(pe,Re)},dt=(pe,Re)=>{pe.dataTransfer.setData("contactId",Re)},ve=pe=>{pe.preventDefault()},ae=(pe,Re)=>{pe.preventDefault();const lt=pe.dataTransfer.getData("contactId");if(Re==="Lost"){ge(lt),it(!0);return}if(Re==="Won"){const Pt=e.find(pt=>pt.id===lt);Pt&&(Rt(lt),Fe({products:Pt.productInterests||[],finalPrice:Pt.value,closingNotes:""}),ft(!0));return}r(lt,Re)},je=()=>{Je&&(r(Je,"Lost",Me),it(!1),ge(null))},Ie=()=>{if(At){const pe={wonData:{...Se,closedAt:new Date().toLocaleDateString()}};u==null||u(At,pe),r(At,"Won"),ft(!1),Rt(null),s&&s("Felicidades!","Trato cerrado con xito.","success")}},Ae=pe=>{t&&confirm(`Asignarte este lead a ti (${t.name})?`)&&l&&l(pe,t.name)},Ze=pe=>{C(pe)},Ye=async()=>{if(!(!H||!t))try{const{api:pe}=await Et(async()=>{const{api:lt}=await Promise.resolve().then(()=>Ot);return{api:lt}},void 0,import.meta.url),Re=` [Intento de Duplicado] ${t.name} intent registrar este lead.
Nota: ${fe}`;await pe.notes.create({contactId:H.id,content:Re,authorId:t.id}),await pe.tasks.create({title:` Conflicto de Lead: ${H.name}`,type:"ToDo",dueDate:new Date().toISOString().split("T")[0],priority:"High",assignedTo:H.owner,relatedContactId:H.id,description:`El vendedor ${t.name} intent registrar este lead. Nota: ${fe}`}),s&&s("Dueo Notificado",`Se ha enviado una alerta a ${H.owner}.`,"success"),Z(!1),Q(null),le(""),B({name:"",company:"",email:"",phone:"",value:0,owner:(t==null?void 0:t.name)||"Unassigned",productInterest:""})}catch(pe){console.error(pe),s&&s("Error","No se pudo registrar el conflicto.","error")}},tt=pe=>{var Pt;if(pe.preventDefault(),!o)return;const Re=e.find(pt=>{var en;return!!D.email&&((en=pt.email)==null?void 0:en.toLowerCase())===D.email.toLowerCase()})||e.find(pt=>pt.name.toLowerCase()===D.name.toLowerCase()&&(D.phone?pt.phone===D.phone:!0));if(Re)if(Re.owner===(t==null?void 0:t.name)||Re.owner==="Unassigned"||Re.owner==="Sin asignar"){s&&s("Ya Gestionas este Lead","Abriendo ficha existente...","info"),C(Re),k(!1);return}else{Q(Re),Z(!0),k(!1);return}const lt={id:Date.now().toString(),name:D.name,company:D.company,email:D.email,phone:D.phone,value:Number(D.value),status:ot.NEW,source:xd.REFERRAL,owner:D.owner,productInterests:D.productInterest?[D.productInterest]:[],createdAt:new Date().toISOString(),lastActivity:"Ahora",tags:[],probability:((Pt=m.find(pt=>pt.id===ot.NEW))==null?void 0:Pt.probability)||5,notes:[],history:[]};o(lt),k(!1),B({name:"",company:"",email:"",phone:"",value:0,owner:(t==null?void 0:t.name)||"Unassigned",productInterest:""})},Kt=async pe=>{if(E)try{const{api:Re}=await Et(async()=>{const{api:pt}=await Promise.resolve().then(()=>Ot);return{api:pt}},void 0,import.meta.url),lt={...pe,relatedContactName:E.name,relatedContactId:E.id},Pt=await Re.tasks.create(lt);if(d){const pt={...lt,id:Pt.id||Date.now().toString()};d(pt)}s&&s("Tarea Creada","Tarea guardada correctamente.","success"),R(!1)}catch(Re){console.error(Re),s&&s("Error","No se pudo crear la tarea.","error")}};return c.jsxs("div",{className:"h-full flex flex-col p-4 md:p-6 overflow-hidden relative",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Leads"}),c.jsxs("p",{className:"text-slate-500 text-sm",children:["Mostrando ",Y.length," de ",e.length," registros"]})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto relative",children:[c.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg mr-2",children:[c.jsx("button",{onClick:()=>S("board"),className:`p-2 rounded-md transition-colors ${w==="board"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:c.jsx(_A,{size:18})}),c.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-md transition-colors ${w==="list"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:c.jsx(RU,{size:18})})]}),c.jsxs("button",{onClick:()=>ee(!G),className:`flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 border rounded-lg transition-colors ${G?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[c.jsx(Nb,{size:18})," Filtros ",G?c.jsx(_u,{size:14,className:"rotate-180 transition-transform"}):c.jsx(_u,{size:14,className:"transition-transform"})]}),c.jsxs("button",{onClick:()=>k(!0),className:"flex-1 md:flex-none bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 whitespace-nowrap flex items-center justify-center gap-2",children:[c.jsx(bl,{size:18})," Agregar"]})]})]}),G&&c.jsxs("div",{className:"mb-6 p-4 bg-white border border-slate-200 rounded-xl shadow-sm grid grid-cols-1 md:grid-cols-4 gap-4 animate-in fade-in slide-in-from-top-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Buscar"}),c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",value:ye,onChange:pe=>oe(pe.target.value),placeholder:"Nombre, empresa...",className:"w-full pl-9 pr-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Etapa"}),c.jsxs("select",{value:ie.status,onChange:pe=>se({...ie,status:pe.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todas las etapas"}),m.map(pe=>c.jsx("option",{value:pe.id,children:pe.title},pe.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Fuente"}),c.jsxs("select",{value:ie.source,onChange:pe=>se({...ie,source:pe.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todos los orgenes"}),Object.values(xd).map(pe=>c.jsx("option",{value:pe,children:pe},pe))]})]}),(t==null?void 0:t.role)==="MANAGER"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Vendedor"}),c.jsxs("select",{value:ie.owner,onChange:pe=>se({...ie,owner:pe.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"All",children:"Todos"}),c.jsx("option",{value:"Unassigned",children:"Sin Asignar"}),f.map(pe=>c.jsx("option",{value:pe.name,children:pe.name},pe.id))]})]}),He&&c.jsx("div",{className:"md:col-span-4 flex justify-end",children:c.jsxs("button",{onClick:$e,className:"text-xs text-red-600 hover:underline flex items-center gap-1",children:[c.jsx(yn,{size:12})," Limpiar todos los filtros"]})})]}),w==="board"&&c.jsx("div",{className:"md:hidden w-full overflow-x-auto pb-2 -mx-1 px-1 mb-4",children:c.jsx("div",{className:"flex gap-2",children:m.map(pe=>c.jsx("button",{onClick:()=>j(pe.id),className:`whitespace-nowrap px-3 py-1.5 rounded-full text-xs font-bold border transition-colors ${N===pe.id?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200"}`,children:pe.title},pe.id))})}),w==="list"?c.jsx(nAe,{contacts:Y,setContacts:n||(()=>{}),onAddContact:o,currentUser:t,onNotify:s,team:f,products:a,onAddTask:d,onNavigateToChat:i,enableHeader:!1,pipelineColumns:m,onMoveContact:Le}):c.jsx("div",{className:"flex-1 overflow-y-auto md:overflow-y-hidden md:overflow-x-auto pb-4",children:y?c.jsx("div",{className:"h-full flex items-center justify-center",children:c.jsx(fi,{className:"animate-spin text-blue-600",size:48})}):c.jsxs("div",{className:"flex flex-col md:flex-row h-full md:min-w-max gap-4 md:space-x-4",children:[m.map(pe=>{const Re=Y.filter(Jn=>Jn.status===pe.id||pe.id==="lead"&&Jn.status==="New"),lt=Re.reduce((Jn,Tr)=>Jn+Tr.value,0),Pt=Re.reduce((Jn,Tr)=>Jn+Tr.value*(Tr.probability/100),0),en=N===pe.id?"flex":"hidden md:flex",un=we[pe.id]||10,ht=Re.slice(0,un),jn=Re.length-ht.length;return c.jsxs("div",{onDragOver:ve,onDrop:Jn=>ae(Jn,pe.id),className:`w-full md:w-80 flex-col rounded-xl bg-slate-50/50 transition-colors hover:bg-slate-100/50 h-full ${en}`,children:[c.jsxs("div",{className:`p-4 border-t-4 ${pe.color} bg-slate-100 rounded-t-xl sticky top-0 z-10 md:static shadow-sm md:shadow-none`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsxs("h3",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[pe.title,c.jsxs("span",{className:"text-xs font-normal text-slate-400 bg-slate-200 px-1.5 py-0.5 rounded-full",children:[pe.probability||0,"%"]})]}),c.jsxs("span",{className:"bg-white text-slate-500 px-2 py-0.5 rounded-md text-xs font-bold border border-slate-200",title:`Mostrando ${ht.length} de ${Re.length}`,children:[ht.length," / ",Re.length]})]}),c.jsxs("div",{className:"flex flex-col gap-0.5",children:[c.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:["Total: ",c.jsx("span",{className:"text-slate-700",children:hl(lt,h)})]}),c.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["Ponderado: ",c.jsx("span",{className:"text-slate-600",children:hl(Math.round(Pt),h)})]})]})]}),c.jsx("div",{className:"p-3 flex-1 overflow-y-auto custom-scrollbar min-h-[200px]",children:Re.length>0?c.jsxs(c.Fragment,{children:[ht.map(Jn=>c.jsx(rAe,{contact:Jn,onDragStart:dt,onClaim:Ae,onClick:Ze,companyCurrency:h,onOpenMoveMenu:qe},Jn.id)),jn>0&&c.jsxs("button",{onClick:()=>de(pe.id),className:"w-full py-2 bg-white border border-slate-200 text-slate-500 text-xs font-bold rounded-lg hover:bg-slate-50 hover:text-blue-600 transition-colors shadow-sm mb-2",children:["Ver ",jn," ms..."]})]}):c.jsx("div",{className:"h-24 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center text-slate-400 text-sm",children:"Vaco"})})]},pe.id)}),c.jsx("div",{onDragOver:ve,onDrop:pe=>ae(pe,"Lost"),className:"hidden md:flex w-full md:w-24 flex-row md:flex-col h-24 md:h-full rounded-xl bg-red-50 border border-dashed border-red-200 opacity-80 hover:opacity-100 transition-all hover:bg-red-100 items-center justify-center group flex-shrink-0",title:"Arrastra aqu para marcar como Perdido",children:c.jsxs("div",{className:"flex flex-row md:flex-col items-center justify-center text-red-400 font-medium group-hover:text-red-600 transition-colors gap-2",children:[c.jsx(Ra,{size:24,className:"md:mb-4"}),c.jsx("span",{className:"text-xs font-bold uppercase tracking-wide md:vertical-text md:writing-mode-vertical",children:"Marcar Perdido"})]})})]})}),E&&c.jsx(V9,{contact:E,onClose:()=>C(null),onUpdateContact:u,onNavigateToChat:i,onOpenWhatsApp:()=>{if(!(E!=null&&E.phone))return;const pe=E.phone.replace(/\D/g,"");window.open(`https://wa.me/${pe}`,"_blank")},onCreateTask:()=>R(!0),products:a,companyCurrency:h,hasAiAccess:!!p,aiConfig:p,onNotify:s,contactAppointments:P}),I&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Crear Nuevo Lead"}),c.jsx("button",{onClick:()=>k(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsxs("form",{onSubmit:tt,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre del Lead"}),c.jsx("input",{required:!0,type:"text",value:D.name,onChange:pe=>B({...D,name:pe.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Roberto Gomez"}),L.length>0&&c.jsxs("div",{className:"mt-2 bg-slate-50 border border-slate-200 rounded-lg p-2",children:[c.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Coincidencias existentes"}),c.jsx("ul",{className:"space-y-1",children:L.map(pe=>c.jsxs("li",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-slate-700 truncate max-w-[60%]",children:[pe.name,"  ",pe.email]}),c.jsx("button",{type:"button",onClick:()=>{C(pe),k(!1)},className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Abrir"})]},pe.id))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Empresa"}),c.jsx("input",{required:!0,type:"text",value:D.company,onChange:pe=>B({...D,company:pe.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Tech Corp"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),c.jsx("input",{type:"email",value:D.email,onChange:pe=>B({...D,email:pe.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"email@..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telfono"}),c.jsx("input",{type:"tel",value:D.phone,onChange:pe=>B({...D,phone:pe.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"+52..."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Producto de Inters"}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full pl-3 pr-10 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none",onChange:pe=>{const Re=pe.target.value,lt=a.find(Pt=>Pt.id===Re);B(lt?Pt=>({...Pt,value:lt.price,productInterest:lt.name}):Pt=>({...Pt,productInterest:""}))},defaultValue:"",children:[c.jsx("option",{value:"",children:"Seleccionar producto..."}),a.map(pe=>c.jsxs("option",{value:pe.id,children:[pe.name," - $",pe.price," ",pe.currency]},pe.id))]}),c.jsx("div",{className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",children:c.jsx(Ru,{size:16,className:"rotate-90"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Valor Estimado ($)"}),c.jsx("input",{type:"number",value:D.value,onChange:pe=>B({...D,value:Number(pe.target.value)}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(t==null?void 0:t.role)==="MANAGER"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asignar a"}),c.jsxs("select",{value:D.owner,onChange:pe=>B({...D,owner:pe.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"Unassigned",children:"Sin Asignar"}),f.filter(pe=>pe.role!=="Support").map(pe=>c.jsx("option",{value:pe.name,children:pe.name},pe.id))]})]}),c.jsx("div",{className:"pt-2",children:c.jsxs("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 flex items-center justify-center gap-2",children:[c.jsx(bl,{size:18})," Crear Oportunidad"]})})]})]})}),V&&H&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200 border-2 border-red-100",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-full",children:c.jsx(bo,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Conflicto de Lead Detectado"}),c.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Este lead ya existe y pertenece a ",c.jsx("span",{className:"font-bold text-slate-800",children:H.owner}),"."]})]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg mb-4 border border-slate-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-bold text-slate-700",children:H.name}),c.jsx("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full",children:H.status})]}),c.jsx("p",{className:"text-xs text-slate-500",children:H.company}),c.jsx("p",{className:"text-xs text-slate-500",children:H.email})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Por qu ests registrando este lead?"}),c.jsx("textarea",{value:fe,onChange:pe=>le(pe.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 outline-none h-24 resize-none",placeholder:"Ej. El cliente me llam directamente hoy..."}),c.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Se enviar una notificacin y tarea a ",H.owner," para resolver la propiedad."]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg font-medium hover:bg-slate-50",children:"Cancelar"}),c.jsx("button",{onClick:Ye,disabled:!fe.trim(),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reportar Conflicto"})]})]})}),he&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",onClick:()=>Ke(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 animate-in zoom-in-95 duration-200",onClick:pe=>pe.stopPropagation(),children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Mover a Etapa"}),c.jsx("button",{onClick:()=>Ke(null),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:m.map(pe=>c.jsxs("button",{onClick:()=>{he&&(Le(he,pe.id),Ke(null))},className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all text-left group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:pe.color}}),c.jsx("span",{className:"font-medium text-slate-700 group-hover:text-slate-900",children:pe.title})]}),c.jsx(Ru,{size:16,className:"text-slate-300 group-hover:text-slate-500"})]},pe.id))})]})}),st&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-3 mx-auto text-green-600",children:c.jsx(sa,{size:32})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Cerrar Venta con xito!"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Confirma los detalles finales de la transaccin."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Productos / Servicios Adquiridos"}),c.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 rounded-lg border border-slate-200",children:a.map(pe=>c.jsx("button",{onClick:()=>{const Re=Se.products,lt=Re.includes(pe.name)?Re.filter(Pt=>Pt!==pe.name):[...Re,pe.name];Fe({...Se,products:lt})},className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${Se.products.includes(pe.name)?"bg-green-600 text-white border-green-700 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-green-300"}`,children:pe.name},pe.id))}),Se.products.length===0&&c.jsx("p",{className:"text-[10px] text-red-500 mt-1",children:"Debes seleccionar al menos un producto."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Precio Final de Venta"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"$"}),c.jsx("input",{type:"number",value:Se.finalPrice,onChange:pe=>Fe({...Se,finalPrice:Number(pe.target.value)}),className:"w-full pl-7 pr-3 py-2 bg-white border border-slate-300 rounded-lg text-sm font-bold focus:ring-2 focus:ring-green-500 outline-none"})]}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Incluye descuentos o cashback aqu."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Fecha de Cierre"}),c.jsx("input",{type:"text",disabled:!0,value:new Date().toLocaleDateString(),className:"w-full px-3 py-2 bg-slate-100 border border-slate-200 rounded-lg text-sm text-slate-500 cursor-not-allowed"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Notas de Cierre / Cross-Sell"}),c.jsx("textarea",{value:Se.closingNotes,onChange:pe=>Fe({...Se,closingNotes:pe.target.value}),rows:3,placeholder:"Detalla cualquier acuerdo especial, cashback otorgado o inters en futuros productos...",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 outline-none resize-none"})]})]}),c.jsxs("div",{className:"flex gap-3 mt-8",children:[c.jsx("button",{onClick:()=>ft(!1),className:"flex-1 py-3 text-slate-600 font-bold hover:bg-slate-100 rounded-xl transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:Ie,disabled:Se.products.length===0,className:"flex-1 py-3 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 shadow-lg shadow-green-100 disabled:opacity-50 transition-all transform active:scale-95",children:"Confirmar Venta"})]})]})}),Oe&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-3 mx-auto text-red-600",children:c.jsx(yn,{size:24})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 text-center",children:"Marcar como Perdido"}),c.jsx("p",{className:"text-center text-slate-500 text-sm mt-1",children:"Por qu no se cerr este trato?"})]}),c.jsx("div",{className:"space-y-3 mb-6",children:["Precio demasiado alto","Se fue con la competencia","Perdi inters / Ghosting","No calificado / Spam","Otro"].map(pe=>c.jsxs("label",{className:`flex items-center p-3 rounded-lg border cursor-pointer transition-colors ${Me===pe?"border-red-500 bg-red-50 text-red-700":"border-slate-200 hover:bg-slate-50"}`,children:[c.jsx("input",{type:"radio",name:"lostReason",value:pe,checked:Me===pe,onChange:Re=>ut(Re.target.value),className:"w-4 h-4 text-red-600 border-slate-300 focus:ring-red-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium",children:pe})]},pe))}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>it(!1),className:"flex-1 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:je,className:"flex-1 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 shadow-sm",children:"Confirmar Prdida"})]})]})}),c.jsx(Ag,{isOpen:O,onClose:()=>R(!1),onSubmit:Kt,contact:E||void 0,contacts:e,currentUser:t,team:f})]})};var aAe={};const sAe=[{id:"intro",label:"Bienvenida",text:"Hola {name}, gracias por tu inters en nuestros productos. Tienes unos minutos para conversar?"},{id:"followup",label:"Seguimiento",text:"Hola {name}, te escribo para dar seguimiento a nuestra conversacin anterior. Has podido revisar la informacin?"},{id:"meeting",label:"Agendar Reunin",text:"Hola {name}, me gustara agendar una breve llamada para mostrarte cmo podemos ayudarte. Qu horario te queda bien?"},{id:"promo",label:"Promocin",text:"Hola {name}, tenemos una oferta especial esta semana que podra interesarte. Te envo los detalles?"}],oAe=({currentUser:t,contacts:e,setContacts:n,tasks:r,setTasks:i,onMessageSent:a,products:s,templates:o,initialContactId:l,onNotify:u,aiConfig:d})=>{const[f,p]=q.useState(""),[h,m]=q.useState(null),[g,y]=q.useState(""),[x,w]=q.useState(""),[S,N]=q.useState("whatsapp"),[j,E]=q.useState("message"),[C,P]=q.useState(!1),[T,I]=q.useState(!1),[k,O]=q.useState(""),[R,D]=q.useState(!1),[B,V]=q.useState(!1),Z=q.useRef(null);q.useEffect(()=>{const F=()=>V(window.innerWidth<768);return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const Q=e.filter(F=>(t==null?void 0:t.role)==="MANAGER"?!0:F.owner===(t==null?void 0:t.name)||F.owner==="Sin asignar"||F.owner==="Unassigned").filter(F=>F.name.toLowerCase().includes(k.toLowerCase())||F.company.toLowerCase().includes(k.toLowerCase()));q.useEffect(()=>{l?p(l):!B&&!f&&Q.length>0&&p(Q[0].id)},[Q,f,l,B]),q.useEffect(()=>{const F=e.find(G=>G.id===f);F&&m(F)},[f,e]),q.useEffect(()=>{Z.current&&(Z.current.scrollTop=Z.current.scrollHeight)},[h==null?void 0:h.history]);const fe=async()=>{if(!g.trim()||!h)return;const F={id:Date.now().toString(),sender:"agent",type:j,content:g,timestamp:"Ahora",channel:j==="note"?"internal":S,subject:S==="email"?x:void 0};try{const{api:G}=await Et(async()=>{const{api:ee}=await Promise.resolve().then(()=>Ot);return{api:ee}},void 0,import.meta.url);if(S==="whatsapp"&&j==="message"){const ee=h.phone.replace(/\D/g,"");let ie=!1;try{const se=await G.meta.sendMessage(ee,g);if(se.success)ie=!0,u&&u("WhatsApp Enviado","Mensaje enviado va API Cloud.","success");else{console.warn("WhatsApp API Error:",se.error);const ye=se.error==="WhatsApp not configured";u&&u(ye?"Modo Manual":"Alerta de API",ye?"Abriendo WhatsApp Web...":"Fallo envo API (posible ventana 24h cerrada). Abriendo Web...","warning")}}catch(se){console.error("WhatsApp API Exception",se)}if(!ie){const se=encodeURIComponent(g),ye=`https://wa.me/${ee}?text=${se}`;window.open(ye,"_blank")}}j==="note"?await G.notes.create({contactId:h.id,content:g,authorId:t==null?void 0:t.id}):await G.history.create({contactId:h.id,content:g,sender:"agent",type:"message",channel:S,subject:S==="email"?x:void 0}),y(""),w(""),P(!1),j==="note"&&E("message"),u&&u("xito","Informacin guardada en la base de datos.","success"),j==="message"&&a&&a(h.id,F),y(""),w(""),P(!1),j==="note"&&E("message")}catch(G){console.error("Failed to send message",G),u&&u("Error","No se pudo guardar el mensaje en la base de datos.","error")}},le=F=>{if(!h)return;const G=h.name.split(" ")[0];if(F.subject){let ee=F.body.replace("{{name}}",G).replace("{name}",G);w(F.subject),y(ee),N("email")}else{let ee=F.text.replace("{name}",G);y(ee),N("whatsapp")}E("message")},L=async()=>{var G,ee,ie;const F=(d==null?void 0:d.apiKey)||aAe.API_KEY;if(!F){u&&u("Configuracin Faltante","API Key no configurada para usar IA.","warning");return}if(h){I(!0);try{let se="";const ye=s.map(de=>`- ${de.name} (${de.category}): $${de.price} ${de.currency}. ${de.description}`).join(`
`),oe=`
        Source: ${h.source}
        Campaign: ${h.utm_campaign||"N/A"}
        Term/Form: ${h.utm_term||"N/A"}
      `,we=h.history.map(de=>`${de.sender}: ${de.content}`).join(`
`),be=`
        You are a professional sales agent using a CRM.
        Knowledge Base: ${ye}
        Lead Context: ${oe}
        History: ${we}
        Instruction: Draft a concise response IN SPANISH (under 60 words).
        If the lead came from a specific campaign (e.g., 'Promo Verano'), mention it subtly.
        Last message: ${(G=h.history[h.history.length-1])==null?void 0:G.content}
      `;if((d==null?void 0:d.provider)==="openai"){const $e=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({model:d.model||"gpt-4",messages:[{role:"system",content:"You are a helpful sales assistant."},{role:"user",content:be}],max_tokens:150})})).json();if($e.error)throw new Error($e.error.message);se=((ie=(ee=$e.choices[0])==null?void 0:ee.message)==null?void 0:ie.content)||""}else{const de=new Gu(F),$e=(d==null?void 0:d.model)||"gemini-1.5-flash";se=(await(await de.getGenerativeModel({model:$e}).generateContent(be)).response).text()}se&&y(se.trim())}catch(se){console.error("AI Error:",se),u&&u("Error de IA","No se pudo generar el borrador. Verifica tu API Key.","error")}finally{I(!1)}}};return!h&&Q.length===0?c.jsx("div",{className:"p-8 text-center text-slate-500",children:"No hay contactos encontrados."}):c.jsxs("div",{className:"flex h-full bg-slate-50 overflow-hidden",children:[c.jsxs("div",{className:`w-full md:w-80 border-r border-slate-200 bg-white flex flex-col ${h?"hidden md:flex":"flex"}`,children:[c.jsx("div",{className:"p-4 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",value:k,onChange:F=>O(F.target.value),placeholder:"Buscar chats...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 placeholder-slate-500 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:Q.map(F=>{const G=F.history[F.history.length-1],ee=(G==null?void 0:G.sender)==="customer";return c.jsxs("div",{onClick:()=>p(F.id),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${f===F.id?"bg-blue-50 border-l-4 border-l-blue-600":""}`,children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("h4",{className:`text-sm ${ee?"font-bold text-slate-900":"font-semibold text-slate-800"}`,children:F.name}),c.jsx("span",{className:`text-xs ${ee?"text-blue-600 font-bold":"text-slate-400"}`,children:G?G.timestamp:""})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("p",{className:`text-xs truncate max-w-[180px] ${ee?"text-slate-800 font-medium":"text-slate-500"}`,children:G?G.type==="note"?c.jsxs("span",{className:"text-amber-600 flex items-center gap-1",children:[c.jsx(ca,{size:10})," Nota Interna"]}):ee?` ${G.content}`:` ${G.content}`:F.company}),F.owner===(t==null?void 0:t.name)&&c.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})]})]},F.id)})})]}),c.jsx("div",{className:`flex-1 flex flex-col bg-slate-100 ${h?"flex":"hidden md:flex"}`,children:h?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white px-4 py-3 border-b border-slate-200 flex justify-between items-center shadow-sm z-10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>{p(""),m(null)},className:"md:hidden p-2 -ml-2 text-slate-500 hover:text-slate-700 rounded-full hover:bg-slate-100",children:c.jsx(EA,{size:20})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[h.name,c.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded border border-slate-200 hidden sm:inline-block",children:h.owner===(t==null?void 0:t.name)?"Mis Leads":h.owner})]}),c.jsxs("p",{className:"text-xs text-slate-500",children:[h.company,"  ",h.phone]})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded-full transition-colors",children:c.jsx(dg,{size:20})}),c.jsx("button",{className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded-full transition-colors",children:c.jsx(oV,{size:20})})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-4",ref:Z,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:h.history.map(F=>F.type==="note"||F.channel==="internal"?c.jsx("div",{className:"flex justify-center my-4",children:c.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-900 rounded-lg px-4 py-2 shadow-sm max-w-[90%] lg:max-w-[80%] text-sm flex flex-col items-center",children:[c.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider text-amber-600 mb-1",children:[c.jsx(ca,{size:10})," Nota Interna  ",F.timestamp]}),c.jsx("p",{className:"text-center italic",children:F.content})]})},F.id):c.jsx("div",{className:`flex ${F.sender==="agent"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[85%] lg:max-w-[70%] rounded-2xl px-4 py-3 shadow-sm ${F.sender==="agent"?F.channel==="email"?"bg-blue-600 text-white rounded-br-none":"bg-[#005c4b] text-white rounded-br-none":"bg-white text-slate-800 rounded-bl-none border border-slate-200"}`,children:[F.channel==="email"&&c.jsxs("div",{className:"text-xs opacity-70 mb-1 flex items-center gap-1",children:[c.jsx(gi,{size:10})," Email: ",F.subject]}),c.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:F.content}),c.jsx("p",{className:`text-[10px] mt-1 text-right ${F.sender==="agent"?"text-white/70":"text-slate-400"}`,children:F.timestamp})]})},F.id))}),c.jsxs("div",{className:`p-3 lg:p-4 border-t border-slate-200 transition-colors duration-300 ${j==="note"?"bg-amber-50":"bg-white"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-lg overflow-x-auto max-w-full",children:[c.jsxs("button",{onClick:()=>{E("message"),N("whatsapp")},className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1 transition-all whitespace-nowrap ${j==="message"&&S==="whatsapp"?"bg-[#25D366] text-white shadow":"text-slate-500 hover:text-slate-700"}`,children:[c.jsx(TE,{size:14})," WhatsApp"]}),c.jsxs("button",{onClick:()=>{E("message"),N("email")},className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1 transition-all whitespace-nowrap ${j==="message"&&S==="email"?"bg-blue-600 text-white shadow":"text-slate-500 hover:text-slate-700"}`,children:[c.jsx(gi,{size:14})," Email"]}),c.jsxs("button",{onClick:()=>E("note"),className:`px-3 py-1.5 rounded-md text-xs font-bold flex items-center gap-1 transition-all whitespace-nowrap ${j==="note"?"bg-amber-500 text-white shadow":"text-slate-500 hover:text-slate-700"}`,children:[c.jsx(ca,{size:14})," Nota Interna"]})]}),j==="message"&&(S==="email"||S==="whatsapp")&&c.jsxs("div",{className:"relative ml-2",children:[c.jsxs("button",{onClick:()=>D(!R),className:"flex items-center gap-1 text-xs font-medium text-slate-600 bg-white border border-slate-200 hover:bg-slate-50 px-3 py-1.5 rounded-lg transition-all",children:[c.jsx($U,{size:14}),c.jsx("span",{className:"hidden sm:inline",children:"Plantillas"})]}),R&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),c.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-56 bg-white rounded-xl shadow-xl border border-slate-200 z-20 overflow-hidden animate-in zoom-in-95 duration-100",children:[c.jsx("div",{className:"p-2 bg-slate-50 border-b border-slate-100 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:S==="email"?"Plantillas de Email":"Respuestas Rpidas"}),c.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:S==="email"?o.map(F=>c.jsx("button",{onClick:()=>{le(F),D(!1)},className:"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-blue-50 hover:text-blue-700 rounded-lg transition-colors truncate",children:F.name},F.id)):sAe.map(F=>c.jsx("button",{onClick:()=>{le(F),D(!1)},className:"w-full text-left px-3 py-2 text-xs text-slate-700 hover:bg-green-50 hover:text-green-700 rounded-lg transition-colors truncate",children:F.label},F.id))})]})]})]}),j==="note"&&c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs font-medium text-amber-800 bg-amber-100 px-3 py-1.5 rounded-lg border border-amber-200 hover:bg-amber-200 transition-colors ml-auto",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:F=>P(F.target.checked),className:"rounded text-amber-600 focus:ring-amber-500"}),c.jsx(Wi,{size:14})," ",c.jsx("span",{className:"hidden sm:inline",children:"Crear Tarea"})]})]}),S==="email"&&j==="message"&&c.jsx("input",{type:"text",value:x,onChange:F=>w(F.target.value),placeholder:"Asunto del correo...",className:"w-full mb-2 px-3 py-2 bg-white border border-slate-300 rounded text-slate-900 text-sm focus:outline-none focus:border-blue-500"}),c.jsxs("div",{className:"relative flex items-end gap-2",children:[j==="message"&&c.jsx("button",{onClick:L,disabled:T,className:"p-3 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",title:"Generar respuesta con IA (usa Productos)",children:c.jsx(sy,{size:20,className:T?"animate-spin":""})}),c.jsx("textarea",{value:g,onChange:F=>y(F.target.value),placeholder:j==="note"?"Escribe una nota privada...":S==="whatsapp"?"Escribe mensaje WhatsApp...":"Redacta el correo...",className:`flex-1 border text-slate-900 placeholder-slate-500 rounded-lg focus:ring-2 focus:border-transparent resize-none p-3 text-sm max-h-32 min-h-[80px] ${j==="note"?"bg-white border-amber-300 focus:ring-amber-500":S==="whatsapp"?"bg-white border-green-200 focus:ring-green-500":"bg-white border-slate-300 focus:ring-blue-500"}`,onKeyDown:F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),fe())}}),c.jsx("button",{onClick:fe,className:`p-3 text-white rounded-lg transition-all shadow-md active:scale-95 ${j==="note"?"bg-amber-500 hover:bg-amber-600":S==="whatsapp"?"bg-[#25D366] hover:bg-[#128C7E]":"bg-blue-600 hover:bg-blue-700"}`,children:j==="note"?c.jsx(ay,{size:20}):c.jsx(jb,{size:20})})]})]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 p-8",children:[c.jsx(TE,{size:48,className:"mb-4 text-slate-300"}),c.jsx("p",{className:"text-lg font-medium text-slate-500",children:"Selecciona un chat para comenzar"}),c.jsx("p",{className:"text-sm",children:"Elige un contacto de la lista para ver el historial."})]})})]})},lAe=({rules:t,setRules:e})=>{const n=async i=>{const a=t.map(o=>o.id===i?{...o,isActive:!o.isActive}:o);e(a);const s=a.reduce((o,l)=>({...o,[l.id]:l.isActive}),{});try{const{api:o}=await Et(async()=>{const{api:l}=await Promise.resolve().then(()=>Ot);return{api:l}},void 0,import.meta.url);await o.settings.update("automation_status",s)}catch(o){console.error("Failed to save automation status",o)}},r=[{id:"CORE",label:"Esenciales (Core)",icon:o0,color:"text-amber-500"},{id:"SALES",label:"Flujos de Venta",icon:kb,color:"text-blue-500"},{id:"QUALITY",label:"Control y Calidad",icon:iy,color:"text-emerald-500"},{id:"REPORTING",label:"Reportes y Alertas",icon:NU,color:"text-blue-500"},{id:"LIFECYCLE",label:"Ciclo de Vida / Post-Venta",icon:XU,color:"text-cyan-500"}];return c.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[c.jsx(o0,{className:"text-amber-500 fill-amber-500"})," Centro de Automatizacin"]}),c.jsxs("p",{className:"text-slate-500 mt-1",children:["Gestiona las reglas de negocio que operan en segundo plano. ",c.jsx("span",{className:"text-blue-600 font-bold",children:"Estas reglas estn vivas y afectan el comportamiento del CRM."})]})]}),c.jsx("div",{className:"space-y-8",children:r.map(i=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200 flex items-center gap-2",children:[c.jsx(i.icon,{size:20,className:i.color}),c.jsx("h3",{className:"font-bold text-slate-800",children:i.label})]}),c.jsx("div",{className:"divide-y divide-slate-100",children:t.filter(a=>a.category===i.id).map(a=>c.jsxs("div",{className:"p-6 flex items-start gap-4 hover:bg-slate-50 transition-colors",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:`font-semibold text-base ${a.isActive?"text-slate-900":"text-slate-400"}`,children:a.name}),a.isActive&&c.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:"Activo"})]}),c.jsx("p",{className:"text-sm text-slate-500",children:a.description}),c.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-400 font-mono",children:[c.jsx(qf,{size:10})," Trigger: ",a.trigger]})]}),c.jsx("button",{onClick:()=>n(a.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${a.isActive?"bg-blue-600":"bg-slate-200"}`,children:c.jsx("span",{className:`${a.isActive?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition-transform`})})]},a.id))})]},i.id))})]})};function bn(t){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(t)}var Vs=Uint8Array,Ia=Uint16Array,_4=Int32Array,O4=new Vs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P4=new Vs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pM=new Vs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),G9=function(t,e){for(var n=new Ia(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new _4(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},K9=G9(O4,2),cAe=K9.b,yk=K9.r;cAe[28]=258,yk[258]=28;var uAe=G9(P4,0),mM=uAe.r,bk=new Ia(32768);for(var qn=0;qn<32768;++qn){var ec=(qn&43690)>>1|(qn&21845)<<1;ec=(ec&52428)>>2|(ec&13107)<<2,ec=(ec&61680)>>4|(ec&3855)<<4,bk[qn]=((ec&65280)>>8|(ec&255)<<8)>>1}var Fm=function(t,e,n){for(var r=t.length,i=0,a=new Ia(e);i<r;++i)t[i]&&++a[t[i]-1];var s=new Ia(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new Ia(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],d=e-t[i],f=s[t[i]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)o[bk[f]>>l]=u}else for(o=new Ia(r),i=0;i<r;++i)t[i]&&(o[i]=bk[s[t[i]-1]++]>>15-t[i]);return o},kd=new Vs(288);for(var qn=0;qn<144;++qn)kd[qn]=8;for(var qn=144;qn<256;++qn)kd[qn]=9;for(var qn=256;qn<280;++qn)kd[qn]=7;for(var qn=280;qn<288;++qn)kd[qn]=8;var Q1=new Vs(32);for(var qn=0;qn<32;++qn)Q1[qn]=5;var dAe=Fm(kd,9,0),fAe=Fm(Q1,5,0),Y9=function(t){return(t+7)/8|0},hAe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Vs(t.subarray(e,n))},Vo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},em=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},U5=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:J9,l:0};if(i==1){var s=new Vs(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(j,E){return j.f-E.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],u=0,d=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[u].f<n[f].f?u++:f++],l=n[u!=d&&n[u].f<n[f].f?u++:f++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var p=a[0].s,r=1;r<i;++r)a[r].s>p&&(p=a[r].s);var h=new Ia(p+1),m=wk(n[d-1],h,0);if(m>e){var r=0,g=0,y=m-e,x=1<<y;for(a.sort(function(E,C){return h[C.s]-h[E.s]||E.f-C.f});r<i;++r){var w=a[r].s;if(h[w]>e)g+=x-(1<<m-h[w]),h[w]=e;else break}for(g>>=y;g>0;){var S=a[r].s;h[S]<e?g-=1<<e-h[S]++-1:++r}for(;r>=0&&g;--r){var N=a[r].s;h[N]==e&&(--h[N],++g)}m=e}return{t:new Vs(h),l:m}},wk=function(t,e,n){return t.s==-1?Math.max(wk(t.l,e,n+1),wk(t.r,e,n+1)):e[t.s]=n},gM=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ia(++e),r=0,i=t[0],a=1,s=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=t[o]}return{c:n.subarray(0,r),n:e}},tm=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},X9=function(t,e,n){var r=n.length,i=Y9(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var a=0;a<r;++a)t[i+a+4]=n[a];return(i+4+r)*8},vM=function(t,e,n,r,i,a,s,o,l,u,d){Vo(e,d++,n),++i[256];for(var f=U5(i,15),p=f.t,h=f.l,m=U5(a,15),g=m.t,y=m.l,x=gM(p),w=x.c,S=x.n,N=gM(g),j=N.c,E=N.n,C=new Ia(19),P=0;P<w.length;++P)++C[w[P]&31];for(var P=0;P<j.length;++P)++C[j[P]&31];for(var T=U5(C,7),I=T.t,k=T.l,O=19;O>4&&!I[pM[O-1]];--O);var R=u+5<<3,D=tm(i,kd)+tm(a,Q1)+s,B=tm(i,p)+tm(a,g)+s+14+3*O+tm(C,I)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&R<=D&&R<=B)return X9(e,d,t.subarray(l,l+u));var V,Z,H,Q;if(Vo(e,d,1+(B<D)),d+=2,B<D){V=Fm(p,h,0),Z=p,H=Fm(g,y,0),Q=g;var fe=Fm(I,k,0);Vo(e,d,S-257),Vo(e,d+5,E-1),Vo(e,d+10,O-4),d+=14;for(var P=0;P<O;++P)Vo(e,d+3*P,I[pM[P]]);d+=3*O;for(var le=[w,j],L=0;L<2;++L)for(var F=le[L],P=0;P<F.length;++P){var G=F[P]&31;Vo(e,d,fe[G]),d+=I[G],G>15&&(Vo(e,d,F[P]>>5&127),d+=F[P]>>12)}}else V=dAe,Z=kd,H=fAe,Q=Q1;for(var P=0;P<o;++P){var ee=r[P];if(ee>255){var G=ee>>18&31;em(e,d,V[G+257]),d+=Z[G+257],G>7&&(Vo(e,d,ee>>23&31),d+=O4[G]);var ie=ee&31;em(e,d,H[ie]),d+=Q[ie],ie>3&&(em(e,d,ee>>5&8191),d+=P4[ie])}else em(e,d,V[ee]),d+=Z[ee]}return em(e,d,V[256]),d+Z[256]},pAe=new _4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),J9=new Vs(0),mAe=function(t,e,n,r,i,a){var s=a.z||t.length,o=new Vs(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var f=pAe[e-1],p=f>>13,h=f&8191,m=(1<<n)-1,g=a.p||new Ia(32768),y=a.h||new Ia(m+1),x=Math.ceil(n/3),w=2*x,S=function(He){return(t[He]^t[He+1]<<x^t[He+2]<<w)&m},N=new _4(25e3),j=new Ia(288),E=new Ia(32),C=0,P=0,T=a.i||0,I=0,k=a.w||0,O=0;T+2<s;++T){var R=S(T),D=T&32767,B=y[R];if(g[D]=B,y[R]=D,k<=T){var V=s-T;if((C>7e3||I>24576)&&(V>423||!u)){d=vM(t,l,0,N,j,E,P,I,O,T-O,d),I=C=P=0,O=T;for(var Z=0;Z<286;++Z)j[Z]=0;for(var Z=0;Z<30;++Z)E[Z]=0}var H=2,Q=0,fe=h,le=D-B&32767;if(V>2&&R==S(T-le))for(var L=Math.min(p,V)-1,F=Math.min(32767,T),G=Math.min(258,V);le<=F&&--fe&&D!=B;){if(t[T+H]==t[T+H-le]){for(var ee=0;ee<G&&t[T+ee]==t[T+ee-le];++ee);if(ee>H){if(H=ee,Q=le,ee>L)break;for(var ie=Math.min(le,ee-2),se=0,Z=0;Z<ie;++Z){var ye=T-le+Z&32767,oe=g[ye],we=ye-oe&32767;we>se&&(se=we,B=ye)}}}D=B,B=g[D],le+=D-B&32767}if(Q){N[I++]=268435456|yk[H]<<18|mM[Q];var be=yk[H]&31,de=mM[Q]&31;P+=O4[be]+P4[de],++j[257+be],++E[de],k=T+H,++C}else N[I++]=t[T],++j[t[T]]}}for(T=Math.max(T,k);T<s;++T)N[I++]=t[T],++j[t[T]];d=vM(t,l,u,N,j,E,P,I,O,T-O,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=y,a.p=g,a.i=T,a.w=k)}else{for(var T=a.w||0;T<s+u;T+=65535){var $e=T+65535;$e>=s&&(l[d/8|0]=u,$e=s),d=X9(l,d+1,t.subarray(T,$e))}a.i=s}return hAe(o,0,r+Y9(d)+i)},Z9=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,a=n.length|0,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=n[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},gAe=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),s=new Vs(a.length+t.length);s.set(a),s.set(t,a.length),t=s,i.w=a.length}return mAe(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},Q9=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},vAe=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=Z9();i.p(e.dictionary),Q9(t,2,i.d())}};function Sk(t,e){e||(e={});var n=Z9();n.p(t);var r=gAe(t,e,e.dictionary?6:2,4);return vAe(r,e),Q9(r,r.length-4,n.d()),r}var xAe=typeof TextDecoder<"u"&&new TextDecoder,yAe=0;try{xAe.decode(J9,{stream:!0}),yAe=1}catch{}function bAe(t){if(Array.isArray(t))return t}function wAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function xM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function SAe(t,e){if(t){if(typeof t=="string")return xM(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xM(t,e):void 0}}function NAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yM(t,e){return bAe(t)||wAe(t,e)||SAe(t,e)||NAe()}function bM(t,e="utf8"){return new TextDecoder(e).decode(t)}const jAe=new TextEncoder;function kAe(t){return jAe.encode(t)}const AAe=1024*8,CAe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),V5={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class T4{constructor(e=AAe,n={}){fn(this,"buffer");fn(this,"byteLength");fn(this,"byteOffset");fn(this,"length");fn(this,"offset");fn(this,"lastWrittenByte");fn(this,"littleEndian");fn(this,"_data");fn(this,"_mark");fn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,a=e.byteLength-i;let s=i;(ArrayBuffer.isView(e)||e instanceof T4)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=V5[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+r);if(this.littleEndian===CAe&&n!=="uint8"&&n!=="int8"){const o=new Uint8Array(this.buffer.slice(i,i+r));o.reverse();const l=new V5[n](o.buffer);return this.offset+=r,l.reverse(),l}const s=new V5[n](a);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return bM(this.readBytes(e))}decodeText(e=1,n="utf8"){return bM(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(kAe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ap(t){let e=t.length;for(;--e>=0;)t[e]=0}const EAe=3,_Ae=258,eB=29,OAe=256,PAe=OAe+1+eB,tB=30,TAe=512,MAe=new Array((PAe+2)*2);ap(MAe);const LAe=new Array(tB*2);ap(LAe);const IAe=new Array(TAe);ap(IAe);const DAe=new Array(_Ae-EAe+1);ap(DAe);const RAe=new Array(eB);ap(RAe);const $Ae=new Array(tB);ap($Ae);const zAe=(t,e,n,r)=>{let i=t&65535|0,a=t>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};var Nk=zAe;const FAe=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},BAe=new Uint32Array(FAe()),HAe=(t,e,n,r)=>{const i=BAe,a=r+n;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[(t^e[s])&255];return t^-1};var no=HAe,jk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},nB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const WAe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var qAe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)WAe(n,r)&&(t[r]=n[r])}}return t},UAe=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];n.set(s,i),i+=s.length}return n},rB={assign:qAe,flattenChunks:UAe};let iB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{iB=!1}const ng=new Uint8Array(256);for(let t=0;t<256;t++)ng[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ng[254]=ng[254]=1;var VAe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,a,s=t.length,o=0;for(i=0;i<s;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(o),a=0,i=0;a<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<s&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const GAe=(t,e)=>{if(e<65534&&t.subarray&&iB)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var KAe=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let s=t[r++];if(s<128){a[i++]=s;continue}let o=ng[s];if(o>4){a[i++]=65533,r+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&r<n;)s=s<<6|t[r++]&63,o--;if(o>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return GAe(a,i)},YAe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+ng[t[n]]>e?n:e},kk={string2buf:VAe,buf2string:KAe,utf8border:YAe};function XAe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var JAe=XAe;const Yv=16209,ZAe=16191;var QAe=function(e,n){let r,i,a,s,o,l,u,d,f,p,h,m,g,y,x,w,S,N,j,E,C,P,T,I;const k=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),a=e.next_out,I=e.output,s=a-(n-e.avail_out),o=a+(e.avail_out-257),l=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,p=k.window,h=k.hold,m=k.bits,g=k.lencode,y=k.distcode,x=(1<<k.lenbits)-1,w=(1<<k.distbits)-1;e:do{m<15&&(h+=T[r++]<<m,m+=8,h+=T[r++]<<m,m+=8),S=g[h&x];t:for(;;){if(N=S>>>24,h>>>=N,m-=N,N=S>>>16&255,N===0)I[a++]=S&65535;else if(N&16){j=S&65535,N&=15,N&&(m<N&&(h+=T[r++]<<m,m+=8),j+=h&(1<<N)-1,h>>>=N,m-=N),m<15&&(h+=T[r++]<<m,m+=8,h+=T[r++]<<m,m+=8),S=y[h&w];n:for(;;){if(N=S>>>24,h>>>=N,m-=N,N=S>>>16&255,N&16){if(E=S&65535,N&=15,m<N&&(h+=T[r++]<<m,m+=8,m<N&&(h+=T[r++]<<m,m+=8)),E+=h&(1<<N)-1,E>l){e.msg="invalid distance too far back",k.mode=Yv;break e}if(h>>>=N,m-=N,N=a-s,E>N){if(N=E-N,N>d&&k.sane){e.msg="invalid distance too far back",k.mode=Yv;break e}if(C=0,P=p,f===0){if(C+=u-N,N<j){j-=N;do I[a++]=p[C++];while(--N);C=a-E,P=I}}else if(f<N){if(C+=u+f-N,N-=f,N<j){j-=N;do I[a++]=p[C++];while(--N);if(C=0,f<j){N=f,j-=N;do I[a++]=p[C++];while(--N);C=a-E,P=I}}}else if(C+=f-N,N<j){j-=N;do I[a++]=p[C++];while(--N);C=a-E,P=I}for(;j>2;)I[a++]=P[C++],I[a++]=P[C++],I[a++]=P[C++],j-=3;j&&(I[a++]=P[C++],j>1&&(I[a++]=P[C++]))}else{C=a-E;do I[a++]=I[C++],I[a++]=I[C++],I[a++]=I[C++],j-=3;while(j>2);j&&(I[a++]=I[C++],j>1&&(I[a++]=I[C++]))}}else if(N&64){e.msg="invalid distance code",k.mode=Yv;break e}else{S=y[(S&65535)+(h&(1<<N)-1)];continue n}break}}else if(N&64)if(N&32){k.mode=ZAe;break e}else{e.msg="invalid literal/length code",k.mode=Yv;break e}else{S=g[(S&65535)+(h&(1<<N)-1)];continue t}break}}while(r<i&&a<o);j=m>>3,r-=j,m-=j<<3,h&=(1<<m)-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=a<o?257+(o-a):257-(a-o),k.hold=h,k.bits=m};const lf=15,wM=852,SM=592,NM=0,G5=1,jM=2,e3e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),t3e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n3e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r3e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),i3e=(t,e,n,r,i,a,s,o)=>{const l=o.bits;let u=0,d=0,f=0,p=0,h=0,m=0,g=0,y=0,x=0,w=0,S,N,j,E,C,P=null,T;const I=new Uint16Array(lf+1),k=new Uint16Array(lf+1);let O=null,R,D,B;for(u=0;u<=lf;u++)I[u]=0;for(d=0;d<r;d++)I[e[n+d]]++;for(h=l,p=lf;p>=1&&I[p]===0;p--);if(h>p&&(h=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<p&&I[f]===0;f++);for(h<f&&(h=f),y=1,u=1;u<=lf;u++)if(y<<=1,y-=I[u],y<0)return-1;if(y>0&&(t===NM||p!==1))return-1;for(k[1]=0,u=1;u<lf;u++)k[u+1]=k[u]+I[u];for(d=0;d<r;d++)e[n+d]!==0&&(s[k[e[n+d]]++]=d);if(t===NM?(P=O=s,T=20):t===G5?(P=e3e,O=t3e,T=257):(P=n3e,O=r3e,T=0),w=0,d=0,u=f,C=a,m=h,g=0,j=-1,x=1<<h,E=x-1,t===G5&&x>wM||t===jM&&x>SM)return 1;for(;;){R=u-g,s[d]+1<T?(D=0,B=s[d]):s[d]>=T?(D=O[s[d]-T],B=P[s[d]-T]):(D=96,B=0),S=1<<u-g,N=1<<m,f=N;do N-=S,i[C+(w>>g)+N]=R<<24|D<<16|B|0;while(N!==0);for(S=1<<u-1;w&S;)S>>=1;if(S!==0?(w&=S-1,w+=S):w=0,d++,--I[u]===0){if(u===p)break;u=e[n+s[d]]}if(u>h&&(w&E)!==j){for(g===0&&(g=h),C+=f,m=u-g,y=1<<m;m+g<p&&(y-=I[m+g],!(y<=0));)m++,y<<=1;if(x+=1<<m,t===G5&&x>wM||t===jM&&x>SM)return 1;j=w&E,i[j]=h<<24|m<<16|C-a|0}}return w!==0&&(i[C+w]=u-g<<24|64<<16|0),o.bits=h,0};var Bm=i3e;const a3e=0,aB=1,sB=2,{Z_FINISH:kM,Z_BLOCK:s3e,Z_TREES:Xv,Z_OK:Ad,Z_STREAM_END:o3e,Z_NEED_DICT:l3e,Z_STREAM_ERROR:ys,Z_DATA_ERROR:oB,Z_MEM_ERROR:lB,Z_BUF_ERROR:c3e,Z_DEFLATED:AM}=nB,R2=16180,CM=16181,EM=16182,_M=16183,OM=16184,PM=16185,TM=16186,MM=16187,LM=16188,IM=16189,eb=16190,Go=16191,K5=16192,DM=16193,Y5=16194,RM=16195,$M=16196,zM=16197,FM=16198,Jv=16199,Zv=16200,BM=16201,HM=16202,WM=16203,qM=16204,UM=16205,X5=16206,VM=16207,GM=16208,Kn=16209,cB=16210,uB=16211,u3e=852,d3e=592,f3e=15,h3e=f3e,KM=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function p3e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Id=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<R2||e.mode>uB?1:0},dB=t=>{if(Id(t))return ys;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=R2,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(u3e),e.distcode=e.distdyn=new Int32Array(d3e),e.sane=1,e.back=-1,Ad},fB=t=>{if(Id(t))return ys;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,dB(t)},hB=(t,e)=>{let n;if(Id(t))return ys;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ys:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,fB(t))},pB=(t,e)=>{if(!t)return ys;const n=new p3e;t.state=n,n.strm=t,n.window=null,n.mode=R2;const r=hB(t,e);return r!==Ad&&(t.state=null),r},m3e=t=>pB(t,h3e);let YM=!0,J5,Z5;const g3e=t=>{if(YM){J5=new Int32Array(512),Z5=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Bm(aB,t.lens,0,288,J5,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Bm(sB,t.lens,0,32,Z5,0,t.work,{bits:5}),YM=!1}t.lencode=J5,t.lenbits=9,t.distcode=Z5,t.distbits=5},mB=(t,e,n,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(e.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(e.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},v3e=(t,e)=>{let n,r,i,a,s,o,l,u,d,f,p,h,m,g,y=0,x,w,S,N,j,E,C,P;const T=new Uint8Array(4);let I,k;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Id(t)||!t.output||!t.input&&t.avail_in!==0)return ys;n=t.state,n.mode===Go&&(n.mode=K5),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,f=o,p=l,P=Ad;e:for(;;)switch(n.mode){case R2:if(n.wrap===0){n.mode=K5;break}for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=u&255,T[1]=u>>>8&255,n.check=no(n.check,T,2,0),u=0,d=0,n.mode=CM;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Kn;break}if((u&15)!==AM){t.msg="unknown compression method",n.mode=Kn;break}if(u>>>=4,d-=4,C=(u&15)+8,n.wbits===0&&(n.wbits=C),C>15||C>n.wbits){t.msg="invalid window size",n.mode=Kn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?IM:Go,u=0,d=0;break;case CM:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.flags=u,(n.flags&255)!==AM){t.msg="unknown compression method",n.mode=Kn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Kn;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=no(n.check,T,2,0)),u=0,d=0,n.mode=EM;case EM:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=no(n.check,T,4,0)),u=0,d=0,n.mode=_M;case _M:for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=no(n.check,T,2,0)),u=0,d=0,n.mode=OM;case OM:if(n.flags&1024){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=no(n.check,T,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=PM;case PM:if(n.flags&1024&&(h=n.length,h>o&&(h=o),h&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),C)),n.flags&512&&n.wrap&4&&(n.check=no(n.check,r,h,a)),o-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=TM;case TM:if(n.flags&2048){if(o===0)break e;h=0;do C=r[a+h++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=no(n.check,r,h,a)),o-=h,a+=h,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=MM;case MM:if(n.flags&4096){if(o===0)break e;h=0;do C=r[a+h++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&h<o);if(n.flags&512&&n.wrap&4&&(n.check=no(n.check,r,h,a)),o-=h,a+=h,C)break e}else n.head&&(n.head.comment=null);n.mode=LM;case LM:if(n.flags&512){for(;d<16;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Kn;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Go;break;case IM:for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}t.adler=n.check=KM(u),u=0,d=0,n.mode=eb;case eb:if(n.havedict===0)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,l3e;t.adler=n.check=1,n.mode=Go;case Go:if(e===s3e||e===Xv)break e;case K5:if(n.last){u>>>=d&7,d-=d&7,n.mode=X5;break}for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}switch(n.last=u&1,u>>>=1,d-=1,u&3){case 0:n.mode=DM;break;case 1:if(g3e(n),n.mode=Jv,e===Xv){u>>>=2,d-=2;break e}break;case 2:n.mode=$M;break;case 3:t.msg="invalid block type",n.mode=Kn}u>>>=2,d-=2;break;case DM:for(u>>>=d&7,d-=d&7;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Kn;break}if(n.length=u&65535,u=0,d=0,n.mode=Y5,e===Xv)break e;case Y5:n.mode=RM;case RM:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;i.set(r.subarray(a,a+h),s),o-=h,a+=h,l-=h,s+=h,n.length-=h;break}n.mode=Go;break;case $M:for(;d<14;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.nlen=(u&31)+257,u>>>=5,d-=5,n.ndist=(u&31)+1,u>>>=5,d-=5,n.ncode=(u&15)+4,u>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Kn;break}n.have=0,n.mode=zM;case zM:for(;n.have<n.ncode;){for(;d<3;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.lens[O[n.have++]]=u&7,u>>>=3,d-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},P=Bm(a3e,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,P){t.msg="invalid code lengths set",n.mode=Kn;break}n.have=0,n.mode=FM;case FM:for(;n.have<n.nlen+n.ndist;){for(;y=n.lencode[u&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,S=y&65535,!(x<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(S<16)u>>>=x,d-=x,n.lens[n.have++]=S;else{if(S===16){for(k=x+2;d<k;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(u>>>=x,d-=x,n.have===0){t.msg="invalid bit length repeat",n.mode=Kn;break}C=n.lens[n.have-1],h=3+(u&3),u>>>=2,d-=2}else if(S===17){for(k=x+3;d<k;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=x,d-=x,C=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=x+7;d<k;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=x,d-=x,C=0,h=11+(u&127),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Kn;break}for(;h--;)n.lens[n.have++]=C}}if(n.mode===Kn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Kn;break}if(n.lenbits=9,I={bits:n.lenbits},P=Bm(aB,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,P){t.msg="invalid literal/lengths set",n.mode=Kn;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},P=Bm(sB,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,P){t.msg="invalid distances set",n.mode=Kn;break}if(n.mode=Jv,e===Xv)break e;case Jv:n.mode=Zv;case Zv:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,QAe(t,p),s=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,u=n.hold,d=n.bits,n.mode===Go&&(n.back=-1);break}for(n.back=0;y=n.lencode[u&(1<<n.lenbits)-1],x=y>>>24,w=y>>>16&255,S=y&65535,!(x<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(w&&!(w&240)){for(N=x,j=w,E=S;y=n.lencode[E+((u&(1<<N+j)-1)>>N)],x=y>>>24,w=y>>>16&255,S=y&65535,!(N+x<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=N,d-=N,n.back+=N}if(u>>>=x,d-=x,n.back+=x,n.length=S,w===0){n.mode=UM;break}if(w&32){n.back=-1,n.mode=Go;break}if(w&64){t.msg="invalid literal/length code",n.mode=Kn;break}n.extra=w&15,n.mode=BM;case BM:if(n.extra){for(k=n.extra;d<k;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=HM;case HM:for(;y=n.distcode[u&(1<<n.distbits)-1],x=y>>>24,w=y>>>16&255,S=y&65535,!(x<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(!(w&240)){for(N=x,j=w,E=S;y=n.distcode[E+((u&(1<<N+j)-1)>>N)],x=y>>>24,w=y>>>16&255,S=y&65535,!(N+x<=d);){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}u>>>=N,d-=N,n.back+=N}if(u>>>=x,d-=x,n.back+=x,w&64){t.msg="invalid distance code",n.mode=Kn;break}n.offset=S,n.extra=w&15,n.mode=WM;case WM:if(n.extra){for(k=n.extra;d<k;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Kn;break}n.mode=qM;case qM:if(l===0)break e;if(h=p-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Kn;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,m=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=g[m++];while(--h);n.length===0&&(n.mode=Zv);break;case UM:if(l===0)break e;i[s++]=n.length,l--,n.mode=Zv;break;case X5:if(n.wrap){for(;d<32;){if(o===0)break e;o--,u|=r[a++]<<d,d+=8}if(p-=l,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?no(n.check,i,p,s-p):Nk(n.check,i,p,s-p)),p=l,n.wrap&4&&(n.flags?u:KM(u))!==n.check){t.msg="incorrect data check",n.mode=Kn;break}u=0,d=0}n.mode=VM;case VM:if(n.wrap&&n.flags){for(;d<32;){if(o===0)break e;o--,u+=r[a++]<<d,d+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Kn;break}u=0,d=0}n.mode=GM;case GM:P=o3e;break e;case Kn:P=oB;break e;case cB:return lB;case uB:default:return ys}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=u,n.bits=d,(n.wsize||p!==t.avail_out&&n.mode<Kn&&(n.mode<X5||e!==kM))&&mB(t,t.output,t.next_out,p-t.avail_out),f-=t.avail_in,p-=t.avail_out,t.total_in+=f,t.total_out+=p,n.total+=p,n.wrap&4&&p&&(t.adler=n.check=n.flags?no(n.check,i,p,t.next_out-p):Nk(n.check,i,p,t.next_out-p)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Go?128:0)+(n.mode===Jv||n.mode===Y5?256:0),(f===0&&p===0||e===kM)&&P===Ad&&(P=c3e),P},x3e=t=>{if(Id(t))return ys;let e=t.state;return e.window&&(e.window=null),t.state=null,Ad},y3e=(t,e)=>{if(Id(t))return ys;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Ad):ys},b3e=(t,e)=>{const n=e.length;let r,i,a;return Id(t)||(r=t.state,r.wrap!==0&&r.mode!==eb)?ys:r.mode===eb&&(i=1,i=Nk(i,e,n,0),i!==r.check)?oB:(a=mB(t,e,n,n),a?(r.mode=cB,lB):(r.havedict=1,Ad))};var w3e=fB,S3e=hB,N3e=dB,j3e=m3e,k3e=pB,A3e=v3e,C3e=x3e,E3e=y3e,_3e=b3e,O3e="pako inflate (from Nodeca project)",Qo={inflateReset:w3e,inflateReset2:S3e,inflateResetKeep:N3e,inflateInit:j3e,inflateInit2:k3e,inflate:A3e,inflateEnd:C3e,inflateGetHeader:E3e,inflateSetDictionary:_3e,inflateInfo:O3e};function P3e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var T3e=P3e;const gB=Object.prototype.toString,{Z_NO_FLUSH:M3e,Z_FINISH:L3e,Z_OK:rg,Z_STREAM_END:Q5,Z_NEED_DICT:eS,Z_STREAM_ERROR:I3e,Z_DATA_ERROR:XM,Z_MEM_ERROR:D3e}=nB;function _g(t){this.options=rB.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JAe,this.strm.avail_out=0;let n=Qo.inflateInit2(this.strm,e.windowBits);if(n!==rg)throw new Error(jk[n]);if(this.header=new T3e,Qo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=kk.string2buf(e.dictionary):gB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Qo.inflateSetDictionary(this.strm,e.dictionary),n!==rg)))throw new Error(jk[n])}_g.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?L3e:M3e,gB.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Qo.inflate(n,s),a===eS&&i&&(a=Qo.inflateSetDictionary(n,i),a===rg?a=Qo.inflate(n,s):a===XM&&(a=eS));n.avail_in>0&&a===Q5&&n.state.wrap>0&&t[n.next_in]!==0;)Qo.inflateReset(n),a=Qo.inflate(n,s);switch(a){case I3e:case XM:case eS:case D3e:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(n.avail_out===0||a===Q5))if(this.options.to==="string"){let l=kk.utf8border(n.output,n.next_out),u=n.next_out-l,d=kk.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(d)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===rg&&o===0)){if(a===Q5)return a=Qo.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};_g.prototype.onData=function(t){this.chunks.push(t)};_g.prototype.onEnd=function(t){t===rg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rB.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function R3e(t,e){const n=new _g(e);if(n.push(t),n.err)throw n.msg||jk[n.err];return n.result}var $3e=_g,z3e=R3e,F3e={Inflate:$3e,inflate:z3e};const{Inflate:B3e,inflate:H3e}=F3e;var JM=B3e,W3e=H3e;const vB=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;vB[t]=e}const ZM=4294967295;function q3e(t,e,n){let r=t;for(let i=0;i<n;i++)r=vB[(r^e[i])&255]^r>>>8;return r}function U3e(t,e){return(q3e(ZM,t,e)^ZM)>>>0}function QM(t,e,n){const r=t.readUint32(),i=U3e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function xB(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function yB(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function bB(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function wB(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+(e[a-i]>>1)&255}else{for(;a<i;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<r;a++)e[a]=t[a]+(e[a-i]+n[a]>>1)&255}}function SB(t,e,n,r,i){let a=0;if(n.length===0){for(;a<i;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-i]&255}else{for(;a<i;a++)e[a]=t[a]+n[a]&255;for(;a<r;a++)e[a]=t[a]+V3e(e[a-i],n[a],n[a-i])&255}}function V3e(t,e,n){const r=t+e-n,i=Math.abs(r-t),a=Math.abs(r-e),s=Math.abs(r-n);return i<=a&&i<=s?t:a<=s?e:n}function G3e(t,e,n,r,i,a){switch(t){case 0:xB(e,n,i);break;case 1:yB(e,n,i,a);break;case 2:bB(e,n,r,i);break;case 3:wB(e,n,r,i,a);break;case 4:SB(e,n,r,i,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const K3e=new Uint16Array([255]),Y3e=new Uint8Array(K3e.buffer),X3e=Y3e[0]===255;function J3e(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(r*n*o);let u=0;for(let d=0;d<7;d++){const f=s[d],p=Math.ceil((n-f.x)/f.xStep),h=Math.ceil((r-f.y)/f.yStep);if(p<=0||h<=0)continue;const m=p*o,g=new Uint8Array(m);for(let y=0;y<h;y++){const x=e[u++],w=e.subarray(u,u+m);u+=m;const S=new Uint8Array(m);G3e(x,w,S,g,m,o),g.set(S);for(let N=0;N<p;N++){const j=f.x+N*f.xStep,E=f.y+y*f.yStep;if(!(j>=n||E>=r))for(let C=0;C<o;C++)l[(E*n+j)*o+C]=S[N*o+C]}}}if(a===16){const d=new Uint16Array(l.buffer);if(X3e)for(let f=0;f<d.length;f++)d[f]=Z3e(d[f]);return d}else return l}function Z3e(t){return(t&255)<<8|t>>8&255}const Q3e=new Uint16Array([255]),e4e=new Uint8Array(Q3e.buffer),t4e=e4e[0]===255,n4e=new Uint8Array(0);function eL(t){const{data:e,width:n,height:r,channels:i,depth:a}=t,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*n),l=new Uint8Array(r*o);let u=n4e,d=0,f,p;for(let h=0;h<r;h++){switch(f=e.subarray(d+1,d+1+o),p=l.subarray(h*o,(h+1)*o),e[d]){case 0:xB(f,p,o);break;case 1:yB(f,p,o,s);break;case 2:bB(f,p,u,o);break;case 3:wB(f,p,u,o,s);break;case 4:SB(f,p,u,o,s);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=o+1}if(a===16){const h=new Uint16Array(l.buffer);if(t4e)for(let m=0;m<h.length;m++)h[m]=r4e(h[m]);return h}else return l}function r4e(t){return(t&255)<<8|t>>8&255}const Ax=Uint8Array.of(137,80,78,71,13,10,26,10);function tL(t){if(!i4e(t.readBytes(Ax.length)))throw new Error("wrong PNG signature")}function i4e(t){if(t.length<Ax.length)return!1;for(let e=0;e<Ax.length;e++)if(t[e]!==Ax[e])return!1;return!0}const a4e="tEXt",s4e=0,NB=new TextDecoder("latin1");function o4e(t){if(c4e(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const l4e=/^[\u0000-\u00FF]*$/;function c4e(t){if(!l4e.test(t))throw new Error("invalid latin1 text")}function u4e(t,e,n){const r=jB(e);t[r]=d4e(e,n-r.length-1)}function jB(t){for(t.mark();t.readByte()!==s4e;);const e=t.offset;t.reset();const n=NB.decode(t.readBytes(e-t.offset-1));return t.skip(1),o4e(n),n}function d4e(t,e){return NB.decode(t.readBytes(e))}const Ea={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},tS={UNKNOWN:-1,DEFLATE:0},nL={UNKNOWN:-1,ADAPTIVE:0},nS={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Qv={NONE:0,BACKGROUND:1,PREVIOUS:2},rS={SOURCE:0,OVER:1};class f4e extends T4{constructor(n,r={}){super(n);fn(this,"_checkCrc");fn(this,"_inflator");fn(this,"_png");fn(this,"_apng");fn(this,"_end");fn(this,"_hasPalette");fn(this,"_palette");fn(this,"_hasTransparency");fn(this,"_transparency");fn(this,"_compressionMethod");fn(this,"_filterMethod");fn(this,"_interlaceMethod");fn(this,"_colorType");fn(this,"_isAnimated");fn(this,"_numberOfFrames");fn(this,"_numberOfPlays");fn(this,"_frames");fn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new JM,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=tS.UNKNOWN,this._filterMethod=nL.UNKNOWN,this._interlaceMethod=nS.UNKNOWN,this._colorType=Ea.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(tL(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(tL(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case a4e:u4e(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?QM(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?QM(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=h4e(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ea.GREYSCALE:i=1;break;case Ea.TRUECOLOUR:i=3;break;case Ea.INDEXED_COLOUR:i=1;break;case Ea.GREYSCALE_ALPHA:i=2;break;case Ea.TRUECOLOUR_ALPHA:i=4;break;case Ea.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==tS.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<r;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Ea.GREYSCALE:case Ea.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Ea.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ea.UNKNOWN:case Ea.GREYSCALE_ALPHA:case Ea.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=jB(this),i=this.readUint8();if(i!==tS.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:W3e(a)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=eL({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case Qv.NONE:break;case Qv.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let s=0;s<this._png.width;s++){const o=(a*n.width+s)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[o+l]=0}break;case Qv.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,a=(s,o)=>{const l=((s+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(s*r.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case rS.SOURCE:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++)n.data[l+d]=r.data[u+d]}break;case rS.OVER:for(let s=0;s<r.height;s++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(s,o);for(let d=0;d<this._png.channels;d++){const f=r.data[u+this._png.channels-1]/i,p=d%(this._png.channels-1)===0?1:r.data[u+d],h=Math.floor(f*p+(1-f)*n.data[l+d]);n.data[l+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==nL.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===nS.NO_INTERLACE)this._png.data=eL({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===nS.ADAM7)this._png.data=J3e({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Qv.NONE,blendOp:rS.SOURCE,data:n}),this._inflator=new JM,this._writingDataChunks=!1}}function h4e(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var rL;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(rL||(rL={}));function p4e(t,e){return new f4e(t,e).decode()}var Dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function iS(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var _n={log:iS,warn:function(t){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):iS.call(null,arguments))},error:function(t){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):iS(t))}};function aS(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Eu(r.response,e,n)},r.onerror=function(){_n.error("could not download file")},r.send()}function iL(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ex(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Eu=Dt.saveAs||((typeof window>"u"?"undefined":bn(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Dt.URL||Dt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?iL(i.href)?aS(t,e,n):ex(i,i.target="_blank"):ex(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ex(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(iL(t))aS(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){ex(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:bn(a)!=="object"&&(_n.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return aS(t,e,n);var i=t.type==="application/octet-stream",a=/constructor/i.test(Dt.HTMLElement)||Dt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&(typeof FileReader>"u"?"undefined":bn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=s?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(t)}else{var l=Dt.URL||Dt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function kB(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,s=i.exec(t);s&&(e=a(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}var Cx=Dt.atob.bind(Dt),aL=Dt.btoa.bind(Dt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function sS(t,e){var n=t[0],r=t[1],i=t[2],a=t[3];n=Ni(n,r,i,a,e[0],7,-680876936),a=Ni(a,n,r,i,e[1],12,-389564586),i=Ni(i,a,n,r,e[2],17,606105819),r=Ni(r,i,a,n,e[3],22,-1044525330),n=Ni(n,r,i,a,e[4],7,-176418897),a=Ni(a,n,r,i,e[5],12,1200080426),i=Ni(i,a,n,r,e[6],17,-1473231341),r=Ni(r,i,a,n,e[7],22,-45705983),n=Ni(n,r,i,a,e[8],7,1770035416),a=Ni(a,n,r,i,e[9],12,-1958414417),i=Ni(i,a,n,r,e[10],17,-42063),r=Ni(r,i,a,n,e[11],22,-1990404162),n=Ni(n,r,i,a,e[12],7,1804603682),a=Ni(a,n,r,i,e[13],12,-40341101),i=Ni(i,a,n,r,e[14],17,-1502002290),n=ji(n,r=Ni(r,i,a,n,e[15],22,1236535329),i,a,e[1],5,-165796510),a=ji(a,n,r,i,e[6],9,-1069501632),i=ji(i,a,n,r,e[11],14,643717713),r=ji(r,i,a,n,e[0],20,-373897302),n=ji(n,r,i,a,e[5],5,-701558691),a=ji(a,n,r,i,e[10],9,38016083),i=ji(i,a,n,r,e[15],14,-660478335),r=ji(r,i,a,n,e[4],20,-405537848),n=ji(n,r,i,a,e[9],5,568446438),a=ji(a,n,r,i,e[14],9,-1019803690),i=ji(i,a,n,r,e[3],14,-187363961),r=ji(r,i,a,n,e[8],20,1163531501),n=ji(n,r,i,a,e[13],5,-1444681467),a=ji(a,n,r,i,e[2],9,-51403784),i=ji(i,a,n,r,e[7],14,1735328473),n=ki(n,r=ji(r,i,a,n,e[12],20,-1926607734),i,a,e[5],4,-378558),a=ki(a,n,r,i,e[8],11,-2022574463),i=ki(i,a,n,r,e[11],16,1839030562),r=ki(r,i,a,n,e[14],23,-35309556),n=ki(n,r,i,a,e[1],4,-1530992060),a=ki(a,n,r,i,e[4],11,1272893353),i=ki(i,a,n,r,e[7],16,-155497632),r=ki(r,i,a,n,e[10],23,-1094730640),n=ki(n,r,i,a,e[13],4,681279174),a=ki(a,n,r,i,e[0],11,-358537222),i=ki(i,a,n,r,e[3],16,-722521979),r=ki(r,i,a,n,e[6],23,76029189),n=ki(n,r,i,a,e[9],4,-640364487),a=ki(a,n,r,i,e[12],11,-421815835),i=ki(i,a,n,r,e[15],16,530742520),n=Ai(n,r=ki(r,i,a,n,e[2],23,-995338651),i,a,e[0],6,-198630844),a=Ai(a,n,r,i,e[7],10,1126891415),i=Ai(i,a,n,r,e[14],15,-1416354905),r=Ai(r,i,a,n,e[5],21,-57434055),n=Ai(n,r,i,a,e[12],6,1700485571),a=Ai(a,n,r,i,e[3],10,-1894986606),i=Ai(i,a,n,r,e[10],15,-1051523),r=Ai(r,i,a,n,e[1],21,-2054922799),n=Ai(n,r,i,a,e[8],6,1873313359),a=Ai(a,n,r,i,e[15],10,-30611744),i=Ai(i,a,n,r,e[6],15,-1560198380),r=Ai(r,i,a,n,e[13],21,1309151649),n=Ai(n,r,i,a,e[4],6,-145523070),a=Ai(a,n,r,i,e[11],10,-1120210379),i=Ai(i,a,n,r,e[2],15,718787259),r=Ai(r,i,a,n,e[9],21,-343485551),t[0]=Nc(n,t[0]),t[1]=Nc(r,t[1]),t[2]=Nc(i,t[2]),t[3]=Nc(a,t[3])}function $2(t,e,n,r,i,a){return e=Nc(Nc(e,t),Nc(r,a)),Nc(e<<i|e>>>32-i,n)}function Ni(t,e,n,r,i,a,s){return $2(e&n|~e&r,t,e,i,a,s)}function ji(t,e,n,r,i,a,s){return $2(e&r|n&~r,t,e,i,a,s)}function ki(t,e,n,r,i,a,s){return $2(e^n^r,t,e,i,a,s)}function Ai(t,e,n,r,i,a,s){return $2(n^(e|~r),t,e,i,a,s)}function AB(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)sS(r,m4e(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(sS(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,sS(r,i),r}function m4e(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var sL="0123456789abcdef".split("");function g4e(t){for(var e="",n=0;n<4;n++)e+=sL[t>>8*n+4&15]+sL[t>>8*n&15];return e}function v4e(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Ak(t){return AB(t).map(v4e).join("")}var x4e=function(t){for(var e=0;e<t.length;e++)t[e]=g4e(t[e]);return t.join("")}(AB("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nc(t,e){if(x4e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ck(t,e){var n,r,i,a;if(t!==n){for(var s=(i=t,a=1+(256/t.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+s.charCodeAt(l))%256,o[l]=o[u],o[u]=d}n=t,r=o}else o=r;var f=e.length,p=0,h=0,m="";for(l=0;l<f;l++)h=(h+(d=o[p=(p+1)%256]))%256,o[p]=o[h],o[h]=d,s=o[(o[p]+o[h])%256],m+=String.fromCharCode(e.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var oL={print:4,modify:8,copy:16,"annot-forms":32};function mf(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(o){if(oL.perm!==void 0)throw new Error("Invalid permission: "+o);i+=oL[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=Ak(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Ck(this.encryptionKey,this.padding)}function gf(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function lL(t){if(bn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in e[n]){var s=e[n][a];try{s[0].apply(t,r)}catch(o){Dt.console&&_n.error("jsPDF PubSub Error",o.message,o)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function tb(t){if(!(this instanceof tb))return new tb(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function CB(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Mu(t,e,n,r,i){if(!(this instanceof Mu))return new Mu(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,CB.call(this,r,i)}function Df(t,e,n,r,i){if(!(this instanceof Df))return new Df(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,CB.call(this,r,i)}function kt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,u="S",d=null;bn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),s=t.filters||(a===!0?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=lL;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(A){m=A};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return y};var x=h.__private__.getPageFormat=function(A){return y[A]};i=i||"a4";var w="compat",S="advanced",N=w;function j(){this.saveGraphicsState(),Y(new ht(Fe,0,0,-Fe,0,lu()*Fe).toString()+" cm"),this.setFontSize(this.getFontSize()/Fe),u="n",N=S}function E(){this.restoreGraphicsState(),u="S",N=w}var C=h.__private__.combineFontStyleAndFontWeight=function(A,$){if(A=="bold"&&$=="normal"||A=="bold"&&$==400||A=="normal"&&$=="italic"||A=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(A=$==400||$==="normal"?A==="italic"?"italic":"normal":$!=700&&$!=="bold"||A!=="normal"?($==700?"bold":$)+""+A:"bold"),A};h.advancedAPI=function(A){var $=N===w;return $&&j.call(this),typeof A!="function"||(A(this),$&&E.call(this)),this},h.compatAPI=function(A){var $=N===S;return $&&E.call(this),typeof A!="function"||(A(this),$&&j.call(this)),this},h.isAdvancedAPI=function(){return N===S};var P,T=function(A){if(N!==S)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=h.roundToPrecision=h.__private__.roundToPrecision=function(A,$){var re=e||$;if(isNaN(A)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(re).replace(/0+$/,"")};P=h.hpf=h.__private__.hpf=typeof l=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return I(A,l)}:l==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return I(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return I(A,16)};var k=h.f2=h.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return I(A,2)},O=h.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return I(A,3)},R=h.scale=h.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return N===w?A*Fe:N===S?A:void 0},D=function(A){return R(function($){return N===w?lu()-$:N===S?$:void 0}(A))};h.__private__.setPrecision=h.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var B,V="00000000000000000000000000000000",Z=h.__private__.getFileId=function(){return V},H=h.__private__.setFileId=function(A){return V=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(pr=new mf(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};h.setFileId=function(A){return H(A),this},h.getFileId=function(){return Z()};var Q=h.__private__.convertDateToPDFDate=function(A){var $=A.getTimezoneOffset(),re=$<0?"+":"-",ce=Math.floor(Math.abs($/60)),Ne=Math.abs($%60),ze=[re,G(ce),"'",G(Ne),"'"].join("");return["D:",A.getFullYear(),G(A.getMonth()+1),G(A.getDate()),G(A.getHours()),G(A.getMinutes()),G(A.getSeconds()),ze].join("")},fe=h.__private__.convertPDFDateToDate=function(A){var $=parseInt(A.substr(2,4),10),re=parseInt(A.substr(6,2),10)-1,ce=parseInt(A.substr(8,2),10),Ne=parseInt(A.substr(10,2),10),ze=parseInt(A.substr(12,2),10),Ue=parseInt(A.substr(14,2),10);return new Date($,re,ce,Ne,ze,Ue,0)},le=h.__private__.setCreationDate=function(A){var $;if(A===void 0&&(A=new Date),A instanceof Date)$=Q(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=A}return B=$},L=h.__private__.getCreationDate=function(A){var $=B;return A==="jsDate"&&($=fe(B)),$};h.setCreationDate=function(A){return le(A),this},h.getCreationDate=function(A){return L(A)};var F,G=h.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},ee=h.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},ie=0,se=[],ye=[],oe=0,we=[],be=[],de=!1,$e=ye;h.__private__.setCustomOutputDestination=function(A){de=!0,$e=A};var He=function(A){de||($e=A)};h.__private__.resetCustomOutputDestination=function(){de=!1,$e=ye};var Y=h.__private__.out=function(A){return A=A.toString(),oe+=A.length+1,$e.push(A),$e},he=h.__private__.write=function(A){return Y(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Ke=h.__private__.getArrayBuffer=function(A){for(var $=A.length,re=new ArrayBuffer($),ce=new Uint8Array(re);$--;)ce[$]=A.charCodeAt($);return re},qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return qe};var Oe=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(A){return Oe=N===S?A/Fe:A,this};var it,Je=h.__private__.getFontSize=h.getFontSize=function(){return N===w?Oe:Oe*Fe},ge=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(A){return ge=A,this},h.__private__.getR2L=h.getR2L=function(){return ge};var Me,ut=h.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))it=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');it=A}else it=parseInt(A,10)};h.__private__.getZoomMode=function(){return it};var st,ft=h.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Me=A};h.__private__.getPageMode=function(){return Me};var At=h.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');st=A};h.__private__.getLayoutMode=function(){return st},h.__private__.setDisplayMode=h.setDisplayMode=function(A,$,re){return ut(A),At($),ft(re),this};var Rt={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(A){if(Object.keys(Rt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rt[A]},h.__private__.getDocumentProperties=function(){return Rt},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(A){for(var $ in Rt)Rt.hasOwnProperty($)&&A[$]&&(Rt[$]=A[$]);return this},h.__private__.setDocumentProperty=function(A,$){if(Object.keys(Rt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rt[A]=$};var Se,Fe,Le,dt,ve,ae={},je={},Ie=[],Ae={},Ze={},Ye={},tt={},Kt=null,pe=0,Re=[],lt=new lL(h),Pt=t.hotfixes||[],pt={},en={},un=[],ht=function A($,re,ce,Ne,ze,Ue){if(!(this instanceof A))return new A($,re,ce,Ne,ze,Ue);isNaN($)&&($=1),isNaN(re)&&(re=0),isNaN(ce)&&(ce=0),isNaN(Ne)&&(Ne=1),isNaN(ze)&&(ze=0),isNaN(Ue)&&(Ue=0),this._matrix=[$,re,ce,Ne,ze,Ue]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(A)},ht.prototype.multiply=function(A){var $=A.sx*this.sx+A.shy*this.shx,re=A.sx*this.shy+A.shy*this.sy,ce=A.shx*this.sx+A.sy*this.shx,Ne=A.shx*this.shy+A.sy*this.sy,ze=A.tx*this.sx+A.ty*this.shx+this.tx,Ue=A.tx*this.shy+A.ty*this.sy+this.ty;return new ht($,re,ce,Ne,ze,Ue)},ht.prototype.decompose=function(){var A=this.sx,$=this.shy,re=this.shx,ce=this.sy,Ne=this.tx,ze=this.ty,Ue=Math.sqrt(A*A+$*$),yt=(A/=Ue)*re+($/=Ue)*ce;re-=A*yt,ce-=$*yt;var Nt=Math.sqrt(re*re+ce*ce);return yt/=Nt,A*(ce/=Nt)<$*(re/=Nt)&&(A=-A,$=-$,yt=-yt,Ue=-Ue),{scale:new ht(Ue,0,0,Nt,0,0),translate:new ht(1,0,0,1,Ne,ze),rotate:new ht(A,$,-$,A,0,0),skew:new ht(1,0,yt,1,0,0)}},ht.prototype.toString=function(A){return this.join(" ")},ht.prototype.inversed=function(){var A=this.sx,$=this.shy,re=this.shx,ce=this.sy,Ne=this.tx,ze=this.ty,Ue=1/(A*ce-$*re),yt=ce*Ue,Nt=-$*Ue,zt=-re*Ue,Ut=A*Ue;return new ht(yt,Nt,zt,Ut,-yt*Ne-zt*ze,-Nt*Ne-Ut*ze)},ht.prototype.applyToPoint=function(A){var $=A.x*this.sx+A.y*this.shx+this.tx,re=A.x*this.shy+A.y*this.sy+this.ty;return new Po($,re)},ht.prototype.applyToRectangle=function(A){var $=this.applyToPoint(A),re=this.applyToPoint(new Po(A.x+A.w,A.y+A.h));return new fp($.x,$.y,re.x-$.x,re.y-$.y)},ht.prototype.clone=function(){var A=this.sx,$=this.shy,re=this.shx,ce=this.sy,Ne=this.tx,ze=this.ty;return new ht(A,$,re,ce,Ne,ze)},h.Matrix=ht;var jn=h.matrixMult=function(A,$){return $.multiply(A)},Jn=new ht(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Jn;var Tr=function(A,$){if(!Ze[A]){var re=($ instanceof Mu?"Sh":"P")+(Object.keys(Ae).length+1).toString(10);$.id=re,Ze[A]=re,Ae[re]=$,lt.publish("addPattern",$)}};h.ShadingPattern=Mu,h.TilingPattern=Df,h.addShadingPattern=function(A,$){return T("addShadingPattern()"),Tr(A,$),this},h.beginTilingPattern=function(A){T("beginTilingPattern()"),hp(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},h.endTilingPattern=function(A,$){T("endTilingPattern()"),$.stream=be[F].join(`
`),Tr(A,$),lt.publish("endTilingPattern",$),un.pop().restore()};var yi,an=h.__private__.newObject=function(){var A=ir();return Mr(A,!0),A},ir=h.__private__.newObjectDeferred=function(){return ie++,se[ie]=function(){return oe},ie},Mr=function(A,$){return $=typeof $=="boolean"&&$,se[A]=oe,$&&Y(A+" 0 obj"),A},xa=h.__private__.newAdditionalObject=function(){var A={objId:ir(),content:""};return we.push(A),A},qa=ir(),Qi=ir(),$n=h.__private__.decodeColorString=function(A){var $=A.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var re=parseFloat($[0]);$=[re,re,re,"r"]}for(var ce="#",Ne=0;Ne<3;Ne++)ce+=("0"+Math.floor(255*parseFloat($[Ne])).toString(16)).slice(-2);return ce},ri=h.__private__.encodeColorString=function(A){var $;typeof A=="string"&&(A={ch1:A});var re=A.ch1,ce=A.ch2,Ne=A.ch3,ze=A.ch4,Ue=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var yt=new kB(re);if(yt.ok)re=yt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var Nt=parseInt(re.substr(1),16);re=Nt>>16&255,ce=Nt>>8&255,Ne=255&Nt}if(ce===void 0||ze===void 0&&re===ce&&ce===Ne)$=typeof re=="string"?re+" "+Ue[0]:A.precision===2?k(re/255)+" "+Ue[0]:O(re/255)+" "+Ue[0];else if(ze===void 0||bn(ze)==="object"){if(ze&&!isNaN(ze.a)&&ze.a===0)return["1.","1.","1.",Ue[1]].join(" ");$=typeof re=="string"?[re,ce,Ne,Ue[1]].join(" "):A.precision===2?[k(re/255),k(ce/255),k(Ne/255),Ue[1]].join(" "):[O(re/255),O(ce/255),O(Ne/255),Ue[1]].join(" ")}else $=typeof re=="string"?[re,ce,Ne,ze,Ue[2]].join(" "):A.precision===2?[k(re),k(ce),k(Ne),k(ze),Ue[2]].join(" "):[O(re),O(ce),O(Ne),O(ze),Ue[2]].join(" ");return $},ea=h.__private__.getFilters=function(){return s},Vn=h.__private__.putStream=function(A){var $=(A=A||{}).data||"",re=A.filters||ea(),ce=A.alreadyAppliedFilters||[],Ne=A.addLength1||!1,ze=$.length,Ue=A.objectId,yt=function(Lr){return Lr};if(d!==null&&Ue===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(yt=pr.encryptor(Ue,0));var Nt={};re===!0&&(re=["FlateEncode"]);var zt=A.additionalKeyValues||[],Ut=(Nt=kt.API.processDataByFilters!==void 0?kt.API.processDataByFilters($,re):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(Nt.data.length!==0&&(zt.push({key:"Length",value:Nt.data.length}),Ne===!0&&zt.push({key:"Length1",value:ze})),Ut.length!=0)if(Ut.split("/").length-1==1)zt.push({key:"Filter",value:Ut});else{zt.push({key:"Filter",value:"["+Ut+"]"});for(var sn=0;sn<zt.length;sn+=1)if(zt[sn].key==="DecodeParms"){for(var Zn=[],jr=0;jr<Nt.reverseChain.split("/").length-1;jr+=1)Zn.push("null");Zn.push(zt[sn].value),zt[sn].value="["+Zn.join(" ")+"]"}}Y("<<");for(var Tn=0;Tn<zt.length;Tn++)Y("/"+zt[Tn].key+" "+zt[Tn].value);Y(">>"),Nt.data.length!==0&&(Y("stream"),Y(yt(Nt.data)),Y("endstream"))},Xs=h.__private__.putPage=function(A){var $=A.number,re=A.data,ce=A.objId,Ne=A.contentsObjId;Mr(ce,!0),Y("<</Type /Page"),Y("/Parent "+A.rootDictionaryObjId+" 0 R"),Y("/Resources "+A.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(P(A.mediaBox.bottomLeftX))+" "+parseFloat(P(A.mediaBox.bottomLeftY))+" "+P(A.mediaBox.topRightX)+" "+P(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&Y("/CropBox ["+P(A.cropBox.bottomLeftX)+" "+P(A.cropBox.bottomLeftY)+" "+P(A.cropBox.topRightX)+" "+P(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&Y("/BleedBox ["+P(A.bleedBox.bottomLeftX)+" "+P(A.bleedBox.bottomLeftY)+" "+P(A.bleedBox.topRightX)+" "+P(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&Y("/TrimBox ["+P(A.trimBox.bottomLeftX)+" "+P(A.trimBox.bottomLeftY)+" "+P(A.trimBox.topRightX)+" "+P(A.trimBox.topRightY)+"]"),A.artBox!==null&&Y("/ArtBox ["+P(A.artBox.bottomLeftX)+" "+P(A.artBox.bottomLeftY)+" "+P(A.artBox.topRightX)+" "+P(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&Y("/UserUnit "+A.userUnit),lt.publish("putPage",{objId:ce,pageContext:Re[$],pageNumber:$,page:re}),Y("/Contents "+Ne+" 0 R"),Y(">>"),Y("endobj");var ze=re.join(`
`);return N===S&&(ze+=`
Q`),Mr(Ne,!0),Vn({data:ze,filters:ea(),objectId:Ne}),Y("endobj"),ce},ta=h.__private__.putPages=function(){var A,$,re=[];for(A=1;A<=pe;A++)Re[A].objId=ir(),Re[A].contentsObjId=ir();for(A=1;A<=pe;A++)re.push(Xs({number:A,data:be[A],objId:Re[A].objId,contentsObjId:Re[A].contentsObjId,mediaBox:Re[A].mediaBox,cropBox:Re[A].cropBox,bleedBox:Re[A].bleedBox,trimBox:Re[A].trimBox,artBox:Re[A].artBox,userUnit:Re[A].userUnit,rootDictionaryObjId:qa,resourceDictionaryObjId:Qi}));Mr(qa,!0),Y("<</Type /Pages");var ce="/Kids [";for($=0;$<pe;$++)ce+=re[$]+" 0 R ";Y(ce+"]"),Y("/Count "+pe),Y(">>"),Y("endobj"),lt.publish("postPutPages")},Ss=function(A){lt.publish("putFont",{font:A,out:Y,newObject:an,putStream:Vn}),A.isAlreadyPutted!==!0&&(A.objectNumber=an(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+gf(A.postScriptName)),Y("/Subtype /Type1"),typeof A.encoding=="string"&&Y("/Encoding /"+A.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Ns=function(A){A.objectNumber=an();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[P(A.x),P(A.y),P(A.x+A.width),P(A.y+A.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var re=A.pages[1].join(`
`);Vn({data:re,additionalKeyValues:$,objectId:A.objectNumber}),Y("endobj")},Js=function(A,$){$||($=21);var re=an(),ce=function(Ue,yt){var Nt,zt=[],Ut=1/(yt-1);for(Nt=0;Nt<1;Nt+=Ut)zt.push(Nt);if(zt.push(1),Ue[0].offset!=0){var sn={offset:0,color:Ue[0].color};Ue.unshift(sn)}if(Ue[Ue.length-1].offset!=1){var Zn={offset:1,color:Ue[Ue.length-1].color};Ue.push(Zn)}for(var jr="",Tn=0,Lr=0;Lr<zt.length;Lr++){for(Nt=zt[Lr];Nt>Ue[Tn+1].offset;)Tn++;var kr=Ue[Tn].offset,ii=(Nt-kr)/(Ue[Tn+1].offset-kr),Lo=Ue[Tn].color,ks=Ue[Tn+1].color;jr+=ee(Math.round((1-ii)*Lo[0]+ii*ks[0]).toString(16))+ee(Math.round((1-ii)*Lo[1]+ii*ks[1]).toString(16))+ee(Math.round((1-ii)*Lo[2]+ii*ks[2]).toString(16))}return jr.trim()}(A.colors,$),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+$+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vn({data:ce,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),Y("endobj"),A.objectNumber=an(),Y("<< /ShadingType "+A.type),Y("/ColorSpace /DeviceRGB");var ze="/Coords ["+P(parseFloat(A.coords[0]))+" "+P(parseFloat(A.coords[1]))+" ";A.type===2?ze+=P(parseFloat(A.coords[2]))+" "+P(parseFloat(A.coords[3])):ze+=P(parseFloat(A.coords[2]))+" "+P(parseFloat(A.coords[3]))+" "+P(parseFloat(A.coords[4]))+" "+P(parseFloat(A.coords[5])),Y(ze+="]"),A.matrix&&Y("/Matrix ["+A.matrix.toString()+"]"),Y("/Function "+re+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Co=function(A,$){var re=ir(),ce=an();$.push({resourcesOid:re,objectOid:ce}),A.objectNumber=ce;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+A.boundingBox.map(P).join(" ")+"]"}),Ne.push({key:"XStep",value:P(A.xStep)}),Ne.push({key:"YStep",value:P(A.yStep)}),Ne.push({key:"Resources",value:re+" 0 R"}),A.matrix&&Ne.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),Vn({data:A.stream,additionalKeyValues:Ne,objectId:A.objectNumber}),Y("endobj")},Ua=function(A){for(var $ in A.objectNumber=an(),Y("<<"),A)switch($){case"opacity":Y("/ca "+k(A[$]));break;case"stroke-opacity":Y("/CA "+k(A[$]))}Y(">>"),Y("endobj")},nu=function(A){Mr(A.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var $ in Y("/Font <<"),ae)ae.hasOwnProperty($)&&(f===!1||f===!0&&p.hasOwnProperty($))&&Y("/"+$+" "+ae[$].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(Ae).length>0){for(var $ in Y("/Shading <<"),Ae)Ae.hasOwnProperty($)&&Ae[$]instanceof Mu&&Ae[$].objectNumber>=0&&Y("/"+$+" "+Ae[$].objectNumber+" 0 R");lt.publish("putShadingPatternDict"),Y(">>")}}(),function($){if(Object.keys(Ae).length>0){for(var re in Y("/Pattern <<"),Ae)Ae.hasOwnProperty(re)&&Ae[re]instanceof h.TilingPattern&&Ae[re].objectNumber>=0&&Ae[re].objectNumber<$&&Y("/"+re+" "+Ae[re].objectNumber+" 0 R");lt.publish("putTilingPatternDict"),Y(">>")}}(A.objectOid),function(){if(Object.keys(Ye).length>0){var $;for($ in Y("/ExtGState <<"),Ye)Ye.hasOwnProperty($)&&Ye[$].objectNumber>=0&&Y("/"+$+" "+Ye[$].objectNumber+" 0 R");lt.publish("putGStateDict"),Y(">>")}}(),function(){for(var $ in Y("/XObject <<"),pt)pt.hasOwnProperty($)&&pt[$].objectNumber>=0&&Y("/"+$+" "+pt[$].objectNumber+" 0 R");lt.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},Rd=function(A){je[A.fontName]=je[A.fontName]||{},je[A.fontName][A.fontStyle]=A.id},$d=function(A,$,re,ce,Ne){var ze={id:"F"+(Object.keys(ae).length+1).toString(10),postScriptName:A,fontName:$,fontStyle:re,encoding:ce,isStandardFont:Ne||!1,metadata:{}};return lt.publish("addFont",{font:ze,instance:this}),ae[ze.id]=ze,Rd(ze),ze.id},Di=h.__private__.pdfEscape=h.pdfEscape=function(A,$){return function(re,ce){var Ne,ze,Ue,yt,Nt,zt,Ut,sn,Zn;if(Ue=(ce=ce||{}).sourceEncoding||"Unicode",Nt=ce.outputEncoding,(ce.autoencode||Nt)&&ae[Se].metadata&&ae[Se].metadata[Ue]&&ae[Se].metadata[Ue].encoding&&(yt=ae[Se].metadata[Ue].encoding,!Nt&&ae[Se].encoding&&(Nt=ae[Se].encoding),!Nt&&yt.codePages&&(Nt=yt.codePages[0]),typeof Nt=="string"&&(Nt=yt[Nt]),Nt)){for(Ut=!1,zt=[],Ne=0,ze=re.length;Ne<ze;Ne++)(sn=Nt[re.charCodeAt(Ne)])?zt.push(String.fromCharCode(sn)):zt.push(re[Ne]),zt[Ne].charCodeAt(0)>>8&&(Ut=!0);re=zt.join("")}for(Ne=re.length;Ut===void 0&&Ne!==0;)re.charCodeAt(Ne-1)>>8&&(Ut=!0),Ne--;if(!Ut)return re;for(zt=ce.noBOM?[]:[254,255],Ne=0,ze=re.length;Ne<ze;Ne++){if((Zn=(sn=re.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zt.push(Zn),zt.push(sn-(Zn<<8))}return String.fromCharCode.apply(void 0,zt)}(A,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ru=h.__private__.beginPage=function(A){be[++pe]=[],Re[pe]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},zd(pe),He(be[F])},Tl=function(A,$){var re,ce,Ne;switch(n=$||n,typeof A=="string"&&(re=x(A.toLowerCase()),Array.isArray(re)&&(ce=re[0],Ne=re[1])),Array.isArray(A)&&(ce=A[0]*Fe,Ne=A[1]*Fe),isNaN(ce)&&(ce=i[0],Ne=i[1]),(ce>14400||Ne>14400)&&(_n.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),Ne=Math.min(14400,Ne)),i=[ce,Ne],n.substr(0,1)){case"l":Ne>ce&&(i=[Ne,ce]);break;case"p":ce>Ne&&(i=[Ne,ce])}ru(i),Ht(lp),Y(Gd),up!==0&&Y(up+" J"),dp!==0&&Y(dp+" j"),lt.publish("addPage",{pageNumber:pe})},iu=function(A){A>0&&A<=pe&&(be.splice(A,1),Re.splice(A,1),pe--,F>pe&&(F=pe),this.setPage(F))},zd=function(A){A>0&&A<=pe&&(F=A)},au=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return be.length-1},Fd=function(A,$,re){var ce,Ne=void 0;return re=re||{},A=A!==void 0?A:ae[Se].fontName,$=$!==void 0?$:ae[Se].fontStyle,ce=A.toLowerCase(),je[ce]!==void 0&&je[ce][$]!==void 0?Ne=je[ce][$]:je[A]!==void 0&&je[A][$]!==void 0?Ne=je[A][$]:re.disableWarning===!1&&_n.warn("Unable to look up font label for font '"+A+"', '"+$+"'. Refer to getFontList() for available fonts."),Ne||re.noFallback||(Ne=je.times[$])==null&&(Ne=je.times.normal),Ne},na=h.__private__.putInfo=function(){var A=an(),$=function(ce){return ce};for(var re in d!==null&&($=pr.encryptor(A,0)),Y("<<"),Y("/Producer ("+Di($("jsPDF "+kt.version))+")"),Rt)Rt.hasOwnProperty(re)&&Rt[re]&&Y("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+Di($(Rt[re]))+")");Y("/CreationDate ("+Di($(B))+")"),Y(">>"),Y("endobj")},Ml=h.__private__.putCatalog=function(A){var $=(A=A||{}).rootDictionaryObjId||qa;switch(an(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+$+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+it;re.substr(re.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+k(it)+"]")}switch(st||(st="continuous"),st){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}Me&&Y("/PageMode /"+Me),lt.publish("putCatalog"),Y(">>"),Y("endobj")},Bd=h.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ie+1)),Y("/Root "+ie+" 0 R"),Y("/Info "+(ie-1)+" 0 R"),d!==null&&Y("/Encrypt "+pr.oid+" 0 R"),Y("/ID [ <"+V+"> <"+V+"> ]"),Y(">>")},ar=h.__private__.putHeader=function(){Y("%PDF-"+m),Y("%")},Hd=h.__private__.putXRef=function(){var A="0000000000";Y("xref"),Y("0 "+(ie+1)),Y("0000000000 65535 f ");for(var $=1;$<=ie;$++)typeof se[$]=="function"?Y((A+se[$]()).slice(-10)+" 00000 n "):se[$]!==void 0?Y((A+se[$]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Va=h.__private__.buildDocument=function(){var A;ie=0,oe=0,ye=[],se=[],we=[],qa=ir(),Qi=ir(),He(ye),lt.publish("buildDocument"),ar(),ta(),function(){lt.publish("putAdditionalObjects");for(var re=0;re<we.length;re++){var ce=we[re];Mr(ce.objId,!0),Y(ce.content),Y("endobj")}lt.publish("postPutAdditionalObjects")}(),A=[],function(){for(var re in ae)ae.hasOwnProperty(re)&&(f===!1||f===!0&&p.hasOwnProperty(re))&&Ss(ae[re])}(),function(){var re;for(re in Ye)Ye.hasOwnProperty(re)&&Ua(Ye[re])}(),function(){for(var re in pt)pt.hasOwnProperty(re)&&Ns(pt[re])}(),function(re){var ce;for(ce in Ae)Ae.hasOwnProperty(ce)&&(Ae[ce]instanceof Mu?Js(Ae[ce]):Ae[ce]instanceof Df&&Co(Ae[ce],re))}(A),lt.publish("putResources"),A.forEach(nu),nu({resourcesOid:Qi,objectOid:Number.MAX_SAFE_INTEGER}),lt.publish("postPutResources"),d!==null&&(pr.oid=an(),Y("<<"),Y("/Filter /Standard"),Y("/V "+pr.v),Y("/R "+pr.r),Y("/U <"+pr.toHexString(pr.U)+">"),Y("/O <"+pr.toHexString(pr.O)+">"),Y("/P "+pr.P),Y(">>"),Y("endobj")),na(),Ml();var $=oe;return Hd(),Bd(),Y("startxref"),Y(""+$),Y("%%EOF"),He(be[F]),ye.join(`
`)},Ll=h.__private__.getBlob=function(A){return new Blob([Ke(A)],{type:"application/pdf"})},Wd=h.output=h.__private__.output=(yi=function(A,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",A){case void 0:return Va();case"save":h.save($.filename);break;case"arraybuffer":return Ke(Va());case"blob":return Ll(Va());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(Ll(Va()))||void 0;_n.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",ce=Va();try{re=aL(ce)}catch{re=aL(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+$.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ze=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Ne=$.pdfObjectUrl,ze="");var Ue='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+ze+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",yt=Dt.open();return yt!==null&&yt.document.write(Ue),yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var Nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',zt=Dt.open();if(zt!==null){zt.document.write(Nt);var Ut=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=$.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',Zn=Dt.open();if(Zn!==null&&(Zn.document.write(sn),Zn.document.title=$.filename),Zn||typeof safari>"u")return Zn;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",$);default:return null}},yi.foo=function(){try{return yi.apply(this,arguments)}catch(re){var A=re.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var $="Error in function "+A.split(`
`)[0].split("<")[0]+": "+re.message;if(!Dt.console)throw new Error($);Dt.console.error($,re),Dt.alert&&alert($)}},yi.foo.bar=yi,yi.foo),ra=function(A){return Array.isArray(Pt)===!0&&Pt.indexOf(A)>-1};switch(r){case"pt":Fe=1;break;case"mm":Fe=72/25.4;break;case"cm":Fe=72/2.54;break;case"in":Fe=72;break;case"px":Fe=ra("px_scaling")==1?.75:96/72;break;case"pc":case"em":Fe=12;break;case"ex":Fe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Fe=r}var pr=null;le(),H();var js=h.__private__.getPageInfo=h.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Re[A].objId,pageNumber:A,pageContext:Re[A]}},qd=h.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Re)if(Re[$].objId===A)break;return js($)},sp=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Re[F].objId,pageNumber:F,pageContext:Re[F]}};h.addPage=function(){return Tl.apply(this,arguments),this},h.setPage=function(){return zd.apply(this,arguments),He.call(this,be[F]),this},h.insertPage=function(A){return this.addPage(),this.movePage(F,A),this},h.movePage=function(A,$){var re,ce;if(A>$){re=be[A],ce=Re[A];for(var Ne=A;Ne>$;Ne--)be[Ne]=be[Ne-1],Re[Ne]=Re[Ne-1];be[$]=re,Re[$]=ce,this.setPage($)}else if(A<$){re=be[A],ce=Re[A];for(var ze=A;ze<$;ze++)be[ze]=be[ze+1],Re[ze]=Re[ze+1];be[$]=re,Re[$]=ce,this.setPage($)}return this},h.deletePage=function(){return iu.apply(this,arguments),this},h.__private__.text=h.text=function(A,$,re,ce,Ne){var ze,Ue,yt,Nt,zt,Ut,sn,Zn,jr,Tn=(ce=ce||{}).scope||this;if(typeof A=="number"&&typeof $=="number"&&(typeof re=="string"||Array.isArray(re))){var Lr=re;re=$,$=A,A=Lr}if(arguments[3]instanceof ht==0?(yt=arguments[4],Nt=arguments[5],bn(sn=arguments[3])==="object"&&sn!==null||(typeof yt=="string"&&(Nt=yt,yt=null),typeof sn=="string"&&(Nt=sn,sn=null),typeof sn=="number"&&(yt=sn,sn=null),ce={flags:sn,angle:yt,align:Nt})):(T("The transform parameter of text() with a Matrix value"),jr=Ne),isNaN($)||isNaN(re)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return Tn;var kr,ii="",Lo=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:ya,ks=Tn.internal.scaleFactor;function Io(dn){return dn=dn.split("	").join(Array(ce.TabLen||9).join(" ")),Di(dn,sn)}function mp(dn){for(var Cn,gr=dn.concat(),Ir=[],$o=gr.length;$o--;)typeof(Cn=gr.shift())=="string"?Ir.push(Cn):Array.isArray(dn)&&(Cn.length===1||Cn[1]===void 0&&Cn[2]===void 0)?Ir.push(Cn[0]):Ir.push([Cn[0],Cn[1],Cn[2]]);return Ir}function Yd(dn,Cn){var gr;if(typeof dn=="string")gr=Cn(dn)[0];else if(Array.isArray(dn)){for(var Ir,$o,kp=dn.concat(),Zd=[],Rg=kp.length;Rg--;)typeof(Ir=kp.shift())=="string"?Zd.push(Cn(Ir)[0]):Array.isArray(Ir)&&typeof Ir[0]=="string"&&($o=Cn(Ir[0],Ir[1],Ir[2]),Zd.push([$o[0],$o[1],$o[2]]));gr=Zd}return gr}var Dl=!1,cu=!0;if(typeof A=="string")Dl=!0;else if(Array.isArray(A)){var uu=A.concat();Ue=[];for(var Rl,ai=uu.length;ai--;)(typeof(Rl=uu.shift())!="string"||Array.isArray(Rl)&&typeof Rl[0]!="string")&&(cu=!1);Dl=cu}if(Dl===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var du=Oe/Tn.internal.scaleFactor,fu=du*(Lo-1);switch(ce.baseline){case"bottom":re-=fu;break;case"top":re+=du-fu;break;case"hanging":re+=du-2*fu;break;case"middle":re+=du/2-fu}if((Ut=ce.maxWidth||0)>0&&(typeof A=="string"?A=Tn.splitTextToSize(A,Ut):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(dn,Cn){return dn.concat(Tn.splitTextToSize(Cn,Ut))},[]))),ze={text:A,x:$,y:re,options:ce,mutex:{pdfEscape:Di,activeFontKey:Se,fonts:ae,activeFontSize:Oe}},lt.publish("preProcessText",ze),A=ze.text,yt=(ce=ze.options).angle,jr instanceof ht==0&&yt&&typeof yt=="number"){yt*=Math.PI/180,ce.rotationDirection===0&&(yt=-yt),N===S&&(yt=-yt);var gp=Math.cos(yt),vp=Math.sin(yt);jr=new ht(gp,vp,-vp,gp,0,0)}else yt&&yt instanceof ht&&(jr=yt);N!==S||jr||(jr=Jn),(zt=ce.charSpace||Oo)!==void 0&&(ii+=P(R(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zn=ce.horizontalScale)!==void 0&&(ii+=P(100*Zn)+` Tz
`),ce.lang;var Ri=-1,Do=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,Xd=Tn.internal.getCurrentPageInfo().pageContext;switch(Do){case 0:case!1:case"fill":Ri=0;break;case 1:case!0:case"stroke":Ri=1;break;case 2:case"fillThenStroke":Ri=2;break;case 3:case"invisible":Ri=3;break;case 4:case"fillAndAddForClipping":Ri=4;break;case 5:case"strokeAndAddPathForClipping":Ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ri=6;break;case 7:case"addToPathForClipping":Ri=7}var Ig=Xd.usedRenderingMode!==void 0?Xd.usedRenderingMode:-1;Ri!==-1?ii+=Ri+` Tr
`:Ig!==-1&&(ii+=`0 Tr
`),Ri!==-1&&(Xd.usedRenderingMode=Ri),Nt=ce.align||"left";var Ka,hu=Oe*Lo,xp=Tn.internal.pageSize.getWidth(),yp=ae[Se];zt=ce.charSpace||Oo,Ut=ce.maxWidth||0,sn=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var $l=[],pu=function(dn){return Tn.getStringUnitWidth(dn,{font:yp,charSpace:zt,fontSize:Oe,doKerning:!1})*Oe/ks};if(Object.prototype.toString.call(A)==="[object Array]"){var ba;Ue=mp(A),Nt!=="left"&&(Ka=Ue.map(pu));var wa,zl=0;if(Nt==="right"){$-=Ka[0],A=[],ai=Ue.length;for(var Ro=0;Ro<ai;Ro++)Ro===0?(wa=Eo($),ba=_o(re)):(wa=R(zl-Ka[Ro]),ba=-hu),A.push([Ue[Ro],wa,ba]),zl=Ka[Ro]}else if(Nt==="center"){$-=Ka[0]/2,A=[],ai=Ue.length;for(var Fl=0;Fl<ai;Fl++)Fl===0?(wa=Eo($),ba=_o(re)):(wa=R((zl-Ka[Fl])/2),ba=-hu),A.push([Ue[Fl],wa,ba]),zl=Ka[Fl]}else if(Nt==="left"){A=[],ai=Ue.length;for(var bp=0;bp<ai;bp++)A.push(Ue[bp])}else if(Nt==="justify"&&yp.encoding==="Identity-H"){A=[],ai=Ue.length,Ut=Ut!==0?Ut:xp;for(var Jd=0,mr=0;mr<ai;mr++)if(ba=mr===0?_o(re):-hu,wa=mr===0?Eo($):Jd,mr<ai-1){var Dg=R((Ut-Ka[mr])/(Ue[mr].split(" ").length-1)),Zs=Ue[mr].split(" ");A.push([Zs[0]+" ",wa,ba]),Jd=0;for(var Qs=1;Qs<Zs.length;Qs++){var wp=(pu(Zs[Qs-1]+" "+Zs[Qs])-pu(Zs[Qs]))*ks+Dg;Qs==Zs.length-1?A.push([Zs[Qs],wp,0]):A.push([Zs[Qs]+" ",wp,0]),Jd-=wp}}else A.push([Ue[mr],wa,ba]);A.push(["",Jd,0])}else{if(Nt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],ai=Ue.length,Ut=Ut!==0?Ut:xp,mr=0;mr<ai;mr++){ba=mr===0?_o(re):-hu,wa=mr===0?Eo($):0;var Sp=Ue[mr].split(" ").length-1,Np=Sp>0?(Ut-Ka[mr])/Sp:0;mr<ai-1?$l.push(P(R(Np))):$l.push(0),A.push([Ue[mr],wa,ba])}}}(typeof ce.R2L=="boolean"?ce.R2L:ge)===!0&&(A=Yd(A,function(dn,Cn,gr){return[dn.split("").reverse().join(""),Cn,gr]})),ze={text:A,x:$,y:re,options:ce,mutex:{pdfEscape:Di,activeFontKey:Se,fonts:ae,activeFontSize:Oe}},lt.publish("postProcessText",ze),A=ze.text,kr=ze.mutex.isHex||!1;var jp=ae[Se].encoding;jp!=="WinAnsiEncoding"&&jp!=="StandardEncoding"||(A=Yd(A,function(dn,Cn,gr){return[Io(dn),Cn,gr]})),Ue=mp(A),A=[];for(var Bl,Hl,Wl,mu=Array.isArray(Ue[0])?1:0,ql="",gu=function(dn,Cn,gr){var Ir="";return gr instanceof ht?(gr=typeof ce.angle=="number"?jn(gr,new ht(1,0,0,1,dn,Cn)):jn(new ht(1,0,0,1,dn,Cn),gr),N===S&&(gr=jn(new ht(1,0,0,-1,0,0),gr)),Ir=gr.join(" ")+` Tm
`):Ir=P(dn)+" "+P(Cn)+` Td
`,Ir},Ya=0;Ya<Ue.length;Ya++){switch(ql="",mu){case 1:Wl=(kr?"<":"(")+Ue[Ya][0]+(kr?">":")"),Bl=parseFloat(Ue[Ya][1]),Hl=parseFloat(Ue[Ya][2]);break;case 0:Wl=(kr?"<":"(")+Ue[Ya]+(kr?">":")"),Bl=Eo($),Hl=_o(re)}$l!==void 0&&$l[Ya]!==void 0&&(ql=$l[Ya]+` Tw
`),Ya===0?A.push(ql+gu(Bl,Hl,jr)+Wl):mu===0?A.push(ql+Wl):mu===1&&A.push(ql+gu(Bl,Hl,jr)+Wl)}A=mu===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var eo=`BT
/`;return eo+=Se+" "+Oe+` Tf
`,eo+=P(Oe*Lo)+` TL
`,eo+=su+`
`,eo+=ii,eo+=A,Y(eo+="ET"),p[Se]=!0,Tn};var op=h.__private__.clip=h.clip=function(A){return Y(A==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return op("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Y("n"),this};var Ga=h.__private__.isValidStyle=function(A){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&($=!0),$};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(A){return Ga(A)&&(u=A),this};var Ud=h.__private__.getStyle=h.getStyle=function(A){var $=u;switch(A){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=A}return $},Vd=h.close=function(){return Y("h"),this};h.stroke=function(){return Y("S"),this},h.fill=function(A){return Il("f",A),this},h.fillEvenOdd=function(A){return Il("f*",A),this},h.fillStroke=function(A){return Il("B",A),this},h.fillStrokeEvenOdd=function(A){return Il("B*",A),this};var Il=function(A,$){bn($)==="object"?rt($,A):Y(A)},X=function(A){A===null||N===S&&A===void 0||(A=Ud(A),Y(A))};function _e(A,$,re,ce,Ne){var ze=new Df($||this.boundingBox,re||this.xStep,ce||this.yStep,this.gState,Ne||this.matrix);ze.stream=this.stream;var Ue=A+"$$"+this.cloneIndex+++"$$";return Tr(Ue,ze),ze}var rt=function(A,$){var re=Ze[A.key],ce=Ae[re];if(ce instanceof Mu)Y("q"),Y(Mt($)),ce.gState&&h.setGState(ce.gState),Y(A.matrix.toString()+" cm"),Y("/"+re+" sh"),Y("Q");else if(ce instanceof Df){var Ne=new ht(1,0,0,-1,0,lu());A.matrix&&(Ne=Ne.multiply(A.matrix||Jn),re=_e.call(ce,A.key,A.boundingBox,A.xStep,A.yStep,Ne).id),Y("q"),Y("/Pattern cs"),Y("/"+re+" scn"),ce.gState&&h.setGState(ce.gState),Y($),Y("Q")}},Mt=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Lt=h.moveTo=function(A,$){return Y(P(R(A))+" "+P(D($))+" m"),this},$t=h.lineTo=function(A,$){return Y(P(R(A))+" "+P(D($))+" l"),this},sr=h.curveTo=function(A,$,re,ce,Ne,ze){return Y([P(R(A)),P(D($)),P(R(re)),P(D(ce)),P(R(Ne)),P(D(ze)),"c"].join(" ")),this};h.__private__.line=h.line=function(A,$,re,ce,Ne){if(isNaN(A)||isNaN($)||isNaN(re)||isNaN(ce)||!Ga(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return N===w?this.lines([[re-A,ce-$]],A,$,[1,1],Ne||"S"):this.lines([[re-A,ce-$]],A,$,[1,1]).stroke()},h.__private__.lines=h.lines=function(A,$,re,ce,Ne,ze){var Ue,yt,Nt,zt,Ut,sn,Zn,jr,Tn,Lr,kr,ii;if(typeof A=="number"&&(ii=re,re=$,$=A,A=ii),ce=ce||[1,1],ze=ze||!1,isNaN($)||isNaN(re)||!Array.isArray(A)||!Array.isArray(ce)||!Ga(Ne)||typeof ze!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lt($,re),Ue=ce[0],yt=ce[1],zt=A.length,Lr=$,kr=re,Nt=0;Nt<zt;Nt++)(Ut=A[Nt]).length===2?(Lr=Ut[0]*Ue+Lr,kr=Ut[1]*yt+kr,$t(Lr,kr)):(sn=Ut[0]*Ue+Lr,Zn=Ut[1]*yt+kr,jr=Ut[2]*Ue+Lr,Tn=Ut[3]*yt+kr,Lr=Ut[4]*Ue+Lr,kr=Ut[5]*yt+kr,sr(sn,Zn,jr,Tn,Lr,kr));return ze&&Vd(),X(Ne),this},h.path=function(A){for(var $=0;$<A.length;$++){var re=A[$],ce=re.c;switch(re.op){case"m":Lt(ce[0],ce[1]);break;case"l":$t(ce[0],ce[1]);break;case"c":sr.apply(this,ce);break;case"h":Vd()}}return this},h.__private__.rect=h.rect=function(A,$,re,ce,Ne){if(isNaN(A)||isNaN($)||isNaN(re)||isNaN(ce)||!Ga(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return N===w&&(ce=-ce),Y([P(R(A)),P(D($)),P(R(re)),P(R(ce)),"re"].join(" ")),X(Ne),this},h.__private__.triangle=h.triangle=function(A,$,re,ce,Ne,ze,Ue){if(isNaN(A)||isNaN($)||isNaN(re)||isNaN(ce)||isNaN(Ne)||isNaN(ze)||!Ga(Ue))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-A,ce-$],[Ne-re,ze-ce],[A-Ne,$-ze]],A,$,[1,1],Ue,!0),this},h.__private__.roundedRect=h.roundedRect=function(A,$,re,ce,Ne,ze,Ue){if(isNaN(A)||isNaN($)||isNaN(re)||isNaN(ce)||isNaN(Ne)||isNaN(ze)||!Ga(Ue))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yt=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*re),ze=Math.min(ze,.5*ce),this.lines([[re-2*Ne,0],[Ne*yt,0,Ne,ze-ze*yt,Ne,ze],[0,ce-2*ze],[0,ze*yt,-Ne*yt,ze,-Ne,ze],[2*Ne-re,0],[-Ne*yt,0,-Ne,-ze*yt,-Ne,-ze],[0,2*ze-ce],[0,-ze*yt,Ne*yt,-ze,Ne,-ze]],A+Ne,$,[1,1],Ue,!0),this},h.__private__.ellipse=h.ellipse=function(A,$,re,ce,Ne){if(isNaN(A)||isNaN($)||isNaN(re)||isNaN(ce)||!Ga(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ze=4/3*(Math.SQRT2-1)*re,Ue=4/3*(Math.SQRT2-1)*ce;return Lt(A+re,$),sr(A+re,$-Ue,A+ze,$-ce,A,$-ce),sr(A-ze,$-ce,A-re,$-Ue,A-re,$),sr(A-re,$+Ue,A-ze,$+ce,A,$+ce),sr(A+ze,$+ce,A+re,$+Ue,A+re,$),X(Ne),this},h.__private__.circle=h.circle=function(A,$,re,ce){if(isNaN(A)||isNaN($)||isNaN(re)||!Ga(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,$,re,re,ce)},h.setFont=function(A,$,re){return re&&($=C($,re)),Se=Fd(A,$,{disableWarning:!1}),this};var Gn=h.__private__.getFont=h.getFont=function(){return ae[Fd.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var A,$,re={};for(A in je)if(je.hasOwnProperty(A))for($ in re[A]=[],je[A])je[A].hasOwnProperty($)&&re[A].push($);return re},h.addFont=function(A,$,re,ce,Ne){var ze=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ze.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&ze.indexOf(arguments[3])==-1&&(re=C(re,ce)),$d.call(this,A,$,re,Ne=Ne||"Identity-H")};var ya,lp=t.lineWidth||.200025,B2=h.__private__.getLineWidth=h.getLineWidth=function(){return lp},Ht=h.__private__.setLineWidth=h.setLineWidth=function(A){return lp=A,Y(P(R(A))+" w"),this};h.__private__.setLineDash=kt.API.setLineDash=kt.API.setLineDashPattern=function(A,$){if(A=A||[],$=$||0,isNaN($)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(re){return P(R(re))}).join(" "),$=P(R($)),Y("["+A+"] "+$+" d"),this};var H2=h.__private__.getLineHeight=h.getLineHeight=function(){return Oe*ya};h.__private__.getLineHeight=h.getLineHeight=function(){return Oe*ya};var W2=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(ya=A),this},q2=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return ya};W2(t.lineHeight);var Eo=h.__private__.getHorizontalCoordinate=function(A){return R(A)},_o=h.__private__.getVerticalCoordinate=function(A){return N===S?A:Re[F].mediaBox.topRightY-Re[F].mediaBox.bottomLeftY-R(A)},U2=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(A){return P(Eo(A))},V2=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(A){return P(_o(A))},Gd=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return $n(Gd)},h.__private__.setStrokeColor=h.setDrawColor=function(A,$,re,ce){return Gd=ri({ch1:A,ch2:$,ch3:re,ch4:ce,pdfColorType:"draw",precision:2}),Y(Gd),this};var cp=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return $n(cp)},h.__private__.setFillColor=h.setFillColor=function(A,$,re,ce){return cp=ri({ch1:A,ch2:$,ch3:re,ch4:ce,pdfColorType:"fill",precision:2}),Y(cp),this};var su=t.textColor||"0 g",G2=h.__private__.getTextColor=h.getTextColor=function(){return $n(su)};h.__private__.setTextColor=h.setTextColor=function(A,$,re,ce){return su=ri({ch1:A,ch2:$,ch3:re,ch4:ce,pdfColorType:"text",precision:3}),this};var Oo=t.charSpace,K2=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Oo||0)};h.__private__.setCharSpace=h.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Oo=A,this};var up=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(A){var $=h.CapJoinStyles[A];if($===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return up=$,Y($+" J"),this};var dp=0;h.__private__.setLineJoin=h.setLineJoin=function(A){var $=h.CapJoinStyles[A];if($===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dp=$,Y($+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(P(R(A))+" M"),this},h.GState=tb,h.setGState=function(A){(A=typeof A=="string"?Ye[tt[A]]:Og(null,A)).equals(Kt)||(Y("/"+A.id+" gs"),Kt=A)};var Og=function(A,$){if(!A||!tt[A]){var re=!1;for(var ce in Ye)if(Ye.hasOwnProperty(ce)&&Ye[ce].equals($)){re=!0;break}if(re)$=Ye[ce];else{var Ne="GS"+(Object.keys(Ye).length+1).toString(10);Ye[Ne]=$,$.id=Ne}return A&&(tt[A]=$.id),lt.publish("addGState",$),$}};h.addGState=function(A,$){return Og(A,$),this},h.saveGraphicsState=function(){return Y("q"),Ie.push({key:Se,size:Oe,color:su}),this},h.restoreGraphicsState=function(){Y("Q");var A=Ie.pop();return Se=A.key,Oe=A.size,su=A.color,Kt=null,this},h.setCurrentTransformationMatrix=function(A){return Y(A.toString()+" cm"),this},h.comment=function(A){return Y("#"+A),this};var Po=function(A,$){var re=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(ze){isNaN(ze)||(re=parseFloat(ze))}});var ce=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(ze){isNaN(ze)||(ce=parseFloat(ze))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(ze){Ne=ze.toString()}}),this},fp=function(A,$,re,ce){Po.call(this,A,$),this.type="rect";var Ne=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(Ue){isNaN(Ue)||(Ne=parseFloat(Ue))}});var ze=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ze},set:function(Ue){isNaN(Ue)||(ze=parseFloat(Ue))}}),this},Kd=function(){this.page=pe,this.currentPage=F,this.pages=be.slice(0),this.pagesContext=Re.slice(0),this.x=Le,this.y=dt,this.matrix=ve,this.width=pp(F),this.height=Tg(F),this.outputDestination=$e,this.id="",this.objectNumber=-1};Kd.prototype.restore=function(){pe=this.page,F=this.currentPage,Re=this.pagesContext,be=this.pages,Le=this.x,dt=this.y,ve=this.matrix,Pg(F,this.width),To(F,this.height),$e=this.outputDestination};var hp=function(A,$,re,ce,Ne){un.push(new Kd),pe=F=0,be=[],Le=A,dt=$,ve=Ne,ru([re,ce])};for(var ou in h.beginFormObject=function(A,$,re,ce,Ne){return hp(A,$,re,ce,Ne),this},h.endFormObject=function(A){return function($){if(en[$])un.pop().restore();else{var re=new Kd,ce="Xo"+(Object.keys(pt).length+1).toString(10);re.id=ce,en[$]=ce,pt[ce]=re,lt.publish("addFormObject",re),un.pop().restore()}}(A),this},h.doFormObject=function(A,$){var re=pt[en[A]];return Y("q"),Y($.toString()+" cm"),Y("/"+re.id+" Do"),Y("Q"),this},h.getFormObject=function(A){var $=pt[en[A]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},h.save=function(A,$){return A=A||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Eu(Ll(Va()),A),typeof Eu.unload=="function"&&Dt.setTimeout&&setTimeout(Eu.unload,911),this):new Promise(function(re,ce){try{var Ne=Eu(Ll(Va()),A);typeof Eu.unload=="function"&&Dt.setTimeout&&setTimeout(Eu.unload,911),re(Ne)}catch(ze){ce(ze.message)}})},kt.API)kt.API.hasOwnProperty(ou)&&(ou==="events"&&kt.API.events.length?function(A,$){var re,ce,Ne;for(Ne=$.length-1;Ne!==-1;Ne--)re=$[Ne][0],ce=$[Ne][1],A.subscribe.apply(A,[re].concat(typeof ce=="function"?[ce]:ce))}(lt,kt.API.events):h[ou]=kt.API[ou]);function pp(A){return Re[A].mediaBox.topRightX-Re[A].mediaBox.bottomLeftX}function Pg(A,$){Re[A].mediaBox.topRightX=$+Re[A].mediaBox.bottomLeftX}function Tg(A){return Re[A].mediaBox.topRightY-Re[A].mediaBox.bottomLeftY}function To(A,$){Re[A].mediaBox.topRightY=$+Re[A].mediaBox.bottomLeftY}var Mo=h.getPageWidth=function(A){return pp(A=A||F)/Fe},Mg=h.setPageWidth=function(A,$){Pg(A,$*Fe)},lu=h.getPageHeight=function(A){return Tg(A=A||F)/Fe},Lg=h.setPageHeight=function(A,$){To(A,$*Fe)};return h.internal={pdfEscape:Di,getStyle:Ud,getFont:Gn,getFontSize:Je,getCharSpace:K2,getTextColor:G2,getLineHeight:H2,getLineHeightFactor:q2,getLineWidth:B2,write:he,getHorizontalCoordinate:Eo,getVerticalCoordinate:_o,getCoordinateString:U2,getVerticalCoordinateString:V2,collections:{},newObject:an,newAdditionalObject:xa,newObjectDeferred:ir,newObjectDeferredBegin:Mr,getFilters:ea,putStream:Vn,events:lt,scaleFactor:Fe,pageSize:{getWidth:function(){return Mo(F)},setWidth:function(A){Mg(F,A)},getHeight:function(){return lu(F)},setHeight:function(A){Lg(F,A)}},encryptionOptions:d,encryption:pr,getEncryptor:function(A){return d!==null?pr.encryptor(A,0):function($){return $}},output:Wd,getNumberOfPages:au,get pages(){return be},out:Y,f2:k,f3:O,getPageInfo:js,getPageInfoByObjId:qd,getCurrentPageInfo:sp,getPDFVersion:g,Point:Po,Rectangle:fp,Matrix:ht,hasHotfix:ra},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Mo(F)},set:function(A){Mg(F,A)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return lu(F)},set:function(A){Lg(F,A)},enumerable:!0,configurable:!0}),(function(A){for(var $=0,re=qe.length;$<re;$++){var ce=$d.call(this,A[$][0],A[$][1],A[$][2],qe[$][3],!0);f===!1&&(p[ce]=!0);var Ne=A[$][0].split("-");Rd({id:ce,fontName:Ne[0],fontStyle:Ne[1]||""})}lt.publish("addFonts",{fonts:ae,dictionary:je})}).call(h,qe),Se="F1",Tl(i,n),lt.publish("initialized"),h}mf.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},mf.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mf.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},mf.prototype.processOwnerPassword=function(t,e){return Ck(Ak(e).substr(0,5),t)},mf.prototype.encryptor=function(t,e){var n=Ak(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Ck(n,r)}},tb.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||bn(t)!==bn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},kt.API={events:[]},kt.version="3.0.4";var ur=kt.API,M4=1,Dd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wt=function(t){return t.toFixed(2)},tc=function(t){return t.toFixed(5)};ur.__acroform__={};var va=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},cL=function(t){return t*M4},ro=function(t){var e=new _B,n=xt.internal.getHeight(t)||0,r=xt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Wt(r)),Number(Wt(n))],e},y4e=ur.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},b4e=ur.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},w4e=ur.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},br=ur.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return w4e(t,e-1)},wr=ur.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return y4e(t,e-1)},Sr=ur.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return b4e(t,e-1)},S4e=ur.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],a=t[1],s=t[2],o=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(a)||0,[Number(Wt(l.lowerLeft_X)),Number(Wt(l.lowerLeft_Y)),Number(Wt(l.upperRight_X)),Number(Wt(l.upperRight_Y))]},N4e=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ek(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Wt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=ro(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Ek=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=n,s=xt.internal.getHeight(t)||0;s=s<0?-s:s;var o=xt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(k,O,R){if(k+1<i.length){var D=O+" "+i[k+1][0];return tx(D,t,R).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,f=tx("3",t,a).height,p=t.multiline?s-a:(s-f)/2,h=p+=2,m=0,g=0,y=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+tx(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var x="",w=0,S=0;S<i.length;S++)if(i.hasOwnProperty(S)){var N=!1;if(i[S].length!==1&&y!==i[S].length-1){if((f+2)*(w+2)+2>s)continue e;x+=i[S][y],N=!0,g=S,S--}else{x=(x+=i[S][y]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(S),E=l(j,x,a),C=S>=i.length-1;if(E&&!C){x+=" ",y=0;continue}if(E||C){if(C)g=j;else if(t.multiline&&(f+2)*(w+2)+2>s)continue e}else{if(!t.multiline||(f+2)*(w+2)+2>s)continue e;g=j}}for(var P="",T=m;T<=g;T++){var I=i[T];if(t.multiline){if(T===g){P+=I[y]+" ",y=(y+1)%I.length;continue}if(T===m){P+=I[I.length-1]+" ";continue}}P+=I[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,d=tx(P,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;default:u=2}e+=Wt(u)+" "+Wt(h)+` Td
`,e+="("+Dd(P)+`) Tj
`,e+=-Wt(u)+` 0 Td
`,h=-(a+2),d=0,m=N?g:g+1,w++,x=""}break}return r.text=e,r.fontSize=a,r},tx=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},j4e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},k4e=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},A4e=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ks.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(j4e)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new OB,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&k4e(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var o=r[s],l=[],u=o.Rect;if(o.Rect&&(o.Rect=S4e(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=xt.createDefaultAppearanceStream(o),bn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=N4e(o);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var p in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(p)){var h=o.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var s in h)if(h.hasOwnProperty(s)){var m=h[s];typeof m=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,o)),f+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);f+=">>"}l.push({key:"AP",value:`<<
`+f+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:o.objId}),i.internal.out("endobj")}a&&function(g,y){for(var x in g)if(g.hasOwnProperty(x)){var w=x,S=g[x];y.internal.newObjectDeferredBegin(S.objId,!0),bn(S)==="object"&&typeof S.putStream=="function"&&S.putStream(),delete g[w]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},EB=ur.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(s){return s};if(Array.isArray(t)){for(var i="[",a=0;a<t.length;a++)switch(a!==0&&(i+=" "),bn(t[a])){case"boolean":case"number":case"object":i+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Dd(r(t[a].toString()))+")"):i+=t[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},oS=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Dd(r(t))+")"},po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};po.prototype.toString=function(){return this.objId+" 0 R"},po.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},po.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:EB(i,this.objId,this.scope)}):i instanceof po?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var _B=function(){po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};va(_B,po);var OB=function(){po.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Dd(n(t))+")"}},set:function(n){t=n}})};va(OB,po);var Ks=function t(){po.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!br(e,3)},set:function(x){x?this.F=wr(e,3):this.F=Sr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof nb)return;a="FieldObject"+t.FieldNum++}var x=function(w){return w};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Dd(x(a))+")"},set:function(x){a=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(x){a=x}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(x){s=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/M4:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof nb||this instanceof ad))return oS(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Yr==0?oS(p,this.objId,this.scope):p},set:function(x){x=x.toString(),p=this instanceof Yr==0?x.substr(0,1)==="("?cf(x.substr(1,x.length-2)):cf(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr==1?cf(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof Yr==1?"/"+x:x}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Yr==0?oS(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Yr==0?x.substr(0,1)==="("?cf(x.substr(1,x.length-2)):cf(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yr==1?cf(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Yr==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){x=!!x,g=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,1)},set:function(x){x?this.Ff=wr(this.Ff,1):this.Ff=Sr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,2)},set:function(x){x?this.Ff=wr(this.Ff,2):this.Ff=Sr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,3)},set:function(x){x?this.Ff=wr(this.Ff,3):this.Ff=Sr(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');y=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(y){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};va(Ks,po);var Jf=function(){Ks.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return EB(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,s,o){o||(o=1);for(var l,u=[];l=s.exec(a);)u.push(l[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,18)},set:function(n){n?this.Ff=wr(this.Ff,18):this.Ff=Sr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=wr(this.Ff,19):this.Ff=Sr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,20)},set:function(n){n?(this.Ff=wr(this.Ff,20),e.sort()):this.Ff=Sr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,22)},set:function(n){n?this.Ff=wr(this.Ff,22):this.Ff=Sr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,23)},set:function(n){n?this.Ff=wr(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,27)},set:function(n){n?this.Ff=wr(this.Ff,27):this.Ff=Sr(this.Ff,27)}}),this.hasAppearanceStream=!1};va(Jf,Ks);var Zf=function(){Jf.call(this),this.fontName="helvetica",this.combo=!1};va(Zf,Jf);var Qf=function(){Zf.call(this),this.combo=!0};va(Qf,Zf);var Ex=function(){Qf.call(this),this.edit=!0};va(Ex,Qf);var Yr=function(){Ks.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,15)},set:function(n){n?this.Ff=wr(this.Ff,15):this.Ff=Sr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,16)},set:function(n){n?this.Ff=wr(this.Ff,16):this.Ff=Sr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,17)},set:function(n){n?this.Ff=wr(this.Ff,17):this.Ff=Sr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,26)},set:function(n){n?this.Ff=wr(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Dd(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){bn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};va(Yr,Ks);var _x=function(){Yr.call(this),this.pushButton=!0};va(_x,Yr);var eh=function(){Yr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};va(eh,Yr);var nb=function(){var t,e;Ks.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,s=[];for(a in s.push("<<"),r)s.push("/"+a+" ("+Dd(i(r[a]))+")");return s.push(">>"),s.join(`
`)},set:function(i){bn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};va(nb,Ks),eh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},eh.prototype.createOption=function(t){var e=new nb;return e.Parent=this,e.optionName=t,this.Kids.push(e),C4e.call(this.scope,e),e};var Ox=function(){Yr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};va(Ox,Yr);var ad=function(){Ks.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,13)},set:function(e){e?this.Ff=wr(this.Ff,13):this.Ff=Sr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,21)},set:function(e){e?this.Ff=wr(this.Ff,21):this.Ff=Sr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,23)},set:function(e){e?this.Ff=wr(this.Ff,23):this.Ff=Sr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,24)},set:function(e){e?this.Ff=wr(this.Ff,24):this.Ff=Sr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,25)},set:function(e){e?this.Ff=wr(this.Ff,25):this.Ff=Sr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,26)},set:function(e){e?this.Ff=wr(this.Ff,26):this.Ff=Sr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};va(ad,Ks);var Px=function(){ad.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!br(this.Ff,14)},set:function(t){t?this.Ff=wr(this.Ff,14):this.Ff=Sr(this.Ff,14)}}),this.password=!0};va(Px,ad);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),a=Ek(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Wt(xt.internal.getWidth(t))+" "+Wt(xt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Wt(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ro(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],a=xt.internal.getHeight(t),s=xt.internal.getWidth(t),o=Ek(t,t.caption);return i.push("1 g"),i.push("0 0 "+Wt(s)+" "+Wt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Wt(s-1)+" "+Wt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Wt(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wt(xt.internal.getWidth(t))+" "+Wt(xt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Circle.YesNormal,e.D[t]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ro(t);e.scope=t.scope;var n=[],r=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=xt.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+tc(xt.internal.getWidth(t)/2)+" "+tc(xt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=[],r=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*xt.internal.Bezier_C).toFixed(5)),s=Number((r*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(xt.internal.getWidth(t)/2)+" "+tc(xt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+tc(xt.internal.getWidth(t)/2)+" "+tc(xt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=[],r=xt.internal.getWidth(t)<=xt.internal.getHeight(t)?xt.internal.getWidth(t)/4:xt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+tc(xt.internal.getWidth(t)/2)+" "+tc(xt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=xt.RadioButton.Cross.YesNormal,e.D[t]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ro(t);e.scope=t.scope;var n=[],r=xt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Wt(xt.internal.getWidth(t)-2)+" "+Wt(xt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Wt(r.x1.x)+" "+Wt(r.x1.y)+" m"),n.push(Wt(r.x2.x)+" "+Wt(r.x2.y)+" l"),n.push(Wt(r.x4.x)+" "+Wt(r.x4.y)+" m"),n.push(Wt(r.x3.x)+" "+Wt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=xt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wt(xt.internal.getWidth(t))+" "+Wt(xt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wt(xt.internal.getWidth(t)-2)+" "+Wt(xt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Wt(n.x1.x)+" "+Wt(n.x1.y)+" m"),r.push(Wt(n.x2.x)+" "+Wt(n.x2.y)+" l"),r.push(Wt(n.x4.x)+" "+Wt(n.x4.y)+" m"),r.push(Wt(n.x3.x)+" "+Wt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ro(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Wt(xt.internal.getWidth(t))+" "+Wt(xt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};xt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=xt.internal.getWidth(t),n=xt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},xt.internal.getWidth=function(t){var e=0;return bn(t)==="object"&&(e=cL(t.Rect[2])),e},xt.internal.getHeight=function(t){var e=0;return bn(t)==="object"&&(e=cL(t.Rect[3])),e};var C4e=ur.addField=function(t){if(A4e(this,t),!(t instanceof Ks))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ur.AcroFormChoiceField=Jf,ur.AcroFormListBox=Zf,ur.AcroFormComboBox=Qf,ur.AcroFormEditBox=Ex,ur.AcroFormButton=Yr,ur.AcroFormPushButton=_x,ur.AcroFormRadioButton=eh,ur.AcroFormCheckBox=Ox,ur.AcroFormTextField=ad,ur.AcroFormPasswordField=Px,ur.AcroFormAppearance=xt,ur.AcroForm={ChoiceField:Jf,ListBox:Zf,ComboBox:Qf,EditBox:Ex,Button:Yr,PushButton:_x,RadioButton:eh,CheckBox:Ox,TextField:ad,PasswordField:Px,Appearance:xt},kt.AcroForm={ChoiceField:Jf,ListBox:Zf,ComboBox:Qf,EditBox:Ex,Button:Yr,PushButton:_x,RadioButton:eh,CheckBox:Ox,TextField:ad,PasswordField:Px,Appearance:xt};kt.AcroForm;function PB(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(k,O){var R,D,B,V,Z,H=n;if((O=O||n)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(E(k))for(Z in r)for(B=r[Z],R=0;R<B.length;R+=1){for(V=!0,D=0;D<B[R].length;D+=1)if(B[R][D]!==void 0&&B[R][D]!==k[D]){V=!1;break}if(V===!0){H=Z;break}}else for(Z in r)for(B=r[Z],R=0;R<B.length;R+=1){for(V=!0,D=0;D<B[R].length;D+=1)if(B[R][D]!==void 0&&B[R][D]!==k.charCodeAt(D)){V=!1;break}if(V===!0){H=Z;break}}return H===n&&O!==n&&(H=O),H},a=function k(O){for(var R=this.internal.write,D=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===x.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===x.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var Z="",H=0,Q=O.transparency.length;H<Q;H++)Z+=O.transparency[H]+" "+O.transparency[H]+" ";V.push({key:"Mask",value:"["+Z+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var fe=O.filter!==void 0?["/"+O.filter]:void 0;if(D({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:fe,objectId:O.objectId}),R("endobj"),"sMask"in O&&O.sMask!==void 0){var le,L=(le=O.sMaskBitsPerComponent)!==null&&le!==void 0?le:O.bitsPerComponent,F={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:O.sMask};"filter"in O&&(F.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(O.width),F.filter=O.filter),k.call(this,F)}if(O.colorSpace===x.INDEXED){var G=this.internal.newObject();D({data:P(new Uint8Array(O.palette)),objectId:G}),R("endobj")}},s=function(){var k=this.internal.collections[e+"images"];for(var O in k)a.call(this,k[O])},o=function(){var k,O=this.internal.collections[e+"images"],R=this.internal.write;for(var D in O)R("/I"+(k=O[D]).index,k.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},u=function(){var k=this.internal.collections[e+"images"];return l.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},p=function(k){return bn(k)==="object"&&k.nodeType===1},h=function(k,O){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var R=""+k.getAttribute("src");if(R.indexOf("data:image/")===0)return Cx(unescape(R).split("base64,").pop());var D=t.loadFile(R,!0);if(D!==void 0)return D}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var B;switch(O){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;default:B="image/jpeg"}return Cx(k.toDataURL(B,1).split("base64,").pop())}},m=function(k){var O=this.internal.collections[e+"images"];if(O){for(var R in O)if(k===O[R].alias)return O[R]}},g=function(k,O,R){return k||O||(k=-96,O=-96),k<0&&(k=-1*R.width*72/k/this.internal.scaleFactor),O<0&&(O=-1*R.height*72/O/this.internal.scaleFactor),k===0&&(k=O*R.width/R.height),O===0&&(O=k*R.height/R.width),[k,O]},y=function(k,O,R,D,B,V){var Z=g.call(this,R,D,B),H=this.internal.getCoordinateString,Q=this.internal.getVerticalCoordinateString,fe=u.call(this);if(R=Z[0],D=Z[1],fe[B.index]=B,V){V*=Math.PI/180;var le=Math.cos(V),L=Math.sin(V),F=function(ee){return ee.toFixed(4)},G=[F(le),F(L),F(-1*L),F(le),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,H(k),Q(O+D),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([H(R),"0","0",H(D),"0","0","cm"].join(" "))):this.internal.write([H(R),"0","0",H(D),H(k),Q(O+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(k){var O,R,D=0;if(typeof k=="string")for(R=k.length,O=0;O<R;O++)D=(D<<5)-D+k.charCodeAt(O),D|=0;else if(E(k))for(R=k.byteLength/2,O=0;O<R;O++)D=(D<<5)-D+k[O],D|=0;return D},N=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var O=!0;return k.length===0&&(O=!1),k.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(O=!1),O},j=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var O=k.indexOf(",");return O<0?null:k.substring(0,O).trim().endsWith("base64")?k.substring(O+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var E=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},C=t.__addimage__.binaryStringToUint8Array=function(k){for(var O=k.length,R=new Uint8Array(O),D=0;D<O;D++)R[D]=k.charCodeAt(D);return R},P=t.__addimage__.arrayBufferToBinaryString=function(k){for(var O="",R=E(k)?k:new Uint8Array(k),D=0;D<R.length;D+=8192)O+=String.fromCharCode.apply(null,R.subarray(D,D+8192));return O};t.addImage=function(){var k,O,R,D,B,V,Z,H,Q;if(typeof arguments[1]=="number"?(O=n,R=arguments[1],D=arguments[2],B=arguments[3],V=arguments[4],Z=arguments[5],H=arguments[6],Q=arguments[7]):(O=arguments[1],R=arguments[2],D=arguments[3],B=arguments[4],V=arguments[5],Z=arguments[6],H=arguments[7],Q=arguments[8]),bn(k=arguments[0])==="object"&&!p(k)&&"imageData"in k){var fe=k;k=fe.imageData,O=fe.format||O||n,R=fe.x||R||0,D=fe.y||D||0,B=fe.w||fe.width||B,V=fe.h||fe.height||V,Z=fe.alias||Z,H=fe.compression||H,Q=fe.rotation||fe.angle||Q}var le=this.internal.getFilters();if(H===void 0&&le.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(R)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var L=T.call(this,k,O,Z,H);return y.call(this,R,D,B,V,L,Q),this};var T=function(k,O,R,D){var B,V,Z;if(typeof k=="string"&&i(k)===n){k=unescape(k);var H=I(k,!1);(H!==""||(H=t.loadFile(k,!0))!==void 0)&&(k=H)}if(p(k)&&(k=h(k,O)),O=i(k,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((Z=R)==null||Z.length===0)&&(R=function(Q){return typeof Q=="string"||E(Q)?S(Q):E(Q.data)?S(Q.data):null}(k)),(B=m.call(this,R))||(k instanceof Uint8Array||O==="RGBA"||(V=k,k=C(k)),B=this["process"+O.toUpperCase()](k,d.call(this),R,function(Q){return Q&&typeof Q=="string"&&(Q=Q.toUpperCase()),Q in t.image_compression?Q:w.NONE}(D),V)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},I=t.__addimage__.convertBase64ToBinaryString=function(k,O){O=typeof O!="boolean"||O;var R,D="";if(typeof k=="string"){var B;R=(B=j(k))!==null&&B!==void 0?B:k;try{D=Cx(R)}catch(V){if(O)throw N(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};t.getImageProperties=function(k){var O,R,D="";if(p(k)&&(k=h(k)),typeof k=="string"&&i(k)===n&&((D=I(k,!1))===""&&(D=t.loadFile(k)||""),k=D),R=i(k),!f(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(k instanceof Uint8Array||(k=C(k)),!(O=this["process"+R.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=R,O}})(kt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};kt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,a,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((r=u[f]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){r=u[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(g.objId),w=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+h(x(r.contents))+")",a+=" /Popup "+y.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+h(x(w))+") >>",g.content=a;var S=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(a+=" /Open true"),a+=" >>",y.content=a,this.internal.write(g.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var E=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+E+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,a,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+a)},options:s,type:"link"})},t.textWithLink=function(n,r,i,a){var s,o,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(n,o).length;s=Math.ceil(u*d)}else o=l,s=u;return this.text(n,r,i,a),i+=.2*u,a.align==="center"&&(r-=l/2),a.align==="right"&&(r-=l),this.link(r,i-u,o,s,a),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(kt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},o=t.__arabicParser__.isArabicEndLetter=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(g){return s(g)&&i.indexOf(g.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(g){return s(g)&&a(g)&&e[g.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(g){var y=0,x=n,w="",S=0;for(y=0;y<g.length;y+=1)x[g.charCodeAt(y)]!==void 0?(S++,typeof(x=x[g.charCodeAt(y)])=="number"&&(w+=String.fromCharCode(x),x=n,S=0),y===g.length-1&&(x=n,w+=g.charAt(y-(S-1)),y-=S-1,S=0)):(x=n,w+=g.charAt(y-S),y-=S,S=0);return w};t.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(g,y,x){return s(g)?a(g)===!1?-1:!u(g)||!s(y)&&!s(x)||!s(x)&&o(y)||o(g)&&!s(y)||o(g)&&l(y)||o(g)&&o(y)?0:d(g)&&s(y)&&!o(y)&&s(x)&&u(x)?3:o(g)||!s(x)?1:2:-1},h=function(g){var y=0,x=0,w=0,S="",N="",j="",E=(g=g||"").split("\\s+"),C=[];for(y=0;y<E.length;y+=1){for(C.push(""),x=0;x<E[y].length;x+=1)S=E[y][x],N=E[y][x-1],j=E[y][x+1],s(S)?(w=p(S,N,j),C[y]+=w!==-1?String.fromCharCode(e[S.charCodeAt(0)][w]):S):C[y]+=S;C[y]=f(C[y])}return C.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var g,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(y)){var w=0;for(x=[],w=0;w<y.length;w+=1)Array.isArray(y[w])?x.push([h(y[w][0]),y[w][1],y[w][2]]):x.push([h(y[w])]);g=x}else g=h(y);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};t.events.push(["preProcessText",m])}(kt.API),kt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(kt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(g){l=g}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,y=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=u.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,N){return S.concat(y.splitTextToSize(N,x))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)h<(g=this.getStringUnitWidth(l[w],{font:f})*d)&&(h=g);return h!==0&&(m=l.length),{w:h/=p,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=f.top,h&&p&&(this.printHeaderRow(l.lineNumber,!0),l.y+=p[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,f,p){if(r.call(this),!d)throw new Error("No data for PDF table.");var h,m,g,y,x=[],w=[],S=[],N={},j={},E=[],C=[],P=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,I=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,k=p.margins||Object.assign({width:this.getPageWidth()},e),O=typeof p.padding=="number"?p.padding:3,R=p.headerBackgroundColor||"#c8c8c8",D=p.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=I,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=D,this.setFontSize(I),f==null)w=x=Object.keys(d[0]),S=x.map(function(){return"left"});else if(Array.isArray(f)&&bn(f[0])==="object")for(x=f.map(function(fe){return fe.name}),w=f.map(function(fe){return fe.prompt||fe.name||""}),S=f.map(function(fe){return fe.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(w=x=f,S=x.map(function(){return"left"}));if(P||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<x.length;h+=1){for(N[y=x[h]]=d.map(function(fe){return fe[y]}),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(w[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=N[y],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)E.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[y]=Math.max.apply(null,E)+O+O,E=[]}if(T){var B={};for(h=0;h<x.length;h+=1)B[x[h]]={},B[x[h]].text=w[h],B[x[h]].align=S[h];var V=o.call(this,B,j);C=x.map(function(fe){return new a(l,u,j[fe],V,B[fe].text,void 0,B[fe].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var Z=f.reduce(function(fe,le){return fe[le.name]=le.align,fe},{});for(h=0;h<d.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:d[h]},this);var H=o.call(this,d[h],j);for(g=0;g<x.length;g+=1){var Q=d[h][x[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:Q},this),s.call(this,new a(l,u,j[x[g]],H,Q,h+2,Z[x[g]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(l).map(function(h){var m=l[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/p+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,d),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),n=!1}}(kt.API);var TB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},MB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_k=PB(MB),LB=[100,200,300,400,500,600,700,800,900],E4e=PB(LB);function lS(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return TB[a=a||"normal"]?a:"normal"}(t.style),r=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(t.weight),i=function(a){return typeof _k[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function uL(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var _4e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},dL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fL(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function hL(t){return t.trimLeft()}function O4e(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function P4e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var nx,pL,mL,uf,rx,gL,vL,xL,cS=["times"];function yL(t,e,n,r,i){var a=4,s=wL;switch(i){case kt.API.image_compression.FAST:a=1,s=bL;break;case kt.API.image_compression.MEDIUM:a=6,s=SL;break;case kt.API.image_compression.SLOW:a=9,s=NL}t=function(l,u,d,f){for(var p,h=l.length/u,m=new Uint8Array(l.length+h),g=[T4e,bL,wL,SL,NL],y=0;y<h;y+=1){var x=y*u,w=l.subarray(x,x+u);if(f)m.set(f(w,d,p),x+y);else{for(var S=g.length,N=[],j=0;j<S;j+=1)N[j]=g[j](w,d,p);var E=L4e(N.concat());m.set(N[E],x+y)}p=w}return m}(t,e,Math.ceil(n*r/8),s);var o=Sk(t,{level:a});return kt.API.__addimage__.arrayBufferToBinaryString(o)}function T4e(t){var e=Array.apply([],t);return e.unshift(0),e}function bL(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=t[i-e]||0;r[i+1]=t[i]-a+256&255}return r}function wL(t,e,n){var r=t.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var s=n&&n[a]||0;i[a+1]=t[a]-s+256&255}return i}function SL(t,e,n){var r=t.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var s=t[a-e]||0,o=n&&n[a]||0;i[a+1]=t[a]+256-(s+o>>>1)&255}return i}function NL(t,e,n){var r=t.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var s=M4e(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);i[a+1]=t[a]-s+256&255}return i}function M4e(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),a=Math.abs(t+e-n-n);return r<=i&&r<=a?t:i<=a?e:n}function L4e(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function uS(t,e,n){var r=e*n,i=Math.floor(r/8),a=16-(r-8*i+n),s=(1<<n)-1;return IB(t,i)>>a&s}function jL(t,e,n,r){var i=n*r,a=Math.floor(i/8),s=16-(i-8*a+r),o=(1<<r)-1,l=(e&o)<<s;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var p=f>>8&255;u.setUint8(d,p)}})(t,a,IB(t,a)&~(o<<s)&65535|l)}function IB(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function I4e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],a=i>>7,s=1<<1+(7&i);t[e++],t[e++];var o=null,l=null;a&&(o=e,l=s,e+=3*s);var u=!0,d=[],f=0,p=null,h=0,m=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=t[e++];f=t[e++]|t[e++]<<8,p=t[e++],1&g||(p=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,N=t[e++],j=N>>6&1,E=1<<1+(7&N),C=o,P=l,T=!1;N>>7&&(T=!0,C=e,P=E,e+=3*E);var I=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x:y,y:x,width:w,height:S,has_local_palette:T,palette_offset:C,palette_size:P,data_offset:I,data_length:e-I,transparent_index:p,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=d.length)throw new Error("Frame index out of range.");return d[O]},this.decodeAndBlitFrameBGRA=function(O,R){var D=this.frameInfo(O),B=D.width*D.height,V=new Uint8Array(B);kL(t,D.data_offset,V,B);var Z=D.palette_offset,H=D.transparent_index;H===null&&(H=256);var Q=D.width,fe=n-Q,le=Q,L=4*(D.y*n+D.x),F=4*((D.y+D.height)*n+D.x),G=L,ee=4*fe;D.interlaced===!0&&(ee+=4*n*7);for(var ie=8,se=0,ye=V.length;se<ye;++se){var oe=V[se];if(le===0&&(le=Q,(G+=ee)>=F&&(ee=4*fe+4*n*(ie-1),G=L+(Q+fe)*(ie<<1),ie>>=1)),oe===H)G+=4;else{var we=t[Z+3*oe],be=t[Z+3*oe+1],de=t[Z+3*oe+2];R[G++]=de,R[G++]=be,R[G++]=we,R[G++]=255}--le}},this.decodeAndBlitFrameRGBA=function(O,R){var D=this.frameInfo(O),B=D.width*D.height,V=new Uint8Array(B);kL(t,D.data_offset,V,B);var Z=D.palette_offset,H=D.transparent_index;H===null&&(H=256);var Q=D.width,fe=n-Q,le=Q,L=4*(D.y*n+D.x),F=4*((D.y+D.height)*n+D.x),G=L,ee=4*fe;D.interlaced===!0&&(ee+=4*n*7);for(var ie=8,se=0,ye=V.length;se<ye;++se){var oe=V[se];if(le===0&&(le=Q,(G+=ee)>=F&&(ee=4*fe+4*n*(ie-1),G=L+(Q+fe)*(ie<<1),ie>>=1)),oe===H)G+=4;else{var we=t[Z+3*oe],be=t[Z+3*oe+1],de=t[Z+3*oe+2];R[G++]=we,R[G++]=be,R[G++]=de,R[G++]=255}--le}}}function kL(t,e,n,r){for(var i=t[e++],a=1<<i,s=a+1,o=s+1,l=i+1,u=(1<<l)-1,d=0,f=0,p=0,h=t[e++],m=new Int32Array(4096),g=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<l)break;var y=f&u;if(f>>=l,d-=l,y!==a){if(y===s)break;for(var x=y<o?y:g,w=0,S=x;S>a;)S=m[S]>>8,++w;var N=S;if(p+w+(x!==y?1:0)>r)return void _n.log("Warning, gif stream longer than expected.");n[p++]=N;var j=p+=w;for(x!==y&&(n[p++]=N),S=x;w--;)S=m[S],n[--j]=255&S,S>>=8;g!==null&&o<4096&&(m[o++]=g<<8|N,o>=u+1&&l<12&&(++l,u=u<<1|1)),g=y}else o=s+1,u=(1<<(l=i+1))-1,g=null}return p!==r&&_n.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function dS(t){var e,n,r,i,a,s=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),g=[],y=0,x=7,w=new Array(64),S=new Array(64),N=new Array(64),j=new Array(256),E=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(L,F){for(var G=0,ee=0,ie=new Array,se=1;se<=16;se++){for(var ye=1;ye<=L[se];ye++)ie[F[ee]]=[],ie[F[ee]][0]=G,ie[F[ee]][1]=se,ee++,G++;G*=2}return ie}function Z(L){for(var F=L[0],G=L[1]-1;G>=0;)F&1<<G&&(y|=1<<x),G--,--x<0&&(y==255?(H(255),H(0)):H(y),x=7,y=0)}function H(L){g.push(L)}function Q(L){H(L>>8&255),H(255&L)}function fe(L,F,G,ee,ie){for(var se,ye=ie[0],oe=ie[240],we=function(Oe,it){var Je,ge,Me,ut,st,ft,At,Rt,Se,Fe,Le=0;for(Se=0;Se<8;++Se){Je=Oe[Le],ge=Oe[Le+1],Me=Oe[Le+2],ut=Oe[Le+3],st=Oe[Le+4],ft=Oe[Le+5],At=Oe[Le+6];var dt=Je+(Rt=Oe[Le+7]),ve=Je-Rt,ae=ge+At,je=ge-At,Ie=Me+ft,Ae=Me-ft,Ze=ut+st,Ye=ut-st,tt=dt+Ze,Kt=dt-Ze,pe=ae+Ie,Re=ae-Ie;Oe[Le]=tt+pe,Oe[Le+4]=tt-pe;var lt=.707106781*(Re+Kt);Oe[Le+2]=Kt+lt,Oe[Le+6]=Kt-lt;var Pt=.382683433*((tt=Ye+Ae)-(Re=je+ve)),pt=.5411961*tt+Pt,en=1.306562965*Re+Pt,un=.707106781*(pe=Ae+je),ht=ve+un,jn=ve-un;Oe[Le+5]=jn+pt,Oe[Le+3]=jn-pt,Oe[Le+1]=ht+en,Oe[Le+7]=ht-en,Le+=8}for(Le=0,Se=0;Se<8;++Se){Je=Oe[Le],ge=Oe[Le+8],Me=Oe[Le+16],ut=Oe[Le+24],st=Oe[Le+32],ft=Oe[Le+40],At=Oe[Le+48];var Jn=Je+(Rt=Oe[Le+56]),Tr=Je-Rt,yi=ge+At,an=ge-At,ir=Me+ft,Mr=Me-ft,xa=ut+st,qa=ut-st,Qi=Jn+xa,$n=Jn-xa,ri=yi+ir,ea=yi-ir;Oe[Le]=Qi+ri,Oe[Le+32]=Qi-ri;var Vn=.707106781*(ea+$n);Oe[Le+16]=$n+Vn,Oe[Le+48]=$n-Vn;var Xs=.382683433*((Qi=qa+Mr)-(ea=an+Tr)),ta=.5411961*Qi+Xs,Ss=1.306562965*ea+Xs,Ns=.707106781*(ri=Mr+an),Js=Tr+Ns,Co=Tr-Ns;Oe[Le+40]=Co+ta,Oe[Le+24]=Co-ta,Oe[Le+8]=Js+Ss,Oe[Le+56]=Js-Ss,Le++}for(Se=0;Se<64;++Se)Fe=Oe[Se]*it[Se],h[Se]=Fe>0?Fe+.5|0:Fe-.5|0;return h}(L,F),be=0;be<64;++be)m[C[be]]=we[be];var de=m[0]-G;G=m[0],de==0?Z(ee[0]):(Z(ee[p[se=32767+de]]),Z(f[se]));for(var $e=63;$e>0&&m[$e]==0;)$e--;if($e==0)return Z(ye),G;for(var He,Y=1;Y<=$e;){for(var he=Y;m[Y]==0&&Y<=$e;)++Y;var Ke=Y-he;if(Ke>=16){He=Ke>>4;for(var qe=1;qe<=He;++qe)Z(oe);Ke&=15}se=32767+m[Y],Z(ie[(Ke<<4)+p[se]]),Z(f[se]),Y++}return $e!=63&&Z(ye),G}function le(L){L=Math.min(Math.max(L,1),100),a!=L&&(function(F){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ie=s((G[ee]*F+50)/100);ie=Math.min(Math.max(ie,1),255),o[C[ee]]=ie}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var oe=s((se[ye]*F+50)/100);oe=Math.min(Math.max(oe,1),255),l[C[ye]]=oe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,de=0;de<8;de++)for(var $e=0;$e<8;$e++)u[be]=1/(o[C[be]]*we[de]*we[$e]*8),d[be]=1/(l[C[be]]*we[de]*we[$e]*8),be++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),a=L)}this.encode=function(L,F){F&&le(F),g=new Array,y=0,x=7,Q(65496),Q(65504),Q(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),Q(1),Q(1),H(0),H(0),function(){Q(65499),Q(132),H(0);for(var ge=0;ge<64;ge++)H(o[ge]);H(1);for(var Me=0;Me<64;Me++)H(l[Me])}(),function(ge,Me){Q(65472),Q(17),H(8),Q(Me),Q(ge),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(L.width,L.height),function(){Q(65476),Q(418),H(0);for(var ge=0;ge<16;ge++)H(P[ge+1]);for(var Me=0;Me<=11;Me++)H(T[Me]);H(16);for(var ut=0;ut<16;ut++)H(I[ut+1]);for(var st=0;st<=161;st++)H(k[st]);H(1);for(var ft=0;ft<16;ft++)H(O[ft+1]);for(var At=0;At<=11;At++)H(R[At]);H(17);for(var Rt=0;Rt<16;Rt++)H(D[Rt+1]);for(var Se=0;Se<=161;Se++)H(B[Se])}(),Q(65498),Q(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var G=0,ee=0,ie=0;y=0,x=7,this.encode.displayName="_encode_";for(var se,ye,oe,we,be,de,$e,He,Y,he=L.data,Ke=L.width,qe=L.height,Oe=4*Ke,it=0;it<qe;){for(se=0;se<Oe;){for(be=Oe*it+se,$e=-1,He=0,Y=0;Y<64;Y++)de=be+(He=Y>>3)*Oe+($e=4*(7&Y)),it+He>=qe&&(de-=Oe*(it+1+He-qe)),se+$e>=Oe&&(de-=se+$e-Oe+4),ye=he[de++],oe=he[de++],we=he[de++],w[Y]=(E[ye]+E[oe+256|0]+E[we+512|0]>>16)-128,S[Y]=(E[ye+768|0]+E[oe+1024|0]+E[we+1280|0]>>16)-128,N[Y]=(E[ye+1280|0]+E[oe+1536|0]+E[we+1792|0]>>16)-128;G=fe(w,u,G,e,r),ee=fe(S,d,ee,n,i),ie=fe(N,d,ie,n,i),se+=32}it+=8}if(x>=0){var Je=[];Je[1]=x+1,Je[0]=(1<<x+1)-1,Z(Je)}return Q(65497),new Uint8Array(g)},t=t||50,function(){for(var L=String.fromCharCode,F=0;F<256;F++)j[F]=L(F)}(),e=V(P,T),n=V(O,R),r=V(I,k),i=V(D,B),function(){for(var L=1,F=2,G=1;G<=15;G++){for(var ee=L;ee<F;ee++)p[32767+ee]=G,f[32767+ee]=[],f[32767+ee][1]=G,f[32767+ee][0]=ee;for(var ie=-(F-1);ie<=-L;ie++)p[32767+ie]=G,f[32767+ie]=[],f[32767+ie][1]=G,f[32767+ie][0]=F-1+ie;L<<=1,F<<=1}}(),function(){for(var L=0;L<256;L++)E[L]=19595*L,E[L+256|0]=38470*L,E[L+512|0]=7471*L+32768,E[L+768|0]=-11059*L,E[L+1024|0]=-21709*L,E[L+1280|0]=32768*L+8421375,E[L+1536|0]=-27439*L,E[L+1792|0]=-5329*L}(),le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ts(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function AL(t){function e(T){if(!T)throw Error("assert :P")}function n(T,I,k){for(var O=0;4>O;O++)if(T[I+O]!=k.charCodeAt(O))return!0;return!1}function r(T,I,k,O,R){for(var D=0;D<R;D++)T[I+D]=k[O+D]}function i(T,I,k,O){for(var R=0;R<O;R++)T[I+R]=k}function a(T){return new Int32Array(T)}function s(T,I){for(var k=[],O=0;O<T;O++)k.push(new I);return k}function o(T,I){var k=[];return function O(R,D,B){for(var V=B[D],Z=0;Z<V&&(R.push(B.length>D+1?[]:new I),!(B.length<D+1));Z++)O(R[Z],D+1,B)}(k,0,T),k}var l=function(){var T=this;function I(v,b){for(var _=1<<b-1>>>0;v&_;)_>>>=1;return _?(v&_-1)+_:v}function k(v,b,_,M,z){e(!(M%_));do v[b+(M-=_)]=z;while(0<M)}function O(v,b,_,M,z){if(e(2328>=z),512>=z)var W=a(512);else if((W=a(z))==null)return 0;return function(U,K,J,te,me,Ee){var ne,xe,ke=K,Pe=1<<J,Ce=a(16),De=a(16);for(e(me!=0),e(te!=null),e(U!=null),e(0<J),xe=0;xe<me;++xe){if(15<te[xe])return 0;++Ce[te[xe]]}if(Ce[0]==me)return 0;for(De[1]=0,ne=1;15>ne;++ne){if(Ce[ne]>1<<ne)return 0;De[ne+1]=De[ne]+Ce[ne]}for(xe=0;xe<me;++xe)ne=te[xe],0<te[xe]&&(Ee[De[ne]++]=xe);if(De[15]==1)return(te=new R).g=0,te.value=Ee[0],k(U,ke,1,Pe,te),Pe;var Be,Xe=-1,Ve=Pe-1,jt=0,vt=1,Vt=1,wt=1<<J;for(xe=0,ne=1,me=2;ne<=J;++ne,me<<=1){if(vt+=Vt<<=1,0>(Vt-=Ce[ne]))return 0;for(;0<Ce[ne];--Ce[ne])(te=new R).g=ne,te.value=Ee[xe++],k(U,ke+jt,me,wt,te),jt=I(jt,ne)}for(ne=J+1,me=2;15>=ne;++ne,me<<=1){if(vt+=Vt<<=1,0>(Vt-=Ce[ne]))return 0;for(;0<Ce[ne];--Ce[ne]){if(te=new R,(jt&Ve)!=Xe){for(ke+=wt,Be=1<<(Xe=ne)-J;15>Xe&&!(0>=(Be-=Ce[Xe]));)++Xe,Be<<=1;Pe+=wt=1<<(Be=Xe-J),U[K+(Xe=jt&Ve)].g=Be+J,U[K+Xe].value=ke-K-Xe}te.g=ne-J,te.value=Ee[xe++],k(U,ke+(jt>>J),me,wt,te),jt=I(jt,ne)}}return vt!=2*De[15]-1?0:Pe}(v,b,_,M,z,W)}function R(){this.value=this.g=0}function D(){this.value=this.g=0}function B(){this.G=s(5,R),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(pu,D)}function V(v,b,_,M){e(v!=null),e(b!=null),e(2147483648>M),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=b,v.pa=_,v.Jd=b,v.Yc=_+M,v.Zc=4<=M?_+M-4+1:_,ye(v)}function Z(v,b){for(var _=0;0<b--;)_|=we(v,128)<<b;return _}function H(v,b){var _=Z(v,b);return oe(v)?-_:_}function Q(v,b,_,M){var z,W=0;for(e(v!=null),e(b!=null),e(4294967288>M),v.Sb=M,v.Ra=0,v.u=0,v.h=0,4<M&&(M=4),z=0;z<M;++z)W+=b[_+z]<<8*z;v.Ra=W,v.bb=M,v.oa=b,v.pa=_}function fe(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<zl-8>>>0,++v.bb,v.u-=8;ee(v)&&(v.h=1,v.u=0)}function le(v,b){if(e(0<=b),!v.h&&b<=wa){var _=G(v)&ba[b];return v.u+=b,fe(v),_}return v.h=1,v.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(v){return v.Ra>>>(v.u&zl-1)>>>0}function ee(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>zl}function ie(v,b){v.u=b,v.h=ee(v)}function se(v){v.u>=Ro&&(e(v.u>=Ro),fe(v))}function ye(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function oe(v){return Z(v,1)}function we(v,b){var _=v.Ca;0>v.b&&ye(v);var M=v.b,z=_*b>>>8,W=(v.I>>>M>z)+0;for(W?(_-=z,v.I-=z+1<<M>>>0):_=z+1,M=_,z=0;256<=M;)z+=8,M>>=8;return M=7^z+Fl[M],v.b-=M,v.Ca=(_<<M)-1,W}function be(v,b,_){v[b+0]=_>>24&255,v[b+1]=_>>16&255,v[b+2]=_>>8&255,v[b+3]=255&_}function de(v,b){return v[b+0]|v[b+1]<<8}function $e(v,b){return de(v,b)|v[b+2]<<16}function He(v,b){return de(v,b)|de(v,b+2)<<16}function Y(v,b){var _=1<<b;return e(v!=null),e(0<b),v.X=a(_),v.X==null?0:(v.Mb=32-b,v.Xa=b,1)}function he(v,b){e(v!=null),e(b!=null),e(v.Xa==b.Xa),r(b.X,0,v.X,0,1<<b.Xa)}function Ke(){this.X=[],this.Xa=this.Mb=0}function qe(v,b,_,M){e(_!=null),e(M!=null);var z=_[0],W=M[0];return z==0&&(z=(v*W+b/2)/b),W==0&&(W=(b*z+v/2)/v),0>=z||0>=W?0:(_[0]=z,M[0]=W,1)}function Oe(v,b){return v+(1<<b)-1>>>b}function it(v,b){return((4278255360&v)+(4278255360&b)>>>0&4278255360)+((16711935&v)+(16711935&b)>>>0&16711935)>>>0}function Je(v,b){T[b]=function(_,M,z,W,U,K,J){var te;for(te=0;te<U;++te){var me=T[v](K[J+te-1],z,W+te);K[J+te]=it(_[M+te],me)}}}function ge(){this.ud=this.hd=this.jd=0}function Me(v,b){return((4278124286&(v^b))>>>1)+(v&b)>>>0}function ut(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function st(v,b){return ut(v+(v-b+.5>>1))}function ft(v,b,_){return Math.abs(b-_)-Math.abs(v-_)}function At(v,b,_,M,z,W,U){for(M=W[U-1],_=0;_<z;++_)W[U+_]=M=it(v[b+_],M)}function Rt(v,b,_,M,z){var W;for(W=0;W<_;++W){var U=v[b+W],K=U>>8&255,J=16711935&(J=(J=16711935&U)+((K<<16)+K));M[z+W]=(4278255360&U)+J>>>0}}function Se(v,b){b.jd=255&v,b.hd=v>>8&255,b.ud=v>>16&255}function Fe(v,b,_,M,z,W){var U;for(U=0;U<M;++U){var K=b[_+U],J=K>>>8,te=K,me=255&(me=(me=K>>>16)+((v.jd<<24>>24)*(J<<24>>24)>>>5));te=255&(te=(te+=(v.hd<<24>>24)*(J<<24>>24)>>>5)+((v.ud<<24>>24)*(me<<24>>24)>>>5)),z[W+U]=(4278255360&K)+(me<<16)+te}}function Le(v,b,_,M,z){T[b]=function(W,U,K,J,te,me,Ee,ne,xe){for(J=Ee;J<ne;++J)for(Ee=0;Ee<xe;++Ee)te[me++]=z(K[M(W[U++])])},T[v]=function(W,U,K,J,te,me,Ee){var ne=8>>W.b,xe=W.Ea,ke=W.K[0],Pe=W.w;if(8>ne)for(W=(1<<W.b)-1,Pe=(1<<ne)-1;U<K;++U){var Ce,De=0;for(Ce=0;Ce<xe;++Ce)Ce&W||(De=M(J[te++])),me[Ee++]=z(ke[De&Pe]),De>>=ne}else T["VP8LMapColor"+_](J,te,ke,Pe,me,Ee,U,K,xe)}}function dt(v,b,_,M,z){for(_=b+_;b<_;){var W=v[b++];M[z++]=W>>16&255,M[z++]=W>>8&255,M[z++]=255&W}}function ve(v,b,_,M,z){for(_=b+_;b<_;){var W=v[b++];M[z++]=W>>16&255,M[z++]=W>>8&255,M[z++]=255&W,M[z++]=W>>24&255}}function ae(v,b,_,M,z){for(_=b+_;b<_;){var W=(U=v[b++])>>16&240|U>>12&15,U=240&U|U>>28&15;M[z++]=W,M[z++]=U}}function je(v,b,_,M,z){for(_=b+_;b<_;){var W=(U=v[b++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;M[z++]=W,M[z++]=U}}function Ie(v,b,_,M,z){for(_=b+_;b<_;){var W=v[b++];M[z++]=255&W,M[z++]=W>>8&255,M[z++]=W>>16&255}}function Ae(v,b,_,M,z,W){if(W==0)for(_=b+_;b<_;)be(M,((W=v[b++])[0]>>24|W[1]>>8&65280|W[2]<<8&16711680|W[3]<<24)>>>0),z+=32;else r(M,z,v,b,_)}function Ze(v,b){T[b][0]=T[v+"0"],T[b][1]=T[v+"1"],T[b][2]=T[v+"2"],T[b][3]=T[v+"3"],T[b][4]=T[v+"4"],T[b][5]=T[v+"5"],T[b][6]=T[v+"6"],T[b][7]=T[v+"7"],T[b][8]=T[v+"8"],T[b][9]=T[v+"9"],T[b][10]=T[v+"10"],T[b][11]=T[v+"11"],T[b][12]=T[v+"12"],T[b][13]=T[v+"13"],T[b][14]=T[v+"0"],T[b][15]=T[v+"0"]}function Ye(v){return v==J2||v==Z2||v==Wg||v==Q2}function tt(){this.eb=[],this.size=this.A=this.fb=0}function Kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tt,this.f.kb=new Kt,this.sd=null}function Re(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pt(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function pt(v,b){var _=v.T,M=b.ba.f.RGBA,z=M.eb,W=M.fb+v.ka*M.A,U=Ja[b.ba.S],K=v.y,J=v.O,te=v.f,me=v.N,Ee=v.ea,ne=v.W,xe=b.cc,ke=b.dc,Pe=b.Mc,Ce=b.Nc,De=v.ka,Be=v.ka+v.T,Xe=v.U,Ve=Xe+1>>1;for(De==0?U(K,J,null,null,te,me,Ee,ne,te,me,Ee,ne,z,W,null,null,Xe):(U(b.ec,b.fc,K,J,xe,ke,Pe,Ce,te,me,Ee,ne,z,W-M.A,z,W,Xe),++_);De+2<Be;De+=2)xe=te,ke=me,Pe=Ee,Ce=ne,me+=v.Rc,ne+=v.Rc,W+=2*M.A,U(K,(J+=2*v.fa)-v.fa,K,J,xe,ke,Pe,Ce,te,me,Ee,ne,z,W-M.A,z,W,Xe);return J+=v.fa,v.j+Be<v.o?(r(b.ec,b.fc,K,J,Xe),r(b.cc,b.dc,te,me,Ve),r(b.Mc,b.Nc,Ee,ne,Ve),_--):1&Be||U(K,J,null,null,te,me,Ee,ne,te,me,Ee,ne,z,W+M.A,null,null,Xe),_}function en(v,b,_){var M=v.F,z=[v.J];if(M!=null){var W=v.U,U=b.ba.S,K=U==Hg||U==Wg;b=b.ba.f.RGBA;var J=[0],te=v.ka;J[0]=v.T,v.Kb&&(te==0?--J[0]:(--te,z[0]-=v.width),v.j+v.ka+v.T==v.o&&(J[0]=v.o-v.j-te));var me=b.eb;te=b.fb+te*b.A,v=W4(M,z[0],v.width,W,J,me,te+(K?0:3),b.A),e(_==J),v&&Ye(U)&&Ap(me,te,K,W,J,b.A)}return 0}function un(v){var b=v.ma,_=b.ba.S,M=11>_,z=_==Fg||_==Bg||_==Hg||_==X2||_==12||Ye(_);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!xp(b.Oa,v,z?11:12))return 0;if(z&&Ye(_)&&mp(),v.da)alert("todo:use_scaling");else{if(M){if(b.Ib=Pt,v.Kb){if(_=v.U+1>>1,b.memory=a(v.U+2*_),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+v.U,b.Mc=b.cc,b.Nc=b.dc+_,b.Ib=pt,mp()}}else alert("todo:EmitYUV");z&&(b.Jb=en,M&&ks())}if(M&&!aC){for(v=0;256>v;++v)wH[v]=89858*(v-128)+Ug>>qg,jH[v]=-22014*(v-128)+Ug,NH[v]=-45773*(v-128),SH[v]=113618*(v-128)+Ug>>qg;for(v=Ep;v<nw;++v)b=76283*(v-16)+Ug>>qg,kH[v-Ep]=na(b,255),AH[v-Ep]=na(b+8>>4,15);aC=1}return 1}function ht(v){var b=v.ma,_=v.U,M=v.T;return e(!(1&v.ka)),0>=_||0>=M?0:(_=b.Ib(v,b),b.Jb!=null&&b.Jb(v,b,_),b.Dc+=_,1)}function jn(v){v.ma.memory=null}function Jn(v,b,_,M){return le(v,8)!=47?0:(b[0]=le(v,14)+1,_[0]=le(v,14)+1,M[0]=le(v,1),le(v,3)!=0?0:!v.h)}function Tr(v,b){if(4>v)return v+1;var _=v-2>>1;return(2+(1&v)<<_)+le(b,_)+1}function yi(v,b){return 120<b?b-120:1<=(_=((_=oH[b-1])>>4)*v+(8-(15&_)))?_:1;var _}function an(v,b,_){var M=G(_),z=v[b+=255&M].g-8;return 0<z&&(ie(_,_.u+8),M=G(_),b+=v[b].value,b+=M&(1<<z)-1),ie(_,_.u+v[b].g),v[b].value}function ir(v,b,_){return _.g+=v.g,_.value+=v.value<<b>>>0,e(8>=_.g),v.g}function Mr(v,b,_){var M=v.xc;return e((b=M==0?0:v.vc[v.md*(_>>M)+(b>>M)])<v.Wb),v.Ya[b]}function xa(v,b,_,M){var z=v.ab,W=v.c*b,U=v.C;b=U+b;var K=_,J=M;for(M=v.Ta,_=v.Ua;0<z--;){var te=v.gc[z],me=U,Ee=b,ne=K,xe=J,ke=(J=M,K=_,te.Ea);switch(e(me<Ee),e(Ee<=te.nc),te.hc){case 2:mr(ne,xe,(Ee-me)*ke,J,K);break;case 0:var Pe=me,Ce=Ee,De=J,Be=K,Xe=(wt=te).Ea;Pe==0&&(bp(ne,xe,null,null,1,De,Be),At(ne,xe+1,0,0,Xe-1,De,Be+1),xe+=Xe,Be+=Xe,++Pe);for(var Ve=1<<wt.b,jt=Ve-1,vt=Oe(Xe,wt.b),Vt=wt.K,wt=wt.w+(Pe>>wt.b)*vt;Pe<Ce;){var tn=Vt,Dr=wt,Gt=1;for(Jd(ne,xe,De,Be-Xe,1,De,Be);Gt<Xe;){var St=(Gt&~jt)+Ve;St>Xe&&(St=Xe),(0,Sp[tn[Dr++]>>8&15])(ne,xe+ +Gt,De,Be+Gt-Xe,St-Gt,De,Be+Gt),Gt=St}xe+=Xe,Be+=Xe,++Pe&jt||(wt+=vt)}Ee!=te.nc&&r(J,K-ke,J,K+(Ee-me-1)*ke,ke);break;case 1:for(ke=ne,Ce=xe,Xe=(ne=te.Ea)-(Be=ne&~(De=(xe=1<<te.b)-1)),Pe=Oe(ne,te.b),Ve=te.K,te=te.w+(me>>te.b)*Pe;me<Ee;){for(jt=Ve,vt=te,Vt=new ge,wt=Ce+Be,tn=Ce+ne;Ce<wt;)Se(jt[vt++],Vt),Np(Vt,ke,Ce,xe,J,K),Ce+=xe,K+=xe;Ce<tn&&(Se(jt[vt++],Vt),Np(Vt,ke,Ce,Xe,J,K),Ce+=Xe,K+=Xe),++me&De||(te+=Pe)}break;case 3:if(ne==J&&xe==K&&0<te.b){for(Ce=J,ne=ke=K+(Ee-me)*ke-(Be=(Ee-me)*Oe(te.Ea,te.b)),xe=J,De=K,Pe=[],Be=(Xe=Be)-1;0<=Be;--Be)Pe[Be]=xe[De+Be];for(Be=Xe-1;0<=Be;--Be)Ce[ne+Be]=Pe[Be];Dg(te,me,Ee,J,ke,J,K)}else Dg(te,me,Ee,ne,xe,J,K)}K=M,J=_}J!=_&&r(M,_,K,J,W)}function qa(v,b){var _=v.V,M=v.Ba+v.c*v.C,z=b-v.C;if(e(b<=v.l.o),e(16>=z),0<z){var W=v.l,U=v.Ta,K=v.Ua,J=W.width;if(xa(v,z,_,M),z=K=[K],e((_=v.C)<(M=b)),e(W.v<W.va),M>W.o&&(M=W.o),_<W.j){var te=W.j-_;_=W.j,z[0]+=te*J}if(_>=M?_=0:(z[0]+=4*W.v,W.ka=_-W.j,W.U=W.va-W.v,W.T=M-_,_=1),_){if(K=K[0],11>(_=v.ca).S){var me=_.f.RGBA,Ee=(M=_.S,z=W.U,W=W.T,te=me.eb,me.A),ne=W;for(me=me.fb+v.Ma*me.A;0<ne--;){var xe=U,ke=K,Pe=z,Ce=te,De=me;switch(M){case zg:jp(xe,ke,Pe,Ce,De);break;case Fg:Bl(xe,ke,Pe,Ce,De);break;case J2:Bl(xe,ke,Pe,Ce,De),Ap(Ce,De,0,Pe,1,0);break;case X4:mu(xe,ke,Pe,Ce,De);break;case Bg:Ae(xe,ke,Pe,Ce,De,1);break;case Z2:Ae(xe,ke,Pe,Ce,De,1),Ap(Ce,De,0,Pe,1,0);break;case Hg:Ae(xe,ke,Pe,Ce,De,0);break;case Wg:Ae(xe,ke,Pe,Ce,De,0),Ap(Ce,De,1,Pe,1,0);break;case X2:Hl(xe,ke,Pe,Ce,De);break;case Q2:Hl(xe,ke,Pe,Ce,De),H4(Ce,De,Pe,1,0);break;case J4:Wl(xe,ke,Pe,Ce,De);break;default:e(0)}K+=J,me+=Ee}v.Ma+=W}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=_.height)}}v.C=b,e(v.C<=v.i)}function Qi(v){var b;if(0<v.ua)return 0;for(b=0;b<v.Wb;++b){var _=v.Ya[b].G,M=v.Ya[b].H;if(0<_[1][M[1]+0].g||0<_[2][M[2]+0].g||0<_[3][M[3]+0].g)return 0}return 1}function $n(v,b,_,M,z,W){if(v.Z!=0){var U=v.qd,K=v.rd;for(e(Vl[v.Z]!=null);b<_;++b)Vl[v.Z](U,K,M,z,M,z,W),U=M,K=z,z+=W;v.qd=U,v.rd=K}}function ri(v,b){var _=v.l.ma,M=_.Z==0||_.Z==1?v.l.j:v.C;if(M=v.C<M?M:v.C,e(b<=v.l.o),b>M){var z=v.l.width,W=_.ca,U=_.tb+z*M,K=v.V,J=v.Ba+v.c*M,te=v.gc;e(v.ab==1),e(te[0].hc==3),Qs(te[0],M,b,K,J,W,U),$n(_,M,b,W,U,z)}v.C=v.Ma=b}function ea(v,b,_,M,z,W,U){var K=v.$/M,J=v.$%M,te=v.m,me=v.s,Ee=_+v.$,ne=Ee;z=_+M*z;var xe=_+M*W,ke=280+me.ua,Pe=v.Pb?K:16777216,Ce=0<me.ua?me.Wa:null,De=me.wc,Be=Ee<xe?Mr(me,J,K):null;e(v.C<W),e(xe<=z);var Xe=!1;e:for(;;){for(;Xe||Ee<xe;){var Ve=0;if(K>=Pe){var jt=Ee-_;e((Pe=v).Pb),Pe.wd=Pe.m,Pe.xd=jt,0<Pe.s.ua&&he(Pe.s.Wa,Pe.s.vb),Pe=K+cH}if(J&De||(Be=Mr(me,J,K)),e(Be!=null),Be.Qb&&(b[Ee]=Be.qb,Xe=!0),!Xe)if(se(te),Be.jc){Ve=te,jt=b;var vt=Ee,Vt=Be.pd[G(Ve)&pu-1];e(Be.jc),256>Vt.g?(ie(Ve,Ve.u+Vt.g),jt[vt]=Vt.value,Ve=0):(ie(Ve,Ve.u+Vt.g-256),e(256<=Vt.value),Ve=Vt.value),Ve==0&&(Xe=!0)}else Ve=an(Be.G[0],Be.H[0],te);if(te.h)break;if(Xe||256>Ve){if(!Xe)if(Be.nd)b[Ee]=(Be.qb|Ve<<8)>>>0;else{if(se(te),Xe=an(Be.G[1],Be.H[1],te),se(te),jt=an(Be.G[2],Be.H[2],te),vt=an(Be.G[3],Be.H[3],te),te.h)break;b[Ee]=(vt<<24|Xe<<16|Ve<<8|jt)>>>0}if(Xe=!1,++Ee,++J>=M&&(J=0,++K,U!=null&&K<=W&&!(K%16)&&U(v,K),Ce!=null))for(;ne<Ee;)Ve=b[ne++],Ce.X[(506832829*Ve&4294967295)>>>Ce.Mb]=Ve}else if(280>Ve){if(Ve=Tr(Ve-256,te),jt=an(Be.G[4],Be.H[4],te),se(te),jt=yi(M,jt=Tr(jt,te)),te.h)break;if(Ee-_<jt||z-Ee<Ve)break e;for(vt=0;vt<Ve;++vt)b[Ee+vt]=b[Ee+vt-jt];for(Ee+=Ve,J+=Ve;J>=M;)J-=M,++K,U!=null&&K<=W&&!(K%16)&&U(v,K);if(e(Ee<=z),J&De&&(Be=Mr(me,J,K)),Ce!=null)for(;ne<Ee;)Ve=b[ne++],Ce.X[(506832829*Ve&4294967295)>>>Ce.Mb]=Ve}else{if(!(Ve<ke))break e;for(Xe=Ve-280,e(Ce!=null);ne<Ee;)Ve=b[ne++],Ce.X[(506832829*Ve&4294967295)>>>Ce.Mb]=Ve;Ve=Ee,e(!(Xe>>>(jt=Ce).Xa)),b[Ve]=jt.X[Xe],Xe=!0}Xe||e(te.h==ee(te))}if(v.Pb&&te.h&&Ee<z)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&he(v.s.vb,v.s.Wa);else{if(te.h)break e;U!=null&&U(v,K>W?W:K),v.a=0,v.$=Ee-_}return 1}return v.a=3,0}function Vn(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var b=v.Wa;b!=null&&(b.X=null),v.vb=null,e(v!=null)}function Xs(){var v=new zt;return v==null?null:(v.a=0,v.xb=eC,Ze("Predictor","VP8LPredictors"),Ze("Predictor","VP8LPredictors_C"),Ze("PredictorAdd","VP8LPredictorsAdd"),Ze("PredictorAdd","VP8LPredictorsAdd_C"),mr=Rt,Np=Fe,jp=dt,Bl=ve,Hl=ae,Wl=je,mu=Ie,T.VP8LMapColor32b=Zs,T.VP8LMapColor8b=wp,v)}function ta(v,b,_,M,z){var W=1,U=[v],K=[b],J=M.m,te=M.s,me=null,Ee=0;e:for(;;){if(_)for(;W&&le(J,1);){var ne=U,xe=K,ke=M,Pe=1,Ce=ke.m,De=ke.gc[ke.ab],Be=le(Ce,2);if(ke.Oc&1<<Be)W=0;else{switch(ke.Oc|=1<<Be,De.hc=Be,De.Ea=ne[0],De.nc=xe[0],De.K=[null],++ke.ab,e(4>=ke.ab),Be){case 0:case 1:De.b=le(Ce,3)+2,Pe=ta(Oe(De.Ea,De.b),Oe(De.nc,De.b),0,ke,De.K),De.K=De.K[0];break;case 3:var Xe,Ve=le(Ce,8)+1,jt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(ne[0]=Oe(De.Ea,jt),De.b=jt,Xe=Pe=ta(Ve,1,0,ke,De.K)){var vt,Vt=Ve,wt=De,tn=1<<(8>>wt.b),Dr=a(tn);if(Dr==null)Xe=0;else{var Gt=wt.K[0],St=wt.w;for(Dr[0]=wt.K[0][0],vt=1;vt<1*Vt;++vt)Dr[vt]=it(Gt[St+vt],Dr[vt-1]);for(;vt<4*tn;++vt)Dr[vt]=0;wt.K[0]=null,wt.K[0]=Dr,Xe=1}}Pe=Xe;break;case 2:break;default:e(0)}W=Pe}}if(U=U[0],K=K[0],W&&le(J,1)&&!(W=1<=(Ee=le(J,4))&&11>=Ee)){M.a=3;break e}var at;if(at=W)t:{var vr,qt,rn,zn=M,si=U,$i=K,or=Ee,bi=_,zi=zn.m,Rr=zn.s,on=[null],mn=1,lr=0,gn=lH[or];n:for(;;){if(bi&&le(zi,1)){var oi=le(zi,3)+2,Cs=Oe(si,oi),xr=Oe($i,oi),ia=Cs*xr;if(!ta(Cs,xr,0,zn,on))break n;for(on=on[0],Rr.xc=oi,vr=0;vr<ia;++vr){var En=on[vr]>>8&65535;on[vr]=En,En>=mn&&(mn=En+1)}}if(zi.h)break n;for(qt=0;5>qt;++qt){var $r=Z4[qt];!qt&&0<or&&($r+=1<<or),lr<$r&&(lr=$r)}var Na=s(mn*gn,R),Fi=mn,ja=s(Fi,B);if(ja==null)var ka=null;else e(65536>=Fi),ka=ja;var aa=a(lr);if(ka==null||aa==null||Na==null){zn.a=1;break n}var Aa=Na;for(vr=rn=0;vr<mn;++vr){var Mn=ka[vr],Ca=Mn.G,Es=Mn.H,vu=0,Fo=1,li=0;for(qt=0;5>qt;++qt){$r=Z4[qt],Ca[qt]=Aa,Es[qt]=rn,!qt&&0<or&&($r+=1<<or);i:{var Gg,rw=$r,Kg=zn,_p=aa,_H=Aa,OH=rn,iw=0,Gl=Kg.m,PH=le(Gl,1);if(i(_p,0,0,rw),PH){var TH=le(Gl,1)+1,MH=le(Gl,1),lC=le(Gl,MH==0?1:8);_p[lC]=1,TH==2&&(_p[lC=le(Gl,8)]=1);var Yg=1}else{var cC=a(19),uC=le(Gl,4)+4;if(19<uC){Kg.a=3;var Xg=0;break i}for(Gg=0;Gg<uC;++Gg)cC[sH[Gg]]=le(Gl,3);var aw=void 0,Op=void 0,dC=Kg,LH=cC,Jg=rw,fC=_p,sw=0,Kl=dC.m,hC=8,pC=s(128,R);r:for(;O(pC,0,7,LH,19);){if(le(Kl,1)){var IH=2+2*le(Kl,3);if((aw=2+le(Kl,IH))>Jg)break r}else aw=Jg;for(Op=0;Op<Jg&&aw--;){se(Kl);var mC=pC[0+(127&G(Kl))];ie(Kl,Kl.u+mC.g);var Qd=mC.value;if(16>Qd)fC[Op++]=Qd,Qd!=0&&(hC=Qd);else{var DH=Qd==16,gC=Qd-16,RH=iH[gC],vC=le(Kl,rH[gC])+RH;if(Op+vC>Jg)break r;for(var $H=DH?hC:0;0<vC--;)fC[Op++]=$H}}sw=1;break r}sw||(dC.a=3),Yg=sw}(Yg=Yg&&!Gl.h)&&(iw=O(_H,OH,8,_p,rw)),Yg&&iw!=0?Xg=iw:(Kg.a=3,Xg=0)}if(Xg==0)break n;if(Fo&&aH[qt]==1&&(Fo=Aa[rn].g==0),vu+=Aa[rn].g,rn+=Xg,3>=qt){var Pp,ow=aa[0];for(Pp=1;Pp<$r;++Pp)aa[Pp]>ow&&(ow=aa[Pp]);li+=ow}}if(Mn.nd=Fo,Mn.Qb=0,Fo&&(Mn.qb=(Ca[3][Es[3]+0].value<<24|Ca[1][Es[1]+0].value<<16|Ca[2][Es[2]+0].value)>>>0,vu==0&&256>Ca[0][Es[0]+0].value&&(Mn.Qb=1,Mn.qb+=Ca[0][Es[0]+0].value<<8)),Mn.jc=!Mn.Qb&&6>li,Mn.jc){var Zg,Bo=Mn;for(Zg=0;Zg<pu;++Zg){var Yl=Zg,Xl=Bo.pd[Yl],Qg=Bo.G[0][Bo.H[0]+Yl];256<=Qg.value?(Xl.g=Qg.g+256,Xl.value=Qg.value):(Xl.g=0,Xl.value=0,Yl>>=ir(Qg,8,Xl),Yl>>=ir(Bo.G[1][Bo.H[1]+Yl],16,Xl),Yl>>=ir(Bo.G[2][Bo.H[2]+Yl],0,Xl),ir(Bo.G[3][Bo.H[3]+Yl],24,Xl))}}}Rr.vc=on,Rr.Wb=mn,Rr.Ya=ka,Rr.yc=Na,at=1;break t}at=0}if(!(W=at)){M.a=3;break e}if(0<Ee){if(te.ua=1<<Ee,!Y(te.Wa,Ee)){M.a=1,W=0;break e}}else te.ua=0;var lw=M,xC=U,zH=K,cw=lw.s,uw=cw.xc;if(lw.c=xC,lw.i=zH,cw.md=Oe(xC,uw),cw.wc=uw==0?-1:(1<<uw)-1,_){M.xb=gH;break e}if((me=a(U*K))==null){M.a=1,W=0;break e}W=(W=ea(M,me,0,U,K,K,null))&&!J.h;break e}return W?(z!=null?z[0]=me:(e(me==null),e(_)),M.$=0,_||Vn(te)):Vn(te),W}function Ss(v,b){var _=v.c*v.i,M=_+b+16*b;return e(v.c<=b),v.V=a(M),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+_+b,1)}function Ns(v,b){var _=v.C,M=b-_,z=v.V,W=v.Ba+v.c*_;for(e(b<=v.l.o);0<M;){var U=16<M?16:M,K=v.l.ma,J=v.l.width,te=J*U,me=K.ca,Ee=K.tb+J*_,ne=v.Ta,xe=v.Ua;xa(v,U,z,W),q4(ne,xe,me,Ee,te),$n(K,_,_+U,me,Ee,J),M-=U,z+=U*v.c,_+=U}e(_==b),v.C=v.Ma=b}function Js(){this.ub=this.yd=this.td=this.Rb=0}function Co(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ua(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function nu(){this.Yb=function(){var v=[];return function b(_,M,z){for(var W=z[M],U=0;U<W&&(_.push(z.length>M+1?[]:0),!(z.length<M+1));U++)b(_[U],M+1,z)}(v,0,[3,11]),v}()}function Rd(){this.jb=a(3),this.Wc=o([4,8],nu),this.Xc=o([4,17],nu)}function $d(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function ru(){this.Na=this.la=0}function Tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function iu(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zd(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new iu),this.aa=0,this.l=new Ml}function au(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Fd(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Js,this.Kc=new Co,this.ed=new $d,this.Qa=new Ua,this.Ic=this.$c=this.Aa=0,this.D=new zd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,L),this.ia=0,this.pb=s(4,Tl),this.Pa=new Rd,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new au),this.Hd=0,this.rb=Array(new ru),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new iu),this.L=this.aa=0,this.gd=o([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function na(v,b){return 0>v?0:v>b?b:v}function Ml(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bd(){var v=new Fd;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,Cp||(Cp=Ll)),v}function ar(v,b,_){return v.a==0&&(v.a=b,v.sc=_,v.cb=0),0}function Hd(v,b,_){return 3<=_&&v[b+0]==157&&v[b+1]==1&&v[b+2]==42}function Va(v,b){if(v==null)return 0;if(v.a=0,v.sc="OK",b==null)return ar(v,2,"null VP8Io passed to VP8GetHeaders()");var _=b.data,M=b.w,z=b.ha;if(4>z)return ar(v,7,"Truncated header.");var W=_[M+0]|_[M+1]<<8|_[M+2]<<16,U=v.Od;if(U.Rb=!(1&W),U.td=W>>1&7,U.yd=W>>4&1,U.ub=W>>5,3<U.td)return ar(v,3,"Incorrect keyframe parameters.");if(!U.yd)return ar(v,4,"Frame not displayable.");M+=3,z-=3;var K=v.Kc;if(U.Rb){if(7>z)return ar(v,7,"cannot parse picture header");if(!Hd(_,M,z))return ar(v,3,"Bad code word");K.c=16383&(_[M+4]<<8|_[M+3]),K.Td=_[M+4]>>6,K.i=16383&(_[M+6]<<8|_[M+5]),K.Ud=_[M+6]>>6,M+=7,z-=7,v.za=K.c+15>>4,v.Ub=K.i+15>>4,b.width=K.c,b.height=K.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,i((W=v.Pa).jb,0,255,W.jb.length),e((W=v.Qa)!=null),W.Cb=0,W.Bb=0,W.Fb=1,i(W.Zb,0,0,W.Zb.length),i(W.Lb,0,0,W.Lb)}if(U.ub>z)return ar(v,7,"bad partition length");V(W=v.m,_,M,U.ub),M+=U.ub,z-=U.ub,U.Rb&&(K.Ld=oe(W),K.Kd=oe(W)),K=v.Qa;var J,te=v.Pa;if(e(W!=null),e(K!=null),K.Cb=oe(W),K.Cb){if(K.Bb=oe(W),oe(W)){for(K.Fb=oe(W),J=0;4>J;++J)K.Zb[J]=oe(W)?H(W,7):0;for(J=0;4>J;++J)K.Lb[J]=oe(W)?H(W,6):0}if(K.Bb)for(J=0;3>J;++J)te.jb[J]=oe(W)?Z(W,8):255}else K.Bb=0;if(W.Ka)return ar(v,3,"cannot parse segment header");if((K=v.ed).zd=oe(W),K.Tb=Z(W,6),K.wb=Z(W,3),K.Pc=oe(W),K.Pc&&oe(W)){for(te=0;4>te;++te)oe(W)&&(K.vd[te]=H(W,6));for(te=0;4>te;++te)oe(W)&&(K.od[te]=H(W,6))}if(v.L=K.Tb==0?0:K.zd?1:2,W.Ka)return ar(v,3,"cannot parse filter header");var me=z;if(z=J=M,M=J+me,K=me,v.Xb=(1<<Z(v.m,2))-1,me<3*(te=v.Xb))_=7;else{for(J+=3*te,K-=3*te,me=0;me<te;++me){var Ee=_[z+0]|_[z+1]<<8|_[z+2]<<16;Ee>K&&(Ee=K),V(v.Jc[+me],_,J,Ee),J+=Ee,K-=Ee,z+=3}V(v.Jc[+te],_,J,K),_=J<M?0:5}if(_!=0)return ar(v,_,"cannot parse partitions");for(_=Z(J=v.m,7),z=oe(J)?H(J,4):0,M=oe(J)?H(J,4):0,K=oe(J)?H(J,4):0,te=oe(J)?H(J,4):0,J=oe(J)?H(J,4):0,me=v.Qa,Ee=0;4>Ee;++Ee){if(me.Cb){var ne=me.Zb[Ee];me.Fb||(ne+=_)}else{if(0<Ee){v.pb[Ee]=v.pb[0];continue}ne=_}var xe=v.pb[Ee];xe.Sc[0]=ew[na(ne+z,127)],xe.Sc[1]=tw[na(ne+0,127)],xe.Eb[0]=2*ew[na(ne+M,127)],xe.Eb[1]=101581*tw[na(ne+K,127)]>>16,8>xe.Eb[1]&&(xe.Eb[1]=8),xe.Qc[0]=ew[na(ne+te,117)],xe.Qc[1]=tw[na(ne+J,127)],xe.lc=ne+J}if(!U.Rb)return ar(v,4,"Not a key frame.");for(oe(W),U=v.Pa,_=0;4>_;++_){for(z=0;8>z;++z)for(M=0;3>M;++M)for(K=0;11>K;++K)te=we(W,pH[_][z][M][K])?Z(W,8):fH[_][z][M][K],U.Wc[_][z].Yb[M][K]=te;for(z=0;17>z;++z)U.Xc[_][z]=U.Wc[_][mH[z]]}return v.kc=oe(W),v.kc&&(v.Bd=Z(W,8)),v.cb=1}function Ll(v,b,_,M,z,W,U){var K=b[z].Yb[_];for(_=0;16>z;++z){if(!we(v,K[_+0]))return z;for(;!we(v,K[_+1]);)if(K=b[++z].Yb[0],_=0,z==16)return 16;var J=b[z+1].Yb;if(we(v,K[_+2])){var te=v,me=0;if(we(te,(ne=K)[(Ee=_)+3]))if(we(te,ne[Ee+6])){for(K=0,Ee=2*(me=we(te,ne[Ee+8]))+(ne=we(te,ne[Ee+9+me])),me=0,ne=uH[Ee];ne[K];++K)me+=me+we(te,ne[K]);me+=3+(8<<Ee)}else we(te,ne[Ee+7])?(me=7+2*we(te,165),me+=we(te,145)):me=5+we(te,159);else me=we(te,ne[Ee+4])?3+we(te,ne[Ee+5]):2;K=J[2]}else me=1,K=J[1];J=U+dH[z],0>(te=v).b&&ye(te);var Ee,ne=te.b,xe=(Ee=te.Ca>>1)-(te.I>>ne)>>31;--te.b,te.Ca+=xe,te.Ca|=1,te.I-=(Ee+1&xe)<<ne,W[J]=((me^xe)-xe)*M[(0<z)+0]}return 16}function Wd(v){var b=v.rb[v.sb-1];b.la=0,b.Na=0,i(v.zc,0,0,v.zc.length),v.ja=0}function ra(v,b,_,M,z){z=v[b+_+32*M]+(z>>3),v[b+_+32*M]=-256&z?0>z?0:255:z}function pr(v,b,_,M,z,W){ra(v,b,0,_,M+z),ra(v,b,1,_,M+W),ra(v,b,2,_,M-W),ra(v,b,3,_,M-z)}function js(v){return(20091*v>>16)+v}function qd(v,b,_,M){var z,W=0,U=a(16);for(z=0;4>z;++z){var K=v[b+0]+v[b+8],J=v[b+0]-v[b+8],te=(35468*v[b+4]>>16)-js(v[b+12]),me=js(v[b+4])+(35468*v[b+12]>>16);U[W+0]=K+me,U[W+1]=J+te,U[W+2]=J-te,U[W+3]=K-me,W+=4,b++}for(z=W=0;4>z;++z)K=(v=U[W+0]+4)+U[W+8],J=v-U[W+8],te=(35468*U[W+4]>>16)-js(U[W+12]),ra(_,M,0,0,K+(me=js(U[W+4])+(35468*U[W+12]>>16))),ra(_,M,1,0,J+te),ra(_,M,2,0,J-te),ra(_,M,3,0,K-me),W++,M+=32}function sp(v,b,_,M){var z=v[b+0]+4,W=35468*v[b+4]>>16,U=js(v[b+4]),K=35468*v[b+1]>>16;pr(_,M,0,z+U,v=js(v[b+1]),K),pr(_,M,1,z+W,v,K),pr(_,M,2,z-W,v,K),pr(_,M,3,z-U,v,K)}function op(v,b,_,M,z){qd(v,b,_,M),z&&qd(v,b+16,_,M+4)}function Ga(v,b,_,M){gu(v,b+0,_,M,1),gu(v,b+32,_,M+128,1)}function Ud(v,b,_,M){var z;for(v=v[b+0]+4,z=0;4>z;++z)for(b=0;4>b;++b)ra(_,M,b,z,v)}function Vd(v,b,_,M){v[b+0]&&dn(v,b+0,_,M),v[b+16]&&dn(v,b+16,_,M+4),v[b+32]&&dn(v,b+32,_,M+128),v[b+48]&&dn(v,b+48,_,M+128+4)}function Il(v,b,_,M){var z,W=a(16);for(z=0;4>z;++z){var U=v[b+0+z]+v[b+12+z],K=v[b+4+z]+v[b+8+z],J=v[b+4+z]-v[b+8+z],te=v[b+0+z]-v[b+12+z];W[0+z]=U+K,W[8+z]=U-K,W[4+z]=te+J,W[12+z]=te-J}for(z=0;4>z;++z)U=(v=W[0+4*z]+3)+W[3+4*z],K=W[1+4*z]+W[2+4*z],J=W[1+4*z]-W[2+4*z],te=v-W[3+4*z],_[M+0]=U+K>>3,_[M+16]=te+J>>3,_[M+32]=U-K>>3,_[M+48]=te-J>>3,M+=64}function X(v,b,_){var M,z=b-32,W=Sa,U=255-v[z-1];for(M=0;M<_;++M){var K,J=W,te=U+v[b-1];for(K=0;K<_;++K)v[b+K]=J[te+v[z+K]];b+=32}}function _e(v,b){X(v,b,4)}function rt(v,b){X(v,b,8)}function Mt(v,b){X(v,b,16)}function Lt(v,b){var _;for(_=0;16>_;++_)r(v,b+32*_,v,b-32,16)}function $t(v,b){var _;for(_=16;0<_;--_)i(v,b,v[b-1],16),b+=32}function sr(v,b,_){var M;for(M=0;16>M;++M)i(b,_+32*M,v,16)}function Gn(v,b){var _,M=16;for(_=0;16>_;++_)M+=v[b-1+32*_]+v[b+_-32];sr(M>>5,v,b)}function ya(v,b){var _,M=8;for(_=0;16>_;++_)M+=v[b-1+32*_];sr(M>>4,v,b)}function lp(v,b){var _,M=8;for(_=0;16>_;++_)M+=v[b+_-32];sr(M>>4,v,b)}function B2(v,b){sr(128,v,b)}function Ht(v,b,_){return v+2*b+_+2>>2}function H2(v,b){var _,M=b-32;for(M=new Uint8Array([Ht(v[M-1],v[M+0],v[M+1]),Ht(v[M+0],v[M+1],v[M+2]),Ht(v[M+1],v[M+2],v[M+3]),Ht(v[M+2],v[M+3],v[M+4])]),_=0;4>_;++_)r(v,b+32*_,M,0,M.length)}function W2(v,b){var _=v[b-1],M=v[b-1+32],z=v[b-1+64],W=v[b-1+96];be(v,b+0,16843009*Ht(v[b-1-32],_,M)),be(v,b+32,16843009*Ht(_,M,z)),be(v,b+64,16843009*Ht(M,z,W)),be(v,b+96,16843009*Ht(z,W,W))}function q2(v,b){var _,M=4;for(_=0;4>_;++_)M+=v[b+_-32]+v[b-1+32*_];for(M>>=3,_=0;4>_;++_)i(v,b+32*_,M,4)}function Eo(v,b){var _=v[b-1+0],M=v[b-1+32],z=v[b-1+64],W=v[b-1-32],U=v[b+0-32],K=v[b+1-32],J=v[b+2-32],te=v[b+3-32];v[b+0+96]=Ht(M,z,v[b-1+96]),v[b+1+96]=v[b+0+64]=Ht(_,M,z),v[b+2+96]=v[b+1+64]=v[b+0+32]=Ht(W,_,M),v[b+3+96]=v[b+2+64]=v[b+1+32]=v[b+0+0]=Ht(U,W,_),v[b+3+64]=v[b+2+32]=v[b+1+0]=Ht(K,U,W),v[b+3+32]=v[b+2+0]=Ht(J,K,U),v[b+3+0]=Ht(te,J,K)}function _o(v,b){var _=v[b+1-32],M=v[b+2-32],z=v[b+3-32],W=v[b+4-32],U=v[b+5-32],K=v[b+6-32],J=v[b+7-32];v[b+0+0]=Ht(v[b+0-32],_,M),v[b+1+0]=v[b+0+32]=Ht(_,M,z),v[b+2+0]=v[b+1+32]=v[b+0+64]=Ht(M,z,W),v[b+3+0]=v[b+2+32]=v[b+1+64]=v[b+0+96]=Ht(z,W,U),v[b+3+32]=v[b+2+64]=v[b+1+96]=Ht(W,U,K),v[b+3+64]=v[b+2+96]=Ht(U,K,J),v[b+3+96]=Ht(K,J,J)}function U2(v,b){var _=v[b-1+0],M=v[b-1+32],z=v[b-1+64],W=v[b-1-32],U=v[b+0-32],K=v[b+1-32],J=v[b+2-32],te=v[b+3-32];v[b+0+0]=v[b+1+64]=W+U+1>>1,v[b+1+0]=v[b+2+64]=U+K+1>>1,v[b+2+0]=v[b+3+64]=K+J+1>>1,v[b+3+0]=J+te+1>>1,v[b+0+96]=Ht(z,M,_),v[b+0+64]=Ht(M,_,W),v[b+0+32]=v[b+1+96]=Ht(_,W,U),v[b+1+32]=v[b+2+96]=Ht(W,U,K),v[b+2+32]=v[b+3+96]=Ht(U,K,J),v[b+3+32]=Ht(K,J,te)}function V2(v,b){var _=v[b+0-32],M=v[b+1-32],z=v[b+2-32],W=v[b+3-32],U=v[b+4-32],K=v[b+5-32],J=v[b+6-32],te=v[b+7-32];v[b+0+0]=_+M+1>>1,v[b+1+0]=v[b+0+64]=M+z+1>>1,v[b+2+0]=v[b+1+64]=z+W+1>>1,v[b+3+0]=v[b+2+64]=W+U+1>>1,v[b+0+32]=Ht(_,M,z),v[b+1+32]=v[b+0+96]=Ht(M,z,W),v[b+2+32]=v[b+1+96]=Ht(z,W,U),v[b+3+32]=v[b+2+96]=Ht(W,U,K),v[b+3+64]=Ht(U,K,J),v[b+3+96]=Ht(K,J,te)}function Gd(v,b){var _=v[b-1+0],M=v[b-1+32],z=v[b-1+64],W=v[b-1+96];v[b+0+0]=_+M+1>>1,v[b+2+0]=v[b+0+32]=M+z+1>>1,v[b+2+32]=v[b+0+64]=z+W+1>>1,v[b+1+0]=Ht(_,M,z),v[b+3+0]=v[b+1+32]=Ht(M,z,W),v[b+3+32]=v[b+1+64]=Ht(z,W,W),v[b+3+64]=v[b+2+64]=v[b+0+96]=v[b+1+96]=v[b+2+96]=v[b+3+96]=W}function cp(v,b){var _=v[b-1+0],M=v[b-1+32],z=v[b-1+64],W=v[b-1+96],U=v[b-1-32],K=v[b+0-32],J=v[b+1-32],te=v[b+2-32];v[b+0+0]=v[b+2+32]=_+U+1>>1,v[b+0+32]=v[b+2+64]=M+_+1>>1,v[b+0+64]=v[b+2+96]=z+M+1>>1,v[b+0+96]=W+z+1>>1,v[b+3+0]=Ht(K,J,te),v[b+2+0]=Ht(U,K,J),v[b+1+0]=v[b+3+32]=Ht(_,U,K),v[b+1+32]=v[b+3+64]=Ht(M,_,U),v[b+1+64]=v[b+3+96]=Ht(z,M,_),v[b+1+96]=Ht(W,z,M)}function su(v,b){var _;for(_=0;8>_;++_)r(v,b+32*_,v,b-32,8)}function G2(v,b){var _;for(_=0;8>_;++_)i(v,b,v[b-1],8),b+=32}function Oo(v,b,_){var M;for(M=0;8>M;++M)i(b,_+32*M,v,8)}function K2(v,b){var _,M=8;for(_=0;8>_;++_)M+=v[b+_-32]+v[b-1+32*_];Oo(M>>4,v,b)}function up(v,b){var _,M=4;for(_=0;8>_;++_)M+=v[b+_-32];Oo(M>>3,v,b)}function dp(v,b){var _,M=4;for(_=0;8>_;++_)M+=v[b-1+32*_];Oo(M>>3,v,b)}function Og(v,b){Oo(128,v,b)}function Po(v,b,_){var M=v[b-_],z=v[b+0],W=3*(z-M)+Y2[1020+v[b-2*_]-v[b+_]],U=$g[112+(W+4>>3)];v[b-_]=Sa[255+M+$g[112+(W+3>>3)]],v[b+0]=Sa[255+z-U]}function fp(v,b,_,M){var z=v[b+0],W=v[b+_];return Xa[255+v[b-2*_]-v[b-_]]>M||Xa[255+W-z]>M}function Kd(v,b,_,M){return 4*Xa[255+v[b-_]-v[b+0]]+Xa[255+v[b-2*_]-v[b+_]]<=M}function hp(v,b,_,M,z){var W=v[b-3*_],U=v[b-2*_],K=v[b-_],J=v[b+0],te=v[b+_],me=v[b+2*_],Ee=v[b+3*_];return 4*Xa[255+K-J]+Xa[255+U-te]>M?0:Xa[255+v[b-4*_]-W]<=z&&Xa[255+W-U]<=z&&Xa[255+U-K]<=z&&Xa[255+Ee-me]<=z&&Xa[255+me-te]<=z&&Xa[255+te-J]<=z}function ou(v,b,_,M){var z=2*M+1;for(M=0;16>M;++M)Kd(v,b+M,_,z)&&Po(v,b+M,_)}function pp(v,b,_,M){var z=2*M+1;for(M=0;16>M;++M)Kd(v,b+M*_,1,z)&&Po(v,b+M*_,1)}function Pg(v,b,_,M){var z;for(z=3;0<z;--z)ou(v,b+=4*_,_,M)}function Tg(v,b,_,M){var z;for(z=3;0<z;--z)pp(v,b+=4,_,M)}function To(v,b,_,M,z,W,U,K){for(W=2*W+1;0<z--;){if(hp(v,b,_,W,U))if(fp(v,b,_,K))Po(v,b,_);else{var J=v,te=b,me=_,Ee=J[te-2*me],ne=J[te-me],xe=J[te+0],ke=J[te+me],Pe=J[te+2*me],Ce=27*(Be=Y2[1020+3*(xe-ne)+Y2[1020+Ee-ke]])+63>>7,De=18*Be+63>>7,Be=9*Be+63>>7;J[te-3*me]=Sa[255+J[te-3*me]+Be],J[te-2*me]=Sa[255+Ee+De],J[te-me]=Sa[255+ne+Ce],J[te+0]=Sa[255+xe-Ce],J[te+me]=Sa[255+ke-De],J[te+2*me]=Sa[255+Pe-Be]}b+=M}}function Mo(v,b,_,M,z,W,U,K){for(W=2*W+1;0<z--;){if(hp(v,b,_,W,U))if(fp(v,b,_,K))Po(v,b,_);else{var J=v,te=b,me=_,Ee=J[te-me],ne=J[te+0],xe=J[te+me],ke=$g[112+(4+(Pe=3*(ne-Ee))>>3)],Pe=$g[112+(Pe+3>>3)],Ce=ke+1>>1;J[te-2*me]=Sa[255+J[te-2*me]+Ce],J[te-me]=Sa[255+Ee+Pe],J[te+0]=Sa[255+ne-ke],J[te+me]=Sa[255+xe-Ce]}b+=M}}function Mg(v,b,_,M,z,W){To(v,b,_,1,16,M,z,W)}function lu(v,b,_,M,z,W){To(v,b,1,_,16,M,z,W)}function Lg(v,b,_,M,z,W){var U;for(U=3;0<U;--U)Mo(v,b+=4*_,_,1,16,M,z,W)}function A(v,b,_,M,z,W){var U;for(U=3;0<U;--U)Mo(v,b+=4,1,_,16,M,z,W)}function $(v,b,_,M,z,W,U,K){To(v,b,z,1,8,W,U,K),To(_,M,z,1,8,W,U,K)}function re(v,b,_,M,z,W,U,K){To(v,b,1,z,8,W,U,K),To(_,M,1,z,8,W,U,K)}function ce(v,b,_,M,z,W,U,K){Mo(v,b+4*z,z,1,8,W,U,K),Mo(_,M+4*z,z,1,8,W,U,K)}function Ne(v,b,_,M,z,W,U,K){Mo(v,b+4,1,z,8,W,U,K),Mo(_,M+4,1,z,8,W,U,K)}function ze(){this.ba=new pe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ue(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Nt(){this.ua=0,this.Wa=new Ke,this.vb=new Ke,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new R}function zt(){this.xb=this.a=0,this.l=new Ml,this.ca=new pe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Nt,this.ab=0,this.gc=s(4,yt),this.Oc=0}function Ut(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ml,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function sn(v,b,_,M,z,W,U){for(v=v==null?0:v[b+0],b=0;b<U;++b)z[W+b]=v+_[M+b]&255,v=z[W+b]}function Zn(v,b,_,M,z,W,U){var K;if(v==null)sn(null,null,_,M,z,W,U);else for(K=0;K<U;++K)z[W+K]=v[b+K]+_[M+K]&255}function jr(v,b,_,M,z,W,U){if(v==null)sn(null,null,_,M,z,W,U);else{var K,J=v[b+0],te=J,me=J;for(K=0;K<U;++K)te=me+(J=v[b+K])-te,me=_[M+K]+(-256&te?0>te?0:255:te)&255,te=J,z[W+K]=me}}function Tn(v,b,_,M){var z=b.width,W=b.o;if(e(v!=null&&b!=null),0>_||0>=M||_+M>W)return null;if(!v.Cc){if(v.ga==null){var U;if(v.ga=new Ut,(U=v.ga==null)||(U=b.width*b.o,e(v.Gb.length==0),v.Gb=a(U),v.Uc=0,v.Gb==null?U=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,U=1),U=!U),!U){U=v.ga;var K=v.Fa,J=v.P,te=v.qc,me=v.mb,Ee=v.nb,ne=J+1,xe=te-1,ke=U.l;if(e(K!=null&&me!=null&&b!=null),Vl[0]=null,Vl[1]=sn,Vl[2]=Zn,Vl[3]=jr,U.ca=me,U.tb=Ee,U.c=b.width,U.i=b.height,e(0<U.c&&0<U.i),1>=te)b=0;else if(U.$a=3&K[J+0],U.Z=K[J+0]>>2&3,U.Lc=K[J+0]>>4&3,J=K[J+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||J)b=0;else if(ke.put=ht,ke.ac=un,ke.bc=jn,ke.ma=U,ke.width=b.width,ke.height=b.height,ke.Da=b.Da,ke.v=b.v,ke.va=b.va,ke.j=b.j,ke.o=b.o,U.$a)e:{e(U.$a==1),b=Xs();t:for(;;){if(b==null){b=0;break e}if(e(U!=null),U.mc=b,b.c=U.c,b.i=U.i,b.l=U.l,b.l.ma=U,b.l.width=U.c,b.l.height=U.i,b.a=0,Q(b.m,K,ne,xe),!ta(U.c,U.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Qi(b.s)?(U.ic=1,K=b.c*b.i,b.Ta=null,b.Ua=0,b.V=a(K),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(U.ic=0,b=Ss(b,U.c)),!b))break t;b=1;break e}U.mc=null,b=0}else b=xe>=U.c*U.i;U=!b}if(U)return null;v.ga.Lc!=1?v.Ga=0:M=W-_}e(v.ga!=null),e(_+M<=W);e:{if(b=(K=v.ga).c,W=K.l.o,K.$a==0){if(ne=v.rc,xe=v.Vc,ke=v.Fa,J=v.P+1+_*b,te=v.mb,me=v.nb+_*b,e(J<=v.P+v.qc),K.Z!=0)for(e(Vl[K.Z]!=null),U=0;U<M;++U)Vl[K.Z](ne,xe,ke,J,te,me,b),ne=te,xe=me,me+=b,J+=b;else for(U=0;U<M;++U)r(te,me,ke,J,b),ne=te,xe=me,me+=b,J+=b;v.rc=ne,v.Vc=xe}else{if(e(K.mc!=null),b=_+M,e((U=K.mc)!=null),e(b<=U.i),U.C>=b)b=1;else if(K.ic||ks(),K.ic){K=U.V,ne=U.Ba,xe=U.c;var Pe=U.i,Ce=(ke=1,J=U.$/xe,te=U.$%xe,me=U.m,Ee=U.s,U.$),De=xe*Pe,Be=xe*b,Xe=Ee.wc,Ve=Ce<Be?Mr(Ee,te,J):null;e(Ce<=De),e(b<=Pe),e(Qi(Ee));t:for(;;){for(;!me.h&&Ce<Be;){if(te&Xe||(Ve=Mr(Ee,te,J)),e(Ve!=null),se(me),256>(Pe=an(Ve.G[0],Ve.H[0],me)))K[ne+Ce]=Pe,++Ce,++te>=xe&&(te=0,++J<=b&&!(J%16)&&ri(U,J));else{if(!(280>Pe)){ke=0;break t}Pe=Tr(Pe-256,me);var jt,vt=an(Ve.G[4],Ve.H[4],me);if(se(me),!(Ce>=(vt=yi(xe,vt=Tr(vt,me)))&&De-Ce>=Pe)){ke=0;break t}for(jt=0;jt<Pe;++jt)K[ne+Ce+jt]=K[ne+Ce+jt-vt];for(Ce+=Pe,te+=Pe;te>=xe;)te-=xe,++J<=b&&!(J%16)&&ri(U,J);Ce<Be&&te&Xe&&(Ve=Mr(Ee,te,J))}e(me.h==ee(me))}ri(U,J>b?b:J);break t}!ke||me.h&&Ce<De?(ke=0,U.a=me.h?5:3):U.$=Ce,b=ke}else b=ea(U,U.V,U.Ba,U.c,U.i,b,Ns);if(!b){M=0;break e}}_+M>=W&&(v.Cc=1),M=1}if(!M)return null;if(v.Cc&&((M=v.ga)!=null&&(M.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+_*z}function Lr(v,b,_,M,z,W){for(;0<z--;){var U,K=v,J=b+(_?1:0),te=v,me=b+(_?0:3);for(U=0;U<M;++U){var Ee=te[me+4*U];Ee!=255&&(Ee*=32897,K[J+4*U+0]=K[J+4*U+0]*Ee>>23,K[J+4*U+1]=K[J+4*U+1]*Ee>>23,K[J+4*U+2]=K[J+4*U+2]*Ee>>23)}b+=W}}function kr(v,b,_,M,z){for(;0<M--;){var W;for(W=0;W<_;++W){var U=v[b+2*W+0],K=15&(te=v[b+2*W+1]),J=4369*K,te=(240&te|te>>4)*J>>16;v[b+2*W+0]=(240&U|U>>4)*J>>16&240|(15&U|U<<4)*J>>16>>4&15,v[b+2*W+1]=240&te|K}b+=z}}function ii(v,b,_,M,z,W,U,K){var J,te,me=255;for(te=0;te<z;++te){for(J=0;J<M;++J){var Ee=v[b+J];W[U+4*J]=Ee,me&=Ee}b+=_,U+=K}return me!=255}function Lo(v,b,_,M,z){var W;for(W=0;W<z;++W)_[M+W]=v[b+W]>>8}function ks(){Ap=Lr,H4=kr,W4=ii,q4=Lo}function Io(v,b,_){T[v]=function(M,z,W,U,K,J,te,me,Ee,ne,xe,ke,Pe,Ce,De,Be,Xe){var Ve,jt=Xe-1>>1,vt=K[J+0]|te[me+0]<<16,Vt=Ee[ne+0]|xe[ke+0]<<16;e(M!=null);var wt=3*vt+Vt+131074>>2;for(b(M[z+0],255&wt,wt>>16,Pe,Ce),W!=null&&(wt=3*Vt+vt+131074>>2,b(W[U+0],255&wt,wt>>16,De,Be)),Ve=1;Ve<=jt;++Ve){var tn=K[J+Ve]|te[me+Ve]<<16,Dr=Ee[ne+Ve]|xe[ke+Ve]<<16,Gt=vt+tn+Vt+Dr+524296,St=Gt+2*(tn+Vt)>>3;wt=St+vt>>1,vt=(Gt=Gt+2*(vt+Dr)>>3)+tn>>1,b(M[z+2*Ve-1],255&wt,wt>>16,Pe,Ce+(2*Ve-1)*_),b(M[z+2*Ve-0],255&vt,vt>>16,Pe,Ce+(2*Ve-0)*_),W!=null&&(wt=Gt+Vt>>1,vt=St+Dr>>1,b(W[U+2*Ve-1],255&wt,wt>>16,De,Be+(2*Ve-1)*_),b(W[U+2*Ve+0],255&vt,vt>>16,De,Be+(2*Ve+0)*_)),vt=tn,Vt=Dr}1&Xe||(wt=3*vt+Vt+131074>>2,b(M[z+Xe-1],255&wt,wt>>16,Pe,Ce+(Xe-1)*_),W!=null&&(wt=3*Vt+vt+131074>>2,b(W[U+Xe-1],255&wt,wt>>16,De,Be+(Xe-1)*_)))}}function mp(){Ja[zg]=vH,Ja[Fg]=tC,Ja[X4]=xH,Ja[Bg]=nC,Ja[Hg]=rC,Ja[X2]=iC,Ja[J4]=yH,Ja[J2]=tC,Ja[Z2]=nC,Ja[Wg]=rC,Ja[Q2]=iC}function Yd(v){return v&-16384?0>v?0:255:v>>bH}function Dl(v,b){return Yd((19077*v>>8)+(26149*b>>8)-14234)}function cu(v,b,_){return Yd((19077*v>>8)-(6419*b>>8)-(13320*_>>8)+8708)}function uu(v,b){return Yd((19077*v>>8)+(33050*b>>8)-17685)}function Rl(v,b,_,M,z){M[z+0]=Dl(v,_),M[z+1]=cu(v,b,_),M[z+2]=uu(v,b)}function ai(v,b,_,M,z){M[z+0]=uu(v,b),M[z+1]=cu(v,b,_),M[z+2]=Dl(v,_)}function du(v,b,_,M,z){var W=cu(v,b,_);b=W<<3&224|uu(v,b)>>3,M[z+0]=248&Dl(v,_)|W>>5,M[z+1]=b}function fu(v,b,_,M,z){var W=240&uu(v,b)|15;M[z+0]=240&Dl(v,_)|cu(v,b,_)>>4,M[z+1]=W}function gp(v,b,_,M,z){M[z+0]=255,Rl(v,b,_,M,z+1)}function vp(v,b,_,M,z){ai(v,b,_,M,z),M[z+3]=255}function Ri(v,b,_,M,z){Rl(v,b,_,M,z),M[z+3]=255}function Do(v,b,_){T[v]=function(M,z,W,U,K,J,te,me,Ee){for(var ne=me+(-2&Ee)*_;me!=ne;)b(M[z+0],W[U+0],K[J+0],te,me),b(M[z+1],W[U+0],K[J+0],te,me+_),z+=2,++U,++J,me+=2*_;1&Ee&&b(M[z+0],W[U+0],K[J+0],te,me)}}function Xd(v,b,_){return _==0?v==0?b==0?6:5:b==0?4:0:_}function Ig(v,b,_,M,z){switch(v>>>30){case 3:gu(b,_,M,z,0);break;case 2:Ya(b,_,M,z);break;case 1:dn(b,_,M,z)}}function Ka(v,b){var _,M,z=b.M,W=b.Nb,U=v.oc,K=v.pc+40,J=v.oc,te=v.pc+584,me=v.oc,Ee=v.pc+600;for(_=0;16>_;++_)U[K+32*_-1]=129;for(_=0;8>_;++_)J[te+32*_-1]=129,me[Ee+32*_-1]=129;for(0<z?U[K-1-32]=J[te-1-32]=me[Ee-1-32]=129:(i(U,K-32-1,127,21),i(J,te-32-1,127,9),i(me,Ee-32-1,127,9)),M=0;M<v.za;++M){var ne=b.ya[b.aa+M];if(0<M){for(_=-1;16>_;++_)r(U,K+32*_-4,U,K+32*_+12,4);for(_=-1;8>_;++_)r(J,te+32*_-4,J,te+32*_+4,4),r(me,Ee+32*_-4,me,Ee+32*_+4,4)}var xe=v.Gd,ke=v.Hd+M,Pe=ne.ad,Ce=ne.Hc;if(0<z&&(r(U,K-32,xe[ke].y,0,16),r(J,te-32,xe[ke].f,0,8),r(me,Ee-32,xe[ke].ea,0,8)),ne.Za){var De=U,Be=K-32+16;for(0<z&&(M>=v.za-1?i(De,Be,xe[ke].y[15],4):r(De,Be,xe[ke+1].y,0,4)),_=0;4>_;_++)De[Be+128+_]=De[Be+256+_]=De[Be+384+_]=De[Be+0+_];for(_=0;16>_;++_,Ce<<=2)De=U,Be=K+sC[_],As[ne.Ob[_]](De,Be),Ig(Ce,Pe,16*+_,De,Be)}else if(De=Xd(M,z,ne.Ob[0]),Ul[De](U,K),Ce!=0)for(_=0;16>_;++_,Ce<<=2)Ig(Ce,Pe,16*+_,U,K+sC[_]);for(_=ne.Gc,De=Xd(M,z,ne.Dd),zo[De](J,te),zo[De](me,Ee),Ce=Pe,De=J,Be=te,255&(ne=0|_)&&(170&ne?eo(Ce,256,De,Be):Cn(Ce,256,De,Be)),ne=me,Ce=Ee,255&(_>>=8)&&(170&_?eo(Pe,320,ne,Ce):Cn(Pe,320,ne,Ce)),z<v.Ub-1&&(r(xe[ke].y,0,U,K+480,16),r(xe[ke].f,0,J,te+224,8),r(xe[ke].ea,0,me,Ee+224,8)),_=8*W*v.B,xe=v.sa,ke=v.ta+16*M+16*W*v.R,Pe=v.qa,ne=v.ra+8*M+_,Ce=v.Ha,De=v.Ia+8*M+_,_=0;16>_;++_)r(xe,ke+_*v.R,U,K+32*_,16);for(_=0;8>_;++_)r(Pe,ne+_*v.B,J,te+32*_,8),r(Ce,De+_*v.B,me,Ee+32*_,8)}}function hu(v,b,_,M,z,W,U,K,J){var te=[0],me=[0],Ee=0,ne=J!=null?J.kd:0,xe=J??new Ue;if(v==null||12>_)return 7;xe.data=v,xe.w=b,xe.ha=_,b=[b],_=[_],xe.gb=[xe.gb];e:{var ke=b,Pe=_,Ce=xe.gb;if(e(v!=null),e(Pe!=null),e(Ce!=null),Ce[0]=0,12<=Pe[0]&&!n(v,ke[0],"RIFF")){if(n(v,ke[0]+8,"WEBP")){Ce=3;break e}var De=He(v,ke[0]+4);if(12>De||4294967286<De){Ce=3;break e}if(ne&&De>Pe[0]-8){Ce=7;break e}Ce[0]=De,ke[0]+=12,Pe[0]-=12}Ce=0}if(Ce!=0)return Ce;for(De=0<xe.gb[0],_=_[0];;){e:{var Be=v;Pe=b,Ce=_;var Xe=te,Ve=me,jt=ke=[0];if((wt=Ee=[Ee])[0]=0,8>Ce[0])Ce=7;else{if(!n(Be,Pe[0],"VP8X")){if(He(Be,Pe[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var vt=He(Be,Pe[0]+8),Vt=1+$e(Be,Pe[0]+12);if(2147483648<=Vt*(Be=1+$e(Be,Pe[0]+15))){Ce=3;break e}jt!=null&&(jt[0]=vt),Xe!=null&&(Xe[0]=Vt),Ve!=null&&(Ve[0]=Be),Pe[0]+=18,Ce[0]-=18,wt[0]=1}Ce=0}}if(Ee=Ee[0],ke=ke[0],Ce!=0)return Ce;if(Pe=!!(2&ke),!De&&Ee)return 3;if(W!=null&&(W[0]=!!(16&ke)),U!=null&&(U[0]=Pe),K!=null&&(K[0]=0),U=te[0],ke=me[0],Ee&&Pe&&J==null){Ce=0;break}if(4>_){Ce=7;break}if(De&&Ee||!De&&!Ee&&!n(v,b[0],"ALPH")){_=[_],xe.na=[xe.na],xe.P=[xe.P],xe.Sa=[xe.Sa];e:{vt=v,Ce=b,De=_;var wt=xe.gb;Xe=xe.na,Ve=xe.P,jt=xe.Sa,Vt=22,e(vt!=null),e(De!=null),Be=Ce[0];var tn=De[0];for(e(Xe!=null),e(jt!=null),Xe[0]=null,Ve[0]=null,jt[0]=0;;){if(Ce[0]=Be,De[0]=tn,8>tn){Ce=7;break e}var Dr=He(vt,Be+4);if(4294967286<Dr){Ce=3;break e}var Gt=8+Dr+1&-2;if(Vt+=Gt,0<wt&&Vt>wt){Ce=3;break e}if(!n(vt,Be,"VP8 ")||!n(vt,Be,"VP8L")){Ce=0;break e}if(tn[0]<Gt){Ce=7;break e}n(vt,Be,"ALPH")||(Xe[0]=vt,Ve[0]=Be+8,jt[0]=Dr),Be+=Gt,tn-=Gt}}if(_=_[0],xe.na=xe.na[0],xe.P=xe.P[0],xe.Sa=xe.Sa[0],Ce!=0)break}_=[_],xe.Ja=[xe.Ja],xe.xa=[xe.xa];e:if(wt=v,Ce=b,De=_,Xe=xe.gb[0],Ve=xe.Ja,jt=xe.xa,vt=Ce[0],Be=!n(wt,vt,"VP8 "),Vt=!n(wt,vt,"VP8L"),e(wt!=null),e(De!=null),e(Ve!=null),e(jt!=null),8>De[0])Ce=7;else{if(Be||Vt){if(wt=He(wt,vt+4),12<=Xe&&wt>Xe-12){Ce=3;break e}if(ne&&wt>De[0]-8){Ce=7;break e}Ve[0]=wt,Ce[0]+=8,De[0]-=8,jt[0]=Vt}else jt[0]=5<=De[0]&&wt[vt+0]==47&&!(wt[vt+4]>>5),Ve[0]=De[0];Ce=0}if(_=_[0],xe.Ja=xe.Ja[0],xe.xa=xe.xa[0],b=b[0],Ce!=0)break;if(4294967286<xe.Ja)return 3;if(K==null||Pe||(K[0]=xe.xa?2:1),U=[U],ke=[ke],xe.xa){if(5>_){Ce=7;break}K=U,ne=ke,Pe=W,v==null||5>_?v=0:5<=_&&v[b+0]==47&&!(v[b+4]>>5)?(De=[0],wt=[0],Xe=[0],Q(Ve=new F,v,b,_),Jn(Ve,De,wt,Xe)?(K!=null&&(K[0]=De[0]),ne!=null&&(ne[0]=wt[0]),Pe!=null&&(Pe[0]=Xe[0]),v=1):v=0):v=0}else{if(10>_){Ce=7;break}K=ke,v==null||10>_||!Hd(v,b+3,_-3)?v=0:(ne=v[b+0]|v[b+1]<<8|v[b+2]<<16,Pe=16383&(v[b+7]<<8|v[b+6]),v=16383&(v[b+9]<<8|v[b+8]),1&ne||3<(ne>>1&7)||!(ne>>4&1)||ne>>5>=xe.Ja||!Pe||!v?v=0:(U&&(U[0]=Pe),K&&(K[0]=v),v=1))}if(!v||(U=U[0],ke=ke[0],Ee&&(te[0]!=U||me[0]!=ke)))return 3;J!=null&&(J[0]=xe,J.offset=b-J.w,e(4294967286>b-J.w),e(J.offset==J.ha-_));break}return Ce==0||Ce==7&&Ee&&J==null?(W!=null&&(W[0]|=xe.na!=null&&0<xe.na.length),M!=null&&(M[0]=U),z!=null&&(z[0]=ke),0):Ce}function xp(v,b,_){var M=b.width,z=b.height,W=0,U=0,K=M,J=z;if(b.Da=v!=null&&0<v.Da,b.Da&&(K=v.cd,J=v.bd,W=v.v,U=v.j,11>_||(W&=-2,U&=-2),0>W||0>U||0>=K||0>=J||W+K>M||U+J>z))return 0;if(b.v=W,b.j=U,b.va=W+K,b.o=U+J,b.U=K,b.T=J,b.da=v!=null&&0<v.da,b.da){if(!qe(K,J,_=[v.ib],W=[v.hb]))return 0;b.ib=_[0],b.hb=W[0]}return b.ob=v!=null&&v.ob,b.Kb=v==null||!v.Sd,b.da&&(b.ob=b.ib<3*M/4&&b.hb<3*z/4,b.Kb=0),1}function yp(v){if(v==null)return 2;if(11>v.S){var b=v.f.RGBA;b.fb+=(v.height-1)*b.A,b.A=-b.A}else b=v.f.kb,v=v.height,b.O+=(v-1)*b.fa,b.fa=-b.fa,b.N+=(v-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(v-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(v-1)*b.lb,b.lb=-b.lb);return 0}function $l(v,b,_,M){if(M==null||0>=v||0>=b)return 2;if(_!=null){if(_.Da){var z=_.cd,W=_.bd,U=-2&_.v,K=-2&_.j;if(0>U||0>K||0>=z||0>=W||U+z>v||K+W>b)return 2;v=z,b=W}if(_.da){if(!qe(v,b,z=[_.ib],W=[_.hb]))return 2;v=z[0],b=W[0]}}M.width=v,M.height=b;e:{var J=M.width,te=M.height;if(v=M.S,0>=J||0>=te||!(v>=zg&&13>v))v=2;else{if(0>=M.Rd&&M.sd==null){U=W=z=b=0;var me=(K=J*oC[v])*te;if(11>v||(W=(te+1)/2*(b=(J+1)/2),v==12&&(U=(z=J)*te)),(te=a(me+2*W+U))==null){v=1;break e}M.sd=te,11>v?((J=M.f.RGBA).eb=te,J.fb=0,J.A=K,J.size=me):((J=M.f.kb).y=te,J.O=0,J.fa=K,J.Fd=me,J.f=te,J.N=0+me,J.Ab=b,J.Cd=W,J.ea=te,J.W=0+me+W,J.Db=b,J.Ed=W,v==12&&(J.F=te,J.J=0+me+2*W),J.Tc=U,J.lb=z)}if(b=1,z=M.S,W=M.width,U=M.height,z>=zg&&13>z)if(11>z)v=M.f.RGBA,b&=(K=Math.abs(v.A))*(U-1)+W<=v.size,b&=K>=W*oC[z],b&=v.eb!=null;else{v=M.f.kb,K=(W+1)/2,me=(U+1)/2,J=Math.abs(v.fa),te=Math.abs(v.Ab);var Ee=Math.abs(v.Db),ne=Math.abs(v.lb),xe=ne*(U-1)+W;b&=J*(U-1)+W<=v.Fd,b&=te*(me-1)+K<=v.Cd,b=(b&=Ee*(me-1)+K<=v.Ed)&J>=W&te>=K&Ee>=K,b&=v.y!=null,b&=v.f!=null,b&=v.ea!=null,z==12&&(b&=ne>=W,b&=xe<=v.Tc,b&=v.F!=null)}else b=0;v=b?0:2}}return v!=0||_!=null&&_.fd&&(v=yp(M)),v}var pu=64,ba=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wa=24,zl=32,Ro=8,Fl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Je("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(v){return v},T.Predictor2=function(v,b,_){return b[_+0]},T.Predictor3=function(v,b,_){return b[_+1]},T.Predictor4=function(v,b,_){return b[_-1]},T.Predictor5=function(v,b,_){return Me(Me(v,b[_+1]),b[_+0])},T.Predictor6=function(v,b,_){return Me(v,b[_-1])},T.Predictor7=function(v,b,_){return Me(v,b[_+0])},T.Predictor8=function(v,b,_){return Me(b[_-1],b[_+0])},T.Predictor9=function(v,b,_){return Me(b[_+0],b[_+1])},T.Predictor10=function(v,b,_){return Me(Me(v,b[_-1]),Me(b[_+0],b[_+1]))},T.Predictor11=function(v,b,_){var M=b[_+0];return 0>=ft(M>>24&255,v>>24&255,(b=b[_-1])>>24&255)+ft(M>>16&255,v>>16&255,b>>16&255)+ft(M>>8&255,v>>8&255,b>>8&255)+ft(255&M,255&v,255&b)?M:v},T.Predictor12=function(v,b,_){var M=b[_+0];return(ut((v>>24&255)+(M>>24&255)-((b=b[_-1])>>24&255))<<24|ut((v>>16&255)+(M>>16&255)-(b>>16&255))<<16|ut((v>>8&255)+(M>>8&255)-(b>>8&255))<<8|ut((255&v)+(255&M)-(255&b)))>>>0},T.Predictor13=function(v,b,_){var M=b[_-1];return(st((v=Me(v,b[_+0]))>>24&255,M>>24&255)<<24|st(v>>16&255,M>>16&255)<<16|st(v>>8&255,M>>8&255)<<8|st(255&v,255&M))>>>0};var bp=T.PredictorAdd0;T.PredictorAdd1=At,Je("Predictor2","PredictorAdd2"),Je("Predictor3","PredictorAdd3"),Je("Predictor4","PredictorAdd4"),Je("Predictor5","PredictorAdd5"),Je("Predictor6","PredictorAdd6"),Je("Predictor7","PredictorAdd7"),Je("Predictor8","PredictorAdd8"),Je("Predictor9","PredictorAdd9"),Je("Predictor10","PredictorAdd10"),Je("Predictor11","PredictorAdd11"),Je("Predictor12","PredictorAdd12"),Je("Predictor13","PredictorAdd13");var Jd=T.PredictorAdd2;Le("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Le("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var mr,Dg=T.ColorIndexInverseTransform,Zs=T.MapARGB,Qs=T.VP8LColorIndexInverseTransformAlpha,wp=T.MapAlpha,Sp=T.VP8LPredictorsAdd=[];Sp.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Np,jp,Bl,Hl,Wl,mu,ql,gu,Ya,eo,dn,Cn,gr,Ir,$o,kp,Zd,Rg,D4,R4,$4,z4,F4,B4,Ap,H4,W4,q4,U4=a(511),V4=a(2041),G4=a(225),K4=a(767),Y4=0,Y2=V4,$g=G4,Sa=K4,Xa=U4,zg=0,Fg=1,X4=2,Bg=3,Hg=4,X2=5,J4=6,J2=7,Z2=8,Wg=9,Q2=10,rH=[2,3,7],iH=[3,3,11],Z4=[280,256,256,256,40],aH=[0,1,1,1,0],sH=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oH=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lH=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cH=8,ew=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tw=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Cp=null,uH=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dH=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Q4=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fH=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hH=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pH=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],mH=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ul=[],As=[],zo=[],gH=1,eC=2,Vl=[],Ja=[];Io("UpsampleRgbLinePair",Rl,3),Io("UpsampleBgrLinePair",ai,3),Io("UpsampleRgbaLinePair",Ri,4),Io("UpsampleBgraLinePair",vp,4),Io("UpsampleArgbLinePair",gp,4),Io("UpsampleRgba4444LinePair",fu,2),Io("UpsampleRgb565LinePair",du,2);var vH=T.UpsampleRgbLinePair,xH=T.UpsampleBgrLinePair,tC=T.UpsampleRgbaLinePair,nC=T.UpsampleBgraLinePair,rC=T.UpsampleArgbLinePair,iC=T.UpsampleRgba4444LinePair,yH=T.UpsampleRgb565LinePair,qg=16,Ug=1<<qg-1,Ep=-227,nw=482,bH=6,aC=0,wH=a(256),SH=a(256),NH=a(256),jH=a(256),kH=a(nw-Ep),AH=a(nw-Ep);Do("YuvToRgbRow",Rl,3),Do("YuvToBgrRow",ai,3),Do("YuvToRgbaRow",Ri,4),Do("YuvToBgraRow",vp,4),Do("YuvToArgbRow",gp,4),Do("YuvToRgba4444Row",fu,2),Do("YuvToRgb565Row",du,2);var sC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Vg=[0,2,8],CH=[8,7,6,4,4,2,2,2,1,1,1,1],EH=1;this.WebPDecodeRGBA=function(v,b,_,M,z){var W=Fg,U=new ze,K=new pe;U.ba=K,K.S=W,K.width=[K.width],K.height=[K.height];var J=K.width,te=K.height,me=new Re;if(me==null||v==null)var Ee=2;else e(me!=null),Ee=hu(v,b,_,me.width,me.height,me.Pd,me.Qd,me.format,null);if(Ee!=0?J=0:(J!=null&&(J[0]=me.width[0]),te!=null&&(te[0]=me.height[0]),J=1),J){K.width=K.width[0],K.height=K.height[0],M!=null&&(M[0]=K.width),z!=null&&(z[0]=K.height);e:{if(M=new Ml,(z=new Ue).data=v,z.w=b,z.ha=_,z.kd=1,b=[0],e(z!=null),((v=hu(z.data,z.w,z.ha,null,null,null,b,null,z))==0||v==7)&&b[0]&&(v=4),(b=v)==0){if(e(U!=null),M.data=z.data,M.w=z.w+z.offset,M.ha=z.ha-z.offset,M.put=ht,M.ac=un,M.bc=jn,M.ma=U,z.xa){if((v=Xs())==null){U=1;break e}if(function(ne,xe){var ke=[0],Pe=[0],Ce=[0];t:for(;;){if(ne==null)return 0;if(xe==null)return ne.a=2,0;if(ne.l=xe,ne.a=0,Q(ne.m,xe.data,xe.w,xe.ha),!Jn(ne.m,ke,Pe,Ce)){ne.a=3;break t}if(ne.xb=eC,xe.width=ke[0],xe.height=Pe[0],!ta(ke[0],Pe[0],1,ne,null))break t;return 1}return e(ne.a!=0),0}(v,M)){if(M=(b=$l(M.width,M.height,U.Oa,U.ba))==0){t:{M=v;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((_=M.l)!=null),e((z=_.ma)!=null),M.xb!=0){if(M.ca=z.ba,M.tb=z.tb,e(M.ca!=null),!xp(z.Oa,_,Bg)){M.a=2;break n}if(!Ss(M,_.width)||_.da)break n;if((_.da||Ye(M.ca.S))&&ks(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&ks()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!Y(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!ea(M,M.V,M.Ba,M.c,M.i,_.o,qa))break n;z.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(b=v.a)}else b=v.a}else{if((v=new Bd)==null){U=1;break e}if(v.Fa=z.na,v.P=z.P,v.qc=z.Sa,Va(v,M)){if((b=$l(M.width,M.height,U.Oa,U.ba))==0){if(v.Aa=0,_=U.Oa,e((z=v)!=null),_!=null){if(0<(J=0>(J=_.Md)?0:100<J?255:255*J/100)){for(te=me=0;4>te;++te)12>(Ee=z.pb[te]).lc&&(Ee.ia=J*CH[0>Ee.lc?0:Ee.lc]>>3),me|=Ee.ia;me&&(alert("todo:VP8InitRandom"),z.ia=1)}z.Ga=_.Id,100<z.Ga?z.Ga=100:0>z.Ga&&(z.Ga=0)}(function(ne,xe){if(ne==null)return 0;if(xe==null)return ar(ne,2,"NULL VP8Io parameter in VP8Decode().");if(!ne.cb&&!Va(ne,xe))return 0;if(e(ne.cb),xe.ac==null||xe.ac(xe)){xe.ob&&(ne.L=0);var ke=Vg[ne.L];if(ne.L==2?(ne.yb=0,ne.zb=0):(ne.yb=xe.v-ke>>4,ne.zb=xe.j-ke>>4,0>ne.yb&&(ne.yb=0),0>ne.zb&&(ne.zb=0)),ne.Va=xe.o+15+ke>>4,ne.Hb=xe.va+15+ke>>4,ne.Hb>ne.za&&(ne.Hb=ne.za),ne.Va>ne.Ub&&(ne.Va=ne.Ub),0<ne.L){var Pe=ne.ed;for(ke=0;4>ke;++ke){var Ce;if(ne.Qa.Cb){var De=ne.Qa.Lb[ke];ne.Qa.Fb||(De+=Pe.Tb)}else De=Pe.Tb;for(Ce=0;1>=Ce;++Ce){var Be=ne.gd[ke][Ce],Xe=De;if(Pe.Pc&&(Xe+=Pe.vd[0],Ce&&(Xe+=Pe.od[0])),0<(Xe=0>Xe?0:63<Xe?63:Xe)){var Ve=Xe;0<Pe.wb&&(Ve=4<Pe.wb?Ve>>2:Ve>>1)>9-Pe.wb&&(Ve=9-Pe.wb),1>Ve&&(Ve=1),Be.dd=Ve,Be.tc=2*Xe+Ve,Be.ld=40<=Xe?2:15<=Xe?1:0}else Be.tc=0;Be.La=Ce}}}ke=0}else ar(ne,6,"Frame setup failed"),ke=ne.a;if(ke=ke==0){if(ke){ne.$c=0,0<ne.Aa||(ne.Ic=EH);t:{ke=ne.Ic,Pe=4*(Ve=ne.za);var jt=32*Ve,vt=Ve+1,Vt=0<ne.L?Ve*(0<ne.Aa?2:1):0,wt=(ne.Aa==2?2:1)*Ve;if((Be=Pe+832+(Ce=3*(16*ke+Vg[ne.L])/2*jt)+(De=ne.Fa!=null&&0<ne.Fa.length?ne.Kc.c*ne.Kc.i:0))!=Be)ke=0;else{if(Be>ne.Vb){if(ne.Vb=0,ne.Ec=a(Be),ne.Fc=0,ne.Ec==null){ke=ar(ne,1,"no memory during frame initialization.");break t}ne.Vb=Be}Be=ne.Ec,Xe=ne.Fc,ne.Ac=Be,ne.Bc=Xe,Xe+=Pe,ne.Gd=s(jt,au),ne.Hd=0,ne.rb=s(vt+1,ru),ne.sb=1,ne.wa=Vt?s(Vt,Di):null,ne.Y=0,ne.D.Nb=0,ne.D.wa=ne.wa,ne.D.Y=ne.Y,0<ne.Aa&&(ne.D.Y+=Ve),e(!0),ne.oc=Be,ne.pc=Xe,Xe+=832,ne.ya=s(wt,iu),ne.aa=0,ne.D.ya=ne.ya,ne.D.aa=ne.aa,ne.Aa==2&&(ne.D.aa+=Ve),ne.R=16*Ve,ne.B=8*Ve,Ve=(jt=Vg[ne.L])*ne.R,jt=jt/2*ne.B,ne.sa=Be,ne.ta=Xe+Ve,ne.qa=ne.sa,ne.ra=ne.ta+16*ke*ne.R+jt,ne.Ha=ne.qa,ne.Ia=ne.ra+8*ke*ne.B+jt,ne.$c=0,Xe+=Ce,ne.mb=De?Be:null,ne.nb=De?Xe:null,e(Xe+De<=ne.Fc+ne.Vb),Wd(ne),i(ne.Ac,ne.Bc,0,Pe),ke=1}}if(ke){if(xe.ka=0,xe.y=ne.sa,xe.O=ne.ta,xe.f=ne.qa,xe.N=ne.ra,xe.ea=ne.Ha,xe.Vd=ne.Ia,xe.fa=ne.R,xe.Rc=ne.B,xe.F=null,xe.J=0,!Y4){for(ke=-255;255>=ke;++ke)U4[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)V4[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)G4[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)K4[255+ke]=0>ke?0:255<ke?255:ke;Y4=1}ql=Il,gu=op,eo=Ga,dn=Ud,Cn=Vd,Ya=sp,gr=Mg,Ir=lu,$o=$,kp=re,Zd=Lg,Rg=A,D4=ce,R4=Ne,$4=ou,z4=pp,F4=Pg,B4=Tg,As[0]=q2,As[1]=_e,As[2]=H2,As[3]=W2,As[4]=Eo,As[5]=U2,As[6]=_o,As[7]=V2,As[8]=cp,As[9]=Gd,Ul[0]=Gn,Ul[1]=Mt,Ul[2]=Lt,Ul[3]=$t,Ul[4]=ya,Ul[5]=lp,Ul[6]=B2,zo[0]=K2,zo[1]=rt,zo[2]=su,zo[3]=G2,zo[4]=dp,zo[5]=up,zo[6]=Og,ke=1}else ke=0}ke&&(ke=function(tn,Dr){for(tn.M=0;tn.M<tn.Va;++tn.M){var Gt,St=tn.Jc[tn.M&tn.Xb],at=tn.m,vr=tn;for(Gt=0;Gt<vr.za;++Gt){var qt=at,rn=vr,zn=rn.Ac,si=rn.Bc+4*Gt,$i=rn.zc,or=rn.ya[rn.aa+Gt];if(rn.Qa.Bb?or.$b=we(qt,rn.Pa.jb[0])?2+we(qt,rn.Pa.jb[2]):we(qt,rn.Pa.jb[1]):or.$b=0,rn.kc&&(or.Ad=we(qt,rn.Bd)),or.Za=!we(qt,145)+0,or.Za){var bi=or.Ob,zi=0;for(rn=0;4>rn;++rn){var Rr,on=$i[0+rn];for(Rr=0;4>Rr;++Rr){on=hH[zn[si+Rr]][on];for(var mn=Q4[we(qt,on[0])];0<mn;)mn=Q4[2*mn+we(qt,on[mn])];on=-mn,zn[si+Rr]=on}r(bi,zi,zn,si,4),zi+=4,$i[0+rn]=on}}else on=we(qt,156)?we(qt,128)?1:3:we(qt,163)?2:0,or.Ob[0]=on,i(zn,si,on,4),i($i,0,on,4);or.Dd=we(qt,142)?we(qt,114)?we(qt,183)?1:3:2:0}if(vr.m.Ka)return ar(tn,7,"Premature end-of-partition0 encountered.");for(;tn.ja<tn.za;++tn.ja){if(vr=St,qt=(at=tn).rb[at.sb-1],zn=at.rb[at.sb+at.ja],Gt=at.ya[at.aa+at.ja],si=at.kc?Gt.Ad:0)qt.la=zn.la=0,Gt.Za||(qt.Na=zn.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var lr,gn;if(qt=zn,zn=vr,si=at.Pa.Xc,$i=at.ya[at.aa+at.ja],or=at.pb[$i.$b],rn=$i.ad,bi=0,zi=at.rb[at.sb-1],on=Rr=0,i(rn,bi,0,384),$i.Za)var oi=0,Cs=si[3];else{mn=a(16);var xr=qt.Na+zi.Na;if(xr=Cp(zn,si[1],xr,or.Eb,0,mn,0),qt.Na=zi.Na=(0<xr)+0,1<xr)ql(mn,0,rn,bi);else{var ia=mn[0]+3>>3;for(mn=0;256>mn;mn+=16)rn[bi+mn]=ia}oi=1,Cs=si[0]}var En=15&qt.la,$r=15&zi.la;for(mn=0;4>mn;++mn){var Na=1&$r;for(ia=gn=0;4>ia;++ia)En=En>>1|(Na=(xr=Cp(zn,Cs,xr=Na+(1&En),or.Sc,oi,rn,bi))>oi)<<7,gn=gn<<2|(3<xr?3:1<xr?2:rn[bi+0]!=0),bi+=16;En>>=4,$r=$r>>1|Na<<7,Rr=(Rr<<8|gn)>>>0}for(Cs=En,oi=$r>>4,lr=0;4>lr;lr+=2){for(gn=0,En=qt.la>>4+lr,$r=zi.la>>4+lr,mn=0;2>mn;++mn){for(Na=1&$r,ia=0;2>ia;++ia)xr=Na+(1&En),En=En>>1|(Na=0<(xr=Cp(zn,si[2],xr,or.Qc,0,rn,bi)))<<3,gn=gn<<2|(3<xr?3:1<xr?2:rn[bi+0]!=0),bi+=16;En>>=2,$r=$r>>1|Na<<5}on|=gn<<4*lr,Cs|=En<<4<<lr,oi|=(240&$r)<<lr}qt.la=Cs,zi.la=oi,$i.Hc=Rr,$i.Gc=on,$i.ia=43690&on?0:or.ia,si=!(Rr|on)}if(0<at.L&&(at.wa[at.Y+at.ja]=at.gd[Gt.$b][Gt.Za],at.wa[at.Y+at.ja].La|=!si),vr.Ka)return ar(tn,7,"Premature end-of-file encountered.")}if(Wd(tn),at=Dr,vr=1,Gt=(St=tn).D,qt=0<St.L&&St.M>=St.zb&&St.M<=St.Va,St.Aa==0)t:{if(Gt.M=St.M,Gt.uc=qt,Ka(St,Gt),vr=1,Gt=(gn=St.D).Nb,qt=(on=Vg[St.L])*St.R,zn=on/2*St.B,mn=16*Gt*St.R,ia=8*Gt*St.B,si=St.sa,$i=St.ta-qt+mn,or=St.qa,rn=St.ra-zn+ia,bi=St.Ha,zi=St.Ia-zn+ia,$r=(En=gn.M)==0,Rr=En>=St.Va-1,St.Aa==2&&Ka(St,gn),gn.uc)for(Na=(xr=St).D.M,e(xr.D.uc),gn=xr.yb;gn<xr.Hb;++gn){oi=gn,Cs=Na;var Fi=(ja=(li=xr).D).Nb;lr=li.R;var ja=ja.wa[ja.Y+oi],ka=li.sa,aa=li.ta+16*Fi*lr+16*oi,Aa=ja.dd,Mn=ja.tc;if(Mn!=0)if(e(3<=Mn),li.L==1)0<oi&&z4(ka,aa,lr,Mn+4),ja.La&&B4(ka,aa,lr,Mn),0<Cs&&$4(ka,aa,lr,Mn+4),ja.La&&F4(ka,aa,lr,Mn);else{var Ca=li.B,Es=li.qa,vu=li.ra+8*Fi*Ca+8*oi,Fo=li.Ha,li=li.Ia+8*Fi*Ca+8*oi;Fi=ja.ld,0<oi&&(Ir(ka,aa,lr,Mn+4,Aa,Fi),kp(Es,vu,Fo,li,Ca,Mn+4,Aa,Fi)),ja.La&&(Rg(ka,aa,lr,Mn,Aa,Fi),R4(Es,vu,Fo,li,Ca,Mn,Aa,Fi)),0<Cs&&(gr(ka,aa,lr,Mn+4,Aa,Fi),$o(Es,vu,Fo,li,Ca,Mn+4,Aa,Fi)),ja.La&&(Zd(ka,aa,lr,Mn,Aa,Fi),D4(Es,vu,Fo,li,Ca,Mn,Aa,Fi))}}if(St.ia&&alert("todo:DitherRow"),at.put!=null){if(gn=16*En,En=16*(En+1),$r?(at.y=St.sa,at.O=St.ta+mn,at.f=St.qa,at.N=St.ra+ia,at.ea=St.Ha,at.W=St.Ia+ia):(gn-=on,at.y=si,at.O=$i,at.f=or,at.N=rn,at.ea=bi,at.W=zi),Rr||(En-=on),En>at.o&&(En=at.o),at.F=null,at.J=null,St.Fa!=null&&0<St.Fa.length&&gn<En&&(at.J=Tn(St,at,gn,En-gn),at.F=St.mb,at.F==null&&at.F.length==0)){vr=ar(St,3,"Could not decode alpha data.");break t}gn<at.j&&(on=at.j-gn,gn=at.j,e(!(1&on)),at.O+=St.R*on,at.N+=St.B*(on>>1),at.W+=St.B*(on>>1),at.F!=null&&(at.J+=at.width*on)),gn<En&&(at.O+=at.v,at.N+=at.v>>1,at.W+=at.v>>1,at.F!=null&&(at.J+=at.v),at.ka=gn-at.j,at.U=at.va-at.v,at.T=En-gn,vr=at.put(at))}Gt+1!=St.Ic||Rr||(r(St.sa,St.ta-qt,si,$i+16*St.R,qt),r(St.qa,St.ra-zn,or,rn+8*St.B,zn),r(St.Ha,St.Ia-zn,bi,zi+8*St.B,zn))}if(!vr)return ar(tn,6,"Output aborted.")}return 1}(ne,xe)),xe.bc!=null&&xe.bc(xe),ke&=1}return ke?(ne.cb=0,ke):0})(v,M)||(b=v.a)}}else b=v.a}b==0&&U.Oa!=null&&U.Oa.fd&&(b=yp(U.ba))}U=b}W=U!=0?null:11>W?K.f.RGBA.eb:K.f.kb.y}else W=null;return W};var oC=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,I){for(var k="",O=0;O<4;O++)k+=String.fromCharCode(T[I++]);return k}function d(T,I){return T[I+0]|T[I+1]<<8}function f(T,I){return(T[I+0]|T[I+1]<<8|T[I+2]<<16)>>>0}function p(T,I){return(T[I+0]|T[I+1]<<8|T[I+2]<<16|T[I+3]<<24)>>>0}new l;var h=[0],m=[0],g=[],y=new l,x=t,w=function(T,I){var k={},O=0,R=!1,D=0,B=0;if(k.frames=[],!function(L,F){for(var G=0;G<4;G++)if(L[F+G]!="RIFF".charCodeAt(G))return!0;return!1}(T,I)){for(p(T,I+=4),I+=8;I<T.length;){var V=u(T,I),Z=p(T,I+=4);I+=4;var H=Z+(1&Z);switch(V){case"VP8 ":case"VP8L":k.frames[O]===void 0&&(k.frames[O]={}),(le=k.frames[O]).src_off=R?B:I-8,le.src_size=D+Z+8,O++,R&&(R=!1,D=0,B=0);break;case"VP8X":(le=k.header={}).feature_flags=T[I];var Q=I+4;le.canvas_width=1+f(T,Q),Q+=3,le.canvas_height=1+f(T,Q),Q+=3;break;case"ALPH":R=!0,D=H+8,B=I-8;break;case"ANIM":(le=k.header).bgcolor=p(T,I),Q=I+4,le.loop_count=d(T,Q),Q+=2;break;case"ANMF":var fe,le;(le=k.frames[O]={}).offset_x=2*f(T,I),I+=3,le.offset_y=2*f(T,I),I+=3,le.width=1+f(T,I),I+=3,le.height=1+f(T,I),I+=3,le.duration=f(T,I),I+=3,fe=T[I++],le.dispose=1&fe,le.blend=fe>>1&1}V!="ANMF"&&(I+=H)}return k}}(x,0);w.response=x,w.rgbaoutput=!0,w.dataurl=!1;var S=w.header?w.header:null,N=w.frames?w.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],m=[S.canvas_width];for(var j=0;j<N.length&&N[j].blend!=0;j++);}var E=N[0],C=y.WebPDecodeRGBA(x,E.src_off,E.src_size,m,h);E.rgba=C,E.imgwidth=m[0],E.imgheight=h[0];for(var P=0;P<m[0]*h[0]*4;P++)g[P]=C[P];return this.width=m,this.height=h,this.data=g,this}(function(t){var e,n,r,i,a,s,o,l,u,d=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new s,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new s,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var f=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var F=L;Object.defineProperty(this,"pdf",{get:function(){return F}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(Y){G=!!Y}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(Y){ee=!!Y}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(Y){isNaN(Y)||(ie=Y)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(Y){isNaN(Y)||(se=Y)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Y){var he;typeof Y=="number"?he=[Y,Y,Y,Y]:((he=new Array(4))[0]=Y[0],he[1]=Y.length>=2?Y[1]:he[0],he[2]=Y.length>=3?Y[2]:he[0],he[3]=Y.length>=4?Y[3]:he[1]),u.margin=he}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Y){ye=Y}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(Y){oe=Y}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(Y){we=Y}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Y){Y instanceof d&&(u=Y)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Y){u.path=Y}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Y){be=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var he;he=p(Y),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var he=p(Y);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var de=null,$e=null,He=null;Object.defineProperty(this,"fontFaces",{get:function(){return He},set:function(Y){de=null,$e=null,He=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var he;if(this.ctx.font=Y,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var Ke=he[1];he[2];var qe=he[3],Oe=he[4];he[5];var it=he[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(Je==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var ge=function(Le){var dt,ve,ae=[],je=Le.trim();if(je==="")return cS;if(je in dL)return[dL[je]];for(;je!=="";){switch(ve=null,dt=(je=hL(je)).charAt(0)){case'"':case"'":ve=O4e(je.substring(1),dt);break;default:ve=P4e(je)}if(ve===null||(ae.push(ve[0]),(je=hL(ve[1]))!==""&&je.charAt(0)!==","))return cS;je=je.replace(/^,/,"")}return ae}(it);if(this.fontFaces){var Me=function(Le,dt){var ve=Le.getFontList(),ae=JSON.stringify(ve);if(de===null||$e!==ae){var je=function(Ie){var Ae=[];return Object.keys(Ie).forEach(function(Ze){Ie[Ze].forEach(function(Ye){var tt=null;switch(Ye){case"bold":tt={family:Ze,weight:"bold"};break;case"italic":tt={family:Ze,style:"italic"};break;case"bolditalic":tt={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:Ze}}tt!==null&&(tt.ref={name:Ze,style:Ye},Ae.push(tt))})}),Ae}(ve);de=function(Ie){for(var Ae={},Ze=0;Ze<Ie.length;++Ze){var Ye=lS(Ie[Ze]),tt=Ye.family,Kt=Ye.stretch,pe=Ye.style,Re=Ye.weight;Ae[tt]=Ae[tt]||{},Ae[tt][Kt]=Ae[tt][Kt]||{},Ae[tt][Kt][pe]=Ae[tt][Kt][pe]||{},Ae[tt][Kt][pe][Re]=Ye}return Ae}(je.concat(dt)),$e=ae}return de}(this.pdf,this.fontFaces),ut=ge.map(function(Le){return{family:Le,stretch:"normal",weight:qe,style:Ke}}),st=function(Le,dt,ve){for(var ae=(ve=ve||{}).defaultFontFamily||"times",je=Object.assign({},_4e,ve.genericFontFamilies||{}),Ie=null,Ae=null,Ze=0;Ze<dt.length;++Ze)if(je[(Ie=lS(dt[Ze])).family]&&(Ie.family=je[Ie.family]),Le.hasOwnProperty(Ie.family)){Ae=Le[Ie.family];break}if(!(Ae=Ae||Le[ae]))throw new Error("Could not find a font-family for the rule '"+fL(Ie)+"' and default family '"+ae+"'.");if(Ae=function(Ye,tt){if(tt[Ye])return tt[Ye];var Kt=_k[Ye],pe=Kt<=_k.normal?-1:1,Re=uL(tt,MB,Kt,pe);if(!Re)throw new Error("Could not find a matching font-stretch value for "+Ye);return Re}(Ie.stretch,Ae),Ae=function(Ye,tt){if(tt[Ye])return tt[Ye];for(var Kt=TB[Ye],pe=0;pe<Kt.length;++pe)if(tt[Kt[pe]])return tt[Kt[pe]];throw new Error("Could not find a matching font-style for "+Ye)}(Ie.style,Ae),!(Ae=function(Ye,tt){if(tt[Ye])return tt[Ye];if(Ye===400&&tt[500])return tt[500];if(Ye===500&&tt[400])return tt[400];var Kt=E4e[Ye],pe=uL(tt,LB,Kt,Ye<400?-1:1);if(!pe)throw new Error("Could not find a matching font-weight for value "+Ye);return pe}(Ie.weight,Ae)))throw new Error("Failed to resolve a font for the rule '"+fL(Ie)+"'.");return Ae}(Me,ut);this.pdf.setFont(st.ref.name,st.ref.style)}else{var ft="";(qe==="bold"||parseInt(qe,10)>=700||Ke==="bold")&&(ft="bold"),Ke==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var At="",Rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Se=0;Se<ge.length;Se++){if(this.pdf.internal.getFont(ge[Se],ft,{noFallback:!0,disableWarning:!0})!==void 0){At=ge[Se];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(ge[Se],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=ge[Se],ft="bold";else if(this.pdf.internal.getFont(ge[Se],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=ge[Se],ft="normal";break}}if(At===""){for(var Fe=0;Fe<ge.length;Fe++)if(Rt[ge[Fe]]){At=Rt[ge[Fe]];break}}At=At===""?"Times":At,this.pdf.setFont(At,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};f.prototype.setLineDash=function(L){this.lineDash=L},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(L,F){if(isNaN(L)||isNaN(F))throw _n.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new s(L,F));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(L,F)},f.prototype.closePath=function(){var L=new s(0,0),F=0;for(F=this.path.length-1;F!==-1;F--)if(this.path[F].type==="begin"&&bn(this.path[F+1])==="object"&&typeof this.path[F+1].x=="number"){L=new s(this.path[F+1].x,this.path[F+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(L.x,L.y)},f.prototype.lineTo=function(L,F){if(isNaN(L)||isNaN(F))throw _n.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new s(L,F));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new s(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(L,F,G,ee){if(isNaN(G)||isNaN(ee)||isNaN(L)||isNaN(F))throw _n.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new s(G,ee)),se=this.ctx.transform.applyToPoint(new s(L,F));this.path.push({type:"qct",x1:se.x,y1:se.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new s(ie.x,ie.y)},f.prototype.bezierCurveTo=function(L,F,G,ee,ie,se){if(isNaN(ie)||isNaN(se)||isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee))throw _n.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new s(ie,se)),oe=this.ctx.transform.applyToPoint(new s(L,F)),we=this.ctx.transform.applyToPoint(new s(G,ee));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:we.x,y2:we.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new s(ye.x,ye.y)},f.prototype.arc=function(L,F,G,ee,ie,se){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee)||isNaN(ie))throw _n.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new s(L,F));L=ye.x,F=ye.y;var oe=this.ctx.transform.applyToPoint(new s(0,G)),we=this.ctx.transform.applyToPoint(new s(0,0));G=Math.sqrt(Math.pow(oe.x-we.x,2)+Math.pow(oe.y-we.y,2))}Math.abs(ie-ee)>=2*Math.PI&&(ee=0,ie=2*Math.PI),this.path.push({type:"arc",x:L,y:F,radius:G,startAngle:ee,endAngle:ie,counterclockwise:se})},f.prototype.arcTo=function(L,F,G,ee,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(L,F,G,ee){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee))throw _n.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,F),this.lineTo(L+G,F),this.lineTo(L+G,F+ee),this.lineTo(L,F+ee),this.lineTo(L,F),this.lineTo(L+G,F),this.lineTo(L,F)},f.prototype.fillRect=function(L,F,G,ee){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee))throw _n.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,F,G,ee),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(L,F,G,ee){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee))throw _n.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(L,F,G,ee),this.stroke())},f.prototype.clearRect=function(L,F,G,ee){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee))throw _n.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,F,G,ee))},f.prototype.save=function(L){L=typeof L!="boolean"||L;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(F),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},f.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var F=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(F),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(L){var F,G,ee,ie;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))F=0,G=0,ee=0,ie=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(se!==null)F=parseInt(se[1]),G=parseInt(se[2]),ee=parseInt(se[3]),ie=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)F=parseInt(se[1]),G=parseInt(se[2]),ee=parseInt(se[3]),ie=parseFloat(se[4]);else{if(ie=1,typeof L=="string"&&L.charAt(0)!=="#"){var ye=new kB(L);L=ye.ok?ye.toHex():"#000000"}L.length===4?(F=L.substring(1,2),F+=F,G=L.substring(2,3),G+=G,ee=L.substring(3,4),ee+=ee):(F=L.substring(1,3),G=L.substring(3,5),ee=L.substring(5,7)),F=parseInt(F,16),G=parseInt(G,16),ee=parseInt(ee,16)}}return{r:F,g:G,b:ee,a:ie,style:L}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(L,F,G,ee){if(isNaN(F)||isNaN(G)||typeof L!="string")throw _n.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!h.call(this)){var ie=H(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;O.call(this,{text:L,x:F,y:G,scale:se,angle:ie,align:this.textAlign,maxWidth:ee})}},f.prototype.strokeText=function(L,F,G,ee){if(isNaN(F)||isNaN(G)||typeof L!="string")throw _n.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ee=isNaN(ee)?void 0:ee;var ie=H(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;O.call(this,{text:L,x:F,y:G,scale:se,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ee})}},f.prototype.measureText=function(L){if(typeof L!="string")throw _n.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var F=this.pdf,G=this.pdf.internal.scaleFactor,ee=F.internal.getFontSize(),ie=F.getStringUnitWidth(L)*ee/F.internal.scaleFactor;return new function(se){var ye=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this}({width:ie*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(L,F){if(isNaN(L)||isNaN(F))throw _n.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new l(L,0,0,F,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(L){if(isNaN(L))throw _n.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var F=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(F)},f.prototype.translate=function(L,F){if(isNaN(L)||isNaN(F))throw _n.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new l(1,0,0,1,L,F);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(L,F,G,ee,ie,se){if(isNaN(L)||isNaN(F)||isNaN(G)||isNaN(ee)||isNaN(ie)||isNaN(se))throw _n.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new l(L,F,G,ee,ie,se);this.ctx.transform=this.ctx.transform.multiply(ye)},f.prototype.setTransform=function(L,F,G,ee,ie,se){L=isNaN(L)?1:L,F=isNaN(F)?0:F,G=isNaN(G)?0:G,ee=isNaN(ee)?1:ee,ie=isNaN(ie)?0:ie,se=isNaN(se)?0:se,this.ctx.transform=new l(L,F,G,ee,ie,se)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(L,F,G,ee,ie,se,ye,oe,we){var be=this.pdf.getImageProperties(L),de=1,$e=1,He=1,Y=1;ee!==void 0&&oe!==void 0&&(He=oe/ee,Y=we/ie,de=be.width/ee*oe/ee,$e=be.height/ie*we/ie),se===void 0&&(se=F,ye=G,F=0,G=0),ee!==void 0&&oe===void 0&&(oe=ee,we=ie),ee===void 0&&oe===void 0&&(oe=be.width,we=be.height);var he=this.ctx.transform.decompose(),Ke=H(he.rotate.shx),qe=new l,Oe=(qe=(qe=(qe=qe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale)).applyToRectangle(new o(se-F*He,ye-G*Y,ee*de,ie*$e));if(this.autoPaging){for(var it,Je=y.call(this,Oe),ge=[],Me=0;Me<Je.length;Me+=1)ge.indexOf(Je[Me])===-1&&ge.push(Je[Me]);S(ge);for(var ut=ge[0],st=ge[ge.length-1],ft=ut;ft<st+1;ft++){this.pdf.setPage(ft);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=ft===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=ft===1?0:Se+(ft-2)*Fe;if(this.ctx.clip_path.length!==0){var dt=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(it,this.posX+this.margin[3],-Le+Rt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=dt}var ve=JSON.parse(JSON.stringify(Oe));ve=w([ve],this.posX+this.margin[3],-Le+Rt+this.ctx.prevPageLastElemOffset)[0];var ae=(ft>ut||ft<st)&&g.call(this);ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Fe,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",ve.x,ve.y,ve.w,ve.h,null,null,Ke),ae&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,Ke)};var y=function(L,F,G){var ee=[];F=F||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":ee.push(Math.floor((L.y+ie)/G)+1);break;case"arc":ee.push(Math.floor((L.y+ie-L.radius)/G)+1),ee.push(Math.floor((L.y+ie+L.radius)/G)+1);break;case"qct":var se=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);ee.push(Math.floor((se.y+ie)/G)+1),ee.push(Math.floor((se.y+se.h+ie)/G)+1);break;case"bct":var ye=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);ee.push(Math.floor((ye.y+ie)/G)+1),ee.push(Math.floor((ye.y+ye.h+ie)/G)+1);break;case"rect":ee.push(Math.floor((L.y+ie)/G)+1),ee.push(Math.floor((L.y+L.h+ie)/G)+1)}for(var oe=0;oe<ee.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<ee[oe];)x.call(this);return ee},x=function(){var L=this.fillStyle,F=this.strokeStyle,G=this.font,ee=this.lineCap,ie=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=F,this.font=G,this.lineCap=ee,this.lineWidth=ie,this.lineJoin=se},w=function(L,F,G){for(var ee=0;ee<L.length;ee++)switch(L[ee].type){case"bct":L[ee].x2+=F,L[ee].y2+=G;case"qct":L[ee].x1+=F,L[ee].y1+=G;default:L[ee].x+=F,L[ee].y+=G}return L},S=function(L){return L.sort(function(F,G){return F-G})},N=function(L,F){var G=this.fillStyle,ee=this.strokeStyle,ie=this.lineCap,se=this.lineWidth,ye=Math.abs(se*this.ctx.transform.scaleX),oe=this.lineJoin;if(this.autoPaging){for(var we,be,de=JSON.parse(JSON.stringify(this.path)),$e=JSON.parse(JSON.stringify(this.path)),He=[],Y=0;Y<$e.length;Y++)if($e[Y].x!==void 0)for(var he=y.call(this,$e[Y]),Ke=0;Ke<he.length;Ke+=1)He.indexOf(he[Ke])===-1&&He.push(he[Ke]);for(var qe=0;qe<He.length;qe++)for(;this.pdf.internal.getNumberOfPages()<He[qe];)x.call(this);S(He);for(var Oe=He[0],it=He[He.length-1],Je=Oe;Je<it+1;Je++){this.pdf.setPage(Je),this.fillStyle=G,this.strokeStyle=ee,this.lineCap=ie,this.lineWidth=ye,this.lineJoin=oe;var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Me=Je===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Je===1?0:ut+(Je-2)*st;if(this.ctx.clip_path.length!==0){var At=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(we,this.posX+this.margin[3],-ft+Me+this.ctx.prevPageLastElemOffset),j.call(this,L,!0),this.path=At}if(be=JSON.parse(JSON.stringify(de)),this.path=w(be,this.posX+this.margin[3],-ft+Me+this.ctx.prevPageLastElemOffset),F===!1||Je===0){var Rt=(Je>Oe||Je<it)&&g.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,st,null).clip().discardPath()),j.call(this,L,F),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=se}this.path=de}else this.lineWidth=ye,j.call(this,L,F),this.lineWidth=se},j=function(L,F){if((L!=="stroke"||F||!m.call(this))&&(L==="stroke"||F||!h.call(this))){for(var G,ee,ie=[],se=this.path,ye=0;ye<se.length;ye++){var oe=se[ye];switch(oe.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:oe,deltas:[],abs:[]});break;case"lt":var we=ie.length;if(se[ye-1]&&!isNaN(se[ye-1].x)&&(G=[oe.x-se[ye-1].x,oe.y-se[ye-1].y],we>0)){for(;we>=0;we--)if(ie[we-1].close!==!0&&ie[we-1].begin!==!0){ie[we-1].deltas.push(G),ie[we-1].abs.push(oe);break}}break;case"bct":G=[oe.x1-se[ye-1].x,oe.y1-se[ye-1].y,oe.x2-se[ye-1].x,oe.y2-se[ye-1].y,oe.x-se[ye-1].x,oe.y-se[ye-1].y],ie[ie.length-1].deltas.push(G);break;case"qct":var be=se[ye-1].x+2/3*(oe.x1-se[ye-1].x),de=se[ye-1].y+2/3*(oe.y1-se[ye-1].y),$e=oe.x+2/3*(oe.x1-oe.x),He=oe.y+2/3*(oe.y1-oe.y),Y=oe.x,he=oe.y;G=[be-se[ye-1].x,de-se[ye-1].y,$e-se[ye-1].x,He-se[ye-1].y,Y-se[ye-1].x,he-se[ye-1].y],ie[ie.length-1].deltas.push(G);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(oe)}}ee=F?null:L==="stroke"?"stroke":"fill";for(var Ke=!1,qe=0;qe<ie.length;qe++)if(ie[qe].arc)for(var Oe=ie[qe].abs,it=0;it<Oe.length;it++){var Je=Oe[it];Je.type==="arc"?P.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,F,!Ke):R.call(this,Je.x,Je.y),Ke=!0}else if(ie[qe].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(ie[qe].begin!==!0){var ge=ie[qe].start.x,Me=ie[qe].start.y;D.call(this,ie[qe].deltas,ge,Me),Ke=!0}ee&&T.call(this,ee),F&&I.call(this)}},E=function(L){var F=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=F*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-G;case"top":return L+F-G;case"hanging":return L+F-2*G;case"middle":return L+F/2-G;default:return L}},C=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(F,G){this.colorStops.push([F,G])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(L,F,G,ee,ie,se,ye,oe,we){for(var be=V.call(this,G,ee,ie,se),de=0;de<be.length;de++){var $e=be[de];de===0&&(we?k.call(this,$e.x1+L,$e.y1+F):R.call(this,$e.x1+L,$e.y1+F)),B.call(this,L,F,$e.x2,$e.y2,$e.x3,$e.y3,$e.x4,$e.y4)}oe?I.call(this):T.call(this,ye)},T=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},I=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(L,F){this.pdf.internal.out(n(L)+" "+r(F)+" m")},O=function(L){var F;switch(L.align){case"right":case"end":F="right";break;case"center":F="center";break;default:F="left"}var G,ee,ie,se=this.pdf.getTextDimensions(L.text),ye=E.call(this,L.y),oe=C.call(this,ye)-se.h,we=this.ctx.transform.applyToPoint(new s(L.x,ye));if(this.autoPaging){var be=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var $e=this.ctx.transform.applyToRectangle(new o(L.x,ye,se.w,se.h)),He=de.applyToRectangle(new o(L.x,oe,se.w,se.h)),Y=y.call(this,He),he=[],Ke=0;Ke<Y.length;Ke+=1)he.indexOf(Y[Ke])===-1&&he.push(Y[Ke]);S(he);for(var qe=he[0],Oe=he[he.length-1],it=qe;it<Oe+1;it++){this.pdf.setPage(it);var Je=it===1?this.posY+this.margin[0]:this.margin[0],ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[2],ut=Me-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],ft=st-this.margin[3],At=it===1?0:ge+(it-2)*ut;if(this.ctx.clip_path.length!==0){var Rt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(G,this.posX+this.margin[3],-1*At+Je),j.call(this,"fill",!0),this.path=Rt}var Se=w([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-At+Je+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*L.scale),ie=this.lineWidth,this.lineWidth=ie*L.scale);var Fe=this.autoPaging!=="text";if(Fe||Se.y+Se.h<=Me){if(Fe||Se.y>=Je&&Se.x<=st){var Le=Fe?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||st-Se.x)[0],dt=w([JSON.parse(JSON.stringify($e))],this.posX+this.margin[3],-At+Je+this.ctx.prevPageLastElemOffset)[0],ve=Fe&&(it>qe||it<Oe)&&g.call(this);ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,ut,null).clip().discardPath()),this.pdf.text(Le,dt.x,dt.y,{angle:L.angle,align:F,renderingMode:L.renderingMode}),ve&&this.pdf.restoreGraphicsState()}}else Se.y<Me&&(this.ctx.prevPageLastElemOffset+=Me-Se.y);L.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=ie)}}else L.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*L.scale),ie=this.lineWidth,this.lineWidth=ie*L.scale),this.pdf.text(L.text,we.x+this.posX,we.y+this.posY,{angle:L.angle,align:F,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=ie)},R=function(L,F,G,ee){G=G||0,ee=ee||0,this.pdf.internal.out(n(L+G)+" "+r(F+ee)+" l")},D=function(L,F,G){return this.pdf.lines(L,F,G,null,null)},B=function(L,F,G,ee,ie,se,ye,oe){this.pdf.internal.out([e(i(G+L)),e(a(ee+F)),e(i(ie+L)),e(a(se+F)),e(i(ye+L)),e(a(oe+F)),"c"].join(" "))},V=function(L,F,G,ee){for(var ie=2*Math.PI,se=Math.PI/2;F>G;)F-=ie;var ye=Math.abs(G-F);ye<ie&&ee&&(ye=ie-ye);for(var oe=[],we=ee?-1:1,be=F;ye>1e-5;){var de=be+we*Math.min(ye,se);oe.push(Z.call(this,L,be,de)),ye-=Math.abs(de-be),be=de}return oe},Z=function(L,F,G){var ee=(G-F)/2,ie=L*Math.cos(ee),se=L*Math.sin(ee),ye=ie,oe=-se,we=ye*ye+oe*oe,be=we+ye*ie+oe*se,de=4/3*(Math.sqrt(2*we*be)-be)/(ye*se-oe*ie),$e=ye-de*oe,He=oe+de*ye,Y=$e,he=-He,Ke=ee+F,qe=Math.cos(Ke),Oe=Math.sin(Ke);return{x1:L*Math.cos(F),y1:L*Math.sin(F),x2:$e*qe-He*Oe,y2:$e*Oe+He*qe,x3:Y*qe-he*Oe,y3:Y*Oe+he*qe,x4:L*Math.cos(G),y4:L*Math.sin(G)}},H=function(L){return 180*L/Math.PI},Q=function(L,F,G,ee,ie,se){var ye=L+.5*(G-L),oe=F+.5*(ee-F),we=ie+.5*(G-ie),be=se+.5*(ee-se),de=Math.min(L,ie,ye,we),$e=Math.max(L,ie,ye,we),He=Math.min(F,se,oe,be),Y=Math.max(F,se,oe,be);return new o(de,He,$e-de,Y-He)},fe=function(L,F,G,ee,ie,se,ye,oe){var we,be,de,$e,He,Y,he,Ke,qe,Oe,it,Je,ge,Me,ut=G-L,st=ee-F,ft=ie-G,At=se-ee,Rt=ye-ie,Se=oe-se;for(be=0;be<41;be++)qe=(he=(de=L+(we=be/40)*ut)+we*((He=G+we*ft)-de))+we*(He+we*(ie+we*Rt-He)-he),Oe=(Ke=($e=F+we*st)+we*((Y=ee+we*At)-$e))+we*(Y+we*(se+we*Se-Y)-Ke),be==0?(it=qe,Je=Oe,ge=qe,Me=Oe):(it=Math.min(it,qe),Je=Math.min(Je,Oe),ge=Math.max(ge,qe),Me=Math.max(Me,Oe));return new o(Math.round(it),Math.round(Je),Math.round(ge-it),Math.round(Me-Je))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,F,G=(L=this.ctx.lineDash,F=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:F}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(kt.API),function(t){var e=function(s){var o,l,u,d,f,p,h,m,g,y;for(l=[],u=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>u;u+=4)(f=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(p=(f=((f=((f=((f=(f-(y=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,l.push(p+33,h+33,m+33,g+33,y+33)):l.push(122);return function(x,w){for(var S=w;S>0;S--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(s){var o,l,u,d,f,p=String,h="length",m=255,g="charCodeAt",y="slice",x="replace";for(s[y](-2),s=s[y](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(s+=o="uuuuu"[y](s[h]%5||5))[h];f>d;d+=5)l=52200625*(s[g](d)-33)+614125*(s[g](d+1)-33)+7225*(s[g](d+2)-33)+85*(s[g](d+3)-33)+(s[g](d+4)-33),u.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(w,S){for(var N=S;N>0;N--)w.pop()}(u,o[h]),p.fromCharCode.apply(p,u)},r=function(s){return s.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var l="",u=0;u<s.length;u+=2)l+=String.fromCharCode("0x"+(s[u]+s[u+1]));return l},a=function(s){for(var o=new Uint8Array(s.length),l=s.length;l--;)o[l]=s.charCodeAt(l);return(o=Sk(o)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(s,o){var l=0,u=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(kt.API),function(t){t.loadFile=function(e,n,r){return function(i,a,s){a=a!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,u,d){var f=new XMLHttpRequest,p=0,h=function(m){var g=m.length,y=[],x=String.fromCharCode;for(p=0;p<g;p+=1)y.push(x(255&m.charCodeAt(p)));return y.join("")};if(f.open("GET",l,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(i,a,s)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(kt.API),function(t){function e(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):Et(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):Et(()=>import("./purify.es-B9ZVCkUG.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=bn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var u=document.createElement(o);for(var d in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[d]=l.style[d];return u},a=function o(l,u){for(var d=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),f=l.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(o(f,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(d.width=l.width,d.height=l.height,d.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(d.value=l.value),d.addEventListener("load",function(){d.scrollTop=l.scrollTop,d.scrollLeft=l.scrollLeft},!0)),d},s=function o(l){var u=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),u);return(d=d.setProgress(1,o,1,[o])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,l){return o.__proto__=l||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:o,dompurify:u})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(l){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],g=m.src.find(function(y){return y.format==="truetype"});g&&u.addFont(g.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},s.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=o[u]};switch(u){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[u]=o[u]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(o,l){return this.then(function(){var u=o in s.template.prop?this.prop[o]:this.opt[o];return l?l(u):u})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function l(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(o=o||kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,l,u,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,l,u,d){return this.setProgress(o?this.progress.val+o:null,l||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,l){var u=this;return this.thenCore(o,l,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,f).then(function(p){return u.updateProgress(1),p})})},s.prototype.thenCore=function(o,l,u){u=u||Promise.prototype.then;var d=this;o&&(o=o.bind(d)),l&&(l=l.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:s.convert(Object.assign({},d),Promise.prototype),p=u.call(f,o,l);return s.convert(p,d.__proto__)},s.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},s.prototype.thenList=function(o){var l=this;return o.forEach(function(u){l=l.thenCore(u)}),l},s.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return s.convert(l,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,kt.getPageSize=function(o,l,u){if(bn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,u=d.format||u}l=l||"mm",u=u||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,g=0,y=0;if(h.hasOwnProperty(p))g=h[p][1]/f,y=h[p][0]/f;else try{g=u[1],y=u[0]}catch{throw new Error("Invalid format: "+u)}if(o==="p"||o==="portrait")o="p",y>g&&(m=y,y=g,g=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>y&&(m=y,y=g,g=m)}return{width:y,height:g,unit:l,k:f,orientation:o}},t.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(lS):null;var u=new s(l);return l.worker?u:u.from(o).doCallback()}}(kt.API),kt.API.addJS=function(t){return mL=t,this.internal.events.subscribe("postPutResources",function(){nx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(nx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),pL=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mL+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){nx!==void 0&&pL!==void 0&&this.internal.out("/Names <</JavaScript "+nx+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var s=i[a],o=r.exec(s);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var f=n.internal.newObject();d.push(f);var p=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<d.length;a++)n.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+h+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var s={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(s),s},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var s=r.children[a];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=n.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(kt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,a,s,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=s||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(f){for(var p,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,g={width:0,height:0,numcomponents:1},y=4;y<m;y+=2){if(y+=h,e.indexOf(f.charCodeAt(y+1))!==-1){p=256*f.charCodeAt(y+5)+f.charCodeAt(y+6),g={width:256*f.charCodeAt(y+7)+f.charCodeAt(y+8),height:p,numcomponents:f.charCodeAt(y+9)};break}h=256*f.charCodeAt(y+2)+f.charCodeAt(y+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(kt.API),kt.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,a=p4e(t,{checkCrc:!0}),s=a.width,o=a.height,l=a.channels,u=a.palette,d=a.depth;i=u&&l===1?function(P){for(var T=P.width,I=P.height,k=P.data,O=P.palette,R=P.depth,D=!1,B=[],V=[],Z=void 0,H=!1,Q=0,fe=0;fe<O.length;fe++){var le=yM(O[fe],4),L=le[0],F=le[1],G=le[2],ee=le[3];B.push(L,F,G),ee!=null&&(ee===0?(Q++,V.length<1&&V.push(fe)):ee<255&&(H=!0))}if(H||Q>1){D=!0,V=void 0;var ie=T*I;Z=new Uint8Array(ie);for(var se=new DataView(k.buffer),ye=0;ye<ie;ye++){var oe=uS(se,ye,R),we=yM(O[oe],4)[3];Z[ye]=we}}else Q===0&&(V=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:k,alphaBytes:Z,needSMask:D,palette:B,mask:V}}(a):l===2||l===4?function(P){for(var T=P.data,I=P.width,k=P.height,O=P.channels,R=P.depth,D=O===2?"DeviceGray":"DeviceRGB",B=O-1,V=I*k,Z=B,H=V*Z,Q=1*V,fe=Math.ceil(H*R/8),le=Math.ceil(Q*R/8),L=new Uint8Array(fe),F=new Uint8Array(le),G=new DataView(T.buffer),ee=new DataView(L.buffer),ie=new DataView(F.buffer),se=!1,ye=0;ye<V;ye++){for(var oe=ye*O,we=0;we<Z;we++)jL(ee,uS(G,oe+we,R),ye*Z+we,R);var be=uS(G,oe+Z,R);be<(1<<R)-1&&(se=!0),jL(ie,be,1*ye,R)}return{colorSpace:D,colorsPerPixel:B,sMaskBitsPerComponent:se?R:void 0,colorBytes:L,alphaBytes:F,needSMask:se}}(a):function(P){var T=P.data,I=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:I,colorsPerPixel:I==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?function(k){for(var O=k.length,R=new Uint8Array(2*O),D=new DataView(R.buffer,R.byteOffset,R.byteLength),B=0;B<O;B++)D.setUint16(2*B,k[B],!1);return R}(T):T,needSMask:!1}}(a);var f,p,h,m=i,g=m.colorSpace,y=m.colorsPerPixel,x=m.sMaskBitsPerComponent,w=m.colorBytes,S=m.alphaBytes,N=m.needSMask,j=m.palette,E=m.mask,C=null;return r!==kt.API.image_compression.NONE&&typeof Sk=="function"?(C=function(P){var T;switch(P){case kt.API.image_compression.FAST:T=11;break;case kt.API.image_compression.MEDIUM:T=13;break;case kt.API.image_compression.SLOW:T=14;break;default:T=12}return T}(r),f=this.decode.FLATE_DECODE,p="/Predictor ".concat(C," /Colors ").concat(y," /BitsPerComponent ").concat(d," /Columns ").concat(s),t=yL(w,Math.ceil(s*y*d/8),y,d,r),N&&(h=yL(S,Math.ceil(s*x/8),1,x,r))):(f=void 0,p=void 0,t=w,N&&(h=S)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:t,index:e,filter:f,decodeParameters:p,transparency:E,palette:j,sMask:h,predictor:C,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:g}}},function(t){t.processGIF89A=function(e,n,r,i){var a=new I4e(e),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:o},d=new dS(100).encode(u,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(kt.API),Ts.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ts.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){_n.log("bit decode error:"+n)}},Ts.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}n!==0&&(this.pos+=4-n)}},Ts.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Ts.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Ts.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=u}this.pos+=t}},Ts.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,u=(s>>11)/e*255|0,d=i*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},Ts.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Ts.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}},Ts.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var a=new Ts(e,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new dS(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(kt.API),AL.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var a=new AL(e),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},u=new dS(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(kt.API),kt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,u=0;u<i;u+=4){var d=r[u],f=r[u+1],p=r[u+2],h=r[u+3];a[o++]=d,a[o++]=f,a[o++]=p,s[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},kt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uf=kt.API,rx=uf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,p=0,h=t.length,m=0,g=o[0]||l,y=[];for(n=0;n<h;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(p=f&&bn(u[r])==="object"&&!isNaN(parseInt(u[r][m],10))?u[r][m]/d:0,y.push((o[r]||g)/l+p)),m=r;return y},gL=uf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return uf.processArabic&&(t=uf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:rx.apply(this,arguments).reduce(function(a,s){return a+s},0)},vL=function(t,e,n,r){for(var i=[],a=0,s=t.length,o=0;a!==s&&o+e[a]<n;)o+=e[a],a++;i.push(t.slice(0,a));var l=a;for(o=0;a!==s;)o+e[a]>r&&(i.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&i.push(t.slice(l,a)),i},xL=function(t,e,n){n||(n={});var r,i,a,s,o,l,u,d=[],f=[d],p=n.textIndent||0,h=0,m=0,g=t.split(" "),y=rx.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),w=[];g.map(function(N){(N=N.split(/\s*\n/)).length>1?w=w.concat(N.map(function(j,E){return(E&&j.length?`
`:"")+j})):w.push(N[0])}),g=w,l=gL.apply(this,[x,n])}for(a=0,s=g.length;a<s;a++){var S=0;if(r=g[a],l&&r[0]==`
`&&(r=r.substr(1),S=1),p+h+(m=(i=rx.apply(this,[r,n])).reduce(function(N,j){return N+j},0))>e||S){if(m>e){for(o=vL.apply(this,[r,i,e-(p+h),e]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);m=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(N,j){return N+j},0)}else d=[r];f.push(d),p=m+l,h=y}else d.push(r),p+=h+m,h=y}return u=l?function(N,j){return(j?x:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(u)},uf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return f.metadata[p]?{widths:f.metadata[p].widths||{0:1},kerning:f.metadata[p].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var o,l,u=[];for(o=0,l=r.length;o<l;o++)u=u.concat(xL.apply(this,[r[o],s,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=e[a],i[e[a]]=n[a];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var h,m,g,y,x=["{"];for(var w in p){if(h=p[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=s(w).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),y="-"):(g=s(h).slice(2),y=""),g=y+g.slice(0,-1)+i[g.slice(-1)];else{if(bn(h)!=="object")throw new Error("Don't know what to do with value type "+bn(h)+".");g=o(h)}x.push(m+g)}return x.push("}"),x.join("")},l=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,y,x={},w=1,S=x,N=[],j="",E="",C=p.length-1,P=1;P<C;P+=1)(y=p[P])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(N.push([S,g]),S={},g=void 0):y=="}"?((m=N.pop())[0][m[1]]=S,g=void 0,S=m[0]):y=="-"?w=-1:g===void 0?r.hasOwnProperty(y)?(j+=r[y],g=parseInt(j,16)*w,w=1,j=""):j+=y:r.hasOwnProperty(y)?(E+=r[y],S[g]=parseInt(E,16)*w,w=1,g=void 0,E=""):E+=y;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var h=p.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=d.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(kt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Cx(o)),s.metadata=t.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(kt),kt.API.addSvgAsImage=function(t,e,n,r,i,a,s,o){if(isNaN(e)||isNaN(n))throw _n.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw _n.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(Dt.canvg?Promise.resolve(Dt.canvg):Et(()=>import("./index.es-Ctw8KEWZ.js"),[],import.meta.url)).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){f.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,s,o)})},kt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},kt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],u=0,d=0,f=0;function p(m,g){var y,x=!1;for(y=0;y<m.length;y+=1)m[y]===g&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=o.length;for(f=0;f<h;f+=1)n[o[f]].value=n[o[f]].defaultValue,n[o[f]].explicitSet=!1}if(bn(t)==="object"){for(i in t)if(a=t[i],p(o,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&p(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(u=0;u<a.length;u+=1)if(r=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(r=!1);r===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?g.push("/"+m+" /"+n[m].value):g.push("/"+m+" "+n[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+s.length+o.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+a+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(kt.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,s){for(var o,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,p=a.length;f<p;++f){if(o=s.metadata.characterToGlyph(a.charCodeAt(f)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=a.charCodeAt(f),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(a){var s,o,l,u,d,f,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],f=0,p=(o=Object.keys(a).sort(function(h,m){return h-m})).length;f<p;f++)s=o[f],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[s]!==void 0&&a[s]!==null&&typeof a[s].toString=="function"&&(u=("0000"+a[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,p=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var g=u();d({data:h,addLength1:!0,objectId:g}),l("endobj");var y=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var x=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+gf(o.fontName)),l("/FontFile2 "+g+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var w=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+gf(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(f)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+y+" 0 R"),l("/BaseFont /"+gf(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(s){var o=s.font,l=s.out,u=s.newObject,d=s.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,p="",h=0;h<f.length;h++)p+=String.fromCharCode(f[h]);var m=u();d({data:p,addLength1:!0,objectId:m}),l("endobj");var g=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:g}),l("endobj");var y=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+gf(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+gf(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var i=function(a){var s,o=a.text||"",l=a.x,u=a.y,d=a.options||{},f=a.mutex||{},p=f.pdfEscape,h=f.activeFontKey,m=f.fonts,g=h,y="",x=0,w="",S=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:f};for(w=o,g=h,Array.isArray(o)&&(w=o[0]),x=0;x<w.length;x+=1)m[g].metadata.hasOwnProperty("cmap")&&(s=m[g].metadata.cmap.unicode.codeMap[w[x].charCodeAt(0)]),s||w[x].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?y+=w[x]:y+="";var N="";return parseInt(g.slice(1))<14||S==="WinAnsiEncoding"?N=p(y,g).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(N=n(y,m[g])),f.isHex=!0,{text:N,x:l,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(a){var s=a.text||"",o=[],l={text:s,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?o.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):o.push(i(Object.assign({},l,{text:s[u]})).text);a.text=o}else a.text=i(Object.assign({},l,{text:s})).text}])}(kt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(kt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,a,s,o,l,u,d,f=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,S=0;this.__bidiEngine__={};var N=function(k){var O=k.charCodeAt(),R=O>>8,D=g[R];return D!==void 0?f[256*D+(255&O)]:R===252||R===253?"AL":x.test(R)?"L":R===8?"R":"N"},j=function(k){for(var O,R=0;R<k.length;R++){if((O=N(k.charAt(R)))==="L")return!1;if(O==="R")return!0}return!1},E=function(k,O,R,D){var B,V,Z,H,Q=O[D];switch(Q){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"N":case"AN":break;case"EN":w&&(Q="AN");break;case"AL":w=!0,Q="R";break;case"WS":case"BN":Q="N";break;case"CS":D<1||D+1>=O.length||(B=R[D-1])!=="EN"&&B!=="AN"||(V=O[D+1])!=="EN"&&V!=="AN"?Q="N":w&&(V="AN"),Q=V===B?V:"N";break;case"ES":Q=(B=D>0?R[D-1]:"B")==="EN"&&D+1<O.length&&O[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&R[D-1]==="EN"){Q="EN";break}if(w){Q="N";break}for(Z=D+1,H=O.length;Z<H&&O[Z]==="ET";)Z++;Q=Z<H&&O[Z]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(H=O.length,Z=D+1;Z<H&&O[Z]==="NSM";)Z++;if(Z<H){var fe=k[D],le=fe>=1425&&fe<=2303||fe===64286;if(B=O[Z],le&&(B==="R"||B==="AL")){Q="R";break}}}Q=D<1||(B=O[D-1])==="B"?"N":R[D-1];break;case"B":w=!1,i=!0,Q=S;break;case"S":a=!0,Q="N"}return Q},C=function(k,O,R){var D=k.split("");return R&&P(D,R,{hiLevel:S}),D.reverse(),O&&O.reverse(),D.join("")},P=function(k,O,R){var D,B,V,Z,H,Q=-1,fe=k.length,le=0,L=[],F=S?h:p,G=[];for(w=!1,i=!1,a=!1,B=0;B<fe;B++)G[B]=N(k[B]);for(V=0;V<fe;V++){if(H=le,L[V]=E(k,G,L,V),D=240&(le=F[H][m[L[V]]]),le&=15,O[V]=Z=F[le][5],D>0)if(D===16){for(B=Q;B<V;B++)O[B]=1;Q=-1}else Q=-1;if(F[le][6])Q===-1&&(Q=V);else if(Q>-1){for(B=Q;B<V;B++)O[B]=Z;Q=-1}G[V]==="B"&&(O[V]=0),R.hiLevel|=Z}a&&function(ee,ie,se){for(var ye=0;ye<se;ye++)if(ee[ye]==="S"){ie[ye]=S;for(var oe=ye-1;oe>=0&&ee[oe]==="WS";oe--)ie[oe]=S}}(G,O,fe)},T=function(k,O,R,D,B){if(!(B.hiLevel<k)){if(k===1&&S===1&&!i)return O.reverse(),void(R&&R.reverse());for(var V,Z,H,Q,fe=O.length,le=0;le<fe;){if(D[le]>=k){for(H=le+1;H<fe&&D[H]>=k;)H++;for(Q=le,Z=H-1;Q<Z;Q++,Z--)V=O[Q],O[Q]=O[Z],O[Z]=V,R&&(V=R[Q],R[Q]=R[Z],R[Z]=V);le=H}le++}}},I=function(k,O,R){var D=k.split(""),B={hiLevel:S};return R||(R=[]),P(D,R,B),function(V,Z,H){if(H.hiLevel!==0&&d)for(var Q,fe=0;fe<V.length;fe++)Z[fe]===1&&(Q=y.indexOf(V[fe]))>=0&&(V[fe]=y[Q+1])}(D,R,B),T(2,D,O,R,B),T(1,D,O,R,B),D.join("")};return this.__bidiEngine__.doBidiReorder=function(k,O,R){if(function(B,V){if(V)for(var Z=0;Z<B.length;Z++)V[Z]=Z;o===void 0&&(o=j(B)),u===void 0&&(u=j(B))}(k,O),s||!l||u)if(s&&l&&o^u)S=o?1:0,k=C(k,O,R);else if(!s&&l&&u)S=o?1:0,k=I(k,O,R),k=C(k,O);else if(!s||o||l||u){if(s&&!l&&o^u)k=C(k,O),o?(S=0,k=I(k,O,R)):(S=1,k=I(k,O,R),k=C(k,O));else if(s&&o&&!l&&u)S=1,k=I(k,O,R),k=C(k,O);else if(!s&&!l&&o^u){var D=d;o?(S=1,k=I(k,O,R),S=0,d=!1,k=I(k,O,R),d=D):(S=0,k=I(k,O,R),k=C(k,O),S=1,d=!1,k=I(k,O,R),d=D,k=C(k,O))}}else S=0,k=I(k,O,R);else S=o?1:0,k=I(k,O,R);return k},this.__bidiEngine__.setOptions=function(k){k&&(s=k.isInputVisual,l=k.isOutputVisual,o=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var s=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(s=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?s.push([n.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):s.push([n.doBidiReorder(i[o])]);r.text=s}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(kt),kt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new qc(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new X4e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new D4e(this.contents),this.head=new $4e(this),this.name=new W4e(this),this.cmap=new DB(this),this.toUnicode={},this.hhea=new z4e(this),this.maxp=new q4e(this),this.hmtx=new U4e(this),this.post=new B4e(this),this.os2=new F4e(this),this.loca=new Y4e(this),this.glyf=new V4e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,u;for(u=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,a,s,o;for(s=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)i=e.charCodeAt(a),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return s*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ys,qc=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,a,s,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*s+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,a;for(a=[],r=0,i=e.length;r<i;r++)n=e[r],a.push(this.writeByte(n));return a},t}(),D4e=function(){var t;function e(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,a,s,o,l,u,d,f,p,h,m,g;for(g in h=Object.keys(n).length,l=Math.log(2),f=16*Math.floor(Math.log(h)/l),s=Math.floor(f/l),d=16*h-f,(i=new qc).writeInt(this.scalarType),i.writeShort(h),i.writeShort(f),i.writeShort(s),i.writeShort(d),a=16*h,u=i.pos+a,o=null,m=[],n)for(p=n[g],i.writeString(g),i.writeInt(t(p)),i.writeInt(u),i.writeInt(p.length),m=m.concat(p),g==="head"&&(o=u),u+=p.length;u%4;)m.push(0),u++;return i.write(m),r=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(r),i.data},t=function(n){var r,i,a,s;for(n=RB.call(n);n.length%4;)n.push(0);for(a=new qc(n),i=0,r=0,s=n.length;r<s;r=r+=4)i+=a.readUInt32();return 4294967295&i},e}(),R4e={}.hasOwnProperty,Ao=function(t,e){for(var n in e)R4e.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ys=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var $4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new qc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),CL=function(){function t(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,y,x,w,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(h=e.readUInt16(),p=h/2,e.pos+=6,a=function(){var N,j;for(j=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)j.push(e.readUInt16());return j}(),e.pos+=2,g=function(){var N,j;for(j=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)j.push(e.readUInt16());return j}(),u=function(){var N,j;for(j=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)j.push(e.readUInt16());return j}(),d=function(){var N,j;for(j=[],l=N=0;0<=p?N<p:N>p;l=0<=p?++N:--N)j.push(e.readUInt16());return j}(),i=(this.length-e.pos+this.offset)/2,o=function(){var N,j;for(j=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)j.push(e.readUInt16());return j}(),l=x=0,S=a.length;x<S;l=++x)for(y=a[l],r=w=m=g[l];m<=y?w<=y:w>=y;r=m<=y?++w:--w)d[l]===0?s=r+u[l]:(s=o[d[l]/2+(r-m)-(p-l)]||0)!==0&&(s+=u[l]),this.codeMap[r]=65535&s}e.pos=f}return t.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,y,x,w,S,N,j,E,C,P,T,I,k,O,R,D,B,V,Z,H,Q,fe,le,L,F,G,ee,ie,se,ye,oe,we,be,de;switch(D=new qc,s=Object.keys(e).sort(function($e,He){return $e-He}),n){case"macroman":for(g=0,y=function(){var $e=[];for(m=0;m<256;++m)$e.push(0);return $e}(),w={0:0},a={},B=0,Q=s.length;B<Q;B++)w[oe=e[i=s[B]]]==null&&(w[oe]=++g),a[i]={old:e[i],new:w[e[i]]},y[i]=w[e[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(y),{charMap:a,subtable:D.data,maxGlyphID:g+1};case"unicode":for(O=[],f=[],S=0,w={},r={},x=u=null,V=0,fe=s.length;V<fe;V++)w[j=e[i=s[V]]]==null&&(w[j]=++S),r[i]={old:j,new:w[j]},o=w[j]-i,x!=null&&o===u||(x&&f.push(x),O.push(i),u=o),x=i;for(x&&f.push(x),f.push(65535),O.push(65535),I=2*(T=O.length),P=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(P/2)/Math.LN2,C=2*T-P,l=[],E=[],h=[],m=Z=0,le=O.length;Z<le;m=++Z){if(k=O[m],d=f[m],k===65535){l.push(0),E.push(0);break}if(k-(R=r[k].new)>=32768)for(l.push(0),E.push(2*(h.length+T-m)),i=H=k;k<=d?H<=d:H>=d;i=k<=d?++H:--H)h.push(r[i].new);else l.push(R-k),E.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*T+2*h.length),D.writeUInt16(0),D.writeUInt16(I),D.writeUInt16(P),D.writeUInt16(p),D.writeUInt16(C),se=0,L=f.length;se<L;se++)i=f[se],D.writeUInt16(i);for(D.writeUInt16(0),ye=0,F=O.length;ye<F;ye++)i=O[ye],D.writeUInt16(i);for(we=0,G=l.length;we<G;we++)o=l[we],D.writeUInt16(o);for(be=0,ee=E.length;be<ee;be++)N=E[be],D.writeUInt16(N);for(de=0,ie=h.length;de<ie;de++)g=h[de],D.writeUInt16(g);return{charMap:r,subtable:D.data,maxGlyphID:S+1}}},t}(),DB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new CL(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=CL.encode(e,n),(i=new qc).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),z4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),F4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),B4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,o,l;for(l=[],a=s=0,o=this.file.maxp.numGlyphs;0<=o?s<o:s>o;a=0<=o?++s:--s)l.push(e.readUInt32());return l}).call(this)}},t}(),H4e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},W4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,a,s,o,l,u,d,f,p;for(e.pos=this.offset,e.readShort(),n=e.readShort(),o=e.readShort(),r=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(l={},a=d=0,f=r.length;d<f;a=++d)i=r[a],e.pos=i.offset,u=e.readString(i.length),s=new H4e(u,i),l[p=i.nameID]==null&&(l[p]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),q4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),U4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,a,s,o,l;for(e.pos=this.offset,this.metrics=[],n=0,o=this.file.hhea.numberOfMetrics;0<=o?n<o:n>o;n=0<=o?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.metrics).length;u<d;u++)a=f[u],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],l=[],n=s=0;0<=i?s<i:s>i;n=0<=i?++s:--s)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),RB=[].slice,V4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,a,s,o,l,u,d,f;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,r=a.indexOf(e),(i=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,s=(o=new qc(n.read(i))).readShort(),u=o.readShort(),f=o.readShort(),l=o.readShort(),d=o.readShort(),this.cache[e]=s===-1?new K4e(o,u,f,l,d):new G4e(o,s,u,f,l,d),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,a,s,o,l;for(s=[],a=[],o=0,l=n.length;o<l;o++)i=e[n[o]],a.push(s.length),i&&(s=s.concat(i.encode(r)));return a.push(s.length),{table:s,offsets:a}},t}(),G4e=function(){function t(e,n,r,i,a,s){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),K4e=function(){function t(e,n,r,i,a){var s,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new qc(RB.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Y4e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ao(t,Ys),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],r=0,i=this.length;r<i;r+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,a=0,s=0;s<r.length;++s)if(r[s]=i,a<n.length&&n[a]==s){++a,r[s]=i;var o=this.offsets[s],l=this.offsets[s+1]-o;l>0&&(i+=l)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},t}(),X4e=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,a,s,o,l;for(i={},s=0,o=e.length;s<o;s++)i[a=e[s]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in l=this.glyphsFor(n))r=l[a],i[a]=r;return i},t.prototype.encode=function(e,n){var r,i,a,s,o,l,u,d,f,p,h,m,g,y,x;for(i in r=DB.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},x=r.charMap)h[(l=x[i]).old]=l.new;for(m in p=r.maxGlyphID,s)m in h||(h[m]=p++);return d=function(w){var S,N;for(S in N={},w)N[w[S]]=S;return N}(h),f=Object.keys(d).sort(function(w,S){return w-S}),g=function(){var w,S,N;for(N=[],w=0,S=f.length;w<S;w++)o=f[w],N.push(d[o]);return N}(),a=this.font.glyf.encode(s,g,h),u=this.font.loca.encode(a.offsets,g),y={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t}();kt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,a,s;if(Array.isArray(n))return"["+function(){var o,l,u;for(u=[],o=0,l=n.length;o<l;o++)r=n[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)s=n[i],a.push("/"+i+" "+e.convert(s));return a.push(">>"),a.join(`
`)}return""+n},e}();function $B(t,e,n,r,i){r=r||{};var a=1.15,s=i.internal.scaleFactor,o=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,f="",p=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(f=typeof t=="string"?t.split(d):t,p=f.length||1),n+=o*(2-a),r.valign==="middle"?n-=p/2*u:r.valign==="bottom"&&(n-=p*u),r.halign==="center"||r.halign==="right"){var h=o;if(r.halign==="center"&&(h*=.5),f&&p>=1){for(var m=0;m<f.length;m++)i.text(f[m],e-i.getStringUnitWidth(f[m])*h,n),n+=u;return i}e-=i.getStringUnitWidth(t)*h}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var EL={},th=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:EL=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var d=t.unifyColor(e.fillColor);d&&(r=this.jsPDFDocument).setFillColor.apply(r,d),d=t.unifyColor(e.textColor),d&&(i=this.jsPDFDocument).setTextColor.apply(i,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,a){return this.jsPDFDocument.rect(e,n,r,i,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return EL||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Ok=function(t,e){return Ok=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ok(t,e)};function zB(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ok(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var FB=function(t){zB(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function J4e(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Z4e(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function rb(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(a){return n.getTextWidth(a)}).reduce(function(a,s){return Math.max(a,s)},0);return i}function BB(t,e,n,r){var i=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:a});var s=HB(i,!1);s&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,s)}function HB(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function z2(t,e){var n,r,i,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function WB(t,e){var n=z2(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function Q4e(t,e,n,r,i){var a={},s=1.3333333333333333,o=fS(e,function(S){return i.getComputedStyle(S).backgroundColor});o!=null&&(a.fillColor=o);var l=fS(e,function(S){return i.getComputedStyle(S).color});l!=null&&(a.textColor=l);var u=tCe(r,n);u&&(a.cellPadding=u);var d="borderTopColor",f=s*n,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var h=(parseFloat(p)||0)/f;h&&(a.lineWidth=h)}else a.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/f,right:(parseFloat(r.borderRightWidth)||0)/f,bottom:(parseFloat(r.borderBottomWidth)||0)/f,left:(parseFloat(r.borderLeftWidth)||0)/f},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var m=fS(e,function(S){return i.getComputedStyle(S)[d]});m!=null&&(a.lineColor=m);var g=["left","right","center","justify"];g.indexOf(r.textAlign)!==-1&&(a.halign=r.textAlign),g=["middle","bottom","top"],g.indexOf(r.verticalAlign)!==-1&&(a.valign=r.verticalAlign);var y=parseInt(r.fontSize||"");isNaN(y)||(a.fontSize=y/s);var x=eCe(r);x&&(a.fontStyle=x);var w=(r.fontFamily||"").toLowerCase();return t.indexOf(w)!==-1&&(a.font=w),a}function eCe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function fS(t,e){var n=qB(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],a=parseInt(r[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function qB(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:qB(t.parentElement,e):n}function tCe(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(o){return parseInt(o||"0")/r}),s=z2(a,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function UB(t,e,n,r,i){var a,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=n.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],p=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:p};for(var h=0;h<o.rows.length;h++){var m=o.rows[h],g=(s=(a=m==null?void 0:m.parentElement)===null||a===void 0?void 0:a.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=nCe(l,u,n,m,r,i);y&&(g==="thead"?d.push(y):g==="tfoot"?p.push(y):f.push(y))}return{head:d,body:f,foot:p}}function nCe(t,e,n,r,i,a){for(var s=new FB(r),o=0;o<r.cells.length;o++){var l=r.cells[o],u=n.getComputedStyle(l);if(i||u.display!=="none"){var d=void 0;a&&(d=Q4e(t,l,e,u,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:rCe(l)})}}var f=n.getComputedStyle(r);if(s.length>0&&(i||f.display!=="none"))return s}function rCe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function iCe(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var a=i[r];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function cl(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function VB(t,e){var n=new th(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();iCe(i,r,e);var a=cl({},i,r,e),s;typeof window<"u"&&(s=window);var o=aCe(i,r,e),l=sCe(i,r,e),u=oCe(n,a),d=cCe(n,a,s);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function aCe(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],f=n[l];r.columnStyles=cl({},u,d,f)}else{var p=[t,e,n],h=p.map(function(m){return m[l]||{}});r[l]=cl({},h[0],h[1],h[2])}},a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];i(o)}return r}function sCe(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,s=r;a<s.length;a++){var o=s[a];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function oCe(t,e){var n,r,i,a,s,o,l,u,d,f,p,h,m=z2(e.margin,40/t.scaleFactor()),g=(n=lCe(t,e.startY))!==null&&n!==void 0?n:m.top,y;e.showFoot===!0?y="everyPage":e.showFoot===!1?y="never":y=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var x;e.showHead===!0?x="everyPage":e.showHead===!1?x="never":x=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var w=(a=e.useCss)!==null&&a!==void 0?a:!1,S=e.theme||(w?"plain":"striped"),N=!!e.horizontalPageBreak,j=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:S,startY:g,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:x,showFoot:y,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:N,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function lCe(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var s=n.startPageNumber+n.pageNumber-1;a=s===i}return typeof e=="number"?e:(e==null||e===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function cCe(t,e,n){var r=e.head||[],i=e.body||[],a=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(n){var o=UB(t,e.html,n,s,e.useCss)||{};r=o.head||r,i=o.body||r,a=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||uCe(r,i,a);return{columns:l,head:r,body:i,foot:a}}function uCe(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(a){return a!=="_element"}).forEach(function(a){var s=1,o;Array.isArray(r)?o=r[parseInt(a)]:o=r[a],typeof o=="object"&&!Array.isArray(o)&&(s=(o==null?void 0:o.colSpan)||1);for(var l=0;l<s;l++){var u=void 0;Array.isArray(r)?u=i.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};i.push(d)}}),i}var Pk=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),dCe=function(t){zB(e,t);function e(n,r,i,a,s,o){var l=t.call(this,n,r,o)||this;return l.cell=i,l.row=a,l.column=s,l.section=a.section,l}return e}(Pk),fCe=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,a,s){for(var o=0,l=n;o<l.length;o++){var u=l[o],d=new dCe(e,this,r,i,a,s),f=u(d)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var a=i[r];a(new Pk(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var a=i[r];a(new Pk(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),GB=function(){function t(e,n,r,i,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof FB&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var a;return Math.max(r,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,a){var s=r.cells[a.index];if(!s)return 0;var o=n.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),u=l+o;return u>i?u:i},0)},t}(),KB=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=s.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,a=r*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=z2(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),hCe=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var a=i[r],s=a.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(n=Math.max(n,s.styles.cellWidth))}return n},t}();function pCe(t,e){mCe(t,e);var n=[],r=0;e.columns.forEach(function(a){var s=a.getMaxCustomCellWidth(e);s?a.width=s:(a.width=a.wrappedWidth,n.push(a)),r+=a.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=Tk(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=Tk(n,i,function(a){return a.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),vCe(e),xCe(e,t),gCe(e)}function mCe(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=WB(t,e);e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var f=u.padding("horizontal");u.contentWidth=rb(u.text,u.styles,t)+f;var p=rb(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/n;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var s=0,o=e.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(l.minWidth=f,l.wrappedWidth=f)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function Tk(t,e,n){for(var r=e,i=t.reduce(function(h,m){return h+m.wrappedWidth},0),a=0;a<t.length;a++){var s=t[a],o=s.wrappedWidth/i,l=r*o,u=s.width+l,d=n(s),f=u<d?d:u;e-=f-s.width,s.width=f}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(h){return e<0?h.width>n(h):!0});p.length&&(e=Tk(p,e,n))}return e}function gCe(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var a=r[i],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=e[l.index];if(n>1)n--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,n=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var f=r.length-i,p=d.rowSpan>f?f:d.rowSpan;e[l.index]={cell:d,left:p,row:a}}}}}function vCe(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,a=0,s=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(s-=1,s>1&&t.columns[o+1])a+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+a}else{var u=r.cells[l.index];if(!u)continue;if(s=u.colSpan,a=0,u.colSpan>1){i=u,a+=l.width;continue}u.width=l.width+a}}}function xCe(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var a=i[r],s=0,o=t.columns;s<o.length;s++){var l=o[s],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=_L(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=_L(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<p*u.rowSpan?n={height:p,count:u.rowSpan}:n&&n.count>0&&n.height>p&&(p=n.height),p>a.height&&(a.height=p)}}n.count--}}function _L(t,e,n,r,i){return t.map(function(a){return yCe(a,e,n,r,i)})}function yCe(t,e,n,r,i){var a=1e4*r.scaleFactor();if(e=Math.ceil(e*a)/a,e>=rb(t,n,r))return t;for(;e<rb(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function YB(t,e){var n=new th(t),r=bCe(e,n.scaleFactor()),i=new fCe(e,r);return pCe(n,i),n.applyStyles(n.userStyles),i}function bCe(t,e){var n=t.content,r=SCe(n.columns);if(n.head.length===0){var i=OL(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=OL(r,"foot");i&&n.foot.push(i)}var a=t.settings.theme,s=t.styles;return{columns:r,head:hS("head",n.head,r,s,a,e),body:hS("body",n.body,r,s,a,e),foot:hS("foot",n.foot,r,s,a,e)}}function hS(t,e,n,r,i,a){var s={},o=e.map(function(l,u){for(var d=0,f={},p=0,h=0,m=0,g=n;m<g.length;m++){var y=g[m];if(s[y.index]==null||s[y.index].left===0)if(h===0){var x=void 0;Array.isArray(l)?x=l[y.index-p-d]:x=l[y.dataKey];var w={};typeof x=="object"&&!Array.isArray(x)&&(w=(x==null?void 0:x.styles)||{});var S=NCe(t,y,u,i,r,a,w),N=new KB(x,S,t);f[y.dataKey]=N,f[y.index]=N,h=N.colSpan-1,s[y.index]={left:N.rowSpan-1,times:h}}else h--,p++;else s[y.index].left--,h=s[y.index].times,d++}return new GB(l,u,t,f)});return o}function OL(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=wCe(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function wCe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function SCe(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new hCe(i,e,n)})}function NCe(t,e,n,r,i,a,s){var o=Z4e(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=cl({},o.table,o[t],i.styles,l),d=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},f=t==="body"?d:{},p=t==="body"&&n%2===0?cl({},o.alternateRow,i.alternateRowStyles):{},h=J4e(a),m=cl({},h,u,p,f);return cl(m,s)}function jCe(t,e,n){var r;n===void 0&&(n={});var i=WB(t,e),a=new Map,s=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(p){var h=e.columns.find(function(m){return m.dataKey===p||m.index===p});h&&!a.has(h.index)&&(a.set(h.index,!0),s.push(h.index),o.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var u=!0,d=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;d<e.columns.length;){if(a.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||i>=f)u=!1,s.push(d),o.push(e.columns[d]),i-=f;else break;d++}return{colIndexes:s,columns:o,lastIndex:d-1}}function kCe(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=jCe(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function XB(t,e){var n=e.settings,r=n.startY,i=n.margin,a={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=r+i.bottom+s;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(p,h){return p+h.height},0);o+=u}var d=new th(t);(n.pageBreak==="always"||n.startY!=null&&o>d.pageSize().height)&&(ZB(d),a.y=i.top),e.callWillDrawPageHooks(d,a);var f=cl({},a);e.startPageNumber=d.pageNumber(),n.horizontalPageBreak?ACe(d,e,f,a):(d.applyStyles(d.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(p){return kl(d,e,p,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,h){var m=h===e.body.length-1;ib(d,e,p,m,f,a,e.columns)}),d.applyStyles(d.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(p){return kl(d,e,p,a,e.columns)})),BB(d,e,f,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function ACe(t,e,n,r){var i=kCe(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Hm(t,e,n,r,u.columns,!0):PL(t,e,r,u.columns),CCe(t,e,n,r,u.columns),pS(t,e,r,u.columns)});else for(var s=-1,o=i[0],l=function(){var u=s;if(o){t.applyStyles(t.userStyles);var d=o.columns;s>=0?Hm(t,e,n,r,d,!0):PL(t,e,r,d),u=TL(t,e,s+1,r,d),pS(t,e,r,d)}var f=u-s;i.slice(1).forEach(function(p){t.applyStyles(t.userStyles),Hm(t,e,n,r,p.columns,!0),TL(t,e,s+1,r,p.columns,f),pS(t,e,r,p.columns)}),s=u};s<e.body.length-1;)l()}function PL(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(a){return kl(t,e,a,n,r)})}function CCe(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(a,s){var o=s===e.body.length-1;ib(t,e,a,o,n,r,i)})}function TL(t,e,n,r,i,a){t.applyStyles(t.userStyles),a=a??e.body.length;var s=Math.min(n+a,e.body.length),o=-1;return e.body.slice(n,s).forEach(function(l,u){var d=n+u===e.body.length-1,f=JB(t,e,d,r);l.canEntireRowFit(f,i)&&(kl(t,e,l,r,i),o=n+u)}),o}function pS(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(a){return kl(t,e,a,n,r)})}function ECe(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),a=Math.floor((e-i)/r);return Math.max(0,a)}function _Ce(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var a=0,s=0,o=n.columns;s<o.length;s++){var l=o[s],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new KB(u.raw,u.styles,u.section);d=cl(d,u),d.text=[];var f=ECe(u,e,r);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var p=r.scaleFactor(),h=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,h),d.contentHeight>a&&(a=d.contentHeight),i[l.index]=d}}var m=new GB(t.raw,-1,t.section,i,!0);m.height=a;for(var g=0,y=n.columns;g<y.length;g++){var l=y[g],d=m.cells[l.index];d&&(d.height=m.height);var u=t.cells[l.index];u&&(u.height=t.height)}return m}function OCe(t,e,n,r){var i=t.pageSize().height,a=r.settings.margin,s=a.top+a.bottom,o=i-s;e.section==="body"&&(o-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(r.columns),f=e.getMaxCellHeight(r.columns)>o;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||r.settings.rowPageBreak==="avoid")}function ib(t,e,n,r,i,a,s){var o=JB(t,e,r,a);if(n.canEntireRowFit(o,s))kl(t,e,n,a,s);else if(OCe(t,n,o,e)){var l=_Ce(n,o,e,t);kl(t,e,n,a,s),Hm(t,e,i,a,s),ib(t,e,l,r,i,a,s)}else Hm(t,e,i,a,s),ib(t,e,n,r,i,a,s)}function kl(t,e,n,r,i){r.x=e.settings.margin.left;for(var a=0,s=i;a<s.length;a++){var o=s[a],l=n.cells[o.index];if(!l){r.x+=o.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,o,r);if(u===!1){r.x+=o.width;continue}PCe(t,l,r);var d=l.getTextPos();$B(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,o,r),r.x+=o.width}r.y+=n.height}function PCe(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=HB(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),TCe(t,e,n,r.lineWidth))}function TCe(t,e,n,r){var i,a,s,o;r.top&&(i=n.x,a=n.y,s=n.x+e.width,o=n.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,a,s,o)),r.bottom&&(i=n.x,a=n.y+e.height,s=n.x+e.width,o=n.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,a,s,o)),r.left&&(i=n.x,a=n.y,s=n.x,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,i,a,s,o)),r.right&&(i=n.x+e.width,a=n.y,s=n.x+e.width,o=n.y+e.height,r.top&&(a-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,i,a,s,o));function l(u,d,f,p,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,p,h,"S")}}function JB(t,e,n,r){var i=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function Hm(t,e,n,r,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return kl(t,e,o,r,i)}),e.callEndPageHooks(t,r);var s=e.settings.margin;BB(t,e,n,r),ZB(t),e.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return kl(t,e,o,r,i)}),t.applyStyles(t.userStyles))}function ZB(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function MCe(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=VB(this,r),a=YB(this,i);return XB(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){$B(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return th.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){th.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new th(this),a=UB(i,e,window,n,!1),s=a.head,o=a.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var mS;function ML(t,e){var n=VB(t,e),r=YB(t,n);XB(t,r)}try{if(typeof window<"u"&&window){var LL=window,IL=LL.jsPDF||((mS=LL.jspdf)===null||mS===void 0?void 0:mS.jsPDF);IL&&MCe(IL)}}catch(t){console.error("Could not apply autoTable plugin",t)}const nm=["#3b82f6","#22c55e","#6366f1","#eab308","#f43f5e","#8b5cf6","#ec4899","#14b8a6"],LCe=({currentUser:t,contacts:e,team:n=[],tasks:r=[],companyCurrency:i="USD",features:a})=>{const[s,o]=q.useState("30d"),[l,u]=q.useState(""),[d,f]=q.useState(""),p=q.useMemo(()=>{const C=new Date;let P=new Date,T=new Date;switch(s){case"7d":P.setDate(C.getDate()-7);break;case"30d":P.setDate(C.getDate()-30);break;case"90d":P.setDate(C.getDate()-90);break;case"year":P=new Date(C.getFullYear(),0,1);break;case"custom":if(l){const[I,k,O]=l.split("-").map(Number);P=new Date(I,k-1,O)}if(d){const[I,k,O]=d.split("-").map(Number);T=new Date(I,k-1,O)}T.setHours(23,59,59,999);break}return P.setHours(0,0,0,0),e.filter(I=>{const k=new Date(I.createdAt);return isNaN(k.getTime())?!1:s==="custom"?l?k>=P&&(d?k<=T:!0):!0:k>=P})},[e,s,l,d]);if((t==null?void 0:t.role)!=="MANAGER"&&(t==null?void 0:t.role)!=="SUPPORT")return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[c.jsx("div",{className:"bg-slate-100 p-4 rounded-full mb-4",children:c.jsx(ca,{size:48,className:"text-slate-400"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acceso de Gerente Requerido"}),c.jsx("p",{className:"text-slate-500 max-w-md",children:"Los reportes detallados y anlisis de atribucin estn disponibles solo para roles gerenciales."})]});const h=q.useMemo(()=>n.filter(C=>C.role!=="Support"&&C.role!=="SUPPORT"),[n]),m=q.useMemo(()=>{const C={},P={};p.forEach(k=>{var O;C[k.source]=(C[k.source]||0)+1,k.utm_campaign?P[k.utm_campaign]=(P[k.utm_campaign]||0)+1:k.utm_term?P[k.utm_term]=(P[k.utm_term]||0)+1:(O=k.tags)==null||O.forEach(R=>{const D=R.length>20?R.substring(0,20)+"...":R;P[D]=(P[D]||0)+1})});const T=Object.keys(C).map((k,O)=>({name:k,value:C[k],color:nm[O%nm.length]})).sort((k,O)=>O.value-k.value),I=Object.keys(P).map((k,O)=>({name:k,value:P[k],color:nm[nm.length-1-O%nm.length]})).sort((k,O)=>O.value-k.value).slice(0,10);return{sources:T,campaigns:I}},[p]),g=q.useMemo(()=>{let C=0,P=0,T=0,I=0;p.forEach(R=>{var B;let D=!1;(B=R.history)==null||B.forEach(V=>{(V.sender==="agent"||V.sender==="model")&&(V.content.includes("( AI)")?(C++,D=!0):P++)}),D&&T++,D&&R.status===ot.WON&&I++});const k=C*2.5,O=C+P>0?Math.round(C/(C+P)*100):0;return{totalAiReplies:C,contactsHandledByAi:T,timeSavedHours:Math.round(k/60),adoptionRate:O,aiConversionRate:T>0?Math.round(I/T*100):0}},[p]),y=p.reduce((C,P)=>P.status===ot.WON&&P.wonData?C+P.wonData.finalPrice:C+P.value,0),x=p.filter(C=>C.status!==ot.WON&&C.status!==ot.LOST).length,w=p.filter(C=>C.status===ot.WON).length,S=p.length>0?Math.round(w/p.length*100):0,N=q.useMemo(()=>{const C=p.filter(T=>T.status===ot.WON);if(C.length===0)return 0;let P=0;return C.forEach(T=>{const I=new Date(T.createdAt).getTime(),k=new Date(T.lastActivity||T.createdAt).getTime();P+=(k-I)/(1e3*60*60*24)}),Math.round(P/C.length)||1},[p]);q.useMemo(()=>{const C=["Ene","Feb","Mar","Abr","May","Jun"],P=y*.2;return C.map((T,I)=>({name:T,projected:Math.round(P*(1+I*.15))}))},[y]);const j=q.useMemo(()=>h.map(C=>{const P=p.filter(D=>D.owner===C.name),T=P.reduce((D,B)=>{var V;return B.status===ot.WON?D+(((V=B.wonData)==null?void 0:V.finalPrice)||B.value):D},0),I=P.reduce((D,B)=>{var V;return D+(((V=B.history)==null?void 0:V.length)||0)},0);let k=0,O=0;P.forEach(D=>{if(D.history&&D.history.length>1){const B=[...D.history].sort((Z,H)=>new Date(Z.createdAt||Z.timestamp).getTime()-new Date(H.createdAt||H.timestamp).getTime()),V=B.find(Z=>Z.sender==="customer");if(V){const Z=new Date(V.createdAt||V.timestamp).getTime(),H=B.find(Q=>Q.sender==="agent"&&new Date(Q.createdAt||Q.timestamp).getTime()>Z);if(H){const Q=(new Date(H.createdAt||H.timestamp).getTime()-Z)/6e4;k+=Q,O++}}}});const R=O>0?Math.round(k/O):0;return{name:C.name,sales:T,calls:I,response:R>0?R<60?`${R}m`:`${Math.round(R/60)}h`:"-"}}).sort((C,P)=>P.sales-C.sales),[p,h]);q.useMemo(()=>{const C={};return p.forEach(P=>{var T,I;if(P.status===ot.WON){const k=((T=P.wonData)==null?void 0:T.products)||P.productInterests||["Otros"],O=(((I=P.wonData)==null?void 0:I.finalPrice)||P.value)/k.length;k.forEach(R=>C[R]=(C[R]||0)+O)}}),Object.keys(C).map(P=>({name:P,value:Math.round(C[P])})).sort((P,T)=>T.value-P.value)},[p]);const E=()=>{const C=new kt,P="KiwLead",T="KiwuLead_Reporte_Avanzado.pdf";C.setFontSize(20),C.text(`Reporte Comercial & IA - ${P}`,14,20),C.setFontSize(12),C.text(`Generado: ${nn(new Date,"dd/MM/yyyy HH:mm")}`,14,30),ML(C,{startY:40,head:[["Medida","Valor"]],body:[["Ventas Totales",hl(y,i)],["Leads Activos",x],["Tasa de Cierre",`${S}%`],["Tasa de Cierre",`${S}%`]]}),(!a||a.enableAI)&&ML(C,{startY:C.lastAutoTable.finalY+10,head:[["Mtrica AI","Valor"]],body:[["Mensajes IA",g.totalAiReplies],["Horas Ahorradas",g.timeSavedHours],["Tasa Adopcin",`${g.adoptionRate}%`]]}),C.save(T)};return c.jsxs("div",{className:"p-4 md:p-8 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:["Analtica Avanzada",c.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full border border-blue-200",children:"PRO"})]}),c.jsx("p",{className:"text-sm text-slate-500",children:"Inteligencia de Negocio, Rendimiento de IA y Atribucin."})]}),c.jsx("div",{className:"flex bg-white border border-slate-200 rounded-lg p-1 shadow-sm",children:["7d","30d","90d","year"].map(C=>c.jsx("button",{onClick:()=>o(C),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${s===C?"bg-blue-600 text-white shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:C==="7d"?"7 Das":C==="30d"?"30 Das":C==="90d"?"Trimestre":"Ao"},C))})]}),(!a||a.enableAI)&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-5 text-white shadow-lg relative overflow-hidden",children:[c.jsx("div",{className:"absolute right-0 top-0 opacity-10 transform translate-x-4 -translate-y-4",children:c.jsx(_f,{size:100})}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2 opacity-90",children:[c.jsx(_f,{size:20}),c.jsx("span",{className:"text-sm font-medium",children:"Actividad IA"})]}),c.jsx("h3",{className:"text-3xl font-bold",children:g.totalAiReplies}),c.jsx("p",{className:"text-sm opacity-80 mt-1",children:"Mensajes auto-respondidos"})]})]}),c.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx(o0,{className:"text-amber-500",size:20}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Tiempo Ahorrado"})]}),c.jsxs("h3",{className:"text-2xl font-bold text-slate-900",children:[g.timeSavedHours," hrs"]}),c.jsx("p",{className:"text-xs text-green-600 font-medium mt-1",children:"Calculado a 2.5 min/msg"})]}),c.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx(Bc,{className:"text-blue-500",size:20}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Adopcin IA"})]}),c.jsxs("h3",{className:"text-2xl font-bold text-slate-900",children:[g.adoptionRate,"%"]}),c.jsx("div",{className:"w-full bg-slate-100 h-1.5 rounded-full mt-2 overflow-hidden",children:c.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${g.adoptionRate}%`}})})]}),c.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx(rD,{className:"text-green-500",size:20}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Conversin con IA"})]}),c.jsxs("h3",{className:"text-2xl font-bold text-slate-900",children:[g.aiConversionRate,"%"]}),c.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Leads atendidos por IA ganados"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[c.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-1",children:"Pipeline Total"}),c.jsx("p",{className:"text-xl font-bold text-slate-900",children:hl(y,i)})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[c.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-1",children:"Tasa de Cierre"}),c.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[S,"%"]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[c.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-1",children:"Ciclo de Venta"}),c.jsxs("p",{className:"text-xl font-bold text-slate-900",children:[N," das"]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[c.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-1",children:"Leads Activos"}),c.jsx("p",{className:"text-xl font-bold text-slate-900",children:x})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm col-span-2",children:[c.jsx("div",{className:"flex justify-between items-center mb-6",children:c.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-blue-600 rounded-full"}),"Efectividad de Campaas (Tags)"]})}),c.jsx("div",{className:"h-72",children:c.jsx(zN,{width:"100%",height:"100%",children:c.jsxs(U$,{data:m.campaigns,layout:"vertical",margin:{left:20},children:[c.jsx(z3,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f1f5f9"}),c.jsx(bg,{type:"number",hide:!0}),c.jsx(wg,{dataKey:"name",type:"category",width:140,tick:{fontSize:11,fill:"#64748b"},axisLine:!1,tickLine:!1}),c.jsx(rs,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},cursor:{fill:"#f8fafc"}}),c.jsx(Zc,{dataKey:"value",fill:"#3b82f6",barSize:16,radius:[0,4,4,0],children:m.campaigns.map((C,P)=>c.jsx(ph,{fill:C.color},`cell-${P}`))})]})})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("h3",{className:"font-bold text-slate-900 mb-6 flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-6 bg-green-500 rounded-full"}),"Fuentes de Trfico"]}),c.jsxs("div",{className:"h-60 relative",children:[c.jsx(zN,{width:"100%",height:"100%",children:c.jsxs(_ye,{children:[c.jsx(Ol,{data:m.sources,innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:m.sources.map((C,P)=>c.jsx(ph,{fill:C.color},`cell-${P}`))}),c.jsx(rs,{}),c.jsx(Ju,{verticalAlign:"bottom",height:36})]})}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs text-slate-500",children:"Total Leads"}),c.jsx("p",{className:"text-2xl font-bold text-slate-900",children:p.length})]})})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 bg-slate-50 flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-slate-900",children:"Rendimiento de Agentes"}),c.jsxs("button",{onClick:E,className:"text-xs flex items-center gap-1 text-slate-500 hover:text-slate-700",children:[c.jsx(Sb,{size:14})," Exportar"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-white text-xs font-bold text-slate-500 uppercase border-b border-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4",children:"Agente"}),c.jsx("th",{className:"px-6 py-4",children:"Ventas Cerradas"}),c.jsx("th",{className:"px-6 py-4",children:"Tasa Conv."}),c.jsx("th",{className:"px-6 py-4",children:"Interacciones"}),c.jsx("th",{className:"px-6 py-4",children:"Tiempo Resp. (1er msg)"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-50",children:j.map((C,P)=>{const T=p.filter(I=>I.owner===C.name).length;return T>0&&Math.round((C.sales>0?1:0)/T*100),c.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${P===0?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:P+1}),c.jsx("span",{className:"font-semibold text-slate-900",children:C.name})]}),c.jsx("td",{className:"px-6 py-4 font-bold text-slate-900",children:hl(C.sales,i)}),c.jsx("td",{className:"px-6 py-4 text-slate-600",children:"-"}),c.jsx("td",{className:"px-6 py-4 text-slate-600",children:C.calls}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${C.response==="-"?"bg-slate-100 text-slate-400":"bg-green-50 text-green-700 border border-green-200"}`,children:C.response})})]},C.name)})})]})})]})]})};ot.NEW,ot.CONTACTED,ot.QUALIFIED,ot.NEGOTIATION,ot.WON;const gS=[{name:"WhatsApp Business API",status:"Connected",lastSync:"Hace 1 min",icon:"MessageSquare"},{name:"Meta Ads Manager",status:"Connected",lastSync:"Hace 15 min",icon:"Facebook"},{name:"n8n Automatizacin",status:"Connected",lastSync:"Tiempo Real",icon:"Workflow"},{name:"Make (Integromat)",status:"Disconnected",lastSync:"Nunca",icon:"Zap"},{name:"Formularios del Sitio (Webhook)",status:"Connected",lastSync:"Tiempo Real",icon:"Globe"},{name:"AI Assistant",status:"Disconnected",lastSync:"Nunca",icon:"Bot"}],ICe=[{id:"core_1",name:"Captura y Normalizacin",description:"Normaliza el formato de nombres (Capitalize) y telfonos.",category:"CORE",trigger:"ON_LEAD_CREATE",isActive:!0},{id:"core_2",name:"Deteccin de Duplicados",description:"Impide crear leads con mismo email o telfono. Fusiona historial.",category:"CORE",trigger:"ON_LEAD_CREATE",isActive:!0},{id:"core_3",name:"Asignacin Round Robin",description:"Distribuye leads equitativamente entre vendedores activos.",category:"CORE",trigger:"ON_LEAD_CREATE",isActive:!0},{id:"core_4",name:"Speed to Lead (Bienvenida)",description:"Enva WhatsApp de bienvenida y crea tarea inmediata.",category:"CORE",trigger:"ON_LEAD_CREATE",isActive:!0},{id:"core_5",name:"Alerta SLA Respuesta",description:"Alerta si un lead nuevo no es contactado en 10 min.",category:"CORE",trigger:"SCHEDULED_CHECK",isActive:!0},{id:"sales_1",name:"Avance Automtico Pipeline",description:'Si envas mensaje, mueve a "Contactado". Si paga, a "Ganado".',category:"SALES",trigger:"ON_MESSAGE_SENT",isActive:!0},{id:"sales_2",name:"Follow-up Secuencial",description:"Crea tareas de seguimiento (Da 1, 3, 7) automticamente.",category:"SALES",trigger:"ON_STATUS_CHANGE",isActive:!1},{id:"sales_3",name:"Gestin de Tareas",description:"No permite mover etapa si hay tareas vencidas.",category:"SALES",trigger:"ON_STATUS_CHANGE",isActive:!1},{id:"sales_4",name:"Reasignacin por Inactividad",description:"Si el lead no se toca en 48h, se reasigna al pool.",category:"SALES",trigger:"SCHEDULED_CHECK",isActive:!0},{id:"qual_1",name:"Control Calidad Datos",description:"Exige campos obligatorios segn la etapa del pipeline.",category:"QUALITY",trigger:"ON_STATUS_CHANGE",isActive:!0},{id:"qual_2",name:"Etiquetado Automtico",description:"Asigna tags (Hot, Cold, Canal) basado en comportamiento.",category:"QUALITY",trigger:"ON_LEAD_CREATE",isActive:!0},{id:"qual_3",name:"Motivo Prdida Obligatorio",description:"Exige seleccionar razn al marcar como Perdido.",category:"QUALITY",trigger:"ON_DEAL_LOST",isActive:!0},{id:"rep_1",name:"Reporte Diario (Digest)",description:"Enva resumen de leads nuevos y cierres por email.",category:"REPORTING",trigger:"SCHEDULED_CHECK",isActive:!1},{id:"rep_2",name:"Alertas Inteligentes",description:"Notifica picos anormales de leads o baja conversin.",category:"REPORTING",trigger:"SCHEDULED_CHECK",isActive:!0},{id:"life_1",name:"Onboarding Automtico",description:"Enva kit de bienvenida al marcar como Ganado.",category:"LIFECYCLE",trigger:"ON_DEAL_WON",isActive:!0},{id:"life_2",name:"Reactivacin Leads Perdidos",description:'Crea tarea de "Hola de nuevo" a los 90 das.',category:"LIFECYCLE",trigger:"SCHEDULED_CHECK",isActive:!1},{id:"life_3",name:"Encuesta NPS",description:"Enva encuesta de satisfaccin 3 das despus de la venta.",category:"LIFECYCLE",trigger:"ON_DEAL_WON",isActive:!0}],DCe=({onNotify:t})=>{const[e,n]=q.useState([]),[r,i]=q.useState(!0),[a,s]=q.useState(null),[o,l]=q.useState({name:"",color:""}),[u,d]=q.useState(!1),[f,p]=q.useState({name:"",color:"border-gray-500"}),h=[{label:"Azul",value:"border-blue-500"},{label:"Indigo",value:"border-indigo-500"},{label:"Morado",value:"border-purple-500"},{label:"Cian",value:"border-cyan-500"},{label:"Naranja",value:"border-orange-500"},{label:"Verde",value:"border-green-500"},{label:"Rojo",value:"border-red-500"},{label:"Gris",value:"border-gray-500"},{label:"Rosa",value:"border-pink-500"},{label:"Amarillo",value:"border-yellow-500"}],m=async()=>{i(!0);try{const{api:N}=await Et(async()=>{const{api:E}=await Promise.resolve().then(()=>Ot);return{api:E}},void 0,import.meta.url),j=await N.pipeline.list();n(j)}catch(N){console.error(N),N.message&&N.message.includes("401")?t&&t("Sesin Expirada","Por favor, inicia sesin nuevamente.","error"):t&&t("Error","No se pudieron cargar las etapas","error")}finally{i(!1)}};q.useEffect(()=>{m()},[]);const g=async()=>{if(f.name)try{const{api:N}=await Et(async()=>{const{api:j}=await Promise.resolve().then(()=>Ot);return{api:j}},void 0,import.meta.url);await N.pipeline.create(f.name,f.color),await m(),d(!1),p({name:"",color:"border-gray-500"}),t&&t("xito","Etapa creada","success")}catch(N){console.error(N)}},y=async N=>{try{const{api:j}=await Et(async()=>{const{api:E}=await Promise.resolve().then(()=>Ot);return{api:E}},void 0,import.meta.url);await j.pipeline.update(N,o),await m(),s(null),t&&t("xito","Etapa actualizada","success")}catch(j){console.error(j)}},x=async N=>{if(confirm("Seguro que deseas eliminar esta etapa? Si tiene leads asociados, no se podr eliminar."))try{const{api:j}=await Et(async()=>{const{api:C}=await Promise.resolve().then(()=>Ot);return{api:C}},void 0,import.meta.url),E=await j.pipeline.delete(N);E.error?t&&t("Error",E.error,"error"):(await m(),t&&t("xito","Etapa eliminada","success"))}catch(j){console.error(j)}},w=async(N,j)=>{if(j==="up"&&N===0||j==="down"&&N===e.length-1)return;const E=[...e],C=j==="up"?N-1:N+1;[E[N],E[C]]=[E[C],E[N]],n(E);try{const{api:P}=await Et(async()=>{const{api:I}=await Promise.resolve().then(()=>Ot);return{api:I}},void 0,import.meta.url),T=E.map(I=>I.id);await P.pipeline.reorder(T)}catch(P){console.error(P),m()}},S=N=>{s(N.id),l({name:N.name,color:N.color})};return r?c.jsx("div",{className:"p-8 flex justify-center",children:c.jsx(fi,{className:"animate-spin text-blue-600"})}):c.jsxs("div",{className:"max-w-4xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Etapas de Leads"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Personaliza las columnas de tu tablero Kanban."})]}),c.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700",children:[c.jsx(bl,{size:18})," Nueva Etapa"]})]}),c.jsxs("div",{className:"space-y-3",children:[e.map((N,j)=>c.jsxs("div",{className:`bg-white border p-4 rounded-xl flex items-center gap-4 shadow-sm transition-all ${a===N.id?"border-blue-500 ring-1 ring-blue-500":"border-slate-200"}`,children:[c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("button",{onClick:()=>w(j,"up"),disabled:j===0,className:"text-slate-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(SU,{size:16})}),c.jsx("button",{onClick:()=>w(j,"down"),disabled:j===e.length-1,className:"text-slate-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed",children:c.jsx(wU,{size:16})})]}),c.jsx("div",{className:`w-3 h-12 rounded-full ${N.color.replace("border-","bg-")}`}),c.jsx("div",{className:"flex-1",children:a===N.id?c.jsxs("div",{className:"flex gap-4 items-center",children:[c.jsx("input",{autoFocus:!0,type:"text",value:o.name,onChange:E=>l({...o,name:E.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("select",{value:o.color,onChange:E=>l({...o,color:E.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",children:h.map(E=>c.jsx("option",{value:E.value,children:E.label},E.value))}),c.jsx("button",{onClick:()=>y(N.id),className:"p-2 bg-green-100 text-green-700 rounded hover:bg-green-200",children:c.jsx(ry,{size:18})}),c.jsx("button",{onClick:()=>s(null),className:"p-2 bg-slate-100 text-slate-600 rounded hover:bg-slate-200",children:c.jsx(yn,{size:18})})]}):c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:N.name}),c.jsxs("p",{className:"text-xs text-slate-400 font-mono",children:["ID: ",N.keyName]})]})}),a!==N.id&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>S(N),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded",children:c.jsx(OA,{size:18})}),c.jsx("button",{onClick:()=>x(N.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded",children:c.jsx(Ra,{size:18})})]})]},N.id)),u&&c.jsxs("div",{className:"bg-slate-50 border-2 border-dashed border-blue-300 p-4 rounded-xl flex items-center gap-4 animate-in fade-in",children:[c.jsx("div",{className:"w-8"}),c.jsx("div",{className:`w-3 h-12 rounded-full ${f.color.replace("border-","bg-")}`}),c.jsxs("div",{className:"flex-1 flex gap-4 items-center",children:[c.jsx("input",{autoFocus:!0,type:"text",placeholder:"Nombre de la etapa (ej. Propuesta Enviada)",value:f.name,onChange:N=>p({...f,name:N.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("select",{value:f.color,onChange:N=>p({...f,color:N.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",children:h.map(N=>c.jsx("option",{value:N.value,children:N.label},N.value))}),c.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Guardar"}),c.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 bg-white border border-slate-300 text-slate-600 rounded-lg hover:bg-slate-50 font-medium",children:"Cancelar"})]})]})]})]})},RCe=({currentUser:t,team:e,setTeam:n,distributionSettings:r,setDistributionSettings:i,templates:a,setTemplates:s,companyProfile:o,setCompanyProfile:l,onInjectLead:u,contacts:d=[],setContacts:f,onNotify:p,onImpersonate:h,onRefreshData:m,onLogout:g,features:y,onUpdateFeatures:x})=>{const w="KiwLead",S="kiwulead_secret",[N,j]=q.useState("company"),[E,C]=q.useState(!1),[P,T]=q.useState({name:"",email:"",role:"Sales"}),[I,k]=q.useState(!0),[O,R]=q.useState(""),[D,B]=q.useState(!1),[V,Z]=q.useState(!1),[H,Q]=q.useState({fromUser:null,toUser:"Unassigned",deleteAfter:!1}),[fe,le]=q.useState(!1),[L,F]=q.useState(null),[G,ee]=q.useState(""),[ie,se]=q.useState(""),[ye,oe]=q.useState(!1),[we,be]=q.useState(null),[de,$e]=q.useState({name:"",subject:"",body:"",category:"Sales"}),[He,Y]=q.useState("config"),[he,Ke]=q.useState(!1),[qe,Oe]=q.useState({connected:!1,connecting:!1,pageId:"",adAccount:"",verifyToken:S,selectedForms:[]}),[it,Je]=q.useState(1),[ge,Me]=q.useState([]),[ut,st]=q.useState([]),[ft,At]=q.useState(""),[Rt,Se]=q.useState(!1),[Fe,Le]=q.useState({connected:!1,connecting:!1,phoneId:"",token:""}),[dt,ve]=q.useState(!1),[ae,je]=q.useState({connected:!1,connecting:!1,provider:"gemini",apiKey:"",model:"gemini-pro",enabled:!1,prompt:""}),[Ie,Ae]=q.useState(!1),[Ze,Ye]=q.useState({connected:!1,connecting:!1,webhookUrl:""}),[tt,Kt]=q.useState(!1),[pe,Re]=q.useState({connected:!1,connecting:!1,webhookUrl:""}),[lt,Pt]=q.useState(!1),[pt,en]=q.useState({connected:!0,allowedOrigins:[],tab:"config"}),[un,ht]=q.useState({smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",from_name:"",from_email:"",signature:"",connecting:!1}),[jn,Jn]=q.useState(!0),[Tr,yi]=q.useState(!1),[an,ir]=q.useState({db_status:"Checking...",redis_status:"Unknown",webhook_health:{success_rate:0,last_signal:null,total_24h:0},automations_active:0,pending_jobs:0,loading:!1});q.useEffect(()=>{N==="system"&&Mr()},[N]);const Mr=async()=>{ir(X=>({...X,loading:!0}));try{const _e=await(await fetch("/api/system_health.php")).json();ir({..._e,loading:!1})}catch(X){console.error(X),ir(_e=>({..._e,db_status:"Error Fetching",loading:!1}))}},[xa,qa]=q.useState({open:!1,title:"",content:null}),Qi=X=>{let _e="",rt=null;switch(X){case"meta":_e="Configuracin Meta Ads",rt=c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsx("p",{children:"Para conectar Meta Ads (Facebook/Instagram) y recibir leads:"}),c.jsxs("ol",{className:"list-decimal pl-5 space-y-2",children:[c.jsxs("li",{children:["Ve a ",c.jsx("a",{href:"https://developers.facebook.com/apps/",target:"_blank",className:"text-blue-600 underline",children:"Meta Developers"}),' y crea una App tipo "Business".']}),c.jsxs("li",{children:['En la App, aade el producto "Webhooks" y suscrbete al objeto ',c.jsx("b",{children:"page"}),"."]}),c.jsxs("li",{children:["Usa la URL del webhook de este CRM y el token ",c.jsx("code",{children:"nexus_crm_secret"})," para verificar."]}),c.jsxs("li",{children:["Genera un Token de Acceso de Usuario con permisos ",c.jsx("code",{children:"leads_retrieval"})," y ",c.jsx("code",{children:"pages_show_list"}),"."]}),c.jsx("li",{children:"Copia ese token y pgalo aqu."})]})]});break;case"whatsapp":_e="WhatsApp Business API",rt=c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsx("p",{children:"Conecta tu nmero oficial de WhatsApp Cloud API:"}),c.jsxs("ol",{className:"list-decimal pl-5 space-y-2",children:[c.jsxs("li",{children:["Accede a tu cuenta de ",c.jsx("a",{href:"https://business.facebook.com/",target:"_blank",className:"text-blue-600 underline",children:"Meta Business Suite"}),"."]}),c.jsxs("li",{children:["Ve a la configuracin de WhatsApp y obtn el ",c.jsx("b",{children:"Phone Number ID"}),"."]}),c.jsx("li",{children:"Genera un Token Permanente en la seccin de Usuarios del Sistema."}),c.jsx("li",{children:"Configura el Webhook de WhatsApp en Meta apuntando a este CRM."})]})]});break;case"n8n":_e="Automatizacin con n8n",rt=c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsx("p",{children:"Enva datos de leads a tus flujos de n8n:"}),c.jsxs("ol",{className:"list-decimal pl-5 space-y-2",children:[c.jsxs("li",{children:["En n8n, crea un nodo ",c.jsx("b",{children:"Webhook"})," (Method: POST)."]}),c.jsx("li",{children:'Copia la URL "Production" del nodo.'}),c.jsx("li",{children:'Pgala aqu en "Webhook URL Saliente".'}),c.jsx("li",{children:"El CRM enviar un JSON con todos los datos del lead cada vez que se cree uno nuevo."})]})]});break;case"make":_e="Automatizacin con Make",rt=c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsx("p",{children:"Integra Make (Integromat) para procesar leads:"}),c.jsxs("ol",{className:"list-decimal pl-5 space-y-2",children:[c.jsxs("li",{children:["Crea un escenario en Make y aade un mdulo ",c.jsx("b",{children:"Custom Webhook"}),"."]}),c.jsx("li",{children:"Copia la direccin del webhook generado."}),c.jsx("li",{children:"Pgala en la configuracin de esta integracin."}),c.jsx("li",{children:"El sistema enviar automticamente los leads nuevos a ese escenario."})]})]});break;case"website":_e="Formularios Web",rt=c.jsxs("div",{className:"space-y-4 text-sm text-slate-600",children:[c.jsx("p",{children:"Recibe leads desde tu sitio web:"}),c.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[c.jsxs("li",{children:[c.jsx("b",{children:"Opcin A (Webhook):"})," Configura tu plugin (Elementor, CF7) para hacer POST a la URL del webhook."]}),c.jsxs("li",{children:[c.jsx("b",{children:"Opcin B (Embed):"})," Usa nuestro generador de cdigo para crear un formulario HTML listo para pegar."]})]}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 rounded border border-slate-200",children:[c.jsx("p",{className:"font-bold text-xs uppercase mb-1",children:"Campos Aceptados:"}),c.jsx("code",{className:"text-xs",children:"name, email, phone, company, message"})]})]});break}qa({open:!0,title:_e,content:rt})},[$n,ri]=q.useState({title:"Contctanos",buttonText:"Enviar Mensaje",primaryColor:"#2563EB",campaign:"Web Orgnico"}),ea=()=>`
<!-- KiwLead Embed Form -->
<div id="kiwulead-form-container" style="max-width:400px;margin:0 auto;font-family:sans-serif;padding:20px;border:1px solid #eee;border-radius:8px;">
  <h3 style="text-align:center;margin-bottom:20px;">${$n.title}</h3>
  <form id="kiwulead-lead-form" onsubmit="submitKiwuleadLead(event)">
    <div style="margin-bottom:15px;">
      <label style="display:block;margin-bottom:5px;font-size:14px;font-weight:bold;">Nombre</label>
      <input type="text" name="name" required style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label style="display:block;margin-bottom:5px;font-size:14px;font-weight:bold;">Email</label>
      <input type="email" name="email" required style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
    </div>
    <div style="margin-bottom:15px;">
      <label style="display:block;margin-bottom:5px;font-size:14px;font-weight:bold;">Telfono</label>
      <input type="tel" name="phone" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:4px;">
    </div>
    <input type="hidden" name="utm_source" value="Website Embed">
    <input type="hidden" name="utm_campaign" value="${$n.campaign}">
    <button type="submit" style="width:100%;padding:10px;background-color:${$n.primaryColor};color:white;border:none;border-radius:4px;font-weight:bold;cursor:pointer;">${$n.buttonText}</button>
  </form>
  <p id="nexus-status" style="margin-top:10px;text-align:center;font-size:13px;"></p>
</div>
<script>
  function submitKiwuleadLead(e) {
    e.preventDefault();
    const btn = e.target.querySelector('button');
    const originalText = btn.innerText;
    btn.innerText = 'Enviando...';
    btn.disabled = true;

    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    fetch('${window.location.origin}/api/webhook.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(r => r.json())
    .then(res => {
      document.getElementById('nexus-status').innerText = 'Gracias! Hemos recibido tus datos.';
      document.getElementById('nexus-status').style.color = 'green';
      e.target.reset();
    })
    .catch(err => {
      document.getElementById('nexus-status').innerText = 'Error al enviar. Intenta de nuevo.';
      document.getElementById('nexus-status').style.color = 'red';
    })
    .finally(() => {
      btn.innerText = originalText;
      btn.disabled = false;
    });
  }
<\/script>
<!-- End KiwLead Embed -->`.trim();q.useEffect(()=>{(async()=>{var _e,rt;try{const{api:Mt}=await Et(async()=>{const{api:$t}=await Promise.resolve().then(()=>Ot);return{api:$t}},void 0,import.meta.url),Lt=await Mt.settings.list();Lt.meta&&Oe($t=>({...$t,...Lt.meta})),Lt.whatsapp_config?Le($t=>({...$t,...Lt.whatsapp_config})):Lt.whatsapp&&Le($t=>({...$t,...Lt.whatsapp})),Lt.ai&&je($t=>({...$t,...Lt.ai})),Lt.n8n&&Ye($t=>({...$t,...Lt.n8n})),Lt.make&&Re($t=>({...$t,...Lt.make})),Lt.website_forms&&en($t=>({...$t,...Lt.website_forms}));try{const{api:$t}=await Et(async()=>{const{api:Gn}=await Promise.resolve().then(()=>Ot);return{api:Gn}},void 0,import.meta.url),sr=await $t.settings.getEmailConfig(String((t==null?void 0:t.id)||"1"));sr.config&&ht(Gn=>({...Gn,...sr.config}))}catch($t){console.error("Failed to load email config",$t)}Lt.company_profile&&l(Lt.company_profile),Lt.distribution_settings&&i(Lt.distribution_settings),Lt.email_templates&&s(Lt.email_templates)}catch(Mt){if((_e=Mt.message)!=null&&_e.includes("401")||(rt=Mt.message)!=null&&rt.includes("Unauthorized")){console.warn("Settings: Session expired. Logging out..."),g&&g();return}console.error("Failed to load settings",Mt)}})()},[]);const Vn=async(X,_e)=>{try{const{api:rt}=await Et(async()=>{const{api:Mt}=await Promise.resolve().then(()=>Ot);return{api:Mt}},void 0,import.meta.url);await rt.settings.update(X,_e)}catch(rt){console.error("Save failed",rt)}},Xs=async()=>{await Vn("company_profile",o),p&&p("xito","Perfil de empresa actualizado.","success")},ta=async X=>{i(X),await Vn("distribution_settings",X)},Ss=async X=>{if(!y||!x)return;const _e={...y,[X]:!y[X]};x(_e),await Vn("features",_e),p&&p("Configuracin Actualizada","Se han guardado los cambios en las funcionalidades.","success")},[Ns,Js]=q.useState("idle"),[Co,Ua]=q.useState([]);if((t==null?void 0:t.role)!=="MANAGER"&&(t==null?void 0:t.role)!=="SUPPORT")return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[c.jsx("div",{className:"bg-red-50 p-4 rounded-full mb-4",children:c.jsx(ca,{size:48,className:"text-red-500"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acceso Denegado"}),c.jsx("p",{className:"text-slate-500 max-w-md",children:"No tienes permiso para acceder a la Configuracin. Este mdulo est restringido a Gerentes y Soporte Tcnico."})]});const nu=(t==null?void 0:t.role)!=="SALES_REP",Rd=(t==null?void 0:t.role)==="SUPPORT"?["Support","Manager","Sales"]:(t==null?void 0:t.role)==="MANAGER"?["Manager","Sales"]:(t==null?void 0:t.role)==="SALES_REP"?[]:["Support","Manager","Sales"],$d={Manager:"Gerente",Sales:"Vendedor",Support:"Soporte"},Di=(X=12)=>{const _e="abcdefghijklmnopqrstuvwxyz",rt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Mt="0123456789",Lt="!@#$%^&*()-_=+[]{};:,.<>?",$t=_e+rt+Mt+Lt,sr=ya=>ya[Math.floor(Math.random()*ya.length)];let Gn=sr(_e)+sr(rt)+sr(Mt)+sr(Lt);for(let ya=Gn.length;ya<X;ya++)Gn+=sr($t);return Gn.split("").sort(()=>Math.random()-.5).join("")},ru=async X=>{X.preventDefault();try{const{api:_e}=await Et(async()=>{const{api:Lt}=await Promise.resolve().then(()=>Ot);return{api:Lt}},void 0,import.meta.url),rt=O&&O.length>=8?O:Di();if((await _e.team.create({name:P.name,email:P.email,role:P.role,password:rt,status:"Active"})).success){const Lt=await _e.team.list();n(Lt),C(!1),T({name:"",email:"",role:"Sales"}),R(""),k(!0),B(!1),p&&p("Miembro Agregado",`${P.name} ha sido invitado al equipo.`,"success")}}catch(_e){console.error("Error adding team member:",_e),p&&p("Error","No se pudo agregar al miembro.","error")}},Tl=X=>d.filter(_e=>_e.owner===X&&_e.status!==ot.WON&&_e.status!==ot.LOST).length,iu=async()=>{if(!(!L||!G)){if(G!==ie){p&&p("Error","Las contraseas no coinciden","error");return}try{const{api:X}=await Et(async()=>{const{api:_e}=await Promise.resolve().then(()=>Ot);return{api:_e}},void 0,import.meta.url);await X.team.update(L.id,{password:G}),p&&p("xito","Contrasea actualizada correctamente","success"),le(!1),ee(""),se(""),F(null)}catch(X){console.error(X),p&&p("Error","No se pudo actualizar la contrasea","error")}}},zd=async(X,_e)=>{const rt=Tl(_e);if(rt>0&&confirm(` CUIDADO: ${_e} tiene ${rt} leads activos.

Deseas abrir la herramienta de reasignacin antes de eliminar?`)){const Mt=e.find(Lt=>Lt.id===X);if(Mt){au(Mt,!0);return}}if(confirm("Ests seguro de que quieres eliminar a este usuario permanentemente?"))try{const{api:Mt}=await Et(async()=>{const{api:Lt}=await Promise.resolve().then(()=>Ot);return{api:Lt}},void 0,import.meta.url);await Mt.team.delete(X),n(e.filter(Lt=>Lt.id!==X)),p&&p("Miembro Eliminado","El usuario ha sido removido del equipo.","info")}catch(Mt){console.error("Error deleting team member:",Mt),p&&p("Error","No se pudo eliminar al miembro.","error")}},au=(X,_e=!1)=>{Q({fromUser:X,toUser:"Unassigned",deleteAfter:_e}),Z(!0)},Fd=async()=>{if(!H.fromUser||!f)return;const X=H.fromUser.name,_e=H.toUser;try{const{api:rt}=await Et(async()=>{const{api:Gn}=await Promise.resolve().then(()=>Ot);return{api:Gn}},void 0,import.meta.url),Mt=e.find(Gn=>Gn.name===_e),Lt=(Mt==null?void 0:Mt.id)||null,$t=d.filter(Gn=>Gn.owner===X&&Gn.status!==ot.WON&&Gn.status!==ot.LOST);await Promise.all($t.map(async Gn=>{await rt.contacts.update(Gn.id,{owner_id:Lt,owner:_e}),await rt.notes.create({contactId:Gn.id,content:` Lead transferido automticamente de ${X} a ${_e}.`,authorId:1})}));const sr=await rt.contacts.list();if(f(sr),H.deleteAfter){await rt.team.delete(H.fromUser.id);const Gn=await rt.team.list();n(Gn),p&&p("Usuario Eliminado",`Se transfirieron ${$t.length} leads y se elimin a ${X}.`,"success")}else p&&p("Cartera Transferida",`Se movieron ${$t.length} leads de ${X} a ${_e}.`,"success");Z(!1)}catch(rt){console.error("Error during reassignment:",rt),p&&p("Error","No se pudo completar la reasignacin.","error")}},na=X=>{X?(be(X.id),$e({...X})):(be(null),$e({name:"",subject:"",body:"",category:"Sales"})),oe(!0)},Ml=async X=>{if(X.preventDefault(),!de.name||!de.body)return;let _e;if(we)_e=a.map(rt=>rt.id===we?{...rt,...de}:rt),p&&p("Plantilla Actualizada",`La plantilla "${de.name}" se guard correctamente.`,"success");else{const rt={id:Date.now().toString(),name:de.name,subject:de.subject||"",body:de.body,category:de.category||"Sales"};_e=[...a,rt],p&&p("Plantilla Creada",`Nueva plantilla "${de.name}" agregada.`,"success")}s(_e),await Vn("email_templates",_e),oe(!1)},Bd=async()=>{try{const _e=await(await fetch("/api/seed_templates.php")).json();if(_e.success)if(_e.added>0){p&&p("Plantillas Restauradas",`Se han aadido ${_e.added} plantillas por defecto.`,"success");const{api:rt}=await Et(async()=>{const{api:Lt}=await Promise.resolve().then(()=>Ot);return{api:Lt}},void 0,import.meta.url),Mt=await rt.settings.list();Mt.email_templates&&s(Mt.email_templates)}else p&&p("Aviso","Las plantillas ya existen.","info")}catch(X){console.error(X),p&&p("Error","No se pudieron restaurar las plantillas.","error")}},ar=async(X,_e)=>{if(_e.stopPropagation(),confirm("Eliminar esta plantilla?")){const rt=a.filter(Mt=>Mt.id!==X);s(rt),await Vn("email_templates",rt)}},Hd=async()=>{Oe(X=>({...X,connecting:!0})),await new Promise(X=>setTimeout(X,1e3));try{const _e=await(await fetch("/api/meta.php?action=accounts")).json();Me(_e.data||[]),Je(2)}catch{p&&p("Error","Fallo al conectar con Facebook API.","error")}finally{Oe(X=>({...X,connecting:!1}))}},Va=async X=>{At(X);try{const rt=await(await fetch(`/api/meta.php?action=forms&account_id=${X}`)).json();st(rt.data||[]),Je(3)}catch(_e){console.error(_e)}},Ll=X=>{const _e=qe.selectedForms||[],rt=_e.includes(X)?_e.filter(Mt=>Mt!==X):[..._e,X];Oe({...qe,selectedForms:rt})},Wd=async()=>{Oe(_e=>({..._e,connecting:!0}));const X={...qe,connected:!0,connecting:!1,pageId:"1029384756",adAccount:ft};await Vn("meta",X),Oe(X),Je(1),p&&p("Meta Ads Conectado","Cuenta y formularios vinculados correctamente.","success")},ra=async X=>{X.preventDefault(),Le(rt=>({...rt,connecting:!0}));const _e={...Fe,connected:!0,connecting:!1};await Vn("whatsapp_config",_e),Le(_e),p&&p("WhatsApp Conectado","Nmero vinculado exitosamente.","success")},pr=async X=>{X.preventDefault(),je(rt=>({...rt,connecting:!0}));const _e={...ae,connected:!0,connecting:!1};await Vn("ai",_e),je(_e),p&&p("AI Conectado","Asistente Inteligente activo.","success")},js=async()=>{if(!ae.apiKey){p&&p("Error","Ingresa una API Key primero.","warning");return}je(X=>({...X,connecting:!0}));try{const _e=await(await fetch("/api/test_ai.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:ae.provider,apiKey:ae.apiKey,model:ae.model})})).text();let rt;try{rt=JSON.parse(_e)}catch{throw console.error("Non-JSON response:",_e),new Error(`Respuesta invlida del servidor (posible error PHP): ${_e.substring(0,100)}...`)}rt.success?p&&p("Conexin Exitosa",rt.message,"success"):p&&p("Error de Conexin",rt.error||"Fallo desconocido","error")}catch(X){console.error(X),p&&p("Error",X.message||"No se pudo contactar al servidor de prueba.","error")}finally{je(X=>({...X,connecting:!1}))}},qd=async X=>{X.preventDefault(),Ye(rt=>({...rt,connecting:!0}));const _e={...Ze,connected:!0,connecting:!1};await Vn("n8n",_e),Ye(_e),p&&p("n8n Webhook Activo","Flujo de automatizacin conectado.","success")},sp=async X=>{X.preventDefault(),Re(rt=>({...rt,connecting:!0}));const _e={...pe,connected:!0,connecting:!1};await Vn("make",_e),Re(_e),p&&p("Make Conectado","Webhook de Integromat activo.","success")},op=async X=>{X.preventDefault();const rt={connected:!0,allowedOrigins:pt.allowedOrigins.map(Mt=>Mt.trim()).filter(Mt=>Mt.length>0)};await Vn("website_forms",rt),en(rt),p&&p("Webhooks Activos","Formularios del sitio vinculados correctamente.","success")},Ga=async X=>{X.preventDefault(),ht(_e=>({..._e,connecting:!0}));try{const{api:_e}=await Et(async()=>{const{api:rt}=await Promise.resolve().then(()=>Ot);return{api:rt}},void 0,import.meta.url);await _e.settings.saveEmailConfig(String((t==null?void 0:t.id)||"1"),un),p&&p("Configuracin Guardada","Tus credenciales de email se actualizaron.","success")}catch{p&&p("Error","No se pudo guardar la configuracin.","error")}finally{ht(_e=>({..._e,connecting:!1}))}},Ud=async()=>{ht(X=>({...X,connecting:!0}));try{const{api:X}=await Et(async()=>{const{api:rt}=await Promise.resolve().then(()=>Ot);return{api:rt}},void 0,import.meta.url),_e=await X.settings.testEmailConfig(String((t==null?void 0:t.id)||"1"),un);_e.success?p&&p("Conexin Exitosa!","El servidor SMTP respondi correctamente. Tus credenciales son vlidas.","success"):p&&p("Fallo de Conexin",`El servidor rechaz la conexin: ${_e.error||"Verifique host, puerto y credenciales."}`,"error")}catch{p&&p("Error de Sistema","Ocurri un error inesperado al probar la conexin.","error")}finally{ht(X=>({...X,connecting:!1}))}},Vd=()=>{if(!u)return;const X=Math.floor(Math.random()*1e3),_e={id:`meta_${Date.now()}`,name:`Cliente Facebook ${X}`,company:"Usuario Meta Ads",email:`fb.user.${X}@example.com`,phone:`+52 55 ${Math.floor(Math.random()*9e7)+1e7}`,status:ot.NEW,source:xd.META_ADS,owner:"Sin asignar",createdAt:new Date().toISOString(),lastActivity:"Ahora",tags:["Meta Ads","Lead Form"],value:0,probability:20,notes:[{id:`n_${Date.now()}`,content:'Lead importado automticamente desde formulario "Campaa Verano 2024".',createdAt:"Ahora",author:"Meta Integration"}],history:[]};u(_e),p&&p("Simulacin Exitosa","Lead de prueba inyectado.","info",_e.id)},Il=async()=>{if(!f)return;Js("running"),Ua(["Iniciando diagnstico del sistema...","Verificando servicios de automatizacin... OK"]);const X="auto test user";await new Promise(_e=>setTimeout(_e,800)),Ua(_e=>[..._e,`Paso 1: Enviando lead real al Webhook (${X})...`]);try{const rt=await(await fetch("/api/webhook.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X,email:`e2e_${Date.now()}@test.com`,phone:"5512345678",source:"E2E_DIAGNOSTIC",value:1e3,note:"Creado por Diagnstico de Sistema"})})).json();if(!rt.success)throw new Error(rt.error||"Webhook failed");Ua($t=>[...$t,` Webhook 200 OK (ID: ${rt.id})`]);const{api:Mt}=await Et(async()=>{const{api:$t}=await Promise.resolve().then(()=>Ot);return{api:$t}},void 0,import.meta.url),Lt=await Mt.contacts.list();f(Lt),await new Promise($t=>setTimeout($t,800)),Ua($t=>[...$t,"Paso 2: Verificando persistencia en DB... OK"]),await new Promise($t=>setTimeout($t,500)),Ua($t=>[...$t,"Paso 3: Verificando flujo de ventas..."]),Ua($t=>[...$t," Lead asignado a Inbox"]),Js("success"),Ua($t=>[...$t,"RESULTADO: DIAGNSTICO EXITOSO. El sistema integra datos externos correctamente."]),p&&p("Diagnstico Completado","Webhook funcional y base de datos sincronizada.","success")}catch(_e){console.error(_e),Js("error"),Ua(rt=>[...rt,"ERROR: Fallo al conectar con Webhook API."]),p&&p("Error","Fallo en diagnstico.","error")}};return c.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto relative",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Configuracin Global"}),c.jsx("div",{className:"flex gap-6 border-b border-slate-200 mb-8 overflow-x-auto",children:["company","team","pipeline","features","distribution","integrations","email","system"].map(X=>c.jsx("button",{onClick:()=>j(X),className:`pb-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap capitalize ${N===X?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:X==="integrations"?"Integraciones":X==="company"?"Empresa":X==="team"?"Equipo":X==="pipeline"?"Pipeline":X==="distribution"?"Asignacin":X==="email"?"Email":X==="features"?"Funcionalidades":X==="system"?"Sistema & Dev":X},X))}),N==="features"&&y&&c.jsxs("div",{className:"max-w-3xl animate-in fade-in duration-300 space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Funcionalidades del Sistema"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Activa o desactiva mdulos segn las necesidades de tu operacin."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex items-start justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-blue-600",children:c.jsx(gi,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Cliente de Correo"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1 max-w-xs",children:"Enviar y recibir emails directamente desde el CRM. Incluye plantillas y tracking."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:y.enableEmail,onChange:()=>Ss("enableEmail")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex items-start justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"bg-green-50 p-3 rounded-lg text-green-600",children:c.jsx(Wf,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"WhatsApp Inbox"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1 max-w-xs",children:"Gestin de conversaciones de WhatsApp Business API, plantillas y archivos multimedia."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:y.enableWhatsApp,onChange:()=>Ss("enableWhatsApp")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex items-start justify-between",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"bg-purple-50 p-3 rounded-lg text-purple-600",children:c.jsx(_f,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Inteligencia Artificial"}),c.jsx("p",{className:"text-sm text-slate-500 mt-1 max-w-xs",children:"Mtricas de rendimiento de IA, auto-respuestas y anlisis de conversaciones."})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",className:"sr-only peer",checked:y.enableAI,onChange:()=>Ss("enableAI")}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),N==="company"&&c.jsxs("div",{className:"max-w-3xl animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Perfil de Empresa"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Personaliza la identidad de tu CRM. Estos datos aparecen en reportes y el sidebar."})]}),c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-lg flex items-center justify-center border border-slate-200 overflow-hidden",children:o.logoUrl?c.jsx("img",{src:o.logoUrl,alt:"Logo",className:"w-full h-full object-cover"}):c.jsx(xx,{className:"text-slate-400",size:32})})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-5",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre de la Empresa"}),c.jsxs("div",{className:"relative",children:[c.jsx(xx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"text","aria-label":"Nombre de la Empresa",value:o.name,onChange:X=>l({...o,name:X.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"URL del Logo (Imagen)"}),c.jsx("input",{type:"text",placeholder:"https://...","aria-label":"URL del Logo",value:o.logoUrl,onChange:X=>l({...o,logoUrl:X.target.value}),className:"w-full px-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Sitio Web"}),c.jsxs("div",{className:"relative",children:[c.jsx(el,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"text","aria-label":"Sitio Web",value:o.website,onChange:X=>l({...o,website:X.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Industria"}),c.jsx("input",{type:"text","aria-label":"Industria",value:o.industry,onChange:X=>l({...o,industry:X.target.value}),className:"w-full px-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Moneda Base"}),c.jsxs("div",{className:"relative",children:[c.jsx(eD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsxs("select",{value:o.currency,"aria-label":"Moneda Base",onChange:X=>l({...o,currency:X.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"MXN",children:"MXN ($)"}),c.jsx("option",{value:"CRC",children:"CRC ()"}),c.jsx("option",{value:"COP",children:"COP ($)"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"RFC / Tax ID"}),c.jsx("input",{type:"text","aria-label":"RFC / Tax ID",value:o.taxId||"",onChange:X=>l({...o,taxId:X.target.value}),className:"w-full px-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Direccin Fiscal"}),c.jsxs("div",{className:"relative",children:[c.jsx($u,{className:"absolute left-3 top-3 text-slate-400",size:18}),c.jsx("textarea",{rows:3,"aria-label":"Direccin Fiscal",value:o.address||"",onChange:X=>l({...o,address:X.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{onClick:Xs,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 shadow-sm transition-colors",children:"Guardar Cambios"})})]})]}),N==="team"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Equipo & Permisos"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Gestiona el acceso y roles de tus colaboradores."})]}),nu&&c.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[c.jsx(iD,{size:16}),"Agregar Miembro"]})]}),c.jsx("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Rol"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Leads Activos"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Accin"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(X=>c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:X.name.substring(0,2).toUpperCase()}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-900",children:X.name}),c.jsx("p",{className:"text-xs text-slate-500",children:X.email})]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium w-fit",children:[c.jsx(iy,{size:12})," ",X.role]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"text-green-600 text-xs font-medium bg-green-50 px-2 py-1 rounded",children:X.status})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"text-slate-700 font-bold text-sm bg-slate-100 px-2 py-0.5 rounded",children:Tl(X.name)})}),c.jsxs("td",{className:"px-6 py-4 flex gap-2",children:[c.jsx("button",{onClick:()=>au(X),className:"text-slate-400 hover:text-blue-600 text-sm font-medium",title:"Transferir Cartera",children:c.jsx(_E,{size:16})}),((t==null?void 0:t.role)==="MANAGER"||(t==null?void 0:t.role)==="SUPPORT")&&c.jsx("button",{onClick:()=>{F(X),le(!0)},className:"text-slate-400 hover:text-amber-500 text-sm font-medium",title:"Cambiar Contrasea",children:c.jsx(ca,{size:16})}),X.role!=="Admin"&&c.jsx("button",{onClick:()=>zd(X.id,X.name),className:"text-slate-400 hover:text-red-600 text-sm font-medium",title:"Eliminar Usuario",children:c.jsx(Ra,{size:16})})]})]},X.id))})]})})})]}),N==="pipeline"&&c.jsx(DCe,{onNotify:p}),N==="distribution"&&c.jsx("div",{className:"space-y-6",children:c.jsx("div",{className:"flex flex-col gap-6",children:c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:c.jsx(ZU,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-900",children:"Lgica de Asignacin Automtica"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Define cmo se distribuyen los nuevos leads."})]})]}),c.jsxs("label",{className:"flex items-center cursor-pointer",children:[c.jsx("span",{className:"mr-3 text-sm font-medium text-slate-700",children:r.enabled?"Activado":"Desactivado"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"checkbox",className:"sr-only",checked:r.enabled,onChange:()=>ta({...r,enabled:!r.enabled})}),c.jsx("div",{className:`block w-10 h-6 rounded-full transition-colors ${r.enabled?"bg-green-500":"bg-slate-300"}`}),c.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${r.enabled?"transform translate-x-4":""}`})]})]})]}),c.jsxs("div",{className:`grid md:grid-cols-2 gap-4 ${r.enabled?"":"opacity-50 pointer-events-none"}`,children:[c.jsxs("div",{onClick:()=>ta({...r,method:"round_robin"}),className:`cursor-pointer p-4 rounded-xl border-2 transition-all flex flex-col gap-2 ${r.method==="round_robin"?"border-blue-600 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg w-fit",children:c.jsx(vx,{size:20})}),r.method==="round_robin"&&c.jsx(sa,{size:20,className:"text-blue-600"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Round Robin (Rotativo)"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Asigna leads uno por uno secuencialmente a cada vendedor disponible. Ideal para equipos de venta rpida."})]})]}),c.jsxs("div",{onClick:()=>ta({...r,method:"load_balanced"}),className:`cursor-pointer p-4 rounded-xl border-2 transition-all flex flex-col gap-2 ${r.method==="load_balanced"?"border-blue-600 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg w-fit",children:c.jsx(Bc,{size:20})}),r.method==="load_balanced"&&c.jsx(sa,{size:20,className:"text-blue-600"})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Balanceo de Carga"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Asigna el lead al vendedor con menos leads activos en su pipeline. Evita la saturacin."})]})]})]})]})})}),N==="integrations"&&c.jsxs("div",{className:"space-y-10",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Ecosistema de Integraciones"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-4 border-b border-slate-100 pb-2",children:[c.jsxs("h4",{className:"text-md font-bold text-slate-800 flex items-center gap-2",children:[c.jsx("span",{className:"bg-green-100 text-green-700 p-1 rounded text-xs",children:"ENTRADA"}),"Fuentes de Captacin"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Conecta tus canales de trfico (Web, Redes Sociales) para recibir leads automticamente."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:gS.filter(X=>["Meta Ads Manager","WhatsApp Business API","Formularios del Sitio (Webhook)"].includes(X.name)).map(X=>{let _e=X.status==="Connected",rt=()=>{},Mt="meta";return X.name==="Meta Ads Manager"?(_e=qe.connected||X.status==="Connected",rt=()=>Ke(!0),Mt="meta"):X.name==="WhatsApp Business API"?(_e=Fe.connected,rt=()=>Se(!0),Mt="whatsapp"):X.name==="Formularios del Sitio (Webhook)"&&(_e=pt.connected||X.status==="Connected",rt=()=>Pt(!0),Mt="website"),c.jsxs("div",{className:"bg-white p-5 border border-slate-200 rounded-xl shadow-sm flex justify-between items-center group hover:border-blue-300 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${_e?"bg-green-50 text-green-600":"bg-slate-100 text-slate-400"}`,children:[X.icon==="Facebook"&&c.jsx($w,{size:24}),X.icon==="MessageSquare"&&c.jsx(Wf,{size:24}),X.icon==="Globe"&&c.jsx(el,{size:24})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-semibold text-slate-900",children:X.name}),c.jsx("button",{onClick:Lt=>{Lt.stopPropagation(),Qi(Mt)},className:"text-slate-400 hover:text-blue-600 transition-colors",children:c.jsx(xv,{size:16})})]}),c.jsx("div",{className:"flex items-center gap-2 mt-1",children:_e?c.jsx("span",{className:"text-xs text-green-600 font-medium bg-green-50 px-2 py-0.5 rounded-full",children:"Activo"}):c.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Inactivo"})})]})]}),c.jsx("button",{onClick:rt,className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${_e?"bg-slate-50 text-slate-600 hover:bg-slate-100":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm"}`,children:_e?"Configurar":"Conectar"})]},X.name)})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-4 border-b border-slate-100 pb-2",children:[c.jsxs("h4",{className:"text-md font-bold text-slate-800 flex items-center gap-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-700 p-1 rounded text-xs",children:"SALIDA"}),"Automatizacin y Flujos"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Enva datos a herramientas externas (n8n, Make) cuando ocurren eventos en el CRM."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:gS.filter(X=>["n8n Automatizacin","Make (Integromat)"].includes(X.name)).map(X=>{let _e=X.status==="Connected",rt=()=>{},Mt="n8n";return X.name==="n8n Automatizacin"?(_e=Ze.connected||X.status==="Connected",rt=()=>Ae(!0),Mt="n8n"):X.name==="Make (Integromat)"&&(_e=pe.connected||X.status==="Connected",rt=()=>Kt(!0),Mt="make"),c.jsxs("div",{className:"bg-white p-5 border border-slate-200 rounded-xl shadow-sm flex justify-between items-center group hover:border-cyan-300 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${_e?"bg-cyan-50 text-cyan-600":"bg-slate-100 text-slate-400"}`,children:[X.icon==="Workflow"&&c.jsx(yx,{size:24}),X.icon==="Zap"&&c.jsx(o0,{size:24})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-semibold text-slate-900",children:X.name}),c.jsx("button",{onClick:Lt=>{Lt.stopPropagation(),Qi(Mt)},className:"text-slate-400 hover:text-cyan-600 transition-colors",children:c.jsx(xv,{size:16})})]}),c.jsx("div",{className:"flex items-center gap-2 mt-1",children:_e?c.jsx("span",{className:"text-xs text-cyan-600 font-medium bg-cyan-50 px-2 py-0.5 rounded-full",children:"Activo"}):c.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Inactivo"})})]})]}),c.jsx("button",{onClick:rt,className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${_e?"bg-slate-50 text-slate-600 hover:bg-slate-100":"bg-slate-900 text-white hover:bg-slate-800 shadow-sm"}`,children:_e?"Configurar":"Conectar"})]},X.name)})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"mb-4 border-b border-slate-100 pb-2",children:[c.jsxs("h4",{className:"text-md font-bold text-slate-800 flex items-center gap-2",children:[c.jsx("span",{className:"bg-purple-100 text-purple-700 p-1 rounded text-xs",children:"INTERNO"}),"Inteligencia Artificial"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Potencia tu productividad con asistentes internos para redaccin y anlisis."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:gS.filter(X=>["AI Assistant"].includes(X.name)).map(X=>{let _e=X.status==="Connected",rt=()=>{};return X.name==="AI Assistant"&&(_e=ae.connected,rt=()=>ve(!0)),c.jsxs("div",{className:"bg-white p-5 border border-slate-200 rounded-xl shadow-sm flex justify-between items-center group hover:border-purple-300 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${_e?"bg-purple-50 text-purple-600":"bg-slate-100 text-slate-400"}`,children:X.icon==="Bot"&&c.jsx(_f,{size:24})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-slate-900",children:X.name}),c.jsx("div",{className:"flex items-center gap-2 mt-1",children:_e?c.jsx("span",{className:"text-xs text-purple-600 font-medium bg-purple-50 px-2 py-0.5 rounded-full",children:"Activo"}):c.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"Inactivo"})})]})]}),c.jsx("button",{onClick:rt,className:`px-4 py-2 text-xs font-bold rounded-lg transition-colors ${_e?"bg-slate-50 text-slate-600 hover:bg-slate-100":"bg-purple-600 text-white hover:bg-purple-700 shadow-sm"}`,children:_e?"Configurar":"Conectar"})]},X.name)})})]})]}),V&&H.fromUser&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-900",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(_E,{size:24})}),c.jsx("h3",{className:"text-lg font-bold",children:"Transferir Cartera"})]}),c.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Ests a punto de reasignar los leads de ",c.jsx("b",{children:H.fromUser.name}),".",c.jsx("br",{}),"Actualmente tiene ",c.jsxs("span",{className:"font-bold bg-slate-100 px-1 rounded",children:[Tl(H.fromUser.name)," leads activos"]}),"."]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Transferir a:"}),c.jsxs("select",{value:H.toUser,onChange:X=>Q({...H,toUser:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"Unassigned",children:"-- Sin Asignar (Pool General) --"}),e.filter(X=>{var _e;return X.id!==((_e=H.fromUser)==null?void 0:_e.id)&&X.role==="Sales"}).map(X=>c.jsx("option",{value:X.name,children:X.name},X.id))]})]}),H.deleteAfter&&c.jsxs("div",{className:"bg-red-50 border border-red-100 p-3 rounded text-sm text-red-700 flex items-center gap-2",children:[c.jsx(bo,{size:16}),c.jsx("span",{children:"Se eliminar al usuario tras la transferencia."})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:Fd,className:"flex-1 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700",children:"Confirmar Transferencia"})]})]})]})}),fe&&L&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4 text-amber-600",children:[c.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:c.jsx(ca,{size:24})}),c.jsx("h3",{className:"text-lg font-bold",children:"Cambiar Contrasea"})]}),c.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Establece una nueva contrasea para ",c.jsx("b",{children:L.name}),"."]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nueva Contrasea"}),c.jsx("input",{type:"password",value:G,onChange:X=>ee(X.target.value),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Mnimo 8 caracteres"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Confirmar Contrasea"}),c.jsx("input",{type:"password",value:ie,onChange:X=>se(X.target.value),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Repite la contrasea"})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{onClick:()=>{le(!1),F(null)},className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:iu,disabled:!G||G.length<8||G!==ie,className:"flex-1 py-2 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Actualizar"})]})]})]})}),E&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Invitar Miembro"}),c.jsxs("form",{onSubmit:ru,className:"space-y-4",children:[c.jsx("input",{required:!0,type:"text",value:P.name,onChange:X=>T({...P,name:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Nombre"}),c.jsx("input",{required:!0,type:"email",value:P.email,onChange:X=>T({...P,email:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Email"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rol"}),c.jsx("select",{value:P.role,onChange:X=>T({...P,role:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg outline-none focus:ring-2 focus:ring-blue-500",children:Rd.map(X=>c.jsx("option",{value:X,children:$d[X]??X},X))})]}),c.jsxs("div",{className:"w-full bg-slate-50 border border-slate-200 rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(dN,{size:16,className:"text-slate-600"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Generar contrasea automticamente"})]}),c.jsx("input",{type:"checkbox",checked:I,onChange:X=>{const _e=X.target.checked;k(_e),_e&&R(Di())},className:"h-4 w-4"})]}),c.jsx("div",{className:"mt-3",children:I?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:D?"text":"password",value:O,readOnly:!0,className:"flex-1 px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg outline-none"}),c.jsx("button",{type:"button",onClick:()=>B(X=>!X),className:"px-3 py-2 border border-slate-300 rounded-lg text-slate-700 bg-white hover:bg-slate-100",children:c.jsx(Xu,{size:16})}),c.jsx("button",{type:"button",onClick:()=>navigator.clipboard&&O&&navigator.clipboard.writeText(O),className:"px-3 py-2 border border-slate-300 rounded-lg text-slate-700 bg-white hover:bg-slate-100",children:c.jsx(Rw,{size:16})})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{required:!0,type:D?"text":"password",value:O,onChange:X=>R(X.target.value),className:"flex-1 px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg outline-none",placeholder:"Contrasea"}),c.jsx("button",{type:"button",onClick:()=>B(X=>!X),className:"px-3 py-2 border border-slate-300 rounded-lg text-slate-700 bg-white hover:bg-slate-100",children:c.jsx(Xu,{size:16})})]})})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200 bg-white",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700",children:"Enviar"})]})]})]})}),ye&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:we?"Editar Plantilla":"Nueva Plantilla"}),c.jsxs("form",{onSubmit:Ml,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre (Interno)"}),c.jsx("input",{required:!0,type:"text",value:de.name,onChange:X=>$e({...de,name:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Bienvenida V2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asunto del Correo"}),c.jsx("input",{required:!0,type:"text",value:de.subject,onChange:X=>$e({...de,subject:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Bienvenido a..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cuerpo del Mensaje"}),c.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:["{{name}}","{{email}}","{{phone}}","{{company}}","{{user_name}}","{{user_email}}"].map(X=>c.jsx("button",{type:"button",onClick:()=>$e(_e=>({..._e,body:_e.body+(_e.body?" ":"")+X})),className:"text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 px-2 py-1 rounded border border-slate-200 transition-colors",title:"Clic para insertar",children:X},X))}),c.jsx("textarea",{required:!0,rows:6,value:de.body,onChange:X=>$e({...de,body:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm",placeholder:"Hola {{name}}..."}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Haga clic en una variable para insertarla al final."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Categora"}),c.jsxs("select",{value:de.category,onChange:X=>$e({...de,category:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"Sales",children:"Ventas"}),c.jsx("option",{value:"Marketing",children:"Marketing"}),c.jsx("option",{value:"Support",children:"Soporte"}),c.jsx("option",{value:"Follow-up",children:"Seguimiento"}),c.jsx("option",{value:"System",children:"Sistema"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>oe(!1),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200 bg-white",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Guardar"})]})]})]})}),xa.open&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[c.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[c.jsx(ug,{size:20,className:"text-blue-600"}),xa.title]}),c.jsx("button",{onClick:()=>qa({...xa,open:!1}),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("div",{className:"p-6",children:xa.content}),c.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-200 text-right",children:c.jsx("button",{onClick:()=>qa({...xa,open:!1}),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold hover:bg-blue-700",children:"Entendido"})})]})}),he&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx($w,{size:28,className:"text-blue-600"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Configuracin Meta Lead Ads"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Conecta tu cuenta publicitaria para recibir leads."})]})]}),c.jsx("button",{onClick:()=>Ke(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("div",{className:"p-6 overflow-y-auto",children:qe.connected?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[c.jsx(sa,{className:"text-green-600",size:24}),c.jsxs("div",{children:[c.jsx("h5",{className:"font-bold text-green-800 text-sm",children:"Cuenta Conectada!"}),c.jsxs("p",{className:"text-xs text-green-700",children:["Se estn sincronizando leads de la pgina ",c.jsxs("b",{children:['"',w,' Tech Demo"']}),"."]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"Mapeo de Campos (Automtico)"}),c.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-100 space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"full_name"}),c.jsx("span",{className:"text-blue-600 font-mono",children:" Contact.Name"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"email"}),c.jsx("span",{className:"text-blue-600 font-mono",children:" Contact.Email"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"phone_number"}),c.jsx("span",{className:"text-blue-600 font-mono",children:" Contact.Phone"})]})]})]}),c.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[c.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-2",children:"Herramientas de Diagnstico"}),c.jsxs("button",{onClick:Vd,className:"w-full py-3 bg-white border-2 border-dashed border-blue-200 text-blue-600 font-bold rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-all flex items-center justify-center gap-2",children:[c.jsx(qf,{size:18,fill:"currentColor"})," Simular Lead de Prueba (Webhook)"]}),c.jsx("p",{className:"text-xs text-center text-slate-400 mt-2",children:"Esto inyectar un lead ficticio en el CRM como si viniera de una campaa real."})]}),c.jsx("div",{className:"pt-2 border-t border-slate-100 flex justify-center",children:c.jsxs("button",{onClick:()=>{Oe(X=>({...X,connected:!1})),Je(1)},className:"text-xs text-red-500 hover:text-red-700 font-medium hover:underline flex items-center gap-1",children:[c.jsx(Ra,{size:12})," Desconectar y Reconfigurar"]})})]}):c.jsxs(c.Fragment,{children:[it===1&&c.jsxs("div",{className:"space-y-6 text-center py-4",children:[c.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4",children:c.jsx($w,{size:32,className:"text-blue-600"})}),c.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Conectar con Facebook"}),c.jsxs("div",{className:"text-left max-w-sm mx-auto mb-6 bg-slate-50 p-3 rounded border border-slate-200",children:[c.jsx("label",{className:"block text-xs font-bold text-slate-700 uppercase mb-1",children:"Verify Token (Configuracin)"}),c.jsx("input",{type:"text",value:qe.verifyToken,onChange:X=>Oe({...qe,verifyToken:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded font-mono text-sm mb-1"}),c.jsx("p",{className:"text-[10px] text-slate-500",children:'Use este token en el campo "Verify Token" de su App en Meta.'})]}),c.jsx("button",{onClick:Hd,disabled:qe.connecting,className:"w-full bg-[#1877F2] hover:bg-[#166fe5] text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-all",children:qe.connecting?c.jsxs(c.Fragment,{children:[c.jsx(fi,{size:18,className:"animate-spin"})," Autenticando..."]}):c.jsx(c.Fragment,{children:"Continuar con Facebook"})})]}),it===2&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Selecciona tu Cuenta Publicitaria"}),c.jsx("div",{className:"space-y-2",children:ge.map(X=>c.jsxs("button",{onClick:()=>Va(X.id),className:"w-full p-4 border border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 text-left flex justify-between items-center group transition-all",children:[c.jsx("span",{className:"font-medium text-slate-800",children:X.name}),c.jsx("span",{className:"text-xs text-slate-400 group-hover:text-blue-600",children:X.id})]},X.id))}),c.jsx("button",{onClick:()=>Je(1),className:"text-sm text-slate-500 hover:underline",children:"Volver"})]}),it===3&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Selecciona los Formularios"}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Elige qu formularios enviarn leads a ",w,"."]}),c.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:ut.map(X=>{const _e=(qe.selectedForms||[]).includes(X.id);return c.jsx("div",{onClick:()=>Ll(X.id),className:`w-full p-3 border rounded-lg cursor-pointer flex items-center justify-between transition-all ${_e?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center ${_e?"bg-blue-600 border-blue-600":"border-slate-300 bg-white"}`,children:_e&&c.jsx(sa,{size:14,className:"text-white"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-800",children:X.name}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${X.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:X.status})]})]})},X.id)})}),c.jsxs("div",{className:"pt-4 flex gap-3",children:[c.jsx("button",{onClick:()=>Je(2),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200",children:"Atrs"}),c.jsx("button",{onClick:Wd,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold",children:"Guardar y Conectar"})]})]}),c.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"Utilizamos la API oficial de Meta Graph. Tus datos estn seguros."})]})})]})}),Rt&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Wf,{size:28,className:"text-green-600"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Configuracin WhatsApp API"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Vincula tu cuenta de WhatsApp Business Platform."})]})]}),c.jsx("button",{onClick:()=>Se(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("form",{onSubmit:ra,className:"p-6 space-y-4",children:Fe.connected?c.jsxs("div",{className:"text-center py-6",children:[c.jsx(sa,{size:48,className:"text-green-500 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"WhatsApp Vinculado"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Tu nmero +52 1 55... est activo y recibiendo mensajes."}),c.jsx("button",{type:"button",onClick:()=>Le({...Fe,connected:!1}),className:"text-red-600 text-sm hover:underline",children:"Desconectar cuenta"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone Number ID"}),c.jsxs("div",{className:"relative",children:[c.jsx(nD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{required:!0,type:"text",value:Fe.phoneId,onChange:X=>Le({...Fe,phoneId:X.target.value}),className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"1029384756"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Permanent Access Token"}),c.jsxs("div",{className:"relative",children:[c.jsx(dN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{required:!0,type:"password",value:Fe.token,onChange:X=>Le({...Fe,token:X.target.value}),className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"EAAG..."})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:Fe.connecting,className:"w-full bg-green-600 text-white py-2 rounded-lg font-bold hover:bg-green-700 flex justify-center items-center gap-2",children:Fe.connecting?c.jsx(fi,{className:"animate-spin"}):"Verificar y Conectar"})})]})})]})}),dt&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(_f,{size:28,className:"text-blue-600"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Configuracin AI Assistant"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Potencia tu CRM con Inteligencia Artificial."})]})]}),c.jsx("button",{onClick:()=>ve(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("form",{onSubmit:pr,className:"p-6 space-y-4",children:ae.connected?c.jsxs("div",{className:"text-center py-6",children:[c.jsx(sa,{size:48,className:"text-blue-600 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"IA Conectada"}),c.jsxs("p",{className:"text-slate-500 text-sm mb-6",children:["Proveedor: ",ae.provider==="gemini"?"Google Gemini":"OpenAI"]}),c.jsx("button",{type:"button",onClick:()=>je({...ae,connected:!1}),className:"text-red-600 text-sm hover:underline",children:"Desconectar"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 text-xs text-blue-800 flex gap-2 items-start",children:[c.jsx(_f,{size:16,className:"flex-shrink-0"}),c.jsx("span",{children:"Selecciona tu proveedor de IA y configura tu API Key para habilitar funciones inteligentes."})]}),c.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg border border-slate-200",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-bold text-slate-700 block",children:"Agente de Auto-Respuesta"}),c.jsx("span",{className:"text-xs text-slate-500",children:"Permitir que la IA responda mensajes de WhatsApp automticamente."})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox","aria-label":"Toggle AI Agent",className:"sr-only peer",checked:ae.enabled||!1,onChange:X=>je({...ae,enabled:X.target.checked})}),c.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),ae.enabled&&c.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Instrucciones del Sistema (Prompt)"}),c.jsx("textarea",{rows:4,value:ae.prompt||"",onChange:X=>je({...ae,prompt:X.target.value}),"aria-label":"System Prompt",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm font-mono",placeholder:"Eres un agente de ventas experto en..."}),c.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Define la personalidad y objetivos del bot. Se inyectar contexto de productos automticamente."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"API Key"}),c.jsx("input",{required:!0,type:"password",value:ae.apiKey,onChange:X=>je({...ae,apiKey:X.target.value}),"aria-label":"API Key",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:ae.provider==="gemini"?"AIza...":"sk-..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Modelo"}),c.jsx("select",{value:ae.model,"aria-label":"Select AI Model",onChange:X=>je({...ae,model:X.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:ae.provider==="gemini"?c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"gemini-1.5-flash",children:"Gemini 1.5 Flash (Recomendado)"}),c.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"}),c.jsx("option",{value:"gemini-1.0-pro",children:"Gemini 1.0 Pro"})]}):c.jsxs(c.Fragment,{children:[c.jsx("option",{value:"gpt-4-turbo",children:"GPT-4 Turbo"}),c.jsx("option",{value:"gpt-4",children:"GPT-4"}),c.jsx("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"})]})})]}),c.jsxs("div",{className:"pt-2 flex gap-2",children:[c.jsx("button",{type:"button",onClick:js,disabled:ae.connecting,className:"flex-1 bg-slate-100 text-slate-700 py-2 rounded-lg font-medium hover:bg-slate-200 flex justify-center items-center gap-2",children:ae.connecting?c.jsx(fi,{size:16,className:"animate-spin"}):"Probar Conexin"}),c.jsx("button",{type:"submit",disabled:ae.connecting,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 flex justify-center items-center gap-2",children:"Guardar"})]})]})})]})}),Ie&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(yx,{size:28,className:"text-orange-500"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Automatizacin n8n"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Configura webhooks para eventos externos."})]})]}),c.jsx("button",{onClick:()=>Ae(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("form",{onSubmit:qd,className:"p-6 space-y-4",children:Ze.connected?c.jsxs("div",{className:"text-center py-6",children:[c.jsx(sa,{size:48,className:"text-orange-500 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"Webhook Activo"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6 max-w-xs mx-auto truncate",children:Ze.webhookUrl}),c.jsx("button",{type:"button",onClick:()=>Ye({...Ze,connected:!1}),className:"text-red-600 text-sm hover:underline",children:"Eliminar Webhook"})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-slate-600",children:"KiwLead enviar una notificacin POST a esta URL cada vez que un lead cambie de estado."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook URL Saliente"}),c.jsxs("div",{className:"relative",children:[c.jsx(el,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{required:!0,type:"url",value:Ze.webhookUrl,onChange:X=>Ye({...Ze,webhookUrl:X.target.value}),className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://mi-instancia-n8n.com/webhook/..."})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:Ze.connecting,className:"w-full bg-orange-500 text-white py-2 rounded-lg font-bold hover:bg-orange-600 flex justify-center items-center gap-2",children:Ze.connecting?c.jsx(fi,{className:"animate-spin"}):"Guardar y Activar"})})]})})]})}),tt&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-cyan-100 p-2 rounded-lg text-cyan-600",children:c.jsx(o0,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Make (Integromat)"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Automatizacin visual avanzada."})]})]}),c.jsx("button",{onClick:()=>Kt(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("form",{onSubmit:sp,className:"p-6 space-y-4",children:pe.connected?c.jsxs("div",{className:"text-center py-6",children:[c.jsx(sa,{size:48,className:"text-cyan-600 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"Conectado con Make"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6 max-w-xs mx-auto truncate",children:pe.webhookUrl}),c.jsx("button",{type:"button",onClick:()=>Re({...pe,connected:!1}),className:"text-red-600 text-sm hover:underline",children:"Desconectar"})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-slate-600",children:"Pega aqu tu Webhook URL de Make para enviar datos cuando ocurran eventos en el CRM."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Make Webhook URL"}),c.jsxs("div",{className:"relative",children:[c.jsx(el,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{required:!0,type:"url",value:pe.webhookUrl,onChange:X=>Re({...pe,webhookUrl:X.target.value}),className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://hook.us1.make.com/..."})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:pe.connecting,className:"w-full bg-cyan-600 text-white py-2 rounded-lg font-bold hover:bg-cyan-700 flex justify-center items-center gap-2",children:pe.connecting?c.jsx(fi,{className:"animate-spin"}):"Guardar Conexin"})})]})})]})}),lt&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:c.jsx(el,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Formularios del Sitio"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Conecta WordPress, Elementor, Contact Form 7 via Webhook."})]})]}),c.jsx("button",{onClick:()=>Pt(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsx("form",{onSubmit:op,className:"p-6 space-y-4",children:c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex border-b border-slate-200 mb-4",children:[c.jsx("button",{type:"button",onClick:()=>en(X=>({...X,tab:"config"})),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${!pt.tab||pt.tab==="config"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Configuracin Webhook"}),c.jsx("button",{type:"button",onClick:()=>en(X=>({...X,tab:"embed"})),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${pt.tab==="embed"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Generador de Formulario"})]}),(!pt.tab||pt.tab==="config")&&c.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("code",{className:"flex-1 bg-slate-50 p-3 rounded border border-slate-200 font-mono text-sm text-blue-600 overflow-x-auto",children:[window.location.origin,"/api/webhook.php"]}),c.jsx("button",{type:"button",onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/api/webhook.php`),className:"px-3 rounded bg-blue-50 text-blue-700 hover:bg-blue-100 text-xs font-bold",children:"Copiar"})]}),c.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Enva POST con campos: name, email, phone, company, value, note."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Dominios permitidos (opcional)"}),c.jsx("input",{type:"text",value:pt.allowedOrigins.join(", "),onChange:X=>en({...pt,allowedOrigins:X.target.value.split(",")}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"midominio.com, otro.com"}),c.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Solo aceptar leads desde estos orgenes si se especifican."})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 flex justify-center items-center gap-2",children:"Guardar Configuracin"})})]}),pt.tab==="embed"&&c.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Ttulo"}),c.jsx("input",{type:"text",value:$n.title,onChange:X=>ri({...$n,title:X.target.value}),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Botn"}),c.jsx("input",{type:"text",value:$n.buttonText,onChange:X=>ri({...$n,buttonText:X.target.value}),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Color Primario"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"color",value:$n.primaryColor,onChange:X=>ri({...$n,primaryColor:X.target.value}),className:"h-8 w-12 p-0 border border-slate-300 rounded cursor-pointer"}),c.jsx("input",{type:"text",value:$n.primaryColor,onChange:X=>ri({...$n,primaryColor:X.target.value}),className:"flex-1 px-2 py-1.5 border border-slate-300 rounded text-sm uppercase"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Campaa (UTM)"}),c.jsx("input",{type:"text",value:$n.campaign,onChange:X=>ri({...$n,campaign:X.target.value}),className:"w-full px-2 py-1.5 border border-slate-300 rounded text-sm"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Cdigo para copiar"}),c.jsx("textarea",{readOnly:!0,value:ea(),className:"w-full h-32 p-3 bg-slate-900 text-green-400 font-mono text-xs rounded-lg resize-none focus:outline-none"}),c.jsx("button",{type:"button",onClick:()=>navigator.clipboard.writeText(ea()),className:"absolute top-6 right-2 px-2 py-1 bg-slate-700 text-white text-xs rounded hover:bg-slate-600",children:"Copiar"})]})]}),pt.connected&&(!pt.tab||pt.tab==="config")&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{type:"button",onClick:()=>en({connected:!1,allowedOrigins:[]}),className:"text-red-600 text-sm hover:underline",children:"Desconectar"})})]})})]})}),N==="email"&&c.jsxs("div",{className:"animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex gap-6 border-b border-slate-200 mb-6",children:[c.jsx("button",{onClick:()=>Y("config"),className:`pb-3 px-1 text-sm font-medium transition-colors border-b-2 ${He==="config"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Configuracin SMTP"}),c.jsx("button",{onClick:()=>Y("templates"),className:`pb-3 px-1 text-sm font-medium transition-colors border-b-2 ${He==="templates"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Plantillas de Correo"}),c.jsx("button",{onClick:()=>Y("branding"),className:`pb-3 px-1 text-sm font-medium transition-colors border-b-2 ${He==="branding"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Marca y Estilo"})]}),He==="config"&&c.jsxs("div",{className:"max-w-3xl animate-in fade-in slide-in-from-left-4 duration-300",children:[c.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[c.jsx(gi,{size:20,className:"text-blue-600"}),"Configuracin de Correo del Sistema"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Define el servidor SMTP que utilizar el CRM para enviar notificaciones automticas (recuperacin de contraseas, alertas de tareas, reportes diarios)."})]}),c.jsxs("button",{onClick:()=>Jn(!jn),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${jn?"bg-slate-100 text-slate-600 hover:bg-slate-200 border border-slate-200":"bg-orange-50 text-orange-700 border border-orange-200 hover:bg-orange-100"}`,children:[jn?c.jsx(ca,{size:16}):c.jsx(aV,{size:16}),jn?"Desbloquear Edicin":"Modo Edicin Activo"]})]}),!jn&&c.jsxs("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4 flex items-start gap-3",children:[c.jsx(bo,{className:"text-orange-600 shrink-0 mt-0.5",size:18}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-bold text-orange-800",children:"Precaucin"}),c.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Modificar estos valores puede interrumpir el envo de correos crticos del sistema. Asegrate de verificar la conexin despus de guardar."})]})]}),c.jsxs("form",{onSubmit:Ga,className:"space-y-6",children:[c.jsxs("div",{className:`bg-white p-6 rounded-xl border shadow-sm space-y-6 transition-all ${jn?"border-slate-200 opacity-90":"border-blue-200 ring-1 ring-blue-100"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx(hN,{size:16,className:"text-slate-400"}),"Servidor de Salida (SMTP)"]}),c.jsx("button",{type:"button",onClick:()=>yi(!0),className:"text-slate-400 hover:text-blue-600 transition-colors",title:"Ver configuracin recomendada",children:c.jsx(xv,{size:18})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Servidor SMTP"}),c.jsx("input",{type:"text",required:!0,disabled:jn,placeholder:"smtp.gmail.com",value:un.smtp_host,onChange:X=>ht({...un,smtp_host:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Puerto"}),c.jsx("input",{type:"number",required:!0,disabled:jn,placeholder:"587",value:un.smtp_port,onChange:X=>ht({...un,smtp_port:parseInt(X.target.value)}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Usuario / Email"}),c.jsx("input",{type:"email",required:!0,disabled:jn,placeholder:"sistema@empresa.com",value:un.smtp_user,onChange:X=>ht({...un,smtp_user:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Contrasea"}),c.jsx("div",{className:"relative",children:c.jsx("input",{type:"password",required:!0,disabled:jn,placeholder:jn?"":"Contrasea de aplicacin",value:un.smtp_pass,onChange:X=>ht({...un,smtp_pass:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"})})]})]})]}),c.jsxs("div",{className:`bg-white p-6 rounded-xl border shadow-sm space-y-6 transition-all ${jn?"border-slate-200 opacity-90":"border-blue-200 ring-1 ring-blue-100"}`,children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider mb-2 flex items-center gap-2",children:[c.jsx(Ou,{size:16,className:"text-slate-400"}),"Identidad del Remitente"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Nombre a mostrar"}),c.jsx("input",{type:"text",required:!0,disabled:jn,placeholder:`${w} System`,value:un.from_name,onChange:X=>ht({...un,from_name:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"}),c.jsx("p",{className:"text-[10px] text-slate-400",children:'Ej: "Soporte Tcnico" o "Notificaciones"'})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Email de remitente"}),c.jsx("input",{type:"email",required:!0,disabled:jn,placeholder:"no-reply@empresa.com",value:un.from_email,onChange:X=>ht({...un,from_email:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500"})]})]})]}),c.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[c.jsxs("button",{type:"button",onClick:Ud,disabled:un.connecting,className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 font-medium transition-colors flex items-center gap-2",children:[un.connecting?c.jsx(fi,{size:16,className:"animate-spin"}):c.jsx(qf,{size:16}),"Probar Conexin"]}),!jn&&c.jsxs("button",{type:"submit",disabled:un.connecting,className:"px-8 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-lg shadow-blue-100 transition-all flex items-center gap-2 animate-in fade-in zoom-in duration-300",children:[un.connecting?c.jsx(fi,{size:16,className:"animate-spin"}):c.jsx(fN,{size:16}),"Guardar Configuracin"]})]})]})]}),He==="templates"&&c.jsxs("div",{className:"max-w-5xl animate-in fade-in slide-in-from-right-4 duration-300",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Plantillas de Respuesta"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Crea plantillas predefinidas para responder rpidamente a tus leads."})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:Bd,className:"bg-white text-slate-600 border border-slate-200 px-4 py-2 rounded-lg text-sm font-medium hover:bg-slate-50 transition-colors flex items-center gap-2",title:"Restaurar plantillas por defecto",children:[c.jsx(JU,{size:16}),c.jsx("span",{className:"hidden sm:inline",children:"Restaurar"})]}),c.jsxs("button",{onClick:()=>na(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-2",children:[c.jsx(rl,{size:16}),"Nueva Plantilla"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.map(X=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all group relative",children:[c.jsxs("div",{className:"absolute top-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 backdrop-blur-sm p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>na(X),className:"p-1.5 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Editar",children:c.jsx(OA,{size:16})}),c.jsx("button",{onClick:_e=>ar(X.id,_e),className:"p-1.5 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Eliminar",children:c.jsx(Ra,{size:16})})]}),c.jsxs("div",{className:"pr-2",children:[c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium uppercase tracking-wider border ${X.category==="Sales"?"bg-green-50 text-green-700 border-green-200":X.category==="Marketing"?"bg-orange-50 text-orange-700 border-orange-200":X.category==="Support"?"bg-blue-50 text-blue-700 border-blue-200":X.category==="Follow-up"?"bg-purple-50 text-purple-700 border-purple-200":X.category==="System"?"bg-slate-100 text-slate-700 border-slate-300":"bg-slate-50 text-slate-600 border-slate-200"}`,children:X.category})}),c.jsx("h4",{className:"font-bold text-slate-900 mb-1 line-clamp-1",title:X.name,children:X.name}),c.jsxs("p",{className:"text-xs text-slate-500 mb-3 font-medium flex items-center gap-1 line-clamp-1",title:X.subject,children:[c.jsx(gi,{size:12})," ",X.subject]}),c.jsx("div",{className:"text-xs text-slate-400 line-clamp-3 bg-slate-50 p-2 rounded border border-slate-100 font-mono h-20",children:X.body})]})]},X.id)),a.length===0&&c.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-16 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:[c.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-4 shadow-sm border border-slate-100",children:c.jsx(rl,{size:32,className:"text-slate-300"})}),c.jsx("h3",{className:"text-slate-900 font-medium mb-1",children:"No tienes plantillas guardadas"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6 max-w-sm text-center",children:"Las plantillas te ayudan a responder ms rpido y mantener consistencia en tus mensajes."}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>na(),className:"text-blue-600 font-medium text-sm hover:bg-blue-50 px-4 py-2 rounded-lg transition-colors",children:"Crear mi primera plantilla"}),c.jsx("button",{onClick:Bd,className:"text-slate-500 font-medium text-sm hover:bg-slate-100 px-4 py-2 rounded-lg transition-colors border border-slate-200",children:"Restaurar Plantillas"})]})]})]})]}),He==="branding"&&c.jsx("div",{className:"max-w-6xl animate-in fade-in slide-in-from-right-4 duration-300",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[c.jsx(xx,{size:20,className:"text-blue-600"}),"Marca y Personalizacin"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Define la identidad visual de tus correos electrnicos del sistema y notificaciones."})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-6",children:[c.jsx("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider mb-2",children:"Colores de Marca"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Color Primario"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"color",value:o.primaryColor||"#2563EB",onChange:X=>l({...o,primaryColor:X.target.value}),className:"h-10 w-14 p-1 bg-white border border-slate-300 rounded cursor-pointer"}),c.jsx("input",{type:"text",value:o.primaryColor||"#2563EB",onChange:X=>l({...o,primaryColor:X.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm uppercase font-mono"})]}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Botones, encabezados y enlaces principales."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Color Secundario"}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsx("input",{type:"color",value:o.secondaryColor||"#F8FAFC",onChange:X=>l({...o,secondaryColor:X.target.value}),className:"h-10 w-14 p-1 bg-white border border-slate-300 rounded cursor-pointer"}),c.jsx("input",{type:"text",value:o.secondaryColor||"#F8FAFC",onChange:X=>l({...o,secondaryColor:X.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm uppercase font-mono"})]}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Fondos, bordes y elementos secundarios."})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider mb-2",children:"Pie de Pgina (Footer)"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Texto Legal / Direccin"}),c.jsx("textarea",{rows:4,value:o.emailFooter||` ${new Date().getFullYear()} ${o.name}. Todos los derechos reservados.
${o.address||"Direccin de la empresa"}`,onChange:X=>l({...o,emailFooter:X.target.value}),className:"w-full px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",placeholder:"Informacin legal, direccin fsica, enlaces de baja suscripcin..."})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("button",{onClick:Xs,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 shadow-lg shadow-blue-100 transition-all flex items-center gap-2",children:[c.jsx(fN,{size:16}),"Guardar Estilos"]})})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[c.jsx(Xu,{size:20,className:"text-slate-500"}),"Vista Previa en Vivo"]}),c.jsx("div",{className:"bg-slate-100 p-8 rounded-xl border border-slate-200 shadow-inner flex justify-center",children:c.jsxs("div",{className:"bg-white w-full max-w-md rounded-lg shadow-xl overflow-hidden",style:{borderTop:`4px solid ${o.primaryColor||"#2563EB"}`},children:[c.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",style:{backgroundColor:o.secondaryColor||"#fff"},children:c.jsx("div",{className:"font-bold text-xl text-slate-800",children:o.name||"Mi Empresa"})}),c.jsxs("div",{className:"p-8 space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bienvenido, Juan "}),c.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Gracias por registrarte en nuestra plataforma. Estamos emocionados de tenerte con nosotros."}),c.jsx("div",{className:"py-4",children:c.jsx("button",{className:"px-6 py-3 rounded-lg font-bold text-white transition-opacity hover:opacity-90",style:{backgroundColor:o.primaryColor||"#2563EB"},children:"Confirmar mi cuenta"})}),c.jsx("p",{className:"text-slate-600 leading-relaxed",children:"Si tienes alguna pregunta, no dudes en responder a este correo."}),c.jsxs("p",{className:"text-slate-600",children:["Atentamente,",c.jsx("br",{}),"El equipo de ",o.name||"Mi Empresa"]})]}),c.jsxs("div",{className:"bg-slate-50 p-6 text-center border-t border-slate-100",children:[c.jsx("p",{className:"text-xs text-slate-400 whitespace-pre-line leading-relaxed",children:o.emailFooter||` ${new Date().getFullYear()} ${o.name}. Todos los derechos reservados.
${o.address||"Direccin de la empresa"}`}),c.jsxs("div",{className:"mt-4 flex justify-center gap-4 text-xs text-slate-400",children:[c.jsx("span",{className:"underline cursor-pointer",children:"Preferencias"}),c.jsx("span",{children:""}),c.jsx("span",{className:"underline cursor-pointer",children:"Darse de baja"})]})]})]})}),c.jsx("p",{className:"text-center text-xs text-slate-400 mt-4",children:"Esta es una vista previa aproximada de cmo se vern tus correos transaccionales."})]})]})})]}),N==="system"&&c.jsxs("div",{className:"max-w-4xl animate-in fade-in duration-300 space-y-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Estado del Sistema & Diagnstico"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Monitorea la salud de las integraciones y ejecuta pruebas de flujo."})]}),c.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-xl shadow-lg",children:[c.jsxs("h3",{className:"text-lg font-bold mb-2 flex items-center gap-2",children:[c.jsx(CU,{size:20})," API & Webhooks"]}),c.jsx("p",{className:"text-slate-300 text-sm mb-6",children:"Credenciales para integrar con herramientas externas."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Tu API Key (JWT)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("code",{className:"flex-1 bg-black/50 p-3 rounded font-mono text-sm text-green-400 overflow-x-auto",children:(t==null?void 0:t.token)||"No disponible (Inicia sesin)"}),c.jsx("button",{onClick:()=>navigator.clipboard.writeText((t==null?void 0:t.token)||""),className:"bg-slate-700 hover:bg-slate-600 px-3 rounded text-white",title:"Copiar Token",children:c.jsx(Rw,{size:16})})]}),c.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Este token expira en 7 das. salo como header: ",c.jsx("code",{children:"Authorization: Bearer [TOKEN]"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Webhook URL"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("code",{className:"flex-1 bg-black/50 p-3 rounded font-mono text-sm text-blue-400 overflow-x-auto",children:[window.location.origin,"/api/webhook.php"]}),c.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/api/webhook.php`),className:"bg-slate-700 hover:bg-slate-600 px-3 rounded text-white",title:"Copiar URL",children:c.jsx(Rw,{size:16})})]}),c.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Enva POST requests aqu para crear leads automticamente."})]})]})]}),c.jsx("div",{className:"mb-6 bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-bold text-slate-900 flex items-center gap-2",children:[c.jsx(EU,{size:18,className:"text-indigo-600"})," Modo de Conexin"]}),c.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Define si el sistema utiliza datos de prueba (Mock) o se conecta a la base de datos real."})]}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-700",children:"Estado del Sistema"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Informacin tcnica y conectividad."})]}),c.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200",children:"Online"})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("h4",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[c.jsx(vx,{size:18,className:"text-blue-600"})," Webhook Monitor"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-slate-500",children:"ltima seal recibida:"}),c.jsx("span",{className:"text-green-600 font-medium",children:an.webhook_health.last_signal?new Date(an.webhook_health.last_signal).toLocaleTimeString():"Esperando..."})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-slate-500",children:"Tasa de xito (24h):"}),c.jsxs("span",{className:"text-slate-900 font-medium",children:[an.webhook_health.success_rate,"%",c.jsxs("span",{className:"text-xs text-slate-400 ml-1",children:["(",an.webhook_health.total_24h," req)"]})]})]}),c.jsx("button",{className:"w-full mt-4 py-2 bg-slate-50 text-slate-600 rounded-lg hover:bg-slate-100 text-sm font-bold border border-slate-200",children:"Ver Logs Completos"})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[c.jsxs("h4",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[c.jsx(yx,{size:18,className:"text-orange-500"})," Automatizaciones"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-slate-500",children:"Pendientes de procesar:"}),c.jsx("span",{className:"text-slate-900 font-medium",children:an.pending_jobs})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-slate-500",children:"Reglas activas:"}),c.jsx("span",{className:"text-slate-900 font-medium",children:an.automations_active})]}),c.jsx("button",{className:"w-full mt-4 py-2 bg-slate-50 text-slate-600 rounded-lg hover:bg-slate-100 text-sm font-bold border border-slate-200",children:"Reiniciar Engine"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[c.jsx(vx,{size:20,className:"text-blue-600"})," Diagnstico E2E"]}),c.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Ejecuta una simulacin End-to-End (E2E) para verificar que la inyeccin de leads, normalizacin de datos y reglas de automatizacin funcionan correctamente."}),c.jsxs("div",{className:"flex-1 bg-slate-900 rounded-lg p-4 font-mono text-xs text-green-400 mb-4 overflow-y-auto max-h-40",children:[c.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-800 pb-2 mb-2",children:[c.jsx(PA,{size:14}),c.jsx("span",{className:"text-slate-400",children:"System Log Output"})]}),Co.length===0?c.jsx("span",{className:"text-slate-600",children:"Listo para iniciar prueba..."}):c.jsx("ul",{className:"space-y-1",children:Co.map((X,_e)=>c.jsx("li",{children:X},_e))})]}),c.jsxs("button",{onClick:Il,disabled:Ns==="running",className:`w-full py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-all ${Ns==="running"?"bg-slate-100 text-slate-400":"bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-blue-200"}`,children:[Ns==="running"?c.jsx(fi,{className:"animate-spin"}):c.jsx(qf,{size:18}),Ns==="running"?"Ejecutando Pruebas...":"Ejecutar Diagnstico E2E"]})]}),c.jsxs("div",{className:"bg-slate-900 rounded-xl p-6 text-slate-300 font-mono text-xs overflow-hidden",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 text-slate-500",children:[c.jsx("span",{children:"System Diagnostics Output"}),c.jsx("span",{className:"animate-pulse",children:" LIVE"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("p",{className:an.db_status==="Online"?"text-green-400":"text-red-400",children:["[",an.db_status==="Online"?"OK":"ERR","] Base de datos: ",an.db_status]}),c.jsxs("p",{className:"text-slate-500",children:["[INFO] Redis Cache: ",an.redis_status]}),c.jsx("p",{className:"text-green-400",children:"[OK] Sesion persistente: Activa"}),c.jsx("p",{className:"text-blue-400",children:"[INFO] Gemini Assistant: Listo para consultas"})]})]}),c.jsx("div",{className:"text-center text-xs text-slate-400 mt-8 pb-4",children:"KiwLead v1.0.0 (Build 2024.1)"})]}),Tr&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-blue-100 p-2 rounded-lg text-blue-600",children:c.jsx(xv,{size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Configuracin SMTP Recomendada"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Gua rpida para conectar tu proveedor de correo."})]})]}),c.jsx("button",{onClick:()=>yi(!1),className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 hover:border-red-200 hover:shadow-sm transition-all",children:[c.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 mb-3",children:[c.jsx("span",{className:"w-8 h-8 rounded-full bg-red-50 text-red-600 flex items-center justify-center font-bold text-xs",children:"G"}),"Gmail / Google Workspace"]}),c.jsxs("p",{className:"text-xs text-slate-500 mb-3",children:["Compatible con cuentas personales (",c.jsx("code",{children:"@gmail.com"}),") y corporativas (",c.jsx("code",{children:"@tuempresa.com"}),") alojadas en Google."]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Servidor SMTP"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"smtp.gmail.com"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Puerto"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"587 (TLS)"})]})]}),c.jsxs("div",{className:"mt-3 bg-red-50 border border-red-100 rounded-lg p-3 text-xs text-red-800",children:[c.jsx("strong",{children:"Importante:"}),' Debes activar "Verificacin en 2 Pasos" en tu cuenta de Google y generar una ',c.jsx("u",{children:"Contrasea de Aplicacin"}),". No uses tu contrasea normal."]})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 hover:border-blue-200 hover:shadow-sm transition-all",children:[c.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 mb-3",children:[c.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center font-bold text-xs",children:"O"}),"Outlook / Office 365"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Servidor SMTP"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"smtp.office365.com"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Puerto"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"587 (STARTTLS)"})]})]})]}),c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 hover:border-orange-200 hover:shadow-sm transition-all",children:[c.jsxs("h4",{className:"font-bold text-slate-800 flex items-center gap-2 mb-3",children:[c.jsx("span",{className:"w-8 h-8 rounded-full bg-orange-50 text-orange-600 flex items-center justify-center font-bold text-xs",children:"C"}),"cPanel / Webmail / Hosting"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Servidor SMTP"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"mail.tudominio.com"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Puerto"}),c.jsx("code",{className:"bg-slate-50 px-2 py-1 rounded text-slate-700",children:"465 (SSL) / 587 (TLS)"})]})]}),c.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Consulta con tu proveedor de hosting si el puerto es 465 (SSL) o 587 (TLS)."})]})]}),c.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-200 text-right",children:c.jsx("button",{onClick:()=>yi(!1),className:"px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-bold transition-colors",children:"Entendido"})})]})})]})},$Ce=({products:t,setProducts:e,currentUser:n,onNotify:r,aiConfig:i})=>{const[a,s]=q.useState(!1),[o,l]=q.useState(!1),[u,d]=q.useState(""),[f,p]=q.useState(null),[h,m]=q.useState(""),[g,y]=q.useState(!1),[x,w]=q.useState(!1),[S,N]=q.useState({name:"",description:"",price:0,currency:"USD",category:"Software",image:""}),j=(n==null?void 0:n.role)==="MANAGER"||(n==null?void 0:n.role)==="SUPPORT",E=t.filter(O=>O.name.toLowerCase().includes(u.toLowerCase())||O.category.toLowerCase().includes(u.toLowerCase())),C=O=>{O?(p(O.id),N({...O})):(p(null),N({name:"",description:"",price:0,currency:"USD",category:"Software",image:""})),s(!0)},P=async O=>{if(O.preventDefault(),!(!S.name||!S.price))try{const{api:R}=await Et(async()=>{const{api:D}=await Promise.resolve().then(()=>Ot);return{api:D}},void 0,import.meta.url);if(f)await R.products.update(f,{name:S.name,description:S.description,price:S.price,currency:S.currency,category:S.category,image:S.image}),e(t.map(D=>D.id===f?{...D,...S}:D)),r&&r("Producto Actualizado","Los cambios han sido guardados.","success");else if((await R.products.create({name:S.name,description:S.description||"",price:Number(S.price),currency:S.currency||"USD",category:S.category||"General",image:S.image})).success){const B=await R.products.list();e(B),r&&r("Producto Creado",`Se agreg "${S.name}" al catlogo.`,"success")}s(!1)}catch(R){console.error("Error saving product:",R),r&&r("Error","No se pudo guardar el producto.","error")}},T=async()=>{const O=i==null?void 0:i.apiKey;if(!O){r&&r("IA no configurada","Configura tu API Key de Gemini en Ajustes > Integraciones.","warning");return}if(!(!S.description&&!S.name)){w(!0);try{const D=new Gu(O).getGenerativeModel({model:(i==null?void 0:i.model)||"gemini-1.5-flash"}),B=`Mejora la siguiente descripcin de producto para que sea ms profesional y atractiva para la venta en espaol. 
      Nombre: ${S.name}
      Descripcin actual: ${S.description||"Sin descripcin"}
      Responde SOLO con el nuevo texto de la descripcin, sin introducciones ni markdown extra.`,H=(await(await D.generateContent(B)).response).text().trim();N(Q=>({...Q,description:H})),r&&r("IA: Descripcin Mejorada","Se ha optimizado el texto del producto.","success")}catch(R){console.error("Error improving with IA:",R),r&&r("Error de IA","No se pudo mejorar la descripcin.","error")}finally{w(!1)}}},I=async O=>{if(O.preventDefault(),!!h){y(!0);try{const{api:R}=await Et(async()=>{const{api:G}=await Promise.resolve().then(()=>Ot);return{api:G}},void 0,import.meta.url),B=await(await fetch(`/api/scrape.php?url=${encodeURIComponent(h)}`)).json();if(!B.success)throw new Error(B.error||"Failed to scrape website");const V=B.content,H=await(await fetch("/api/ai_extract.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:V})})).json();if(!H.success)throw new Error(H.error||"Failed to analyze website content");const Q=H.data,fe=Q.products||[],le=Q.businessSummary,L=[];for(const G of fe){const ee=await R.products.create({name:G.name,description:G.description,price:Number(G.price),currency:G.currency||"USD",category:G.category||"General",image:""});ee.success&&ee.product&&L.push(ee.product)}const F=await R.products.list();e(F),l(!1),m(""),r&&r("Importacin Exitosa",`He analizado el negocio: "${le}". Se han importado ${fe.length} productos reales a tu catlogo.`,"success")}catch(R){console.error("Import error",R),r&&r("Error de Importacin","No se pudo procesar la web. Verifica la URL o intenta de nuevo.","error")}finally{y(!1)}}},k=async O=>{if(confirm("Eliminar este producto?"))try{const{api:R}=await Et(async()=>{const{api:D}=await Promise.resolve().then(()=>Ot);return{api:D}},void 0,import.meta.url);await R.products.delete(O),e(t.filter(D=>D.id!==O)),r&&r("Producto Eliminado","El producto ha sido removido.","info")}catch(R){console.error("Error deleting product:",R),r&&r("Error","No se pudo eliminar el producto.","error")}};return c.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[c.jsx(s0,{className:"text-blue-600"})," Catlogo de Productos y Servicios"]}),c.jsx("p",{className:"text-slate-500 mt-1",children:"Catlogo centralizado de productos y servicios."})]}),j&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>l(!0),className:"bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg font-medium hover:bg-slate-50 flex items-center gap-2 shadow-sm transition-colors",children:[c.jsx(el,{size:18,className:"text-blue-500"})," Importar Web"]}),c.jsxs("button",{onClick:()=>C(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 flex items-center gap-2 shadow-sm transition-colors",children:[c.jsx(bl,{size:18})," Nuevo Producto"]})]})]}),c.jsxs("div",{className:"mb-6 relative max-w-md",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),c.jsx("input",{type:"text",value:u,onChange:O=>d(O.target.value),placeholder:"Buscar producto...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(O=>c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 hover:shadow-md transition-shadow group",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold uppercase tracking-wider",children:O.category}),j&&c.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>C(O),className:"text-slate-400 hover:text-blue-600",title:"Editar",children:c.jsx(OA,{size:16})}),c.jsx("button",{onClick:()=>k(O.id),className:"text-slate-400 hover:text-red-600",title:"Eliminar",children:c.jsx(Ra,{size:16})})]})]}),O.image&&c.jsx("div",{className:"mb-4 h-32 w-full rounded-lg overflow-hidden bg-slate-50",children:c.jsx("img",{src:O.image,alt:O.name,className:"w-full h-full object-cover"})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:O.name}),c.jsx("p",{className:"text-slate-500 text-sm mb-4 line-clamp-3",children:O.description}),c.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-100",children:[c.jsx(nV,{size:16,className:"text-slate-400"}),c.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:[hl(O.price,O.currency)," ",c.jsx("span",{className:"text-xs font-normal text-slate-500",children:O.currency})]})]})]},O.id))}),a&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:f?"Editar Producto":"Agregar Producto"}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre"}),c.jsx("input",{required:!0,type:"text",value:S.name,onChange:O=>N({...S,name:O.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Descripcin (para la IA)"}),c.jsxs("button",{type:"button",onClick:T,disabled:x||!S.name&&!S.description,className:"text-[10px] bg-purple-50 text-purple-600 px-2 py-0.5 rounded-full border border-purple-100 hover:bg-purple-100 transition-colors flex items-center gap-1 disabled:opacity-50",children:[c.jsx(sy,{size:10,className:x?"animate-spin":""}),x?"Mejorando...":"Mejorar con IA"]})]}),c.jsx(C4,{content:S.description||"",onChange:O=>N({...S,description:O}),placeholder:"Describe el producto o servicio...",minHeight:"80px"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"URL de Imagen"}),c.jsxs("div",{className:"relative",children:[c.jsx(LU,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"url",value:S.image,onChange:O=>N({...S,image:O.target.value}),title:"URL de Imagen","aria-label":"URL de Imagen",className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://..."})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Precio"}),c.jsx("input",{required:!0,type:"number",value:S.price,onChange:O=>N({...S,price:Number(O.target.value)}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Moneda"}),c.jsxs("select",{value:S.currency,onChange:O=>N({...S,currency:O.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"MXN",children:"MXN"}),c.jsx("option",{value:"CRC",children:"CRC"}),c.jsx("option",{value:"COP",children:"COP"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Categora"}),c.jsx("input",{type:"text",value:S.category,onChange:O=>N({...S,category:O.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Ej. Software, Servicios..."})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 py-2 text-slate-600 hover:bg-slate-100 rounded-lg border border-slate-200 bg-white",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:f?"Guardar Cambios":"Crear"})]})]})]})}),o&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 relative overflow-hidden",children:[g&&c.jsxs("div",{className:"absolute inset-0 bg-white/90 z-10 flex flex-col items-center justify-center text-center p-6",children:[c.jsx(fi,{size:48,className:"text-blue-600 animate-spin mb-4"}),c.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"Analizando sitio web..."}),c.jsx("p",{className:"text-sm text-slate-500 max-w-xs mt-2",children:"La IA est leyendo la estructura de la web para extraer productos y servicios potenciales."})]}),c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:c.jsx(Sm,{size:20})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Importar con IA"})]}),c.jsxs("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",title:"Cerrar",children:[c.jsx(Ra,{size:20,className:"rotate-45"})," "]})]}),c.jsxs("form",{onSubmit:I,className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Introduce la URL de tu sitio web o tienda. La IA intentar detectar tus productos principales automticamente."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"URL del Sitio Web"}),c.jsxs("div",{className:"relative",children:[c.jsx(el,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{required:!0,type:"url",value:h,onChange:O=>m(O.target.value),className:"w-full pl-10 pr-3 py-2 bg-white border border-slate-300 text-slate-900 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"https://mi-negocio.com"})]})]}),c.jsx("div",{className:"pt-2",children:c.jsx("button",{type:"submit",disabled:g,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg font-bold hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:g?"Procesando...":"Escanear y Entrenar IA"})})]})]})})]})},zCe=({currentUser:t,tasks:e,setTasks:n,appointments:r,contacts:i})=>{const[a,s]=q.useState(""),[o,l]=q.useState("Pending"),[u,d]=q.useState("All"),[f,p]=q.useState(!1),[h,m]=q.useState(void 0),g=r.filter(C=>C.assignedTo===(t==null?void 0:t.name)||C.userName===(t==null?void 0:t.name)).map(C=>({id:C.id,title:C.title,status:new Date(C.end)<new Date?"Done":"Pending",dueDate:nn(new Date(C.start),"yyyy-MM-dd"),dueTime:nn(new Date(C.start),"HH:mm"),priority:"Normal",assignedTo:C.assignedTo||C.userName,relatedContactName:C.contactName,type:"Meeting",isAppointment:!0,description:C.description,location:C.location})),x=[...e,...g].filter(C=>{if(C.assignedTo!==t.name||o!=="All"&&C.status!==o||u!=="All"&&C.priority!==u)return!1;if(a){const P=a.toLowerCase();return C.title.toLowerCase().includes(P)||C.relatedContactName&&C.relatedContactName.toLowerCase().includes(P)}return!0}).sort((C,P)=>{const T=new Date(`${C.dueDate}T${C.dueTime||"00:00"}`),I=new Date(`${P.dueDate}T${P.dueTime||"00:00"}`);return T.getTime()-I.getTime()}),w=C=>{if(C.status==="Done")return!1;if(C.isAppointment){const T=new Date;return new Date(`${C.dueDate}T${C.dueTime}`)<T}const P=new Date().toISOString().split("T")[0];return C.dueDate<P},S=async C=>{try{const{api:P}=await Et(async()=>{const{api:T}=await Promise.resolve().then(()=>Ot);return{api:T}},void 0,import.meta.url);await P.tasks.update(C,{status:"Done"}),n(e.map(T=>T.id===C?{...T,status:"Done"}:T))}catch(P){console.error("Error completing task:",P)}},N=async C=>{try{const{api:P}=await Et(async()=>{const{api:T}=await Promise.resolve().then(()=>Ot);return{api:T}},void 0,import.meta.url);if(h){const T={...C};await P.tasks.update(h.id,T),n(e.map(I=>I.id===h.id?{...I,...T}:I))}else{const T={...C,status:"Pending",assignedTo:C.assignedTo||(t==null?void 0:t.name)||"Me"},I=await P.tasks.create(T),k={...T,id:I.id||Date.now().toString()};n([k,...e])}p(!1),m(void 0)}catch(P){console.error("Error saving task:",P)}},j=C=>{m(C),p(!0)},E=async C=>{if(confirm("Ests seguro de que deseas cancelar esta tarea?"))try{const{api:P}=await Et(async()=>{const{api:T}=await Promise.resolve().then(()=>Ot);return{api:T}},void 0,import.meta.url);await P.tasks.update(C.id,{status:"Cancelled"}),n(e.map(T=>T.id===C.id?{...T,status:"Cancelled"}:T))}catch(P){console.error("Error cancelling task:",P)}};return c.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden",children:[c.jsxs("div",{className:"bg-white border-b border-slate-200 px-4 md:px-6 py-4 flex flex-row justify-between items-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-slate-900 flex items-center gap-2",children:[c.jsx(Wi,{className:"text-blue-600 md:w-6 md:h-6",size:20})," Mis Tareas"]}),c.jsx("p",{className:"text-slate-500 text-xs md:text-sm hidden xs:block",children:"Gestiona tus actividades y recordatorios."})]}),c.jsxs("button",{onClick:()=>{m(void 0),p(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 md:px-4 py-2 rounded-lg flex items-center gap-2 font-medium transition-colors whitespace-nowrap",children:[c.jsx(bl,{size:18})," ",c.jsx("span",{className:"hidden sm:inline",children:"Nueva Tarea"}),c.jsx("span",{className:"sm:hidden",children:"Nuevo"})]})]}),c.jsx("div",{className:"p-4 md:p-6 pb-0",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col md:flex-row gap-4 items-center justify-between",children:[c.jsxs("div",{className:"relative w-full md:w-96",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),c.jsx("input",{type:"text",placeholder:"Buscar tarea o contacto...",value:a,onChange:C=>s(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsxs("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-1 rounded-lg border border-slate-200",children:[c.jsx("button",{onClick:()=>l("All"),className:`px-3 py-1.5 text-sm rounded-md font-medium transition-colors ${o==="All"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Todas"}),c.jsx("button",{onClick:()=>l("Pending"),className:`px-3 py-1.5 text-sm rounded-md font-medium transition-colors ${o==="Pending"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Pendientes"}),c.jsx("button",{onClick:()=>l("Done"),className:`px-3 py-1.5 text-sm rounded-md font-medium transition-colors ${o==="Done"?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Completadas"})]}),c.jsxs("select",{value:u,onChange:C=>d(C.target.value),title:"Filtrar por prioridad",className:"bg-white border border-slate-200 rounded-lg px-3 py-2 text-sm text-slate-700 outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"All",children:"Prioridad: Todas"}),c.jsx("option",{value:"High",children:"Alta"}),c.jsx("option",{value:"Normal",children:"Normal"}),c.jsx("option",{value:"Low",children:"Baja"})]})]})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar",children:x.length>0?c.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.map(C=>{const P=w(C);return c.jsx("div",{className:`group bg-white p-4 rounded-xl border hover:shadow-md transition-all ${P?"border-red-200 bg-red-50/30":"border-slate-200"} ${C.status==="Done"?"opacity-60 bg-slate-50":""}`,children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[!C.isAppointment&&C.status!=="Done"&&c.jsx("button",{onClick:()=>S(C.id),title:"Marcar como completada",className:"mt-1 w-6 h-6 rounded border-2 border-slate-300 text-transparent hover:border-blue-500 hover:text-blue-500 flex items-center justify-center transition-all",children:c.jsx(Wi,{size:16,fill:"currentColor"})}),C.status==="Done"&&c.jsx("div",{className:"mt-1 w-6 h-6 rounded bg-green-500 text-white flex items-center justify-center",children:c.jsx(Wi,{size:16})}),C.isAppointment&&c.jsx("div",{className:"mt-1 w-6 h-6 rounded bg-purple-100 text-purple-600 flex items-center justify-center",children:c.jsx(fo,{size:16})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h3",{className:`font-semibold text-slate-900 ${C.status==="Done"?"line-through text-slate-500":""}`,children:C.title}),C.priority==="High"&&c.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-[10px] font-bold uppercase rounded-full",children:"Alta"}),C.isAppointment&&c.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-[10px] font-bold uppercase rounded-full",children:"Cita"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-500",children:[c.jsxs("span",{className:`flex items-center gap-1 ${P?"text-red-600 font-bold":""}`,children:[c.jsx(xc,{size:14})," ",C.dueDate,"  ",C.dueTime," ",P&&"(Vencida)"]}),C.relatedContactName&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Bc,{size:14})," ",C.relatedContactName]}),C.location&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx($u,{size:14})," ",C.location]})]}),C.description&&c.jsx("p",{className:"text-slate-600 text-sm mt-2 line-clamp-2",children:C.description})]})]}),c.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!C.isAppointment&&C.status!=="Done"&&C.status!=="Cancelled"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:T=>{T.stopPropagation(),j(C)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:c.jsx(eV,{size:16})}),c.jsx("button",{onClick:T=>{T.stopPropagation(),E(C)},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Cancelar",children:c.jsx(lV,{size:16})})]}),C.type==="Call"&&c.jsx("button",{className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Llamar",children:c.jsx(dg,{size:16})}),(C.type==="Email"||C.type==="Meeting")&&c.jsx("button",{className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Enviar Email",children:c.jsx(gi,{size:16})})]})]})},C.id)})}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[c.jsx(Wi,{size:64,className:"mb-4 opacity-20"}),c.jsx("h3",{className:"text-lg font-medium text-slate-600",children:"Todo listo"}),c.jsx("p",{children:"No hay tareas que coincidan con los filtros."})]})}),c.jsx(Ag,{isOpen:f,onClose:()=>{p(!1),m(void 0)},onSubmit:N,contacts:i,currentUser:t,initialTask:h})]})},FCe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},BCe=(t,e,n)=>{let r;const i=FCe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},HCe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},WCe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},qCe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UCe={date:Kf({formats:HCe,defaultWidth:"full"}),time:Kf({formats:WCe,defaultWidth:"full"}),dateTime:Kf({formats:qCe,defaultWidth:"full"})},VCe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},GCe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},KCe=(t,e,n,r)=>e.getHours()!==1?GCe[t]:VCe[t],YCe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},XCe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},JCe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},ZCe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},QCe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},eEe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},tEe=(t,e)=>Number(t)+"",nEe={ordinalNumber:tEe,era:co({values:YCe,defaultWidth:"wide"}),quarter:co({values:XCe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:co({values:JCe,defaultWidth:"wide"}),day:co({values:ZCe,defaultWidth:"wide"}),dayPeriod:co({values:QCe,defaultWidth:"wide",formattingValues:eEe,defaultFormattingWidth:"wide"})},rEe=/^(\d+)()?/i,iEe=/\d+/i,aEe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},sEe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},oEe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},lEe={any:[/1/i,/2/i,/3/i,/4/i]},cEe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},uEe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},dEe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},fEe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},hEe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},pEe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},mEe={ordinalNumber:J$({matchPattern:rEe,parsePattern:iEe,valueCallback:function(t){return parseInt(t,10)}}),era:uo({matchPatterns:aEe,defaultMatchWidth:"wide",parsePatterns:sEe,defaultParseWidth:"any"}),quarter:uo({matchPatterns:oEe,defaultMatchWidth:"wide",parsePatterns:lEe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:uo({matchPatterns:cEe,defaultMatchWidth:"wide",parsePatterns:uEe,defaultParseWidth:"any"}),day:uo({matchPatterns:dEe,defaultMatchWidth:"wide",parsePatterns:fEe,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:hEe,defaultMatchWidth:"any",parsePatterns:pEe,defaultParseWidth:"any"})},ix={code:"es",formatDistance:BCe,formatLong:UCe,formatRelative:KCe,localize:nEe,match:mEe,options:{weekStartsOn:1,firstWeekContainsDate:1}},gEe=({currentUser:t,contacts:e,team:n,onNotify:r,products:i,onRefresh:a,tasks:s=[]})=>{var dt;const o=H9(),[l,u]=q.useState(new Date),[d,f]=q.useState(!0),[p,h]=q.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[m,g]=q.useState("month"),[y,x]=q.useState(null),[w,S]=q.useState(null),[N,j]=q.useState([]),[E,C]=q.useState(!0),[P,T]=q.useState(!1),[I,k]=q.useState(void 0),[O,R]=q.useState("ALL"),[D,B]=q.useState(!1),[V,Z]=q.useState({title:"",contactId:"",date:nn(new Date,"yyyy-MM-dd"),startTime:"09:00",endTime:"10:00",location:"",description:"",assignedTo:t.name,productId:""}),[H,Q]=q.useState(null),[fe,le]=q.useState(!1),[L,F]=q.useState(!1),[G,ee]=q.useState(!1),[ie,se]=q.useState({date:"",startTime:"",endTime:""}),[ye,oe]=q.useState(""),[we,be]=q.useState(!1),de=e.filter(ve=>ve.name.toLowerCase().includes(ye.toLowerCase())||ve.company.toLowerCase().includes(ye.toLowerCase())),$e=t.role==="MANAGER",He=[...N.map(ve=>({...ve,eventType:"appointment"})),...s.filter(ve=>ve.status!=="Cancelled").map(ve=>{const ae=ve.dueDate,je=ve.dueTime||"09:00",Ie=new Date(`${ae}T${je}`),Ae=Tye(Ie,1);return{id:ve.id,title:ve.title,start:Ie,end:Ae,eventType:"task",originalTask:ve,contactName:ve.relatedContactName,location:"",description:ve.description||"",contactId:ve.relatedContactId||"",contactCompany:"",assignedTo:ve.assignedTo,userName:ve.assignedTo,productId:"",productName:""}})];q.useEffect(()=>{Y()},[O]);const Y=async()=>{C(!0);try{const{api:ve}=await Et(async()=>{const{api:Ae}=await Promise.resolve().then(()=>Ot);return{api:Ae}},void 0,import.meta.url),ae={};if(O!=="ALL"){const Ae=n.find(Ze=>Ze.id===O||Ze.name===O);if(Ae)ae.userId=Ae.id;else if(!($e&&O==="ALL")){if(!$e){const Ze=n.find(Ye=>Ye.name===t.name);Ze&&(ae.userId=Ze.id)}}}const Ie=(await ve.appointments.list(ae)).map(Ae=>({...Ae,start:new Date(Ae.start),end:new Date(Ae.end)}));j(Ie)}catch(ve){console.error(ve),r&&r("Error","No se pudieron cargar las citas","error")}finally{C(!1)}},he=()=>{u(m==="month"?rbe(l):m==="week"?o?nc(l,-3):ibe(l):nc(l,-1))},Ke=()=>{u(m==="month"?K$(l,1):m==="week"?o?nc(l,3):X$(l,1):nc(l,1))},qe=ve=>{x(ve.targetTouches[0].clientX)},Oe=ve=>{S(ve.targetTouches[0].clientX)},it=()=>{if(!y||!w)return;const ve=y-w,ae=ve>50,je=ve<-50;ae&&Ke(),je&&he(),x(null),S(null)},Je=()=>u(new Date),ge=async ve=>{ve.preventDefault();try{const{api:ae}=await Et(async()=>{const{api:tt}=await Promise.resolve().then(()=>Ot);return{api:tt}},void 0,import.meta.url),je=new Date(`${V.date}T${V.startTime}:00`),Ie=new Date(`${V.date}T${V.endTime}:00`);if(je<new Date){r&&r("Aviso","No se pueden agendar citas en el pasado","warning");return}const Ae=i.find(tt=>tt.id===V.productId),Ze=e.find(tt=>tt.id===V.contactId),Ye={title:V.title,contactId:V.contactId,contactName:Ze==null?void 0:Ze.name,contactCompany:Ze==null?void 0:Ze.company,start:je,end:Ie,location:V.location,description:V.description,assignedTo:V.assignedTo,productId:V.productId,productName:Ae==null?void 0:Ae.name};await ae.appointments.create({...Ye}),r&&r("xito","Cita agendada correctamente","success"),B(!1),Y(),a&&a(),Z({title:"",contactId:"",date:nn(new Date,"yyyy-MM-dd"),startTime:"09:00",endTime:"10:00",location:"",description:"",assignedTo:t.name,productId:""})}catch(ae){console.error(ae),r&&r("Error","No se pudo agendar la cita","error")}},Me=ve=>{let ae={...ve};if(!ae.contactName&&ae.contactId){const je=e.find(Ie=>Ie.id===ae.contactId);je&&(ae.contactName=je.name,ae.contactCompany=je.company)}Q(ae),se({date:nn(ve.start,"yyyy-MM-dd"),startTime:nn(ve.start,"HH:mm"),endTime:nn(ve.end,"HH:mm")}),le(!0),F(!1)},ut=async()=>{if(H)try{const{api:ve}=await Et(async()=>{const{api:Ie}=await Promise.resolve().then(()=>Ot);return{api:Ie}},void 0,import.meta.url),ae=new Date(`${ie.date}T${ie.startTime}:00`),je=new Date(`${ie.date}T${ie.endTime}:00`);await ve.appointments.update(H.id,{start:ae,end:je}),r&&r("Cita Reagendada",`Nueva fecha: ${nn(ae,"dd/MM/yyyy HH:mm")}`,"success"),le(!1),Y(),a&&a()}catch(ve){console.error(ve),r&&r("Error","No se pudo reagendar.","error")}},st=async()=>{if(H)try{const{api:ve}=await Et(async()=>{const{api:ae}=await Promise.resolve().then(()=>Ot);return{api:ae}},void 0,import.meta.url);await ve.appointments.delete(H.id),r&&r("Cita Cancelada","La cita ha sido eliminada.","info"),ee(!1),le(!1),Y(),a&&a()}catch(ve){console.error(ve),r&&r("Error","No se pudo cancelar la cita.","error")}},ft=async ve=>{try{const{api:ae}=await Et(async()=>{const{api:je}=await Promise.resolve().then(()=>Ot);return{api:je}},void 0,import.meta.url);I?(await ae.tasks.update(I.id,ve),r&&r("xito","Tarea actualizada","success")):(await ae.tasks.create({...ve,status:"Pending",createdAt:new Date().toISOString()}),r&&r("xito","Tarea creada","success")),T(!1),k(void 0),a&&a()}catch(ae){console.error(ae),r&&r("Error","No se pudo guardar la tarea","error")}},At=ve=>{const ae=ve.start.toISOString().replace(/-|:|\.\d\d\d/g,""),je=ve.end.toISOString().replace(/-|:|\.\d\d\d/g,""),Ie=encodeURIComponent(ve.title),Ae=encodeURIComponent(ve.description||""),Ze=encodeURIComponent(ve.location||"");return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${Ie}&dates=${ae}/${je}&details=${Ae}&location=${Ze}`},Rt=()=>{var ve;return c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto gap-2 md:gap-4 bg-white/50 backdrop-blur-sm p-1 rounded-xl border border-slate-200/50",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-4 pl-2",children:[c.jsx("h2",{className:"text-lg md:text-2xl font-extrabold text-slate-900 capitalize tracking-tight",children:nn(l,o?"MMM yy":"MMMM 'de' yyyy",{locale:ix})}),c.jsxs("div",{className:"flex items-center bg-slate-100/80 rounded-lg p-0.5 ml-1",children:[c.jsx("button",{onClick:he,title:"Anterior",className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md transition-all text-slate-600",children:c.jsx(EA,{size:18})}),c.jsx("button",{onClick:Je,title:"Ir a hoy",className:"px-3 py-1 text-xs font-bold hover:bg-white hover:shadow-sm rounded-md transition-all text-blue-600",children:"HOY"}),c.jsx("button",{onClick:Ke,title:"Siguiente",className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md transition-all text-slate-600",children:c.jsx(Ru,{size:18})})]})]}),o&&c.jsx("button",{onClick:()=>B(!0),className:"bg-blue-600 text-white p-2.5 rounded-xl flex items-center justify-center hover:bg-blue-700 transition-all shadow-lg active:scale-95 mr-1",title:"Nueva Cita",children:c.jsx(bl,{size:22,strokeWidth:3})})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto justify-center md:justify-end",children:[c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{value:O,onChange:ae=>R(ae.target.value),title:"Seleccionar calendario",className:"pl-9 pr-6 py-2 bg-white/80 border border-slate-200 rounded-xl text-xs font-medium appearance-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none w-full md:w-48 shadow-sm transition-all hover:border-slate-300",children:[c.jsx("option",{value:"ALL",children:"Agenda General"}),c.jsx("option",{value:((ve=t.id)==null?void 0:ve.toString())||t.name,children:"Mi Agenda"}),$e&&n.filter(ae=>{var je;return ae.id!==((je=t.id)==null?void 0:je.toString())&&ae.role!=="Support"&&ae.role!=="SUPPORT"}).map(ae=>c.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),c.jsx(Ou,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-blue-500 transition-colors"}),c.jsx(Ru,{size:12,className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 rotate-90 pointer-events-none"})]}),c.jsxs("div",{className:"flex bg-slate-200/50 p-1 rounded-xl border border-slate-200/20 shadow-inner",children:[c.jsx("button",{onClick:()=>g("month"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${m==="month"?"bg-white shadow-md text-blue-600 translate-y-[0px]":"text-slate-500 hover:text-slate-700"}`,children:"MES"}),c.jsx("button",{onClick:()=>g("week"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${m==="week"?"bg-white shadow-md text-blue-600 translate-y-[0px]":"text-slate-500 hover:text-slate-700"}`,children:o?"3 DAS":"SEMANA"}),c.jsx("button",{onClick:()=>g("day"),className:`px-4 py-1.5 text-xs font-bold rounded-lg transition-all ${m==="day"?"bg-white shadow-md text-blue-600 translate-y-[0px]":"text-slate-500 hover:text-slate-700"}`,children:"DA"})]}),(m==="week"||m==="day")&&c.jsx("button",{onClick:()=>f(!d),title:d?"Ocultar horas":"Mostrar horas",className:`p-2 rounded-xl border transition-all ${d?"bg-blue-50 border-blue-200 text-blue-600 shadow-sm":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50 shadow-sm"}`,children:c.jsx(xc,{size:16})}),!o&&c.jsxs("button",{onClick:()=>B(!0),className:"bg-blue-600 text-white px-5 py-2 rounded-xl flex items-center gap-2 hover:bg-blue-700 transition-all shadow-md hover:shadow-lg active:scale-95 font-bold text-sm",children:[c.jsx(bl,{size:18,strokeWidth:2.5})," ",c.jsx("span",{children:"Nueva Cita"})]})]})]})},Se=()=>{const ve=Bye(l),ae=zye(ve),je=vd(ve,{weekStartsOn:1}),Ie=Wye(ae,{weekStartsOn:1}),Ae="d",Ze=[];let Ye=[],tt=je,Kt="";const pe=["Lun","Mar","Mi","Jue","Vie","Sb","Dom"];for(;tt<=Ie;){for(let Re=0;Re<7;Re++){Kt=nn(tt,Ae);const lt=tt,Pt=He.filter(pt=>lm(pt.start,lt));Ye.push(c.jsxs("div",{className:`min-h-[100px] border border-slate-100 p-2 relative ${B1e(tt,ve)?"bg-white":"bg-slate-50 text-slate-400"} ${Mv(tt)?"bg-blue-50/30":""}`,onClick:()=>{u(lt),o&&g("day")},children:[c.jsx("span",{className:`text-sm font-medium ${Mv(tt)?"text-blue-600 bg-blue-100 w-6 h-6 flex items-center justify-center rounded-full":"text-slate-700"}`,children:Kt}),c.jsx("div",{className:"mt-1 flex flex-wrap gap-1 md:block md:space-y-1",children:Pt.map(pt=>o?c.jsx("div",{className:`w-2 h-2 rounded-full cursor-pointer hover:scale-125 transition-transform ${pt.eventType==="task"?"bg-green-500":"bg-blue-500"}`,title:`${nn(pt.start,"HH:mm")} - ${pt.title}`,onClick:en=>{en.stopPropagation(),pt.eventType==="appointment"?Me(pt):(k(pt.originalTask),T(!0))}},pt.id):c.jsxs("div",{className:`text-[10px] p-1 rounded truncate border-l-2 cursor-pointer hover:opacity-80 ${pt.eventType==="task"?"bg-green-100 text-green-700 border-green-500":"bg-blue-100 text-blue-700 border-blue-500"}`,title:`${nn(pt.start,"HH:mm")} - ${pt.title}`,onClick:en=>{en.stopPropagation(),pt.eventType==="appointment"?Me(pt):(k(pt.originalTask),T(!0))},children:[c.jsx("span",{className:"font-bold",children:nn(pt.start,"HH:mm")})," ",pt.title]},pt.id))})]},tt.toString())),tt=nc(tt,1)}Ze.push(c.jsx("div",{className:"grid grid-cols-7",children:Ye},tt.toString())),Ye=[]}return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[c.jsx("div",{className:"grid grid-cols-7 border-b border-slate-200 bg-slate-50",children:pe.map(Re=>c.jsx("div",{className:"py-2 text-center text-xs font-semibold text-slate-500 uppercase tracking-wider",children:Re},Re))}),c.jsx("div",{children:Ze})]})},Fe=()=>{const ve=vd(l,{weekStartsOn:1});let ae=OT({start:ve,end:nc(ve,6)});o&&(ae=OT({start:l,end:nc(l,2)}));const je=Array.from({length:24},(Ie,Ae)=>Ae);return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[c.jsxs("div",{className:"flex border-b border-slate-200",children:[d&&c.jsx("div",{className:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50"}),ae.map(Ie=>c.jsxs("div",{className:`flex-1 py-3 text-center border-r border-slate-100 ${Mv(Ie)?"bg-blue-50/50":""}`,children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase",children:nn(Ie,"EEE",{locale:ix})}),c.jsx("div",{className:`text-lg font-bold ${Mv(Ie)?"text-blue-600":"text-slate-700"}`,children:nn(Ie,"d")})]},Ie.toString()))]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d?je.map(Ie=>c.jsxs("div",{className:"flex min-h-[60px] border-b border-slate-100",children:[c.jsxs("div",{className:"w-16 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-xs text-slate-500 text-right pr-2 pt-2 sticky left-0",children:[Ie,":00"]}),ae.map(Ae=>{const Ze=nn(Ae,"yyyy-MM-dd")+"-"+Ie,Ye=He.filter(tt=>{const Kt=nn(tt.start,"yyyy-MM-dd")+"-"+IT(tt.start);return Ze===Kt});return c.jsx("div",{className:"flex-1 border-r border-slate-100 relative group hover:bg-slate-50 transition-colors",children:Ye.map(tt=>c.jsxs("div",{className:`absolute inset-x-1 top-1 text-xs p-1.5 rounded border-l-2 z-10 cursor-pointer hover:z-20 shadow-sm ${tt.eventType==="task"?"bg-green-100 text-green-700 border-green-500":"bg-blue-100 text-blue-700 border-blue-500"}`,onClick:Kt=>{Kt.stopPropagation(),tt.eventType==="appointment"?Me(tt):(k(tt.originalTask),T(!0))},children:[c.jsxs("div",{className:"font-bold",children:[nn(tt.start,"HH:mm")," - ",nn(tt.end,"HH:mm")]}),c.jsx("div",{className:"truncate font-medium",children:tt.title})]},tt.id))},Ae.toString())})]},Ie)):c.jsx("div",{className:"flex divide-x divide-slate-100 min-h-full",children:ae.map(Ie=>{const Ae=He.filter(Ze=>lm(Ze.start,Ie));return c.jsxs("div",{className:"flex-1 p-2 space-y-2 bg-white",children:[Ae.map(Ze=>c.jsxs("div",{className:`text-xs p-2 rounded border-l-2 shadow-sm cursor-pointer hover:bg-opacity-80 ${Ze.eventType==="task"?"bg-green-50 text-green-700 border-green-500":"bg-blue-50 text-blue-700 border-blue-500"}`,onClick:Ye=>{Ye.stopPropagation(),Ze.eventType==="appointment"?Me(Ze):(k(Ze.originalTask),T(!0))},children:[c.jsx("div",{className:"font-bold",children:nn(Ze.start,"HH:mm")}),c.jsx("div",{className:"truncate font-medium",children:Ze.title})]},Ze.id)),Ae.length===0&&c.jsx("div",{className:"text-[10px] text-slate-400 text-center mt-4 italic",children:"Sin eventos"})]},Ie.toString())})})})]})},Le=()=>{const ve=Array.from({length:24},(ae,je)=>je);return c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-[600px]",children:[c.jsx("div",{className:"p-4 border-b border-slate-200 text-center bg-slate-50",children:c.jsx("h3",{className:"text-lg font-bold text-slate-800 capitalize",children:nn(l,"EEEE d 'de' MMMM yyyy",{locale:ix})})}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d?ve.map(ae=>{const je=nn(l,"yyyy-MM-dd")+"-"+ae,Ie=He.filter(Ae=>{const Ze=nn(Ae.start,"yyyy-MM-dd")+"-"+IT(Ae.start);return je===Ze});return c.jsxs("div",{className:"flex min-h-[80px] border-b border-slate-100",children:[c.jsxs("div",{className:"w-20 flex-shrink-0 border-r border-slate-200 bg-slate-50 text-sm text-slate-500 flex items-center justify-center font-medium",children:[ae,":00"]}),c.jsx("div",{className:"flex-1 p-2 relative group hover:bg-slate-50",children:Ie.map(Ae=>c.jsx("div",{className:`mb-2 border p-3 rounded-lg flex justify-between items-start shadow-sm cursor-pointer transition-colors ${Ae.eventType==="task"?"bg-green-50 border-green-100 hover:bg-green-100":"bg-blue-50 border-blue-100 hover:bg-blue-100"}`,onClick:()=>{Ae.eventType==="appointment"?Me(Ae):(k(Ae.originalTask),T(!0))},children:c.jsxs("div",{children:[c.jsx("div",{className:`font-bold ${Ae.eventType==="task"?"text-green-900":"text-blue-900"}`,children:Ae.title}),c.jsxs("div",{className:`text-xs flex items-center gap-2 mt-1 ${Ae.eventType==="task"?"text-green-700":"text-blue-700"}`,children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xc,{size:12})," ",nn(Ae.start,"HH:mm")," - ",nn(Ae.end,"HH:mm")]}),Ae.location&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx($u,{size:12})," ",Ae.location]})]}),Ae.contactName&&c.jsxs("div",{className:`text-xs mt-1 font-medium flex items-center gap-1 ${Ae.eventType==="task"?"text-green-600":"text-blue-600"}`,children:[c.jsx(Ou,{size:12})," ",Ae.contactName]})]})},Ae.id))})]},ae)}):c.jsxs("div",{className:"p-4 space-y-4 min-h-full bg-white",children:[He.filter(ae=>lm(ae.start,l)).map(ae=>c.jsx("div",{className:`border p-4 rounded-xl flex justify-between items-start shadow-sm cursor-pointer transition-all hover:shadow-md ${ae.eventType==="task"?"bg-green-50 border-green-100 hover:bg-green-100":"bg-blue-50 border-blue-100 hover:bg-blue-100"}`,onClick:()=>{ae.eventType==="appointment"?Me(ae):(k(ae.originalTask),T(!0))},children:c.jsxs("div",{children:[c.jsx("div",{className:`text-lg font-bold ${ae.eventType==="task"?"text-green-900":"text-blue-900"}`,children:ae.title}),c.jsxs("div",{className:`text-sm flex flex-wrap items-center gap-3 mt-2 ${ae.eventType==="task"?"text-green-700":"text-blue-700"}`,children:[c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(xc,{size:14})," ",nn(ae.start,"HH:mm")," - ",nn(ae.end,"HH:mm")]}),ae.location&&c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx($u,{size:14})," ",ae.location]}),ae.contactName&&c.jsxs("span",{className:"flex items-center gap-1.5 font-medium",children:[c.jsx(Ou,{size:14})," ",ae.contactName]})]}),ae.description&&c.jsx("p",{className:"text-xs text-slate-500 mt-2 line-clamp-2",children:ae.description})]})},ae.id)),He.filter(ae=>lm(ae.start,l)).length===0&&c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[c.jsx(fo,{size:48,className:"mb-4 opacity-20"}),c.jsx("p",{className:"text-lg font-medium",children:"No hay eventos para este da"}),c.jsx("p",{className:"text-sm",children:"Disfruta de tu tiempo libre o agenda algo nuevo."})]})]})})]})};return c.jsxs("div",{className:"h-[calc(100vh-64px)] flex flex-col p-3 md:p-6 bg-slate-50 overflow-hidden select-none",children:[Rt(),c.jsxs("div",{className:"flex-1 overflow-auto custom-scrollbar",onTouchStart:qe,onTouchMove:Oe,onTouchEnd:it,children:[m==="month"&&Se(),m==="week"&&Fe(),m==="day"&&Le()]}),c.jsxs("div",{className:"mt-4 flex items-center justify-between px-2 py-1.5 bg-slate-100/50 rounded-xl border border-slate-200/50",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-400 tracking-wider",children:[c.jsx(fo,{size:12}),c.jsx("span",{children:"NEXUS CRM CALENDAR v2.0"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:p,onChange:ve=>h(ve.target.value),title:"Selector de Zona Horaria",className:"pl-7 pr-3 py-1 bg-white border border-slate-200 rounded-lg text-[10px] font-bold appearance-none focus:ring-1 focus:ring-blue-500 outline-none text-slate-500 shadow-xs",children:[c.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:["AUTO (",Intl.DateTimeFormat().resolvedOptions().timeZone.split("/").pop(),")"]}),c.jsx("option",{value:"America/Mexico_City",children:"MEX (CDMX)"}),c.jsx("option",{value:"America/Bogota",children:"COL/PER"}),c.jsx("option",{value:"America/Santiago",children:"CHILE"}),c.jsx("option",{value:"America/Argentina/Buenos_Aires",children:"ARG"}),c.jsx("option",{value:"America/Madrid",children:"ESP (MADRID)"}),c.jsx("option",{value:"America/New_York",children:"USA (EST)"}),c.jsx("option",{value:"America/Los_Angeles",children:"USA (PST)"})]}),c.jsx(el,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),D&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Agendar Cita"}),c.jsx("button",{onClick:()=>B(!1),title:"Cerrar",className:"text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:24})})]}),c.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ttulo"}),c.jsx("input",{required:!0,type:"text",value:V.title,onChange:ve=>Z({...V,title:ve.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Reunin de presentacin..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Cliente"}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus-within:ring-2 focus-within:ring-blue-500 cursor-text flex items-center justify-between",onClick:()=>be(!we),children:[c.jsx("span",{className:V.contactId?"text-slate-900":"text-slate-400",children:V.contactId?((dt=e.find(ve=>ve.id===V.contactId))==null?void 0:dt.name)||"Cliente Seleccionado":"Buscar cliente..."}),c.jsx(Ru,{size:16,className:`text-slate-400 transition-transform ${we?"rotate-90":""}`})]}),we&&c.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl z-20 max-h-60 flex flex-col",children:[c.jsx("div",{className:"p-2 border-b border-slate-100 sticky top-0 bg-white z-10",children:c.jsxs("div",{className:"relative",children:[c.jsx(Nb,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),c.jsx("input",{autoFocus:!0,type:"text",className:"w-full pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded text-sm focus:outline-none focus:border-blue-500",placeholder:"Filtrar por nombre...",value:ye,onChange:ve=>oe(ve.target.value),onClick:ve=>ve.stopPropagation()})]})}),c.jsx("div",{className:"overflow-y-auto flex-1",children:de.length>0?de.map(ve=>c.jsxs("div",{className:`px-4 py-2 hover:bg-blue-50 cursor-pointer flex justify-between items-center ${V.contactId===ve.id?"bg-blue-50":""}`,onClick:()=>{Z({...V,contactId:ve.id}),be(!1),oe("")},children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-slate-900",children:ve.name}),c.jsx("div",{className:"text-xs text-slate-500",children:ve.company})]}),V.contactId===ve.id&&c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]},ve.id)):c.jsx("div",{className:"p-4 text-center text-xs text-slate-400",children:"No se encontraron clientes."})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Fecha"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",readOnly:!0,value:V.date?nn(Hj(V.date),"dd/MM/yyyy"):"",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-700"}),c.jsx("input",{required:!0,type:"date",value:V.date,min:nn(new Date,"yyyy-MM-dd"),onChange:ve=>Z({...V,date:ve.target.value}),onClick:ve=>ve.target.showPicker&&ve.target.showPicker(),title:"Seleccionar fecha",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),c.jsx(fo,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Asignado a"}),c.jsx("select",{value:V.assignedTo,onChange:ve=>Z({...V,assignedTo:ve.target.value}),title:"Asignar a",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:n.map(ve=>c.jsx("option",{value:ve.name,children:ve.name},ve.id))})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 bg-slate-50 p-2 rounded-lg",children:[c.jsx(el,{size:14,className:"text-slate-400"}),c.jsxs("span",{children:["Zona Horaria: ",c.jsx("strong",{children:p})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hora Inicio"}),c.jsx("input",{required:!0,type:"time",title:"Hora de inicio",value:V.startTime,onChange:ve=>Z({...V,startTime:ve.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hora Fin"}),c.jsx("input",{required:!0,type:"time",title:"Hora de fin",value:V.endTime,onChange:ve=>Z({...V,endTime:ve.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ubicacin"}),c.jsxs("div",{className:"relative",children:[c.jsx($u,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),c.jsx("input",{type:"text",value:V.location,onChange:ve=>Z({...V,location:ve.target.value}),className:"w-full pl-9 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Oficina, Zoom, etc."})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Producto / Servicio Relacionado"}),c.jsxs("div",{className:"relative",children:[c.jsx(s0,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),c.jsxs("select",{value:V.productId,onChange:ve=>Z({...V,productId:ve.target.value}),title:"Producto relacionado",className:"w-full pl-9 pr-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none",children:[c.jsx("option",{value:"",children:"-- Ninguno --"}),i.map(ve=>c.jsx("option",{value:ve.id,children:ve.name},ve.id))]}),c.jsx(Ru,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none rotate-90"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descripcin"}),c.jsx("textarea",{rows:3,value:V.description,onChange:ve=>Z({...V,description:ve.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Detalles adicionales..."})]}),c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg font-bold hover:bg-blue-700 shadow-md",children:"Agendar Cita"})]})]})}),fe&&H&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-sm p-6 relative",children:[c.jsx("button",{onClick:()=>le(!1),title:"Cerrar",className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:c.jsx(yn,{size:20})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:H.title}),L?c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-2 border border-blue-100",children:[c.jsxs("h4",{className:"text-sm font-bold text-blue-900 mb-2 flex items-center gap-2",children:[c.jsx(il,{size:14})," Reagendar Cita"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Nueva Fecha"}),c.jsxs("div",{className:"relative mt-1",children:[c.jsx("input",{type:"text",readOnly:!0,value:ie.date?nn(Hj(ie.date),"dd/MM/yyyy"):"",className:"w-full px-2 py-1 bg-white border border-slate-300 rounded text-sm focus:outline-none text-slate-700"}),c.jsx("input",{type:"date",value:ie.date,onChange:ve=>se({...ie,date:ve.target.value}),onClick:ve=>ve.target.showPicker&&ve.target.showPicker(),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),c.jsx(fo,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Inicio"}),c.jsx("input",{type:"time",value:ie.startTime,onChange:ve=>se({...ie,startTime:ve.target.value}),className:"w-full mt-1 px-2 py-1 bg-white border border-slate-300 rounded text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Fin"}),c.jsx("input",{type:"time",value:ie.endTime,onChange:ve=>se({...ie,endTime:ve.target.value}),className:"w-full mt-1 px-2 py-1 bg-white border border-slate-300 rounded text-sm"})]})]}),c.jsxs("div",{className:"flex gap-2 pt-1",children:[c.jsx("button",{onClick:()=>F(!1),className:"flex-1 py-1.5 text-xs font-medium text-slate-600 bg-white border border-slate-300 rounded hover:bg-slate-50",children:"Cancelar"}),c.jsx("button",{onClick:ut,className:"flex-1 py-1.5 text-xs font-bold text-white bg-blue-600 rounded hover:bg-blue-700",children:"Confirmar Cambio"})]})]})]}):c.jsxs("div",{className:"flex items-center gap-2 text-blue-600 font-medium",children:[c.jsx(xc,{size:16}),c.jsx("span",{children:nn(H.start,"EEEE d 'de' MMMM, HH:mm",{locale:ix})})]})]}),!L&&c.jsxs("div",{className:"space-y-4 mb-8",children:[H.contactName&&c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Ou,{className:"text-slate-400 mt-1",size:18}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cliente"}),c.jsx("p",{className:"text-slate-900",children:H.contactName}),c.jsx("p",{className:"text-xs text-slate-500",children:H.contactCompany})]})]}),H.location&&c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx($u,{className:"text-slate-400 mt-1",size:18}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Ubicacin"}),c.jsx("p",{className:"text-slate-900",children:H.location})]})]}),H.productName&&c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(s0,{className:"text-slate-400 mt-1",size:18}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Producto Relacionado"}),c.jsx("p",{className:"text-slate-900",children:H.productName})]})]}),H.description&&c.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm text-slate-600 italic border border-slate-100",children:['"',H.description,'"']}),(H.assignedTo||H.userName)&&c.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[c.jsx(Ou,{className:"text-slate-400 mt-1",size:18}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Vendedor a Cargo"}),c.jsx("p",{className:"text-slate-900",children:H.assignedTo||H.userName})]})]}),c.jsx("div",{className:"pt-2",children:c.jsxs("a",{href:At(H),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 font-medium hover:underline",children:[c.jsx(_U,{size:14})," Aadir a Google Calendar"]})})]}),!L&&c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>F(!0),className:"flex-1 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg font-medium border border-blue-200 flex justify-center items-center gap-2",children:[c.jsx(il,{size:16})," Reagendar"]}),c.jsxs("button",{onClick:()=>ee(!0),className:"flex-1 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg font-medium border border-red-200 flex justify-center items-center gap-2",children:[c.jsx(Ra,{size:16})," Cancelar"]})]})]})}),G&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-50",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-xs p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(bo,{className:"text-red-600",size:24})}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Cancelar Cita?"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Esta accin eliminar la cita del calendario permanentemente."}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("button",{onClick:st,className:"w-full py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg font-bold shadow-md",children:"S, Cancelar Cita"}),c.jsx("button",{onClick:()=>ee(!1),className:"w-full py-2 text-slate-700 bg-white border border-slate-200 hover:bg-slate-50 rounded-lg font-medium",children:"No, Volver"})]})]})}),c.jsx(Ag,{isOpen:P,onClose:()=>{T(!1),k(void 0)},onSubmit:ft,initialTask:I,currentUser:t,contacts:e,team:n})]})},yo=(t,e)=>{const n=new Date(t);return n.setDate(n.getDate()-e),n},L4=(t,e)=>{const n=new Date(t);return n.setDate(n.getDate()+e),n},Rs=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,Gr=t=>t[Math.floor(Math.random()*t.length)],vEe=(t,e)=>new Date(t.getTime()+Math.random()*(e.getTime()-t.getTime())),ab={manager:{id:1,name:"Carlos Gerente",email:"gerente@kiwulead.demo",role:"MANAGER",avatar:"https://ui-avatars.com/api/?name=Carlos+Gerente&background=0D8ABC&color=fff",token:"mock-token-manager"},support:{id:2,name:"Sara Soporte",email:"soporte@kiwulead.demo",role:"SUPPORT",avatar:"https://ui-avatars.com/api/?name=Sara+Soporte&background=E91E63&color=fff",token:"mock-token-support"},sales1:{id:3,name:"Juan Vendedor",email:"juan@kiwulead.demo",role:"SALES_REP",avatar:"https://ui-avatars.com/api/?name=Juan+Vendedor&background=FF9800&color=fff",token:"mock-token-sales1"},sales2:{id:4,name:"Ana Ventas",email:"ana@kiwulead.demo",role:"SALES_REP",avatar:"https://ui-avatars.com/api/?name=Ana+Ventas&background=4CAF50&color=fff",token:"mock-token-sales2"},sales3:{id:5,name:"Pedro Comercial",email:"pedro@kiwulead.demo",role:"SALES_REP",avatar:"https://ui-avatars.com/api/?name=Pedro+Comercial&background=9C27B0&color=fff",token:"mock-token-sales3"}},xEe=[{id:"1",name:"Carlos Gerente",role:"Manager",email:"gerente@kiwulead.demo",status:"Active",lastLogin:new Date().toISOString()},{id:"2",name:"Sara Soporte",role:"Support",email:"soporte@kiwulead.demo",status:"Active",lastLogin:yo(new Date,1).toISOString()},{id:"3",name:"Juan Vendedor",role:"Sales",email:"juan@kiwulead.demo",status:"Active",lastLogin:new Date().toISOString()},{id:"4",name:"Ana Ventas",role:"Sales",email:"ana@kiwulead.demo",status:"Active",lastLogin:yo(new Date,2).toISOString()},{id:"5",name:"Pedro Comercial",role:"Sales",email:"pedro@kiwulead.demo",status:"Inactive",lastLogin:yo(new Date,5).toISOString()}],yEe=[{id:"1",title:"Nuevo Lead",color:"#3B82F6",probability:10},{id:"2",title:"Contactado",color:"#F59E0B",probability:30},{id:"3",title:"Cita Agendada",color:"#8B5CF6",probability:50},{id:"4",title:"Propuesta",color:"#EC4899",probability:70},{id:"5",title:"Negociacin",color:"#6366F1",probability:90},{id:"6",title:"Cerrado Ganado",color:"#10B981",probability:100}],QB=[{id:"1",name:"Plan Starter",description:"Licencia mensual para pymes",price:29.99,currency:"USD",category:"SaaS"},{id:"2",name:"Plan Growth",description:"Funciones avanzadas y soporte",price:99.99,currency:"USD",category:"SaaS"},{id:"3",name:"Plan Enterprise",description:"Solucin corporativa completa",price:299,currency:"USD",category:"SaaS"},{id:"4",name:"Consultora Estratgica",description:"Hora de consultora",price:150,currency:"USD",category:"Services"},{id:"5",name:"Implementacin VIP",description:"Configuracin llave en mano",price:1500,currency:"USD",category:"Services"}],bEe=["Tech Solutions","Grupo Alpha","Innovacin Digital","Consultores Asociados","Constructora Norte","Logstica Express","Finanzas Seguras","Marketing Pro","Diseo Creativo","SoftWare House","Restaurante El Gourmet","Hotel Paradise","Clnica Salud","EduTech Global","Inmobiliaria Futuro","Transportes Rpidos","Energa Verde","Agro Export","Textil Moda","Seguros Confianza"],wEe=["Roberto Gmez","Mara Lpez","Carlos Ruiz","Ana Martnez","Luis Fernndez","Elena Torres","Javier Daz","Sofa Castro","Miguel ngel","Luca Vega","Diego Morales","Valentina Silva","Andrs Herrera","Camila Rojas","Fernando Ortiz","Isabel Medina","Ricardo Vargas","Patricia Mendoza","Gabriel Cruz","Daniela Ros"],DL=["VIP","Pyme","Enterprise","Caliente","Fro","Referido","Urgente","Tecnologa","Salud","Finanzas"],SEe=t=>Array.from({length:t}).map((e,n)=>({id:`msg-${Math.random().toString(36).substr(2,9)}`,sender:n%2===0?"agent":"customer",content:n%2===0?"Hola, cmo podemos ayudarte hoy?":"Estoy interesado en conocer ms sobre sus planes.",timestamp:yo(new Date,n).toISOString(),channel:"email",subject:"Consulta sobre servicios"})),F2=["3","4","5"],I4={3:"Juan Vendedor",4:"Ana Ventas",5:"Pedro Comercial"},Cd=[];for(let t=0;t<100;t++){const e=Gr(bEe),n=Gr(wEe),r=Gr(F2),i=I4[r],a=vEe(yo(new Date,180),new Date),s=Gr(Object.values(ot)),o=Rs(500,5e4);let l=10;s===ot.CONTACTED&&(l=30),s===ot.MEETING&&(l=50),s===ot.PROPOSAL&&(l=70),s===ot.NEGOTIATION&&(l=90),s===ot.WON&&(l=100),s===ot.LOST&&(l=0);const u={id:`c-${t}`,name:n,company:`${e} ${Rs(1,99)}`,email:`${n.toLowerCase().replace(" ",".")}@${e.toLowerCase().replace(" ","")}.com`,phone:`+52${Rs(55e8,5599999999)}`,status:s,source:Gr(Object.values(xd)),owner:i,createdAt:a.toISOString(),lastActivity:yo(new Date,Rs(0,30)).toISOString(),tags:[Gr(DL),Gr(DL)],value:o,probability:l,notes:[],history:SEe(Rs(0,5))};s===ot.WON&&(u.wonData={products:[Gr(QB).name],finalPrice:o,closedAt:L4(a,Rs(5,60)).toISOString()}),s===ot.LOST&&(u.lostReason=Gr(["Precio alto","Competencia","Sin presupuesto","No interesado","Mala atencin"])),Cd.push(u)}const eH=[];for(let t=0;t<50;t++){const e=Gr(F2),n=I4[e],r=Gr(["Call","Email","Meeting","ToDo"]),i=Gr(["Pending","Done","Pending","Pending","Cancelled"]),a=Gr(["Low","Normal","High"]),s=Gr(Cd);eH.push({id:`t-${t}`,title:`${r==="Call"?"Llamar a":r==="Email"?"Escribir a":"Reunin con"} ${s.name}`,description:"Seguimiento de oportunidad comercial",dueDate:L4(new Date,Rs(-5,10)).toISOString().split("T")[0],status:i,priority:a,assignedTo:n,relatedContactId:s.id,relatedContactName:s.name,type:r})}const tH=[];for(let t=0;t<20;t++){const e=Gr(F2),n=I4[e],r=Gr(Cd),i=L4(new Date,Rs(-2,7));i.setHours(Rs(9,17),0,0,0);const a=new Date(i);a.setHours(i.getHours()+1),tH.push({id:`a-${t}`,title:`Demo con ${r.company}`,start:i,end:a,location:"Google Meet",description:"Presentacin de propuesta comercial",contactId:r.id,contactName:r.name,userId:e,userName:n,assignedTo:n})}const Mk=[];F2.forEach(t=>{for(let e=0;e<15;e++){const n=Gr(Cd);Mk.push({id:`e-in-${t}-${e}`,subject:`Re: Propuesta comercial - ${n.company}`,from:n.email,to:ab[t==="3"?"sales1":t==="4"?"sales2":"sales3"].email,date:yo(new Date,Rs(0,10)).toISOString(),snippet:"Hola, hemos revisado la propuesta y nos gustara agendar una llamada...",read:Math.random()>.3,folder:"inbox"})}for(let e=0;e<10;e++){const n=Gr(Cd);Mk.push({id:`e-sent-${t}-${e}`,subject:`Propuesta comercial - ${n.company}`,from:ab[t==="3"?"sales1":t==="4"?"sales2":"sales3"].email,to:n.email,date:yo(new Date,Rs(0,10)).toISOString(),snippet:"Adjunto encontrars la propuesta detallada...",read:!0,folder:"sent"})}});const NEe=[{id:"n1",title:"Nuevo Lead Asignado",message:"Se te ha asignado un nuevo lead calificado.",type:"success",timestamp:new Date().toISOString(),read:!1},{id:"n2",title:"Meta Mensual Alcanzada",message:"Felicidades! Has alcanzado el 100% de tu meta.",type:"success",timestamp:yo(new Date,1).toISOString(),read:!0},{id:"n3",title:"Tarea Vencida",message:"Tienes tareas pendientes de seguimiento.",type:"warning",timestamp:yo(new Date,2).toISOString(),read:!0},{id:"n4",title:"Reunin en 15 min",message:"Preprate para la demo con Tech Solutions.",type:"info",timestamp:new Date().toISOString(),read:!1}],jEe=300,bt=t=>new Promise(e=>setTimeout(()=>e(t),jEe)),kEe={notifications:{list:()=>bt(NEe),create:t=>bt({success:!0,id:"n-new"}),markRead:t=>bt({success:!0}),markAllRead:()=>bt({success:!0}),delete:t=>bt({success:!0}),getPreferences:()=>bt({}),savePreferences:t=>bt({success:!0})},auth:{login:async(t,e)=>{await bt(null);const n=Object.values(ab).find(r=>r.email===t);if(n)return{success:!0,user:n};throw new Error("Invalid credentials (try gerente@nexus.demo)")},register:()=>bt({success:!0}),forgotPassword:()=>bt({success:!0}),resetPassword:()=>bt({success:!0}),updateProfile:(t,e)=>bt({success:!0})},contacts:{list:()=>bt(Cd),create:t=>bt({success:!0,id:`c-${Date.now()}`}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0}),search:t=>{const e=t.toLowerCase();return bt(Cd.filter(n=>n.name.toLowerCase().includes(e)||n.company.toLowerCase().includes(e)))}},tasks:{list:()=>bt(eH),create:t=>bt({success:!0,id:`t-${Date.now()}`}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0})},products:{list:()=>bt(QB),create:t=>bt({success:!0,id:`p-${Date.now()}`}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0})},team:{list:()=>bt(xEe),create:t=>bt({success:!0}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0}),invite:(t,e)=>bt({success:!0})},settings:{getPublicConfig:()=>bt({companyName:"KiwLead Demo",logo:""}),list:()=>bt({theme:"light",language:"es"}),update:(t,e)=>bt({success:!0}),getEmailConfig:t=>bt({smtp_host:"smtp.kiwulead.demo"}),saveEmailConfig:()=>bt({success:!0}),testEmailConfig:()=>bt({success:!0})},appointments:{list:()=>bt(tH),create:t=>bt({success:!0,id:`a-${Date.now()}`}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0})},emails:{list:(t,e)=>bt(Mk),send:t=>bt({success:!0}),sync:t=>bt({success:!0,count:0}),markRead:t=>bt({success:!0}),delete:t=>bt({success:!0}),saveDraft:t=>bt({success:!0}),post:(t,e)=>bt({success:!0})},notes:{create:t=>bt({success:!0,id:`note-${Date.now()}`})},files:{upload:t=>bt({success:!0,url:"https://via.placeholder.com/150"})},pipeline:{list:()=>bt(yEe),create:(t,e)=>bt({success:!0,id:`col-${Date.now()}`}),update:(t,e)=>bt({success:!0}),delete:t=>bt({success:!0}),reorder:t=>bt({success:!0})},meta:{getConfig:()=>bt({connected:!0,phoneNumber:"+1234567890"}),saveConfig:()=>bt({success:!0}),getTemplates:()=>bt({templates:[]}),sendTemplate:()=>bt({success:!0}),sendMessage:()=>bt({success:!0})},history:{list:()=>bt([]),create:()=>bt({success:!0})},system:{status:()=>bt({status:"ok",version:"1.0.0-demo",installed:!0})}},AEe="/api";console.log(`[API] Initializing. API_BASE=${AEe} (REAL DATA ONLY)`);const Ti=kEe,Ot=Object.freeze(Object.defineProperty({__proto__:null,api:Ti},Symbol.toStringTag,{value:"Module"})),CEe=({onLogin:t,isDemoMode:e})=>{const[n,r]=q.useState("login"),[i,a]=q.useState(!1),[s,o]=q.useState(""),[l,u]=q.useState(""),[d,f]=q.useState(""),[p,h]=q.useState(""),[m,g]=q.useState(null),[y,x]=q.useState({companyName:"KiwLead",logoUrl:""});q.useEffect(()=>{const N=new URLSearchParams(window.location.search).get("token");N&&(h(N),r("reset"),window.history.replaceState({},document.title,window.location.pathname)),(async()=>{try{const E=await Ti.settings.getPublicConfig();E&&x({companyName:E.companyName||"KiwLead",logoUrl:E.logoUrl||""})}catch(E){console.error("Failed to load branding",E)}})()},[]);const w=async S=>{S.preventDefault(),a(!0),g(null);try{if(n==="login"){const N=await Ti.auth.login(s,l);N&&N.success&&t(N.user)}else if(n==="forgot"){const N=await Ti.auth.forgotPassword(s);g({type:"success",text:"Si el correo existe, recibirs instrucciones."}),N.debug_link&&console.log("DEBUG: Reset Link",N.debug_link)}else if(n==="reset"){if(l!==d)throw new Error("Las contraseas no coinciden");await Ti.auth.resetPassword(p,l),g({type:"success",text:"Contrasea actualizada. Por favor inicia sesin."}),setTimeout(()=>r("login"),2e3)}}catch(N){console.error("Auth error:",N),g({type:"error",text:N.message||"Ocurri un error"})}finally{a(!1)}};return c.jsxs("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[c.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-20 animate-pulse"}),c.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-cyan-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-20 animate-pulse",style:{animationDelay:"2s"}})]}),c.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-[420px] p-8 md:p-10 relative z-10 border border-white/20",children:[c.jsxs("div",{className:"text-center mb-8",children:[y.logoUrl?c.jsx("div",{className:"w-24 h-24 mx-auto mb-6 flex items-center justify-center p-4 bg-white rounded-2xl shadow-sm border border-slate-100",children:c.jsx("img",{src:y.logoUrl,alt:"Company Logo",className:"max-w-full max-h-full object-contain"})}):c.jsx("div",{className:"w-16 h-16 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/30 transform rotate-3",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:y.companyName}),n!=="login"&&c.jsxs("p",{className:"text-slate-500 mt-3 text-sm font-medium",children:[n==="forgot"&&"Recuperacin de cuenta",n==="reset"&&"Establecer nueva contrasea"]})]}),m&&c.jsxs("div",{className:`mb-6 p-4 rounded-xl text-sm flex items-start gap-3 border ${m.type==="success"?"bg-emerald-50 border-emerald-100 text-emerald-700":"bg-rose-50 border-rose-100 text-rose-700"}`,children:[m.type==="success"?c.jsx(sa,{size:18,className:"mt-0.5 flex-shrink-0"}):c.jsx("div",{className:"w-5 h-5 rounded-full bg-rose-500 text-white flex items-center justify-center text-xs mt-0.5 flex-shrink-0 font-bold",children:"!"}),c.jsx("span",{className:"leading-snug",children:m.text})]}),c.jsxs("form",{onSubmit:w,className:"space-y-5",children:[(n==="login"||n==="forgot")&&c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider ml-1",children:"Email Corporativo"}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:c.jsx(gi,{size:20})}),c.jsx("input",{type:"email",required:!0,value:s,onChange:S=>o(S.target.value),className:"w-full pl-11 pr-4 py-3.5 bg-slate-50 border border-slate-200 text-slate-900 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 outline-none transition-all placeholder:text-slate-400 font-medium",placeholder:"nombre@empresa.com"})]})]}),(n==="login"||n==="reset")&&c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider ml-1",children:n==="reset"?"Nueva Contrasea":"Contrasea"}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:c.jsx(ca,{size:20})}),c.jsx("input",{type:"password",required:!0,value:l,onChange:S=>u(S.target.value),className:"w-full pl-11 pr-4 py-3.5 bg-slate-50 border border-slate-200 text-slate-900 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 outline-none transition-all placeholder:text-slate-400 font-medium",placeholder:""})]})]}),n==="reset"&&c.jsxs("div",{className:"space-y-1.5",children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider ml-1",children:"Confirmar Contrasea"}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:c.jsx(dN,{size:20})}),c.jsx("input",{type:"password",required:!0,value:d,onChange:S=>f(S.target.value),className:"w-full pl-11 pr-4 py-3.5 bg-slate-50 border border-slate-200 text-slate-900 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-600 outline-none transition-all placeholder:text-slate-400 font-medium",placeholder:""})]})]}),c.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl shadow-lg shadow-blue-600/20 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:i?c.jsx(fi,{className:"animate-spin",size:20}):c.jsxs("span",{className:"flex items-center",children:[n==="login"&&c.jsxs(c.Fragment,{children:["Iniciar Sesin ",c.jsx(uN,{size:18,className:"ml-2"})]}),n==="forgot"&&"Enviar enlace de recuperacin",n==="reset"&&"Cambiar Contrasea"]})})]}),c.jsx("div",{className:"mt-8 text-center",children:n==="login"?c.jsx("p",{className:"text-sm text-slate-500",children:c.jsx("button",{onClick:()=>{r("forgot"),g(null)},className:"text-slate-500 hover:text-blue-600 font-medium transition-colors text-sm hover:underline underline-offset-4",children:"Olvidaste tu contrasea?"})}):c.jsx("p",{className:"text-sm text-slate-500",children:c.jsxs("button",{onClick:()=>{r("login"),g(null)},className:"text-slate-500 hover:text-blue-600 font-medium transition-colors flex items-center justify-center gap-2 mx-auto",children:[c.jsx(uN,{size:14,className:"rotate-180"}),"Volver al inicio de sesin"]})})})]})]})},EEe=()=>{const[t,e]=q.useState(null),[n,r]=q.useState(!1),[i,a]=q.useState(!1);q.useEffect(()=>{const o=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,l=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone;o&&!l&&(a(!0),setTimeout(()=>r(!0),3e3));const u=d=>{d.preventDefault(),e(d),r(!0)};return window.addEventListener("beforeinstallprompt",u),()=>{window.removeEventListener("beforeinstallprompt",u)}},[]);const s=async()=>{if(!t)return;t.prompt();const{outcome:o}=await t.userChoice;console.log(o==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),r(!1)};return n?c.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-8 md:bottom-8 md:w-96 z-[100] animate-in slide-in-from-bottom-5 fade-in duration-500",children:c.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-5 rounded-2xl shadow-2xl border border-blue-100 ring-1 ring-black/5",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200",children:c.jsx(nD,{size:20})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900 leading-tight",children:"Instalar App"}),c.jsx("p",{className:"text-xs text-slate-500",children:"KiwLead"})]})]}),c.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-100 transition-colors",children:c.jsx(yn,{size:18})})]}),c.jsx("p",{className:"text-sm text-slate-600 mb-4 leading-relaxed",children:i?"Para instalar en iOS: Pulsa el botn 'Compartir' de tu navegador y selecciona 'Agregar a Inicio'.":"Obtn acceso ms rpido, notificaciones y modo offline instalando la aplicacin en tu dispositivo."}),!i&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-lg border border-slate-200 transition-colors",children:"Ahora no"}),c.jsxs("button",{onClick:s,className:"flex-1 py-2.5 text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 rounded-lg shadow-md shadow-blue-100 flex items-center justify-center gap-2 transition-transform active:scale-95",children:[c.jsx(Sb,{size:16})," Instalar"]})]}),i&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 bg-slate-50 p-2 rounded border border-slate-100",children:[c.jsx(QU,{size:14})," Aplicacin Segura y Verificada"]})]})}):null},_Ee=[{id:"inbox",label:"Bandeja de Entrada",icon:IU},{id:"sent",label:"Enviados",icon:jb},{id:"drafts",label:"Borradores",icon:OU},{id:"archived",label:"Archivados",icon:Z8},{id:"trash",label:"Papelera",icon:Ra},{id:"spam",label:"Spam",icon:bo}],OEe=({currentUser:t,onNotify:e,aiConfig:n})=>{const[r,i]=q.useState("inbox"),[a,s]=q.useState([]),[o,l]=q.useState(null),[u,d]=q.useState(!1),[f,p]=q.useState(!1),[h,m]=q.useState(""),[g,y]=q.useState(!1),[x,w]=q.useState(!1),[S,N]=q.useState(""),[j,E]=q.useState(""),[C,P]=q.useState(""),[T,I]=q.useState([]),[k,O]=q.useState(!1),[R,D]=q.useState(!1),[B,V]=q.useState(!1),[Z,H]=q.useState(null),[Q,fe]=q.useState(!1),[le,L]=q.useState(!1),F=q.useRef(null);q.useEffect(()=>{const he=()=>w(window.innerWidth<768);return he(),window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]),q.useEffect(()=>{G()},[r,t.id]);const G=async()=>{d(!0);try{const he=await Ti.emails.list(r,String(t.id));he.success?s(he.emails||[]):s([])}catch(he){console.error("Failed to fetch emails",he),s([])}finally{d(!1)}},ee=async()=>{p(!0);try{const he=await Ti.emails.sync(String(t.id));he.success?(e&&e("Sincronizacin",`Se sincronizaron ${he.synced} correos nuevos.`,"success"),G()):e&&e("Error",he.error||"No se pudo sincronizar.","error")}catch(he){e&&e("Error",he.message||"Error de red al sincronizar.","error")}finally{p(!1)}},ie=async he=>{if(l(he),H(null),!he.read)try{await Ti.emails.markRead(he.id,String(t.id)),s(Ke=>Ke.map(qe=>qe.id===he.id?{...qe,read:!0}:qe))}catch{}},se=async he=>{if(o)try{await Ti.emails.post("/email_actions.php",{action:he,email_id:o.id,user_id:t.id}),e&&e("xito",`Correo movido a ${he==="trash"?"papelera":he}.`,"success"),l(null),G()}catch{e&&e("Error","No se pudo realizar la accin.","error")}},ye=async()=>{if(!S||!j){e&&e("Error","Destinatario y Asunto son requeridos.","warning");return}O(!0);try{const he=new FormData;he.append("user_id",String(t.id)),he.append("to",S),he.append("subject",j),he.append("body",C),T.forEach(qe=>he.append("attachments[]",qe));const Ke=await Ti.emails.send(he);Ke.success?(e&&e("Enviado","Correo enviado exitosamente.","success"),y(!1),oe(),r==="sent"&&G()):e&&e("Error",Ke.error||"No se pudo enviar.","error")}catch(he){e&&e("Error",he.message||"Error al enviar correo.","error")}finally{O(!1)}},oe=()=>{N(""),E(""),P(""),I([])},we=async()=>{const he=n==null?void 0:n.apiKey;if(!he){e&&e("IA no configurada","Configura tu API Key en Ajustes.","warning");return}D(!0);try{const qe=new Gu(he).getGenerativeModel({model:(n==null?void 0:n.model)||"gemini-1.5-flash"}),Oe=`Genera un borrador de correo profesional en espaol para: "${j||"Seguimiento comercial"}". Destinatario: ${S||"cliente"}. S conciso (mximo 100 palabras).`,Je=await(await qe.generateContent(Oe)).response;P(Je.text().trim())}catch{e&&e("Error de IA","No se pudo generar el borrador.","error")}finally{D(!1)}},be=async()=>{if(!(!o||!(n!=null&&n.apiKey))){V(!0);try{const Ke=new Gu(n.apiKey).getGenerativeModel({model:n.model||"gemini-1.5-flash"}),qe=`Resume el siguiente correo electrnico en 3-4 puntos clave en espaol. S conciso y directo:

Asunto: ${o.subject}
Cuerpo: ${o.body.replace(/<[^>]*>?/gm,"")}`,it=await(await Ke.generateContent(qe)).response;H(it.text())}catch{e&&e("Error","No se pudo resumir el correo.","error")}finally{V(!1)}}},de=async()=>{if(!(!o||!(n!=null&&n.apiKey))){fe(!0);try{const Ke=new Gu(n.apiKey).getGenerativeModel({model:n.model||"gemini-1.5-flash"}),qe=`Genera una respuesta profesional y amable en espaol para el siguiente correo. El tono debe ser servicial:

Asunto: ${o.subject}
Remitente: ${o.sender_name}
Cuerpo recibido: ${o.body.replace(/<[^>]*>?/gm,"")}`,it=await(await Ke.generateContent(qe)).response;N(o.from),E(`Re: ${o.subject}`),P(it.text()),y(!0)}catch{e&&e("Error","No se pudo generar la sugerencia.","error")}finally{fe(!1)}}},$e=async()=>{if(!(!o||!(n!=null&&n.apiKey))){L(!0);try{const Ke=new Gu(n.apiKey).getGenerativeModel({model:n.model||"gemini-1.5-flash"}),qe=`Analiza este correo y extrae la tarea principal que debo realizar. Responde NICAMENTE con un objeto JSON (sin markdown) con estos campos: title (max 50 chars), description (detalles clave en espaol), priority (High, Normal, Low).
            Email Subject: ${o.subject}
            Email Body: ${o.body.replace(/<[^>]*>?/gm,"")}`,Je=(await(await Ke.generateContent(qe)).response).text().replace(/```json/g,"").replace(/```/g,"").trim(),ge=JSON.parse(Je);e&&e("IA: Tarea Detectada",`Se sugiere crear la tarea: "${ge.title}".`,"info"),console.log("Extracted Task:",ge)}catch{e&&e("Error","No se pudo extraer la tarea.","error")}finally{L(!1)}}},He=(he,Ke)=>{const qe=(he+" "+Ke).toLowerCase();return qe.includes("urgente")||qe.includes("asap")||qe.includes("importante")?{label:"Urgente",color:"bg-red-100 text-red-700"}:qe.includes("gracias")||qe.includes("genial")||qe.includes("excelente")?{label:"Positivo",color:"bg-green-100 text-green-700"}:qe.includes("queja")||qe.includes("problema")||qe.includes("error")?{label:"Crtico",color:"bg-orange-100 text-orange-700"}:{label:"Neutral",color:"bg-slate-100 text-slate-600"}},Y=a.filter(he=>he.subject.toLowerCase().includes(h.toLowerCase())||he.sender_name.toLowerCase().includes(h.toLowerCase())||he.from.toLowerCase().includes(h.toLowerCase()));return c.jsxs("div",{className:"flex h-full bg-white overflow-hidden",children:[c.jsxs("div",{className:`w-56 bg-slate-50 border-r border-slate-200 flex-shrink-0 flex-col ${x&&o?"hidden":"flex"}`,children:[c.jsx("div",{className:"p-4",children:c.jsxs("button",{onClick:()=>y(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl shadow-md transition-all",children:[c.jsx(bl,{size:18})," Redactar"]})}),c.jsx("nav",{className:"flex-1 px-2 space-y-1",children:_Ee.map(he=>c.jsxs("button",{onClick:()=>{i(he.id),l(null)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${r===he.id?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-100"}`,children:[c.jsx(he.icon,{size:18}),he.label]},he.id))}),c.jsx("div",{className:"p-3 border-t border-slate-200",children:c.jsxs("button",{onClick:ee,disabled:f,className:"w-full flex items-center justify-center gap-2 text-sm text-slate-600 hover:text-blue-600 py-2 rounded-lg hover:bg-slate-100 transition-all disabled:opacity-50",children:[c.jsx(il,{size:16,className:f?"animate-spin":""}),f?"Sincronizando...":"Sincronizar"]})})]}),c.jsxs("div",{className:`w-80 border-r border-slate-200 flex flex-col flex-shrink-0 ${x&&o?"hidden":"flex"} ${x?"w-full":""}`,children:[c.jsx("div",{className:"p-3 border-b border-slate-200",children:c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),c.jsx("input",{type:"text",value:h,onChange:he=>m(he.target.value),placeholder:"Buscar correos...",title:"Buscar correos","aria-label":"Buscar correos",className:"w-full pl-9 pr-3 py-2 bg-slate-100 border-none rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:u?c.jsx("div",{className:"flex items-center justify-center h-32 text-slate-400",children:"Cargando..."}):Y.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-slate-400 text-sm",children:[c.jsx(gi,{size:32,className:"mb-2 opacity-50"}),"No hay correos en esta carpeta."]}):Y.map(he=>c.jsxs("div",{onClick:()=>ie(he),className:`p-3 border-b border-slate-100 cursor-pointer transition-colors ${(o==null?void 0:o.id)===he.id?"bg-blue-50":"hover:bg-slate-50"} ${he.read?"":"bg-blue-50/50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-1",children:[c.jsx("span",{className:`text-sm truncate max-w-[180px] ${he.read?"font-medium text-slate-700":"font-bold text-slate-900"}`,children:r==="sent"?he.to:he.sender_name}),c.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:he.date})]}),c.jsx("p",{className:`text-sm truncate ${he.read?"text-slate-600":"font-semibold text-slate-800"}`,children:he.subject}),c.jsx("p",{className:"text-xs text-slate-400 truncate mt-0.5",children:he.preview}),c.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[c.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-medium ${He(he.subject,he.preview).color}`,children:He(he.subject,he.preview).label}),r==="sent"&&(he.isReadByRecipient||(he.clickCount??0)>0)&&c.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[he.isReadByRecipient&&c.jsxs("span",{className:"flex items-center gap-0.5 text-green-600",children:[c.jsx(Xu,{size:10})," Abierto"]}),(he.clickCount??0)>0&&c.jsxs("span",{className:"flex items-center gap-0.5 text-blue-600",children:[c.jsx(VU,{size:10})," ",he.clickCount," clics"]})]})]})]},he.id))})]}),c.jsx("div",{className:`flex-1 flex flex-col bg-white ${x&&!o?"hidden":"flex"}`,children:o?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[x&&c.jsx("button",{onClick:()=>l(null),className:"p-2 -ml-2 text-slate-500 hover:text-slate-700 rounded-full hover:bg-slate-100",title:"Volver a la lista",children:c.jsx(EA,{size:20})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"font-bold text-slate-800",children:o.subject}),(n==null?void 0:n.apiKey)&&c.jsxs("div",{className:"flex gap-1",children:[c.jsxs("button",{onClick:be,disabled:B,className:"text-[10px] bg-purple-50 text-purple-600 px-2 py-0.5 rounded-full border border-purple-100 hover:bg-purple-100 transition-colors flex items-center gap-1",children:[c.jsx(sy,{size:10,className:B?"animate-spin":""}),B?"Resumiendo...":"Resumir"]}),c.jsxs("button",{onClick:de,disabled:Q,title:"Sugerir Respuesta con IA",className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full border border-blue-100 hover:bg-blue-100 transition-colors flex items-center gap-1",children:[c.jsx(gi,{size:10}),"Sugerir Respuesta"]}),c.jsxs("button",{onClick:$e,disabled:le,title:"Extraer Tarea de este email",className:"text-[10px] bg-green-50 text-green-600 px-2 py-0.5 rounded-full border border-green-100 hover:bg-green-100 transition-colors flex items-center gap-1",children:[c.jsx(kU,{size:10,className:le?"animate-spin":""}),le?"Analizando...":"Extraer Tarea"]})]})]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["De: ",o.sender_name," <",o.from,">  ",o.date]})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[r!=="trash"&&c.jsx("button",{onClick:()=>se("trash"),className:"p-2 text-slate-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Mover a Papelera","aria-label":"Mover a Papelera",children:c.jsx(Ra,{size:18})}),r!=="archived"&&r!=="trash"&&c.jsx("button",{onClick:()=>se("archive"),className:"p-2 text-slate-400 hover:text-amber-600 rounded-full hover:bg-amber-50",title:"Archivar","aria-label":"Archivar",children:c.jsx(Z8,{size:18})}),r==="trash"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>se("restore"),className:"p-2 text-slate-400 hover:text-green-600 rounded-full hover:bg-green-50",title:"Restaurar","aria-label":"Restaurar",children:c.jsx(il,{size:18})}),c.jsx("button",{onClick:()=>se("delete_forever"),className:"p-2 text-slate-400 hover:text-red-600 rounded-full hover:bg-red-50",title:"Eliminar Permanentemente","aria-label":"Eliminar Permanentemente",children:c.jsx(Ra,{size:18})})]})]})]}),Z&&c.jsxs("div",{className:"mx-4 mt-2 p-3 bg-purple-50 border border-purple-100 rounded-lg animate-in slide-in-from-top-2 duration-300",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 text-purple-700 font-bold text-xs",children:[c.jsx(Sm,{size:14})," Resumen de IA",c.jsx("button",{onClick:()=>H(null),className:"ml-auto text-purple-400 hover:text-purple-600",children:c.jsx(yn,{size:14})})]}),c.jsx("div",{className:"text-xs text-slate-700 whitespace-pre-line leading-relaxed",children:Z})]}),c.jsx("div",{className:"flex-1 overflow-hidden p-4",children:c.jsx("iframe",{srcDoc:`<!DOCTYPE html><html><head><style>body{font-family:sans-serif;line-height:1.6;color:#333;padding:10px;}</style></head><body>${o.body}</body></html>`,sandbox:"allow-same-origin",className:"w-full h-full border-none rounded-lg bg-slate-50",title:"Email Content"})}),o.attachments&&o.attachments.length>0&&c.jsxs("div",{className:"p-3 border-t border-slate-200 flex items-center gap-2 flex-wrap",children:[c.jsx(zw,{size:14,className:"text-slate-400"}),o.attachments.map((he,Ke)=>c.jsx("a",{href:he.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline bg-blue-50 px-2 py-1 rounded",children:he.name},Ke))]})]}):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400",children:[c.jsx(WU,{size:48,className:"mb-3 opacity-50"}),c.jsx("p",{className:"text-lg font-medium",children:"Selecciona un correo para ver"})]})}),g&&c.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-end md:items-center justify-center p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-t-2xl md:rounded-2xl shadow-2xl flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-4 md:slide-in-from-bottom-0 duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Nuevo Correo"}),c.jsx("button",{onClick:()=>{y(!1),oe()},className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100",title:"Cerrar",children:c.jsx(yn,{size:20})})]}),c.jsxs("div",{className:"p-4 flex-1 overflow-y-auto space-y-3",children:[c.jsx("input",{type:"email",value:S,onChange:he=>N(he.target.value),placeholder:"Para: email@ejemplo.com",title:"Destinatario","aria-label":"Destinatario",className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),c.jsx("input",{type:"text",value:j,onChange:he=>E(he.target.value),placeholder:"Asunto",title:"Asunto","aria-label":"Asunto",className:"w-full px-3 py-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),c.jsx(C4,{content:C,onChange:P,placeholder:"Escribe tu mensaje...",minHeight:"200px"}),T.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((he,Ke)=>c.jsxs("span",{className:"text-xs bg-slate-100 px-2 py-1 rounded flex items-center gap-1",children:[c.jsx(zw,{size:12})," ",he.name,c.jsx("button",{onClick:()=>I(qe=>qe.filter((Oe,it)=>it!==Ke)),className:"text-red-500 hover:text-red-700",title:"Quitar adjunto",children:c.jsx(yn,{size:12})})]},Ke))})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"file",multiple:!0,ref:F,className:"hidden","aria-label":"Adjuntar archivos",onChange:he=>{he.target.files&&I(Ke=>[...Ke,...Array.from(he.target.files)])}}),c.jsx("button",{onClick:()=>{var he;return(he=F.current)==null?void 0:he.click()},className:"p-2 text-slate-500 hover:text-blue-600 rounded-full hover:bg-blue-50",title:"Adjuntar Archivo",children:c.jsx(zw,{size:20})}),c.jsx("button",{onClick:we,disabled:R,className:"p-2 text-slate-500 hover:text-purple-600 rounded-full hover:bg-purple-50",title:"Generar Borrador con IA",children:c.jsx(sy,{size:20,className:R?"animate-spin":""})})]}),c.jsxs("button",{onClick:ye,disabled:k,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2.5 px-5 rounded-xl shadow transition-all disabled:opacity-50",children:[c.jsx(jb,{size:16}),k?"Enviando...":"Enviar"]})]})]})})]})},PEe=({currentUser:t,onNotify:e,onImpersonate:n})=>{const[r,i]=q.useState("users"),[a,s]=q.useState([]),[o,l]=q.useState(""),[u,d]=q.useState(!1),[f,p]=q.useState("idle"),[h,m]=q.useState(null),[g,y]=q.useState([]),[x,w]=q.useState(!1),[S,N]=q.useState(["[INFO] System init at "+new Date().toISOString(),"[INFO] DB Connection: OK","[INFO] Auth Service: Running","[WARN] Memory usage at 45%"]);q.useEffect(()=>{r==="users"&&j()},[r]);const j=async()=>{d(!0);try{const O=await(await fetch("/api/users.php",{headers:{Authorization:`Bearer ${t.token}`}})).json();Array.isArray(O)&&s(O)}catch{e("Error","No se pudieron cargar los usuarios.","error")}finally{d(!1)}},E=k=>{if(n){if(t.role==="MANAGER"&&k.role!=="Sales"){e("Acceso Denegado","Los gerentes solo pueden acceder a cuentas de vendedores.","error");return}console.log(`[AUDIT] User ${t.name} (${t.role}) accessed profile of ${k.name} (${k.role}) at ${new Date().toISOString()}`),n({id:k.id,name:k.name,email:k.email,role:k.role==="Sales"?"Sales":k.role==="Support"?"Support":"Manager",status:k.status,lastLogin:k.lastLogin||"Never"})}},C=a.filter(k=>k.name.toLowerCase().includes(o.toLowerCase())||k.email.toLowerCase().includes(o.toLowerCase())),P=async()=>{p("checking"),y(k=>[...k,"Conectando con GitHub API..."]);try{const O=await(await fetch("/api/system_update.php?action=check_github",{headers:{Authorization:`Bearer ${t.token}`}})).json();O.success?(m(O),y(R=>[...R,`Versin Actual: ${O.current_version||"Desconocida"}`]),y(R=>[...R,`ltima Versin: ${O.latest_version||"Desconocida"}`]),p("idle")):(y(R=>[...R,`Error: ${O.message||O.error||"Desconocido"}`]),p("error"))}catch{y(O=>[...O,"Error de conexin con el servidor."]),p("error")}},T=async()=>{p("updating"),y(k=>[...k,"Iniciando proceso de actualizacin..."]);try{const O=await(await fetch("/api/system_update.php?action=update_github",{headers:{Authorization:`Bearer ${t.token}`}})).json();O.success?(y(R=>[...R,...O.logs]),y(R=>[...R,"Actualizacin Completada!"]),p("success"),e("Sistema Actualizado","Los archivos se han sincronizado correctamente.","success")):(y(R=>[...R,...O.logs]),y(R=>[...R,`Error Crtico: ${O.error}`]),p("error"))}catch{p("error"),y(O=>[...O,"Fallo en la peticin HTTP."])}},I=async k=>{if(!k.target.files||k.target.files.length===0)return;const O=k.target.files[0];w(!0),y(D=>[...D,`Subiendo archivo: ${O.name}...`]);const R=new FormData;R.append("update_zip",O),R.append("token",t.token||"");try{const B=await(await fetch("/api/system_update.php?action=upload_zip",{method:"POST",headers:{Authorization:`Bearer ${t.token}`},body:R})).json();B.success?(y(V=>[...V,"Archivo descomprimido y aplicado."]),e("Actualizacin ZIP","El parche se aplic correctamente.","success")):(y(V=>[...V,`Error ZIP: ${B.error}`]),e("Error",B.error,"error"))}catch{y(B=>[...B,"Error al subir el archivo."])}finally{w(!1)}};return c.jsxs("div",{className:"p-4 md:p-8 max-w-6xl mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[c.jsx("div",{className:"bg-blue-600 p-3 rounded-lg text-white shadow-lg shadow-blue-200",children:c.jsx(iy,{size:32})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Panel de Soporte Tcnico"}),c.jsx("p",{className:"text-slate-500",children:"Administracin de perfiles y mantenimiento del sistema."})]})]}),c.jsxs("div",{className:"flex gap-6 border-b border-slate-200 mb-8 overflow-x-auto",children:[c.jsx("button",{onClick:()=>i("users"),className:`pb-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${r==="users"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Gestin de Perfiles"}),c.jsx("button",{onClick:()=>i("updates"),className:`pb-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${r==="updates"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Actualizaciones de Sistema"}),c.jsx("button",{onClick:()=>i("logs"),className:`pb-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap ${r==="logs"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Logs & Debugging"})]}),r==="users"&&c.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"relative w-full max-w-md",children:[c.jsx(Fc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),c.jsx("input",{type:"text",placeholder:"Buscar usuario por nombre o email...",value:o,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"text-xs font-bold px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[C.length," Usuarios"]})})]}),c.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Rol"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-xs font-medium text-slate-500 uppercase text-right",children:"Acciones"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100",children:u?c.jsx("tr",{children:c.jsxs("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-500",children:[c.jsx(il,{className:"animate-spin mx-auto mb-2"}),"Cargando perfiles..."]})}):C.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-500",children:"No se encontraron usuarios."})}):C.map(k=>{var B;const O=k.id===((B=t.id)==null?void 0:B.toString()),R=t.role==="MANAGER",D=!O&&(!R||k.role==="Sales");return c.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:k.avatar||k.name.substring(0,2).toUpperCase()}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-900",children:k.name}),c.jsx("p",{className:"text-xs text-slate-500",children:k.email})]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 rounded text-xs font-medium border ${k.role==="Support"?"bg-purple-50 text-purple-700 border-purple-100":k.role==="Manager"?"bg-amber-50 text-amber-700 border-amber-100":"bg-blue-50 text-blue-700 border-blue-100"}`,children:[k.role==="Support"&&c.jsx(iy,{size:12}),k.role]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${k.status==="Active"?"bg-green-50 text-green-600":"bg-slate-100 text-slate-500"}`,children:k.status})}),c.jsx("td",{className:"px-6 py-4 text-right",children:O?c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sesin Actual"}):c.jsx("button",{onClick:()=>E(k),disabled:!D,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${D?"bg-slate-900 text-white hover:bg-blue-600 shadow-sm":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:t.role==="SUPPORT"?c.jsxs(c.Fragment,{children:[c.jsx(kb,{size:14}),"Configurar"]}):c.jsxs(c.Fragment,{children:[c.jsx(Xu,{size:14}),"Observar"]})})})]},k.id)})})]})})]}),r==="updates"&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in duration-300",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(PU,{size:24,className:"text-slate-900"}),c.jsx("h3",{className:"font-bold text-slate-900",children:"Repositorio Oficial"})]}),c.jsx("span",{className:"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded-full font-mono",children:"webmmiranda/KiwuLead"})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("p",{className:"text-sm text-slate-600",children:["Sincroniza tu instalacin con la ltima versin disponible en GitHub. Esto ejecutar un ",c.jsx("code",{className:"bg-slate-100 px-1 rounded",children:"git pull"})," en el servidor."]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:P,disabled:f==="checking"||f==="updating",className:"px-4 py-2 bg-slate-100 text-slate-700 font-bold rounded-lg hover:bg-slate-200 transition-colors flex items-center gap-2",children:[f==="checking"?c.jsx(il,{className:"animate-spin",size:18}):c.jsx(AU,{size:18}),"Verificar"]}),h&&c.jsxs("button",{onClick:T,disabled:f==="updating",className:"flex-1 px-4 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[f==="updating"?c.jsx(il,{className:"animate-spin",size:18}):c.jsx(qf,{size:18}),"Actualizar Ahora"]})]}),h&&c.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{className:"text-blue-700",children:"Versin Local:"}),c.jsx("span",{className:"font-mono font-bold",children:h.current_version})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-blue-700",children:"Versin Remota:"}),c.jsx("span",{className:"font-mono font-bold",children:h.latest_version})]}),h.update_available&&c.jsx("div",{className:"mt-3 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded text-center font-bold",children:"Nueva actualizacin disponible!"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[c.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(sV,{size:24,className:"text-orange-500"}),c.jsx("h3",{className:"font-bold text-slate-900",children:"Carga Manual (ZIP)"})]})}),c.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[c.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Si el servidor no tiene acceso a Git, sube un archivo ",c.jsx("b",{children:".zip"})," con el cdigo fuente. Se descomprimir en la raz del proyecto."]}),c.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 flex flex-col items-center justify-center text-center hover:border-blue-400 transition-colors cursor-pointer relative bg-slate-50",children:[c.jsx("input",{type:"file",accept:".zip",onChange:I,disabled:x,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),x?c.jsx(il,{className:"animate-spin text-blue-500 mb-2",size:32}):c.jsx(rl,{className:"text-slate-400 mb-2",size:32}),c.jsx("span",{className:"font-bold text-slate-700",children:x?"Procesando...":"Arrastra un ZIP o haz clic"}),c.jsx("span",{className:"text-xs text-slate-400 mt-1",children:"Mximo 25MB"})]})]})]}),c.jsxs("div",{className:"lg:col-span-2 bg-slate-900 rounded-xl p-6 font-mono text-xs shadow-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 text-slate-400 border-b border-slate-800 pb-2",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(PA,{size:14})," Consola de Actualizacin"]}),c.jsx("button",{onClick:()=>y([]),className:"hover:text-white",children:"Limpiar"})]}),c.jsxs("div",{className:"h-48 overflow-y-auto space-y-1",children:[g.length===0&&c.jsx("span",{className:"text-slate-600 italic",children:"Esperando comandos..."}),g.map((k,O)=>c.jsx("div",{className:"text-green-400 border-l-2 border-slate-700 pl-2",children:k},O))]})]})]}),r==="logs"&&c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden animate-in fade-in duration-300",children:[c.jsxs("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:"Logs del Sistema (ltimas 24h)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"text-xs bg-white border border-slate-300 px-3 py-1 rounded hover:bg-slate-50",children:"Descargar Todo"}),c.jsx("button",{className:"text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded font-bold hover:bg-blue-100",children:"Refrescar"})]})]}),c.jsx("div",{className:"p-0",children:c.jsxs("table",{className:"w-full text-left text-sm",children:[c.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 font-medium text-slate-500",children:"Timestamp"}),c.jsx("th",{className:"px-6 py-3 font-medium text-slate-500",children:"Nivel"}),c.jsx("th",{className:"px-6 py-3 font-medium text-slate-500",children:"Mensaje"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-100 font-mono text-xs",children:S.map((k,O)=>{const R=k.includes("[ERROR]"),D=k.includes("[WARN]");return c.jsxs("tr",{className:"hover:bg-slate-50",children:[c.jsx("td",{className:"px-6 py-3 text-slate-500",children:new Date().toLocaleTimeString()}),c.jsx("td",{className:"px-6 py-3",children:R?c.jsx("span",{className:"text-red-600 font-bold",children:"ERROR"}):D?c.jsx("span",{className:"text-orange-500 font-bold",children:"WARN"}):c.jsx("span",{className:"text-blue-500",children:"INFO"})}),c.jsx("td",{className:"px-6 py-3 text-slate-700",children:k})]},O)})})]})})]})]})},TEe=({currentUser:t,onUpdateUser:e})=>{const[n,r]=q.useState(""),[i,a]=q.useState(""),[s,o]=q.useState(""),[l,u]=q.useState(null),[d,f]=q.useState({smtp_host:"",smtp_port:587,smtp_user:"",smtp_pass:"",imap_host:"",imap_port:993,from_name:"",signature:"",connecting:!1}),[p,h]=q.useState(!0);ue.useEffect(()=>{(async()=>{if(t!=null&&t.id)try{const{api:w}=await Et(async()=>{const{api:N}=await Promise.resolve().then(()=>Ot);return{api:N}},void 0,import.meta.url),S=await w.settings.getEmailConfig(String(t.id));S.config&&f(N=>({...N,...S.config}))}catch(w){console.error("Error loading email config:",w)}})()},[t]);const m=async()=>{if(t!=null&&t.id){f(x=>({...x,connecting:!0}));try{const{api:x}=await Et(async()=>{const{api:S}=await Promise.resolve().then(()=>Ot);return{api:S}},void 0,import.meta.url),w=await x.settings.testEmailConfig(String(t.id),d);w.success?u({type:"success",text:"Conexin exitosa con el servidor de correo."}):u({type:"error",text:"Fallo la conexin: "+(w.error||"Unknown error")})}catch{u({type:"error",text:"Hubo un problema al probar la conexin."})}finally{f(x=>({...x,connecting:!1})),setTimeout(()=>u(null),5e3)}}},g=async x=>{if(x.preventDefault(),!!(t!=null&&t.id)){f(w=>({...w,connecting:!0}));try{const{api:w}=await Et(async()=>{const{api:N}=await Promise.resolve().then(()=>Ot);return{api:N}},void 0,import.meta.url),S=await w.settings.saveEmailConfig(String(t.id),d);S.success?(u({type:"success",text:"Configuracin de correo guardada correctamente."}),h(!0)):u({type:"error",text:"Error al guardar configuracin: "+(S.error||"Unknown error")})}catch{u({type:"error",text:"Hubo un problema al guardar la configuracin."})}finally{f(w=>({...w,connecting:!1})),setTimeout(()=>u(null),5e3)}}},y=x=>{if(x.preventDefault(),i!==s){u({type:"error",text:"Las contraseas no coinciden."});return}if(i.length<6){u({type:"error",text:"La contrasea debe tener al menos 6 caracteres."});return}u({type:"success",text:"Contrasea actualizada correctamente."}),r(""),a(""),o(""),setTimeout(()=>u(null),3e3)};return c.jsxs("div",{className:"p-4 md:p-8 max-w-4xl mx-auto animate-in fade-in duration-300",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Perfil de Usuario"}),c.jsx("p",{className:"text-slate-500 mb-8",children:"Administra tu informacin personal y seguridad."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col items-center text-center",children:[c.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-3xl mb-4 overflow-hidden ring-4 ring-blue-50",children:t.avatar&&t.avatar.startsWith("http")?c.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):c.jsx("span",{children:t.name.charAt(0)})}),c.jsx("h3",{className:"font-bold text-lg text-slate-900",children:t.name}),c.jsx("p",{className:"text-sm text-slate-500 capitalize",children:t.role.toLowerCase().replace("_"," ")}),c.jsx("div",{className:"mt-6 w-full space-y-3",children:c.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-600 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[c.jsx(gi,{size:16,className:"text-slate-400"}),c.jsx("span",{className:"truncate flex-1 text-left font-medium",children:t.email||"usuario@nexus.com"})]})})]})}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[c.jsxs("h3",{className:"font-bold text-lg text-slate-900 mb-4 flex items-center gap-2 pb-4 border-b border-slate-100",children:[c.jsx(ca,{size:20,className:"text-blue-600"})," Cambio de Contrasea"]}),l&&c.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-center gap-2 text-sm ${l.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[l.type==="success"?c.jsx(sa,{size:16}):c.jsx(cg,{size:16}),l.text]}),c.jsxs("form",{onSubmit:y,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contrasea Actual"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"password",required:!0,value:n,onChange:x=>r(x.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none pl-10 transition-all",placeholder:""}),c.jsx(ca,{size:16,className:"absolute left-3 top-2.5 text-slate-400"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nueva Contrasea"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"password",required:!0,value:i,onChange:x=>a(x.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none pl-10 transition-all",placeholder:""}),c.jsx(ca,{size:16,className:"absolute left-3 top-2.5 text-slate-400"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Contrasea"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"password",required:!0,value:s,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none pl-10 transition-all",placeholder:""}),c.jsx(ca,{size:16,className:"absolute left-3 top-2.5 text-slate-400"})]})]})]}),c.jsx("div",{className:"pt-2 flex justify-end",children:c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2.5 rounded-lg font-bold text-sm hover:bg-blue-700 transition-colors shadow-sm hover:shadow-md",children:"Actualizar Contrasea"})})]})]}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mt-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-slate-100",children:[c.jsxs("h3",{className:"font-bold text-lg text-slate-900 flex items-center gap-2",children:[c.jsx(gi,{size:20,className:"text-blue-600"})," Configuracin de Email Personal"]}),c.jsxs("button",{onClick:()=>h(!p),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${p?"bg-slate-100 text-slate-600 hover:bg-slate-200 border border-slate-200":"bg-orange-50 text-orange-700 border border-orange-200 hover:bg-orange-100"}`,children:[p?c.jsx(ca,{size:16}):c.jsx(hN,{size:16}),p?"Editar":"Editando"]})]}),c.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configura tu cuenta de email personal para enviar y recibir correos desde el CRM."}),c.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider flex items-center gap-2",children:[c.jsx(hN,{size:16,className:"text-slate-500"}),"Servidor SMTP (Envo)"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Host SMTP"}),c.jsx("input",{type:"text",disabled:p,placeholder:"smtp.gmail.com",value:d.smtp_host,onChange:x=>f({...d,smtp_host:x.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Puerto"}),c.jsx("input",{type:"number",disabled:p,placeholder:"587",value:d.smtp_port,onChange:x=>f({...d,smtp_port:parseInt(x.target.value)}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Usuario"}),c.jsx("input",{type:"email",disabled:p,placeholder:"tu@email.com",value:d.smtp_user,onChange:x=>f({...d,smtp_user:x.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Contrasea"}),c.jsx("input",{type:"password",disabled:p,placeholder:"",value:d.smtp_pass,onChange:x=>f({...d,smtp_pass:x.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]})]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider flex items-center gap-2",children:[c.jsx(gi,{size:16,className:"text-slate-500"}),"Servidor IMAP (Recepcin)"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Host IMAP"}),c.jsx("input",{type:"text",disabled:p,placeholder:"imap.gmail.com",value:d.imap_host,onChange:x=>f({...d,imap_host:x.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Puerto"}),c.jsx("input",{type:"number",disabled:p,placeholder:"993",value:d.imap_port,onChange:x=>f({...d,imap_port:parseInt(x.target.value)}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]})]})]}),c.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider flex items-center gap-2",children:[c.jsx(rl,{size:16,className:"text-slate-500"}),"Firma y Remitente"]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Nombre del Remitente"}),c.jsx("input",{type:"text",disabled:p,placeholder:"Tu Nombre",value:d.from_name,onChange:x=>f({...d,from_name:x.target.value}),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Firma Automtica"}),c.jsx("textarea",{disabled:p,placeholder:`Saludos,
Tu Nombre
Empresa
Tel: +52 55 1234 5678`,value:d.signature,onChange:x=>f({...d,signature:x.target.value}),rows:4,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none disabled:bg-slate-100 disabled:text-slate-500 font-mono text-sm"}),c.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Esta firma se agregar automticamente al final de tus correos."})]})]}),!p&&c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsxs("button",{type:"button",onClick:m,disabled:d.connecting,className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 font-medium transition-colors flex items-center gap-2 text-sm",children:[d.connecting?c.jsx(fi,{size:16,className:"animate-spin"}):c.jsx(qf,{size:16}),"Probar Conexin"]}),c.jsxs("button",{type:"submit",disabled:d.connecting,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-sm transition-all flex items-center gap-2 text-sm",children:[d.connecting?c.jsx(fi,{size:16,className:"animate-spin"}):c.jsx(fN,{size:16}),"Guardar Configuracin"]})]})]})]})]})]})]})},RL=({notifications:t,onMarkRead:e,onMarkAllRead:n,onDelete:r,onClose:i,onNavigate:a})=>{const[s,o]=q.useState("all"),[l,u]=q.useState(!1),[d,f]=q.useState({email_enabled:!0,browser_enabled:!0,urgent_only:!1});q.useEffect(()=>{l&&Ti.notifications.getPreferences().then(f).catch(console.error)},[l]);const p=async g=>{const y={...d,[g]:!d[g]};f(y);try{await Ti.notifications.savePreferences(y)}catch(x){console.error("Failed to save prefs",x)}},h=t.filter(g=>s==="unread"?!g.read:s==="urgent"?g.type==="urgent"||g.type==="error":!0),m=g=>{switch(g){case"success":return c.jsx(sa,{className:"text-green-500",size:18});case"warning":return c.jsx(bo,{className:"text-amber-500",size:18});case"error":return c.jsx(cg,{className:"text-red-500",size:18});case"urgent":return c.jsx(ny,{className:"text-red-600 animate-pulse",size:18});default:return c.jsx(ug,{className:"text-blue-500",size:18})}};return c.jsxs("div",{className:"absolute right-0 top-12 w-80 md:w-96 bg-white rounded-xl shadow-2xl border border-slate-200 z-50 overflow-hidden flex flex-col max-h-[80vh] animate-in fade-in zoom-in-95 duration-200 origin-top-right",onClick:g=>g.stopPropagation(),onMouseDown:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800",children:l?"Configuracin":"Notificaciones"}),!l&&c.jsxs("p",{className:"text-xs text-slate-500",children:[t.filter(g=>!g.read).length," sin leer"]})]}),c.jsxs("div",{className:"flex gap-2",children:[!l&&c.jsx("button",{onClick:n,title:"Marcar todas como ledas",className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:c.jsx(ry,{size:16})}),c.jsx("button",{onClick:()=>u(!l),title:"Configuracin",className:`p-1.5 rounded-lg transition-colors ${l?"text-blue-600 bg-blue-50":"text-slate-400 hover:text-slate-600 hover:bg-slate-200"}`,children:c.jsx(kb,{size:16})}),c.jsx("button",{onClick:i,title:"Cerrar","aria-label":"Cerrar notificaciones",className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:c.jsx(yn,{size:16})})]})]}),l?c.jsxs("div",{className:"p-4 flex flex-col gap-4 bg-white flex-1",children:[c.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Personaliza cmo quieres recibir tus alertas."}),c.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p("email_enabled"),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-full ${d.email_enabled?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400"}`,children:c.jsx(gi,{size:18})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Email"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Recibir resmenes por correo"})]})]}),c.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${d.email_enabled?"bg-blue-600":"bg-slate-300"}`,children:c.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${d.email_enabled?"left-6":"left-1"}`})})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p("browser_enabled"),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-full ${d.browser_enabled?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:c.jsx(UU,{size:18})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Navegador"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Alertas visuales en pantalla"})]})]}),c.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${d.browser_enabled?"bg-blue-600":"bg-slate-300"}`,children:c.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${d.browser_enabled?"left-6":"left-1"}`})})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p("urgent_only"),children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-2 rounded-full ${d.urgent_only?"bg-red-100 text-red-600":"bg-slate-100 text-slate-400"}`,children:c.jsx(bo,{size:18})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Solo Urgentes"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Ignorar informativas"})]})]}),c.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${d.urgent_only?"bg-blue-600":"bg-slate-300"}`,children:c.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all ${d.urgent_only?"left-6":"left-1"}`})})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex border-b border-slate-100",children:[c.jsx("button",{onClick:g=>{g.stopPropagation(),o("unread")},onMouseDown:g=>g.stopPropagation(),className:`flex-1 py-2 text-xs font-medium transition-colors ${s==="unread"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:bg-slate-50"}`,children:"Sin Leer"}),c.jsx("button",{onClick:g=>{g.stopPropagation(),o("urgent")},onMouseDown:g=>g.stopPropagation(),className:`flex-1 py-2 text-xs font-medium transition-colors ${s==="urgent"?"text-red-600 border-b-2 border-red-600":"text-slate-500 hover:bg-slate-50"}`,children:"Urgentes"}),c.jsx("button",{onClick:g=>{g.stopPropagation(),o("all")},onMouseDown:g=>g.stopPropagation(),className:`flex-1 py-2 text-xs font-medium transition-colors ${s==="all"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:bg-slate-50"}`,children:"Todas"})]}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0 scrollbar-thin scrollbar-thumb-slate-200",children:h.length===0?c.jsxs("div",{className:"p-8 text-center text-slate-400",children:[c.jsx(ny,{size:32,className:"mx-auto mb-2 opacity-20"}),c.jsx("p",{className:"text-sm",children:"No hay notificaciones"})]}):c.jsx("div",{className:"divide-y divide-slate-50",children:h.map(g=>c.jsx("div",{className:`p-4 hover:bg-slate-50 transition-colors group relative ${g.read?"":"bg-blue-50/30"}`,children:c.jsxs("div",{className:"flex gap-3 items-start",children:[c.jsx("div",{className:"mt-1 flex-shrink-0",children:m(g.type)}),c.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:y=>{y.stopPropagation(),g.read||e(g.id),g.linkTo&&(a(g.linkTo),window.innerWidth<768&&i())},children:[c.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[c.jsx("p",{className:`text-sm ${g.read?"font-medium text-slate-700":"font-bold text-slate-900"}`,children:g.title}),c.jsx("span",{className:"text-[10px] text-slate-400 whitespace-nowrap ml-2",children:g.timestamp})]}),c.jsx("p",{className:"text-xs text-slate-600 line-clamp-2 leading-relaxed",children:g.message}),g.linkTo&&c.jsx("p",{className:"text-[10px] text-blue-600 mt-1 font-medium hover:underline",children:"Ver detalles "})]}),c.jsxs("div",{className:"absolute right-2 top-2 md:opacity-0 md:group-hover:opacity-100 transition-opacity flex flex-col gap-1 bg-white/80 backdrop-blur-sm p-1 rounded shadow-sm",children:[!g.read&&c.jsx("button",{onClick:y=>{y.stopPropagation(),e(g.id)},className:"p-2 text-blue-400 hover:text-blue-600 rounded hover:bg-blue-50",title:"Marcar como leda",children:c.jsx(ry,{size:16})}),c.jsx("button",{onClick:y=>{y.stopPropagation(),r(g.id)},className:"p-2 text-slate-400 hover:text-red-600 rounded hover:bg-red-50",title:"Eliminar",children:c.jsx(Ra,{size:16})})]})]})},g.id))})}),c.jsx("div",{className:"p-2 bg-slate-50 border-t border-slate-100 text-center",children:l?c.jsx("button",{className:"text-[10px] text-slate-500 hover:text-blue-600 font-medium transition-colors",onClick:()=>u(!1),children:"Volver a Notificaciones"}):c.jsx("button",{className:"text-[10px] text-slate-500 hover:text-blue-600 font-medium transition-colors",onClick:()=>u(!0),children:"Configurar Preferencias"})})]})]})},MEe=({toasts:t,removeToast:e})=>c.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none",children:t.map(n=>c.jsx(LEe,{toast:n,onRemove:()=>e(n.id)},n.id))}),LEe=({toast:t,onRemove:e})=>{const[n,r]=q.useState(!1);q.useEffect(()=>{const o=setTimeout(()=>{i()},t.duration||5e3);return()=>clearTimeout(o)},[]);const i=()=>{r(!0),setTimeout(e,300)},a=()=>{switch(t.type){case"success":return c.jsx(sa,{className:"text-green-500",size:20});case"warning":return c.jsx(bo,{className:"text-amber-500",size:20});case"error":return c.jsx(cg,{className:"text-red-500",size:20});default:return c.jsx(ug,{className:"text-blue-500",size:20})}},s=()=>{switch(t.type){case"success":return"border-green-500";case"warning":return"border-amber-500";case"error":return"border-red-500";default:return"border-blue-500"}};return c.jsx("div",{className:`
      pointer-events-auto
      w-80 md:w-96 bg-white rounded-lg shadow-lg border-l-4 p-4
      transform transition-all duration-300 ease-in-out
      ${s()}
      ${n?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
    `,children:c.jsxs("div",{className:"flex gap-3 items-start",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a()}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-bold text-sm text-slate-900",children:t.title}),c.jsx("p",{className:"text-xs text-slate-600 mt-1 leading-relaxed",children:t.message})]}),c.jsx("button",{onClick:i,className:"text-slate-400 hover:text-slate-600 transition-colors",children:c.jsx(yn,{size:16})})]})})},$L=()=>{const[t,e]=q.useState(!1),n=localStorage.getItem("nexus_user"),r=n?JSON.parse(n):null,i=a=>{localStorage.setItem("nexus_user",JSON.stringify(a)),localStorage.setItem("nexus_auth_token",a.token||"mock-token"),window.location.reload()};return c.jsxs("div",{className:"fixed bottom-24 right-4 z-[200] flex flex-col items-end",children:[t&&c.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-slate-200 mb-4 p-2 w-64 animate-in slide-in-from-bottom-2",children:[c.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase px-2 py-1 mb-2",children:"Cambiar Usuario Demo"}),c.jsx("div",{className:"space-y-1",children:Object.values(ab).map(a=>c.jsxs("button",{onClick:()=>i(a),className:`w-full flex items-center gap-3 px-3 py-2 text-sm rounded-md transition-colors ${(r==null?void 0:r.email)===a.email?"bg-blue-50 text-blue-700":"hover:bg-slate-50 text-slate-700"}`,children:[c.jsx("img",{src:a.avatar,alt:a.name,className:"w-6 h-6 rounded-full"}),c.jsxs("div",{className:"text-left flex-1",children:[c.jsx("div",{className:"font-medium",children:a.name}),c.jsx("div",{className:"text-[10px] text-slate-400",children:a.role})]}),(r==null?void 0:r.email)===a.email&&c.jsx(ry,{size:14})]},a.id))})]}),c.jsxs("button",{onClick:()=>e(!t),className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-full shadow-lg transition-transform active:scale-95 flex items-center gap-2",title:"Cambiar Usuario Demo",children:[c.jsx(Bc,{size:20}),t&&c.jsx("span",{className:"text-sm font-medium pr-1",children:"Cerrar"})]})]})},IEe=()=>c.jsxs("div",{className:"bg-indigo-600 text-white text-sm py-2 px-4 flex items-center justify-between shadow-md relative z-50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ug,{size:16,className:"text-indigo-200"}),c.jsx("span",{className:"font-medium hidden md:inline",children:"Ests viendo una versin Demo de KiwLead. Los datos son simulados y no se guardarn permanentemente."}),c.jsx("span",{className:"font-medium md:hidden",children:"Versin Demo de KiwLead"})]}),c.jsxs("a",{href:"../index.html",className:"flex items-center gap-1 bg-white/10 hover:bg-white/20 px-3 py-1 rounded transition-colors text-xs font-semibold uppercase tracking-wide",children:[c.jsx(Q8,{size:14}),"Volver al Sitio"]})]}),DEe=()=>{const[t,e]=q.useState(!0),[n,r]=q.useState(!1),[i,a]=q.useState("dashboard"),[s,o]=q.useState(!1),[l,u]=q.useState(!1),[d,f]=q.useState(null),[p,h]=q.useState([]),[m,g]=q.useState([]),[y,x]=q.useState([]),[w,S]=q.useState([]),[N,j]=q.useState(ICe),[E,C]=q.useState([]),[P,T]=q.useState([]),[I,k]=q.useState(null),[O,R]=q.useState(null),[D,B]=q.useState({connected:!1,connecting:!1,provider:"gemini",apiKey:"",model:"gemini-1.5-flash",enabled:!1}),[V,Z]=q.useState({enableEmail:!0,enableWhatsApp:!0,enableAI:!0}),[H,Q]=q.useState([]),[fe,le]=q.useState(!1),[L,F]=q.useState([]);q.useEffect(()=>{if(n){const Se=async()=>{try{const{api:Le}=await Et(async()=>{const{api:ae}=await Promise.resolve().then(()=>Ot);return{api:ae}},void 0,import.meta.url),dt=await Le.notifications.list();console.log("[App] Notifications fetched:",dt);const ve=dt.map(ae=>({id:ae.id.toString(),title:ae.title,message:ae.message,type:ae.type,timestamp:new Date(ae.created_at).toLocaleString("es-ES",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}),read:ae.is_read==1,linkTo:ae.link_to}));Q(ve)}catch(Le){console.error("Failed to fetch notifications",Le)}};Se();const Fe=setInterval(Se,1e4);return()=>clearInterval(Fe)}},[n]);const G=q.useRef(null),ee=H.filter(Se=>!Se.read).length,[ie,se]=q.useState({name:"KiwLead",industry:"Tecnologa",website:"www.kiwulead.com",currency:"USD",logoUrl:""}),[ye,oe]=q.useState({enabled:!0,method:"round_robin",capLimit:20}),we=[{id:"dashboard",label:"Inicio",icon:tD},{id:"pipeline",label:"Leads",icon:_A},{id:"tasks",label:"Tareas",icon:Wi},{id:"calendar",label:"Calendario",icon:fo},{id:"mail",label:"Email",icon:gi},{id:"inbox",label:"Inbox",icon:Wf}].filter(Se=>!(Se.id==="mail"&&!V.enableEmail||Se.id==="inbox"&&!V.enableWhatsApp));q.useEffect(()=>{(async()=>{try{const{api:ve}=await Et(async()=>{const{api:je}=await Promise.resolve().then(()=>Ot);return{api:je}},void 0,import.meta.url),ae=await ve.system.status();if(ae&&typeof ae.installed<"u"&&!ae.installed){window.location.href="/install/";return}}catch(ve){console.error("System check failed",ve)}const Le=localStorage.getItem("nexus_auth_token"),dt=localStorage.getItem("nexus_user");if(Le&&dt)try{const ve=JSON.parse(dt);r(!0),k(ve),await Ke()}catch(ve){console.error("Error restoring session:",ve),localStorage.removeItem("nexus_auth_token"),localStorage.removeItem("nexus_user")}e(!1)})();const Fe=Le=>{G.current&&!G.current.contains(Le.target)&&le(!1)};return document.addEventListener("mousedown",Fe),()=>document.removeEventListener("mousedown",Fe)},[]);const be=async(Se,Fe,Le,dt)=>{const ve={id:Date.now().toString(),title:Se,message:Fe,type:Le};F(je=>[...je,ve]);const ae={id:Date.now().toString(),title:Se,message:Fe,type:Le,timestamp:"Ahora",read:!1,linkTo:dt};if(Q(je=>[ae,...je]),n)try{await Ti.notifications.create({title:Se,message:Fe,type:Le,linkTo:dt})}catch(je){console.error("Error saving notification",je)}},de=Se=>{F(Fe=>Fe.filter(Le=>Le.id!==Se))},$e=async Se=>{Q(Fe=>Fe.map(Le=>Le.id===Se?{...Le,read:!0}:Le));try{await Ti.notifications.markRead(Se)}catch{}},He=async()=>{Q(Se=>Se.map(Fe=>({...Fe,read:!0})));try{await Ti.notifications.markAllRead()}catch{}},Y=async Se=>{Q(Fe=>Fe.filter(Le=>Le.id!==Se));try{await Ti.notifications.delete(Se)}catch{}},he=()=>{localStorage.removeItem("nexus_auth_token"),localStorage.removeItem("nexus_user"),r(!1),k(null),h([]),x([]),g([]),Q([]),be("Sesin Cerrada","Has cerrado sesin correctamente.","info")},Ke=async()=>{try{const{api:Se}=await Et(async()=>{const{api:Ie}=await Promise.resolve().then(()=>Ot);return{api:Ie}},void 0,import.meta.url),[Fe,Le,dt,ve,ae,je]=await Promise.all([Se.contacts.list(),Se.products.list(),Se.tasks.list(),Se.appointments.list(),Se.team.list(),Se.settings.list()]);if(h(Fe),C(Le),x(dt),S(ve),g(ae),je.company_profile&&se(je.company_profile),je.distribution_settings&&oe(je.distribution_settings),je.email_templates&&T(je.email_templates),je.company_profile&&se(je.company_profile),je.distribution_settings&&oe(je.distribution_settings),je.email_templates&&T(je.email_templates),je.ai&&B(je.ai),je.features&&Z(je.features),je.automation_status){const Ie=je.automation_status;j(Ae=>Ae.map(Ze=>({...Ze,isActive:Ie[Ze.id]!==void 0?Ie[Ze.id]:Ze.isActive})))}u(!1)}catch(Se){if(Se.message&&(Se.message.includes("401")||Se.message.includes("Unauthorized"))){console.warn("Session expired or unauthorized. Logging out..."),he();return}console.error("API Error",Se),be("Error de Conexin","No se pudieron cargar los datos del servidor.","error")}},qe=async Se=>{r(!0),k(Se),Se.token&&(localStorage.setItem("nexus_auth_token",Se.token),localStorage.setItem("nexus_user",JSON.stringify(Se))),await Ke()},Oe=Se=>{f(Se),a("inbox")},it=Se=>{f(Se),a("inbox"),le(!1)},Je=async(Se,Fe)=>{const Le=N.filter(ve=>ve.isActive&&ve.trigger===Se);if(Le.length===0)return;console.log(` Ejecutando Trigger: ${Se}`,Le.map(ve=>ve.name));const{api:dt}=await Et(async()=>{const{api:ve}=await Promise.resolve().then(()=>Ot);return{api:ve}},void 0,import.meta.url);for(const ve of Le){if(ve.id==="core_1"&&Se==="ON_LEAD_CREATE"){const ae=Fe,je=ae.name.replace(/\b\w/g,Ie=>Ie.toUpperCase());ae.name!==je&&(await dt.contacts.update(ae.id,{name:je}),h(Ie=>Ie.map(Ae=>Ae.id===ae.id?{...Ae,name:je}:Ae)))}if(ve.id==="core_3"&&Se==="ON_LEAD_CREATE"&&ye.enabled){const ae=Fe;if(ae.owner==="Unassigned"||ae.owner==="Sin asignar"){const je=m.filter(Ie=>Ie.role==="Sales"&&Ie.status==="Active");if(je.length>0){let Ie="",Ae="";if(ye.method==="load_balanced"){const Ye=je.map(tt=>{const Kt=p.filter(pe=>pe.owner===tt.name&&pe.status!==ot.WON&&pe.status!==ot.LOST).length;return{name:tt.name,load:Kt}});Ye.sort((tt,Kt)=>tt.load-Kt.load),Ie=Ye[0].name,Ae="Balanceo de Carga"}else Ie=je[Math.floor(Math.random()*je.length)].name,Ae="Round Robin";const Ze=m.find(Ye=>Ye.name===Ie);await dt.contacts.update(ae.id,{owner_id:Ze==null?void 0:Ze.id}),await dt.notes.create({contactId:ae.id,content:` Asignado automticamente a ${Ie} [Estrategia: ${Ae}]`,authorId:1}),h(Ye=>Ye.map(tt=>tt.id===ae.id?{...tt,owner:Ie}:tt)),be("Lead Asignado",`Lead asignado a ${Ie} por ${Ae}.`,"info",ae.id)}}}if(ve.id==="core_4"&&Se==="ON_LEAD_CREATE"){const ae=Fe;await dt.history.create({contactId:ae.id,content:"Hola!  Gracias por tu inters. En qu podemos ayudarte hoy?",sender:"agent",channel:"whatsapp"});const je={title:` Primer contacto con ${ae.name}`,type:"Call",dueDate:new Date().toISOString().split("T")[0],status:"Pending",priority:"High",assignedTo:ae.owner==="Unassigned"?(I==null?void 0:I.name)||"Admin":ae.owner,relatedContactName:ae.name,relatedContactId:ae.id},Ie=await dt.tasks.create(je),Ae={...je,id:Ie.id||"temp_"+Date.now()};x(Ye=>[Ae,...Ye]);const Ze=await dt.history.list(ae.id);h(Ye=>Ye.map(tt=>tt.id===ae.id?{...tt,history:Ze.data||[]}:tt))}if(ve.id==="qual_2"&&Se==="ON_LEAD_CREATE"){const ae=Fe,je=[...ae.tags||[]];let Ie=!1;ae.value>5e3&&!je.includes("High Value")&&(je.push("High Value"),Ie=!0);const Ae=ae.source;(Ae==="Instagram"||Ae==="Facebook"||Ae==="Meta Ads")&&(je.includes("Social Media")||(je.push("Social Media"),Ie=!0)),Ie&&(await dt.contacts.update(ae.id,{tags:je}),h(Ze=>Ze.map(Ye=>Ye.id===ae.id?{...Ye,tags:je}:Ye)))}if(ve.id==="sales_2"&&Se==="ON_LEAD_CREATE"){const ae=Fe,je=ae.owner==="Unassigned"?(I==null?void 0:I.name)||"Admin":ae.owner,Ie=[1,3,7];for(const Ze of Ie){const Ye=new Date;Ye.setDate(Ye.getDate()+Ze);const tt={title:` Seguimiento Da ${Ze}: ${ae.name}`,type:"Email",dueDate:Ye.toISOString().split("T")[0],status:"Pending",priority:"Normal",assignedTo:je,relatedContactName:ae.name,relatedContactId:ae.id};await dt.tasks.create(tt)}const Ae=await dt.tasks.list();x(Ae)}if(ve.id==="sales_1"&&Se==="ON_MESSAGE_SENT"){const{contactId:ae}=Fe,je=p.find(Ie=>Ie.id===ae);je&&je.status===ot.NEW&&(await dt.contacts.update(ae,{status:ot.CONTACTED}),h(Ie=>Ie.map(Ae=>Ae.id===ae?{...Ae,status:ot.CONTACTED}:Ae)),be("Pipeline Actualizado",'Lead movido a "Contactado" automticamente.',"success",ae))}if(ve.id==="life_1"&&Se==="ON_DEAL_WON"){const{contactId:ae}=Fe,je={title:" Onboarding para cliente ganado",type:"Meeting",dueDate:new Date(Date.now()+864e5).toISOString().split("T")[0],status:"Pending",priority:"High",assignedTo:(I==null?void 0:I.name)||"Admin",relatedContactId:ae},Ie=await dt.tasks.create(je),Ae={...je,id:Ie.id||"temp_"+Date.now()};x(Ze=>[Ae,...Ze]),be("Trato Ganado!","Se ha creado la tarea de Onboarding.","success",ae)}}};q.useEffect(()=>{const Se=setInterval(async()=>{if(N.find(ae=>ae.id==="core_5"&&ae.isActive)){const ae=Date.now()-6e5,je=p.filter(Ie=>Ie.status===ot.NEW&&new Date(Ie.createdAt).getTime()<ae);je.length>0&&be(" Alerta SLA",`Atencin: Tienes ${je.length} leads nuevos sin atender por ms de 10 min.`,"warning",je[0].id)}if(N.find(ae=>ae.id==="sales_4"&&ae.isActive)){const{api:ae}=await Et(async()=>{const{api:Ae}=await Promise.resolve().then(()=>Ot);return{api:Ae}},void 0,import.meta.url),je=Date.now()-48*60*60*1e3,Ie=p.filter(Ae=>Ae.owner!=="Unassigned"&&Ae.owner!=="Sin asignar"&&Ae.status!==ot.WON&&Ae.status!==ot.LOST&&(Ae.lastActivityTimestamp?Ae.lastActivityTimestamp<je:!1));for(const Ae of Ie)await ae.contacts.update(Ae.id,{owner_id:null}),await ae.notes.create({contactId:Ae.id,content:" Reasignado al pool por inactividad (48h sin accin).",authorId:1});if(Ie.length>0){const Ae=await ae.contacts.list();h(Ae),be("Limpieza de Pipeline",`${Ie.length} leads inactivos fueron desasignados.`,"info")}}if(N.find(ae=>ae.id==="life_2"&&ae.isActive)){const{api:ae}=await Et(async()=>{const{api:Ae}=await Promise.resolve().then(()=>Ot);return{api:Ae}},void 0,import.meta.url),je=Date.now()-90*24*60*60*1e3,Ie=p.filter(Ae=>Ae.status===ot.LOST&&new Date(Ae.createdAt).getTime()<je);for(const Ae of Ie)y.some(Ye=>Ye.relatedContactId===Ae.id&&Ye.title.includes("Reactivacin"))||await ae.tasks.create({title:` Reactivacin: ${Ae.name}`,type:"Call",status:"Pending",dueDate:new Date().toISOString().split("T")[0],priority:"Normal",assignedTo:(I==null?void 0:I.name)||"Admin",relatedContactId:Ae.id,description:"Este lead se perdi hace 90 das. Intenta contactarlo de nuevo."});if(Ie.length>0){const Ae=await ae.tasks.list();x(Ae)}}const ve=new Date;y.forEach(ae=>{if(ae.reminder&&ae.reminder.enabled&&ae.status!=="Done"){const je=new Date(`${ae.dueDate}T${ae.dueTime||"09:00"}`),Ie=new Date(je);ae.reminder.timeUnit==="minutes"&&Ie.setMinutes(Ie.getMinutes()-ae.reminder.timeValue),ae.reminder.timeUnit==="hours"&&Ie.setHours(Ie.getHours()-ae.reminder.timeValue),ae.reminder.timeUnit==="days"&&Ie.setDate(Ie.getDate()-ae.reminder.timeValue);const Ae=ve.getTime()-Ie.getTime();Ae>=0&&Ae<6e4&&be(" Recordatorio de Tarea",`Es hora de: ${ae.title} (${ae.relatedContactName||"Sin contacto"})`,"info",ae.relatedContactId)}})},6e4);return()=>clearInterval(Se)},[p,N,y,ye]);const ge=async Se=>{if(N.find(Le=>Le.id==="core_2"&&Le.isActive)){const Le=p.find(dt=>dt.email===Se.email||dt.phone===Se.phone);if(Le){be("Duplicado Detectado",`${Le.name} ya existe. No se cre el lead.`,"error",Le.id);return}}try{const{api:Le}=await Et(async()=>{const{api:ae}=await Promise.resolve().then(()=>Ot);return{api:ae}},void 0,import.meta.url),dt={...Se};if((I==null?void 0:I.role)==="SALES_REP")dt.owner_id=I.id;else if(I&&(I.role==="MANAGER"||I.role==="SUPPORT"))if(Se.owner==="Unassigned"||Se.owner==="Sin asignar")dt.owner_id=null;else{const ae=m.find(je=>je.name===Se.owner);ae&&(dt.owner_id=ae.id)}const ve=await Le.contacts.create(dt);if(ve.success){const ae=ve.id,je={...Se,id:ae,owner:"Unassigned"};try{await Je("ON_LEAD_CREATE",je)}catch(Ae){console.error("Automation Error:",Ae),be("Advertencia","Lead creado pero algunas automatizaciones fallaron.","warning")}const Ie=await Le.contacts.list();h(Ie),be("Lead Creado",`${Se.name} agregado y procesado.`,"success",ae)}}catch(Le){console.error("Error creating contact:",Le),be("Error",Le.message||"No se pudo crear el contacto.","error")}},Me=async(Se,Fe,Le,dt)=>{if(N.find(je=>je.id==="sales_3"&&je.isActive)&&Fe!==ot.LOST&&Fe!==ot.NEW){const je=y.filter(Ie=>Ie.relatedContactId===Se&&Ie.status==="Pending");if(je.length>0){be("Bloqueo de Automatizacin",`Completa las ${je.length} tareas pendientes antes de avanzar.`,"warning",Se);return}}if(N.find(je=>je.id==="qual_1"&&je.isActive)){const je=p.find(Ie=>Ie.id===Se);if(je){if(Fe===ot.QUALIFIED&&(!je.email||!je.email.includes("@"))){be("Datos Incompletos","Se requiere Email vlido para calificar.","error",Se);return}if(Fe===ot.WON&&je.value<=0){be("Datos Incompletos","El valor del trato debe ser mayor a 0.","error",Se);return}}}try{const je=[...p];h(Ze=>Ze.map(Ye=>Ye.id===Se?{...Ye,status:Fe,lostReason:Le||Ye.lostReason,probability:dt!==void 0?dt:Ye.probability}:Ye));const{api:Ie}=await Et(async()=>{const{api:Ze}=await Promise.resolve().then(()=>Ot);return{api:Ze}},void 0,import.meta.url),Ae={status:Fe};Le&&(Ae.lost_reason=Le),dt!==void 0&&(Ae.probability=dt),await Ie.contacts.update(Se,Ae),Fe===ot.WON&&Je("ON_DEAL_WON",{contactId:Se}),Fe===ot.LOST&&Je("ON_DEAL_LOST",{contactId:Se}),be("Pipeline Actualizado",`Estado cambiado a ${Fe}`,"success",Se)}catch(je){console.error("Error updating pipeline:",je);const{api:Ie}=await Et(async()=>{const{api:Ze}=await Promise.resolve().then(()=>Ot);return{api:Ze}},void 0,import.meta.url),Ae=await Ie.contacts.list();h(Ae),be("Error","No se pudo actualizar el pipeline. Cambios revertidos.","error")}},ut=async(Se,Fe)=>{try{const{api:Le}=await Et(async()=>{const{api:ae}=await Promise.resolve().then(()=>Ot);return{api:ae}},void 0,import.meta.url),dt=m.find(ae=>ae.name===Fe),ve=(dt==null?void 0:dt.id)||null;await Le.contacts.update(Se,{owner_id:ve}),await Le.notes.create({contactId:Se,content:`Lead asignado manualmente a ${Fe}`,authorId:(I==null?void 0:I.id)||1}),h(ae=>ae.map(je=>{if(je.id===Se){const Ie={...je,owner:Fe};return Ie.notes=[{id:`note_${Date.now()}`,content:`Lead asignado manualmente a ${Fe}`,createdAt:new Date().toISOString().split("T")[0],author:(I==null?void 0:I.name)||"Sistema"},...je.notes],Ie}return je})),be("Asignacin Actualizada",`El lead ahora pertenece a ${Fe}.`,"success",Se)}catch(Le){console.error("Error assigning contact:",Le),be("Error","No se pudo asignar el contacto.","error")}},st=async(Se,Fe)=>{await Je("ON_MESSAGE_SENT",{contactId:Se})},ft=Se=>{if(!I)return;R(I);const Fe={id:parseInt(Se.id),name:Se.name,role:Se.role==="Sales"?"SALES_REP":Se.role==="Support"?"SUPPORT":"MANAGER",avatar:Se.name.substring(0,2).toUpperCase(),token:I.token};k(Fe),a("dashboard"),be("Modo Impersonacin",`Ahora ests viendo como ${Se.name}`,"warning")},At=()=>{O&&(k(O),R(null),be("Modo Original","Has vuelto a tu sesin de Soporte.","success"))},Rt=()=>{if(!I)return null;const Fe=O&&(O.role==="SUPPORT"||O.role==="MANAGER")?O.role:I.role;if(Fe==="SALES_REP"&&["automation","reports","settings","support"].includes(i))return c.jsx(Kv,{currentUser:I,tasks:y,setTasks:x,contacts:p,companyCurrency:ie.currency});if(Fe==="MANAGER"&&["support"].includes(i))return c.jsx(Kv,{currentUser:I,tasks:y,setTasks:x,appointments:w,contacts:p,companyCurrency:ie.currency});const Le=(O==null?void 0:O.role)==="MANAGER";switch(i){case"dashboard":return c.jsx(Kv,{currentUser:I,tasks:y,setTasks:x,appointments:w,contacts:p,companyCurrency:ie.currency});case"pipeline":return c.jsx(iAe,{currentUser:I,contacts:p,setContacts:h,onStatusChange:Le?()=>be("Modo Observador","No tienes permisos para editar.","warning"):Me,onNavigateToChat:Oe,products:E,onNotify:be,onAddDeal:Le?()=>be("Modo Observador","No tienes permisos para crear leads.","warning"):ge,onAssign:Le?()=>{}:ut,team:m,aiConfig:D,companyCurrency:ie.currency});case"calendar":return c.jsx(gEe,{currentUser:I,contacts:p,team:m,onNotify:be,products:E,onRefresh:Ke,tasks:y});case"tasks":return c.jsx(zCe,{currentUser:I,tasks:y,setTasks:x,appointments:w,contacts:p});case"products":return c.jsx($Ce,{products:E,setProducts:C,currentUser:I,onNotify:be,aiConfig:D});case"inbox":return c.jsx(oAe,{currentUser:I,contacts:p,setContacts:h,tasks:y,setTasks:x,onMessageSent:Le?async()=>be("Modo Observador","No puedes enviar mensajes.","warning"):st,products:E,templates:P,initialContactId:d,onNotify:be,aiConfig:D});case"automation":return c.jsx(lAe,{rules:N,setRules:j});case"reports":return c.jsx(LCe,{currentUser:I,contacts:p,team:m,tasks:y,companyCurrency:ie.currency,features:V});case"support":return c.jsx(PEe,{currentUser:I,onNotify:be,onImpersonate:ft});case"settings":return c.jsx(RCe,{currentUser:I,team:m,setTeam:g,distributionSettings:ye,setDistributionSettings:oe,templates:P,setTemplates:T,companyProfile:ie,setCompanyProfile:se,onInjectLead:ge,contacts:p,setContacts:h,onNotify:be,onRefreshData:Ke,onLogout:he,onImpersonate:ft,features:V,onUpdateFeatures:Z});case"mail":return c.jsx(OEe,{currentUser:I,onNotify:be,aiConfig:D});case"user-profile":return c.jsx(TEe,{currentUser:I});default:return c.jsx(Kv,{currentUser:I,tasks:y,setTasks:x,appointments:w,contacts:p,companyCurrency:ie.currency,onViewAllTasks:()=>a("tasks")})}};return t?c.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-900 text-white",children:[c.jsx(fi,{size:48,className:"animate-spin mb-4 text-blue-500"}),c.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"KiwLead"})]}):c.jsxs(c.Fragment,{children:[c.jsx(EEe,{}),c.jsx(MEe,{toasts:L,removeToast:de}),n?c.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-900 overflow-hidden",children:[l&&c.jsxs(c.Fragment,{children:[c.jsx($L,{}),c.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60]",children:c.jsx(IEe,{})})]}),c.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-30 bg-slate-900 flex items-center px-4 justify-between shadow-md pt-safe h-[calc(4rem+env(safe-area-inset-top))]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:()=>o(!s),title:"Men","aria-label":"Abrir men lateral",className:"text-white p-1",children:c.jsx(qU,{size:24})}),c.jsx("span",{className:"text-lg font-bold text-white tracking-tight",children:ie.name})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("button",{onClick:()=>le(!fe),title:"Notificaciones","aria-label":"Abrir notificaciones",className:"relative text-slate-300",children:[c.jsx(ny,{size:24}),ee>0&&c.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] text-white flex items-center justify-center font-bold",children:ee})]})})]}),fe&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/20 z-[75] lg:hidden backdrop-blur-sm",onClick:()=>le(!1)}),c.jsx("div",{className:"fixed top-20 right-4 left-4 z-[80] lg:hidden",children:c.jsx(RL,{notifications:H,onMarkRead:$e,onMarkAllRead:He,onDelete:Y,onClose:()=>le(!1),onNavigate:it})})]}),s&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] lg:hidden",onClick:()=>o(!1)}),c.jsx("div",{className:`fixed lg:static inset-y-0 left-0 z-[70] transform ${s?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-200 ease-in-out`,children:c.jsx(cV,{activeTab:i,setActiveTab:Se=>{a(Se),o(!1)},currentUser:I,setCurrentUser:k,companyProfile:ie,onLogout:he,isSupportMode:(O==null?void 0:O.role)==="SUPPORT",features:V})}),c.jsxs("main",{className:`flex-1 overflow-auto relative pt-[calc(4rem+env(safe-area-inset-top))] w-full flex flex-col pb-[calc(6rem+env(safe-area-inset-bottom))] lg:pb-0 transition-all duration-300 ${l?"lg:pt-10":"lg:pt-0"}`,children:[O&&c.jsxs("div",{className:"bg-amber-500 text-white px-4 py-2 text-sm font-bold flex justify-between items-center shadow-md z-40 sticky top-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Bc,{size:16}),c.jsxs("span",{children:["VIENDO COMO: ",I==null?void 0:I.name," (",I==null?void 0:I.role,")"]})]}),c.jsx("button",{onClick:At,className:"bg-white text-amber-600 px-3 py-1 rounded text-xs hover:bg-amber-50 uppercase font-bold shadow-sm",children:"Salir de la vista"})]}),c.jsxs("div",{className:"hidden lg:flex h-16 bg-white border-b border-slate-200 px-6 justify-between items-center sticky top-0 z-30 shadow-sm",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-800 tracking-tight capitalize",children:i==="inbox"?"Bandeja de Entrada":i}),c.jsxs("div",{className:"flex items-center gap-5",children:[c.jsxs("div",{className:"relative",ref:G,children:[c.jsxs("button",{onClick:()=>le(!fe),className:"relative text-slate-500 hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-slate-100 outline-none",children:[c.jsx(ny,{size:20}),ee>0&&c.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"})]}),fe&&c.jsx(RL,{notifications:H,onMarkRead:$e,onMarkAllRead:He,onDelete:Y,onClose:()=>le(!1),onNavigate:it})]}),c.jsx("div",{className:"flex items-center gap-3 pl-5 border-l border-slate-200",children:c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-bold text-slate-900 leading-none",children:I==null?void 0:I.name}),c.jsx("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-wide",children:I==null?void 0:I.role})]})})]})]}),c.jsx("div",{className:"flex-1 overflow-auto",children:Rt()}),c.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 z-30 flex justify-around items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] pb-safe select-none h-auto min-h-[4rem]",children:we.map(Se=>{const Fe=i===Se.id;return c.jsxs("button",{onClick:()=>a(Se.id),className:`flex flex-col items-center justify-center w-full h-16 space-y-1 active:scale-95 transition-transform duration-100 ${Fe?"text-blue-600":"text-slate-400 hover:text-slate-600"} relative`,children:[Fe&&c.jsx("div",{className:"absolute top-0 w-12 h-0.5 bg-blue-600 rounded-b-full"}),c.jsx(Se.icon,{size:20,strokeWidth:Fe?2.5:2,className:Fe?"drop-shadow-sm":""}),c.jsx("span",{className:`text-[10px] font-medium ${Fe?"font-bold":""}`,children:Se.label})]},Se.id)})})]})]}):c.jsx(CEe,{onLogin:qe}),c.jsx($L,{})]})};class REe extends q.Component{constructor(n){super(n);fn(this,"state");this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Critical Application Error:",n,r)}render(){var n;return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-red-100",children:[c.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(cg,{size:32,className:"text-red-500"})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Algo sali mal"}),c.jsx("p",{className:"text-slate-500 mb-6 text-sm",children:"Nuestro equipo ha sido notificado. Por favor intenta recargar la aplicacin."}),c.jsx("div",{className:"bg-slate-100 p-3 rounded-lg text-left mb-6 overflow-hidden",children:c.jsx("code",{className:"text-xs text-slate-600 font-mono break-all",children:(n=this.state.error)==null?void 0:n.message})}),c.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 flex items-center justify-center gap-2 transition-all",children:[c.jsx(il,{size:18})," Recargar KiwLead"]})]})}):this.props.children}}const nH=document.getElementById("root");if(!nH)throw new Error("Could not find root element to mount to");const $Ee=vS.createRoot(nH);$Ee.render(c.jsx(ue.StrictMode,{children:c.jsx(REe,{children:c.jsx(DEe,{})})}));export{bn as _,ev as c,pn as g};
